function uD(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function oC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Cm={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx;function hD(){if(Tx)return pc;Tx=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:r,type:n,key:c,ref:s!==void 0?s:null,props:o}}return pc.Fragment=t,pc.jsx=e,pc.jsxs=e,pc}var Ex;function fD(){return Ex||(Ex=1,Cm.exports=hD()),Cm.exports}var D=fD(),Tm={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox;function dD(){if(Ox)return St;Ox=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function O(L,Q,st){this.props=L,this.context=Q,this.refs=_,this.updater=st||S}O.prototype.isReactComponent={},O.prototype.setState=function(L,Q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Q,"setState")},O.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function k(){}k.prototype=O.prototype;function B(L,Q,st){this.props=L,this.context=Q,this.refs=_,this.updater=st||S}var R=B.prototype=new k;R.constructor=B,w(R,O.prototype),R.isPureReactComponent=!0;var F=Array.isArray;function z(){}var U={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function rt(L,Q,st){var ut=st.ref;return{$$typeof:r,type:L,key:Q,ref:ut!==void 0?ut:null,props:st}}function lt(L,Q){return rt(L.type,Q,L.props)}function ct(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function E(L){var Q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(st){return Q[st]})}var X=/\/+/g;function T(L,Q){return typeof L=="object"&&L!==null&&L.key!=null?E(""+L.key):Q.toString(36)}function j(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(z,z):(L.status="pending",L.then(function(Q){L.status==="pending"&&(L.status="fulfilled",L.value=Q)},function(Q){L.status==="pending"&&(L.status="rejected",L.reason=Q)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function A(L,Q,st,ut,ht){var gt=typeof L;(gt==="undefined"||gt==="boolean")&&(L=null);var yt=!1;if(L===null)yt=!0;else switch(gt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(L.$$typeof){case r:case t:yt=!0;break;case g:return yt=L._init,A(yt(L._payload),Q,st,ut,ht)}}if(yt)return ht=ht(L),yt=ut===""?"."+T(L,0):ut,F(ht)?(st="",yt!=null&&(st=yt.replace(X,"$&/")+"/"),A(ht,Q,st,"",function(le){return le})):ht!=null&&(ct(ht)&&(ht=lt(ht,st+(ht.key==null||L&&L.key===ht.key?"":(""+ht.key).replace(X,"$&/")+"/")+yt)),Q.push(ht)),1;yt=0;var Rt=ut===""?".":ut+":";if(F(L))for(var kt=0;kt<L.length;kt++)ut=L[kt],gt=Rt+T(ut,kt),yt+=A(ut,Q,st,gt,ht);else if(kt=b(L),typeof kt=="function")for(L=kt.call(L),kt=0;!(ut=L.next()).done;)ut=ut.value,gt=Rt+T(ut,kt++),yt+=A(ut,Q,st,gt,ht);else if(gt==="object"){if(typeof L.then=="function")return A(j(L),Q,st,ut,ht);throw Q=String(L),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return yt}function P(L,Q,st){if(L==null)return L;var ut=[],ht=0;return A(L,ut,"","",function(gt){return Q.call(st,gt,ht++)}),ut}function I(L){if(L._status===-1){var Q=L._result;Q=Q(),Q.then(function(st){(L._status===0||L._status===-1)&&(L._status=1,L._result=st)},function(st){(L._status===0||L._status===-1)&&(L._status=2,L._result=st)}),L._status===-1&&(L._status=0,L._result=Q)}if(L._status===1)return L._result.default;throw L._result}var at=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ot={map:P,forEach:function(L,Q,st){P(L,function(){Q.apply(this,arguments)},st)},count:function(L){var Q=0;return P(L,function(){Q++}),Q},toArray:function(L){return P(L,function(Q){return Q})||[]},only:function(L){if(!ct(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return St.Activity=y,St.Children=ot,St.Component=O,St.Fragment=e,St.Profiler=s,St.PureComponent=B,St.StrictMode=n,St.Suspense=f,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,St.__COMPILER_RUNTIME={__proto__:null,c:function(L){return U.H.useMemoCache(L)}},St.cache=function(L){return function(){return L.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(L,Q,st){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ut=w({},L.props),ht=L.key;if(Q!=null)for(gt in Q.key!==void 0&&(ht=""+Q.key),Q)!q.call(Q,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&Q.ref===void 0||(ut[gt]=Q[gt]);var gt=arguments.length-2;if(gt===1)ut.children=st;else if(1<gt){for(var yt=Array(gt),Rt=0;Rt<gt;Rt++)yt[Rt]=arguments[Rt+2];ut.children=yt}return rt(L.type,ht,ut)},St.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},St.createElement=function(L,Q,st){var ut,ht={},gt=null;if(Q!=null)for(ut in Q.key!==void 0&&(gt=""+Q.key),Q)q.call(Q,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(ht[ut]=Q[ut]);var yt=arguments.length-2;if(yt===1)ht.children=st;else if(1<yt){for(var Rt=Array(yt),kt=0;kt<yt;kt++)Rt[kt]=arguments[kt+2];ht.children=Rt}if(L&&L.defaultProps)for(ut in yt=L.defaultProps,yt)ht[ut]===void 0&&(ht[ut]=yt[ut]);return rt(L,gt,ht)},St.createRef=function(){return{current:null}},St.forwardRef=function(L){return{$$typeof:u,render:L}},St.isValidElement=ct,St.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:I}},St.memo=function(L,Q){return{$$typeof:d,type:L,compare:Q===void 0?null:Q}},St.startTransition=function(L){var Q=U.T,st={};U.T=st;try{var ut=L(),ht=U.S;ht!==null&&ht(st,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(z,at)}catch(gt){at(gt)}finally{Q!==null&&st.types!==null&&(Q.types=st.types),U.T=Q}},St.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},St.use=function(L){return U.H.use(L)},St.useActionState=function(L,Q,st){return U.H.useActionState(L,Q,st)},St.useCallback=function(L,Q){return U.H.useCallback(L,Q)},St.useContext=function(L){return U.H.useContext(L)},St.useDebugValue=function(){},St.useDeferredValue=function(L,Q){return U.H.useDeferredValue(L,Q)},St.useEffect=function(L,Q){return U.H.useEffect(L,Q)},St.useEffectEvent=function(L){return U.H.useEffectEvent(L)},St.useId=function(){return U.H.useId()},St.useImperativeHandle=function(L,Q,st){return U.H.useImperativeHandle(L,Q,st)},St.useInsertionEffect=function(L,Q){return U.H.useInsertionEffect(L,Q)},St.useLayoutEffect=function(L,Q){return U.H.useLayoutEffect(L,Q)},St.useMemo=function(L,Q){return U.H.useMemo(L,Q)},St.useOptimistic=function(L,Q){return U.H.useOptimistic(L,Q)},St.useReducer=function(L,Q,st){return U.H.useReducer(L,Q,st)},St.useRef=function(L){return U.H.useRef(L)},St.useState=function(L){return U.H.useState(L)},St.useSyncExternalStore=function(L,Q,st){return U.H.useSyncExternalStore(L,Q,st)},St.useTransition=function(){return U.H.useTransition()},St.version="19.2.0",St}var Ax;function xd(){return Ax||(Ax=1,Tm.exports=dD()),Tm.exports}var M=xd();const Nn=oC(M),p0=uD({__proto__:null,default:Nn},[M]);var Em={exports:{}},mc={},Om={exports:{}},Am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx;function gD(){return Dx||(Dx=1,(function(r){function t(A,P){var I=A.length;A.push(P);t:for(;0<I;){var at=I-1>>>1,ot=A[at];if(0<s(ot,P))A[at]=P,A[I]=ot,I=at;else break t}}function e(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var P=A[0],I=A.pop();if(I!==P){A[0]=I;t:for(var at=0,ot=A.length,L=ot>>>1;at<L;){var Q=2*(at+1)-1,st=A[Q],ut=Q+1,ht=A[ut];if(0>s(st,I))ut<ot&&0>s(ht,st)?(A[at]=ht,A[ut]=I,at=ut):(A[at]=st,A[Q]=I,at=Q);else if(ut<ot&&0>s(ht,I))A[at]=ht,A[ut]=I,at=ut;else break t}}return P}function s(A,P){var I=A.sortIndex-P.sortIndex;return I!==0?I:A.id-P.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var f=[],d=[],g=1,y=null,v=3,b=!1,S=!1,w=!1,_=!1,O=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function R(A){for(var P=e(d);P!==null;){if(P.callback===null)n(d);else if(P.startTime<=A)n(d),P.sortIndex=P.expirationTime,t(f,P);else break;P=e(d)}}function F(A){if(w=!1,R(A),!S)if(e(f)!==null)S=!0,z||(z=!0,E());else{var P=e(d);P!==null&&j(F,P.startTime-A)}}var z=!1,U=-1,q=5,rt=-1;function lt(){return _?!0:!(r.unstable_now()-rt<q)}function ct(){if(_=!1,z){var A=r.unstable_now();rt=A;var P=!0;try{t:{S=!1,w&&(w=!1,k(U),U=-1),b=!0;var I=v;try{e:{for(R(A),y=e(f);y!==null&&!(y.expirationTime>A&&lt());){var at=y.callback;if(typeof at=="function"){y.callback=null,v=y.priorityLevel;var ot=at(y.expirationTime<=A);if(A=r.unstable_now(),typeof ot=="function"){y.callback=ot,R(A),P=!0;break e}y===e(f)&&n(f),R(A)}else n(f);y=e(f)}if(y!==null)P=!0;else{var L=e(d);L!==null&&j(F,L.startTime-A),P=!1}}break t}finally{y=null,v=I,b=!1}P=void 0}}finally{P?E():z=!1}}}var E;if(typeof B=="function")E=function(){B(ct)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,T=X.port2;X.port1.onmessage=ct,E=function(){T.postMessage(null)}}else E=function(){O(ct,0)};function j(A,P){U=O(function(){A(r.unstable_now())},P)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(A){A.callback=null},r.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<A?Math.floor(1e3/A):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(A){switch(v){case 1:case 2:case 3:var P=3;break;default:P=v}var I=v;v=P;try{return A()}finally{v=I}},r.unstable_requestPaint=function(){_=!0},r.unstable_runWithPriority=function(A,P){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var I=v;v=A;try{return P()}finally{v=I}},r.unstable_scheduleCallback=function(A,P,I){var at=r.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?at+I:at):I=at,A){case 1:var ot=-1;break;case 2:ot=250;break;case 5:ot=1073741823;break;case 4:ot=1e4;break;default:ot=5e3}return ot=I+ot,A={id:g++,callback:P,priorityLevel:A,startTime:I,expirationTime:ot,sortIndex:-1},I>at?(A.sortIndex=I,t(d,A),e(f)===null&&A===e(d)&&(w?(k(U),U=-1):w=!0,j(F,I-at))):(A.sortIndex=ot,t(f,A),S||b||(S=!0,z||(z=!0,E()))),A},r.unstable_shouldYield=lt,r.unstable_wrapCallback=function(A){var P=v;return function(){var I=v;v=P;try{return A.apply(this,arguments)}finally{v=I}}}})(Am)),Am}var kx;function pD(){return kx||(kx=1,Om.exports=gD()),Om.exports}var Dm={exports:{}},$e={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx;function mD(){if(Mx)return $e;Mx=1;var r=xd();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,d,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:f,containerInfo:d,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return $e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,$e.createPortal=function(f,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,g)},$e.flushSync=function(f){var d=c.T,g=n.p;try{if(c.T=null,n.p=2,f)return f()}finally{c.T=d,n.p=g,n.d.f()}},$e.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(f,d))},$e.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},$e.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var g=d.as,y=u(g,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?n.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):g==="script"&&n.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},$e.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=u(d.as,d.crossOrigin);n.d.M(f,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(f)},$e.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,y=u(g,d.crossOrigin);n.d.L(f,g,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},$e.preloadModule=function(f,d){if(typeof f=="string")if(d){var g=u(d.as,d.crossOrigin);n.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(f)},$e.requestFormReset=function(f){n.d.r(f)},$e.unstable_batchedUpdates=function(f,d){return f(d)},$e.useFormState=function(f,d,g){return c.H.useFormState(f,d,g)},$e.useFormStatus=function(){return c.H.useHostTransitionStatus()},$e.version="19.2.0",$e}var jx;function lC(){if(jx)return Dm.exports;jx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Dm.exports=mD(),Dm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx;function yD(){if(Rx)return mc;Rx=1;var r=pD(),t=xd(),e=lC();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(n(188))}function d(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(n(188));return a!==i?null:i}for(var l=i,h=a;;){var p=l.return;if(p===null)break;var m=p.alternate;if(m===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===l)return f(p),i;if(m===h)return f(p),a;m=m.sibling}throw Error(n(188))}if(l.return!==h.return)l=p,h=m;else{for(var x=!1,C=p.child;C;){if(C===l){x=!0,l=p,h=m;break}if(C===h){x=!0,h=p,l=m;break}C=C.sibling}if(!x){for(C=m.child;C;){if(C===l){x=!0,l=m,h=p;break}if(C===h){x=!0,h=m,l=p;break}C=C.sibling}if(!x)throw Error(n(189))}}if(l.alternate!==h)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?i:a}function g(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=g(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),B=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),rt=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),ct=Symbol.iterator;function E(i){return i===null||typeof i!="object"?null:(i=ct&&i[ct]||i["@@iterator"],typeof i=="function"?i:null)}var X=Symbol.for("react.client.reference");function T(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===X?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case O:return"Profiler";case _:return"StrictMode";case F:return"Suspense";case z:return"SuspenseList";case rt:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case B:return i.displayName||"Context";case k:return(i._context.displayName||"Context")+".Consumer";case R:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return a=i.displayName||null,a!==null?a:T(i.type)||"Memo";case q:a=i._payload,i=i._init;try{return T(i(a))}catch{}}return null}var j=Array.isArray,A=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},at=[],ot=-1;function L(i){return{current:i}}function Q(i){0>ot||(i.current=at[ot],at[ot]=null,ot--)}function st(i,a){ot++,at[ot]=i.current,i.current=a}var ut=L(null),ht=L(null),gt=L(null),yt=L(null);function Rt(i,a){switch(st(gt,a),st(ht,i),st(ut,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?W1(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=W1(a),i=q1(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(ut),st(ut,i)}function kt(){Q(ut),Q(ht),Q(gt)}function le(i){i.memoizedState!==null&&st(yt,i);var a=ut.current,l=q1(a,i.type);a!==l&&(st(ht,i),st(ut,l))}function Hn(i){ht.current===i&&(Q(ut),Q(ht)),yt.current===i&&(Q(yt),hc._currentValue=I)}var Je,Qr;function tn(i){if(Je===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Je=a&&a[1]||"",Qr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Je+i+Qr}var Er=!1;function Zr(i,a){if(!i||Er)return"";Er=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(J){var K=J}Reflect.construct(i,[],it)}else{try{it.call()}catch(J){K=J}i.call(it.prototype)}}else{try{throw Error()}catch(J){K=J}(it=i())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=h.DetermineComponentFrameRoot(),x=m[0],C=m[1];if(x&&C){var N=x.split(`
`),W=C.split(`
`);for(p=h=0;h<N.length&&!N[h].includes("DetermineComponentFrameRoot");)h++;for(;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;if(h===N.length||p===W.length)for(h=N.length-1,p=W.length-1;1<=h&&0<=p&&N[h]!==W[p];)p--;for(;1<=h&&0<=p;h--,p--)if(N[h]!==W[p]){if(h!==1||p!==1)do if(h--,p--,0>p||N[h]!==W[p]){var tt=`
`+N[h].replace(" at new "," at ");return i.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",i.displayName)),tt}while(1<=h&&0<=p);break}}}finally{Er=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?tn(l):""}function Jr(i,a){switch(i.tag){case 26:case 27:case 5:return tn(i.type);case 16:return tn("Lazy");case 13:return i.child!==a&&a!==null?tn("Suspense Fallback"):tn("Suspense");case 19:return tn("SuspenseList");case 0:case 15:return Zr(i.type,!1);case 11:return Zr(i.type.render,!1);case 1:return Zr(i.type,!0);case 31:return tn("Activity");default:return""}}function ti(i){try{var a="",l=null;do a+=Jr(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var ei=Object.prototype.hasOwnProperty,an=r.unstable_scheduleCallback,ur=r.unstable_cancelCallback,Ps=r.unstable_shouldYield,Hs=r.unstable_requestPaint,Ee=r.unstable_now,za=r.unstable_getCurrentPriorityLevel,Ys=r.unstable_ImmediatePriority,ni=r.unstable_UserBlockingPriority,ri=r.unstable_NormalPriority,Vs=r.unstable_LowPriority,Ua=r.unstable_IdlePriority,_n=r.log,Xs=r.unstable_setDisableYieldValue,Cn=null,Oe=null;function Or(i){if(typeof _n=="function"&&Xs(i),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Cn,i)}catch{}}var ze=Math.clz32?Math.clz32:hg,ug=Math.log,Fa=Math.LN2;function hg(i){return i>>>=0,i===0?32:31-(ug(i)/Fa|0)|0}var Pa=256,Ha=262144,Ya=4194304;function ii(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Va(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var p=0,m=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var C=h&134217727;return C!==0?(h=C&~m,h!==0?p=ii(h):(x&=C,x!==0?p=ii(x):l||(l=C&~i,l!==0&&(p=ii(l))))):(C=h&~m,C!==0?p=ii(C):x!==0?p=ii(x):l||(l=h&~i,l!==0&&(p=ii(l)))),p===0?0:a!==0&&a!==p&&(a&m)===0&&(m=p&-p,l=a&-a,m>=l||m===32&&(l&4194048)!==0)?a:p}function Gs(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function fg(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var i=Ya;return Ya<<=1,(Ya&62914560)===0&&(Ya=4194304),i}function Yn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Tl(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ZE(i,a,l,h,p,m){var x=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var C=i.entanglements,N=i.expirationTimes,W=i.hiddenUpdates;for(l=x&~l;0<l;){var tt=31-ze(l),it=1<<tt;C[tt]=0,N[tt]=-1;var K=W[tt];if(K!==null)for(W[tt]=null,tt=0;tt<K.length;tt++){var J=K[tt];J!==null&&(J.lane&=-536870913)}l&=~it}h!==0&&kv(i,h,0),m!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=m&~(x&~a))}function kv(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-ze(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function Mv(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-ze(l),p=1<<h;p&a|i[h]&a&&(i[h]|=a),l&=~p}}function jv(i,a){var l=a&-a;return l=(l&42)!==0?1:dg(l),(l&(i.suspendedLanes|a))!==0?0:l}function dg(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function gg(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Rv(){var i=P.p;return i!==0?i:(i=window.event,i===void 0?32:vx(i.type))}function Lv(i,a){var l=P.p;try{return P.p=i,a()}finally{P.p=l}}var Qi=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Qi,on="__reactProps$"+Qi,Xa="__reactContainer$"+Qi,pg="__reactEvents$"+Qi,JE="__reactListeners$"+Qi,tO="__reactHandles$"+Qi,Nv="__reactResources$"+Qi,El="__reactMarker$"+Qi;function mg(i){delete i[Ue],delete i[on],delete i[pg],delete i[JE],delete i[tO]}function Ga(i){var a=i[Ue];if(a)return a;for(var l=i.parentNode;l;){if(a=l[Xa]||l[Ue]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=nx(i);i!==null;){if(l=i[Ue])return l;i=nx(i)}return a}i=l,l=i.parentNode}return null}function Ia(i){if(i=i[Ue]||i[Xa]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function Ol(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function $a(i){var a=i[Nv];return a||(a=i[Nv]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Re(i){i[El]=!0}var Bv=new Set,zv={};function Is(i,a){Wa(i,a),Wa(i+"Capture",a)}function Wa(i,a){for(zv[i]=a,i=0;i<a.length;i++)Bv.add(a[i])}var eO=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uv={},Fv={};function nO(i){return ei.call(Fv,i)?!0:ei.call(Uv,i)?!1:eO.test(i)?Fv[i]=!0:(Uv[i]=!0,!1)}function ku(i,a,l){if(nO(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Mu(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function si(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function Vn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pv(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function rO(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,m=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return p.call(this)},set:function(x){l=""+x,m.call(this,x)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function yg(i){if(!i._valueTracker){var a=Pv(i)?"checked":"value";i._valueTracker=rO(i,a,""+i[a])}}function Hv(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=Pv(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function ju(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var iO=/[\n"\\]/g;function Xn(i){return i.replace(iO,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function vg(i,a,l,h,p,m,x,C){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),a!=null?x==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Vn(a)):i.value!==""+Vn(a)&&(i.value=""+Vn(a)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),a!=null?bg(i,x,Vn(a)):l!=null?bg(i,x,Vn(l)):h!=null&&i.removeAttribute("value"),p==null&&m!=null&&(i.defaultChecked=!!m),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+Vn(C):i.removeAttribute("name")}function Yv(i,a,l,h,p,m,x,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),a!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){yg(i);return}l=l!=null?""+Vn(l):"",a=a!=null?""+Vn(a):l,C||a===i.value||(i.value=a),i.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=C?i.checked:!!h,i.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x),yg(i)}function bg(i,a,l){a==="number"&&ju(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function qa(i,a,l,h){if(i=i.options,a){a={};for(var p=0;p<l.length;p++)a["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=a.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Vn(l),a=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}a!==null||i[p].disabled||(a=i[p])}a!==null&&(a.selected=!0)}}function Vv(i,a,l){if(a!=null&&(a=""+Vn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Vn(l):""}function Xv(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(n(92));if(j(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=Vn(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),yg(i)}function Ka(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var sO=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gv(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||sO.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function Iv(i,a,l){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&l[p]!==h&&Gv(i,p,h)}else for(var m in a)a.hasOwnProperty(m)&&Gv(i,m,a[m])}function Sg(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ru(i){return oO.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ai(){}var xg=null;function wg(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Qa=null,Za=null;function $v(i){var a=Ia(i);if(a&&(i=a.stateNode)){var l=i[on]||null;t:switch(i=a.stateNode,a.type){case"input":if(vg(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Xn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var p=h[on]||null;if(!p)throw Error(n(90));vg(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&Hv(h)}break t;case"textarea":Vv(i,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&qa(i,!!l.multiple,a,!1)}}}var _g=!1;function Wv(i,a,l){if(_g)return i(a,l);_g=!0;try{var h=i(a);return h}finally{if(_g=!1,(Qa!==null||Za!==null)&&(Sh(),Qa&&(a=Qa,i=Za,Za=Qa=null,$v(a),i)))for(a=0;a<i.length;a++)$v(i[a])}}function Al(i,a){var l=i.stateNode;if(l===null)return null;var h=l[on]||null;if(h===null)return null;l=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break t;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(n(231,a,typeof l));return l}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cg=!1;if(oi)try{var Dl={};Object.defineProperty(Dl,"passive",{get:function(){Cg=!0}}),window.addEventListener("test",Dl,Dl),window.removeEventListener("test",Dl,Dl)}catch{Cg=!1}var Zi=null,Tg=null,Lu=null;function qv(){if(Lu)return Lu;var i,a=Tg,l=a.length,h,p="value"in Zi?Zi.value:Zi.textContent,m=p.length;for(i=0;i<l&&a[i]===p[i];i++);var x=l-i;for(h=1;h<=x&&a[l-h]===p[m-h];h++);return Lu=p.slice(i,1<h?1-h:void 0)}function Nu(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Bu(){return!0}function Kv(){return!1}function ln(i){function a(l,h,p,m,x){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(l=i[C],this[C]=l?l(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Bu:Kv,this.isPropagationStopped=Kv,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Bu)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Bu)},persist:function(){},isPersistent:Bu}),a}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zu=ln($s),kl=y({},$s,{view:0,detail:0}),lO=ln(kl),Eg,Og,Ml,Uu=y({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dg,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ml&&(Ml&&i.type==="mousemove"?(Eg=i.screenX-Ml.screenX,Og=i.screenY-Ml.screenY):Og=Eg=0,Ml=i),Eg)},movementY:function(i){return"movementY"in i?i.movementY:Og}}),Qv=ln(Uu),cO=y({},Uu,{dataTransfer:0}),uO=ln(cO),hO=y({},kl,{relatedTarget:0}),Ag=ln(hO),fO=y({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),dO=ln(fO),gO=y({},$s,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),pO=ln(gO),mO=y({},$s,{data:0}),Zv=ln(mO),yO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SO(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=bO[i])?!!a[i]:!1}function Dg(){return SO}var xO=y({},kl,{key:function(i){if(i.key){var a=yO[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Nu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vO[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dg,charCode:function(i){return i.type==="keypress"?Nu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Nu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),wO=ln(xO),_O=y({},Uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jv=ln(_O),CO=y({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dg}),TO=ln(CO),EO=y({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),OO=ln(EO),AO=y({},Uu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),DO=ln(AO),kO=y({},$s,{newState:0,oldState:0}),MO=ln(kO),jO=[9,13,27,32],kg=oi&&"CompositionEvent"in window,jl=null;oi&&"documentMode"in document&&(jl=document.documentMode);var RO=oi&&"TextEvent"in window&&!jl,tb=oi&&(!kg||jl&&8<jl&&11>=jl),eb=" ",nb=!1;function rb(i,a){switch(i){case"keyup":return jO.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ib(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ja=!1;function LO(i,a){switch(i){case"compositionend":return ib(a);case"keypress":return a.which!==32?null:(nb=!0,eb);case"textInput":return i=a.data,i===eb&&nb?null:i;default:return null}}function NO(i,a){if(Ja)return i==="compositionend"||!kg&&rb(i,a)?(i=qv(),Lu=Tg=Zi=null,Ja=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return tb&&a.locale!=="ko"?null:a.data;default:return null}}var BO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sb(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!BO[i.type]:a==="textarea"}function ab(i,a,l,h){Qa?Za?Za.push(h):Za=[h]:Qa=h,a=Oh(a,"onChange"),0<a.length&&(l=new zu("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var Rl=null,Ll=null;function zO(i){Y1(i,0)}function Fu(i){var a=Ol(i);if(Hv(a))return i}function ob(i,a){if(i==="change")return a}var lb=!1;if(oi){var Mg;if(oi){var jg="oninput"in document;if(!jg){var cb=document.createElement("div");cb.setAttribute("oninput","return;"),jg=typeof cb.oninput=="function"}Mg=jg}else Mg=!1;lb=Mg&&(!document.documentMode||9<document.documentMode)}function ub(){Rl&&(Rl.detachEvent("onpropertychange",hb),Ll=Rl=null)}function hb(i){if(i.propertyName==="value"&&Fu(Ll)){var a=[];ab(a,Ll,i,wg(i)),Wv(zO,a)}}function UO(i,a,l){i==="focusin"?(ub(),Rl=a,Ll=l,Rl.attachEvent("onpropertychange",hb)):i==="focusout"&&ub()}function FO(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Fu(Ll)}function PO(i,a){if(i==="click")return Fu(a)}function HO(i,a){if(i==="input"||i==="change")return Fu(a)}function YO(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Tn=typeof Object.is=="function"?Object.is:YO;function Nl(i,a){if(Tn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!ei.call(a,p)||!Tn(i[p],a[p]))return!1}return!0}function fb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function db(i,a){var l=fb(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=fb(l)}}function gb(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?gb(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function pb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=ju(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=ju(i.document)}return a}function Rg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var VO=oi&&"documentMode"in document&&11>=document.documentMode,to=null,Lg=null,Bl=null,Ng=!1;function mb(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ng||to==null||to!==ju(h)||(h=to,"selectionStart"in h&&Rg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Bl&&Nl(Bl,h)||(Bl=h,h=Oh(Lg,"onSelect"),0<h.length&&(a=new zu("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=to)))}function Ws(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var eo={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},Bg={},yb={};oi&&(yb=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function qs(i){if(Bg[i])return Bg[i];if(!eo[i])return i;var a=eo[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in yb)return Bg[i]=a[l];return i}var vb=qs("animationend"),bb=qs("animationiteration"),Sb=qs("animationstart"),XO=qs("transitionrun"),GO=qs("transitionstart"),IO=qs("transitioncancel"),xb=qs("transitionend"),wb=new Map,zg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zg.push("scrollEnd");function hr(i,a){wb.set(i,a),Is(a,[i])}var Pu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Gn=[],no=0,Ug=0;function Hu(){for(var i=no,a=Ug=no=0;a<i;){var l=Gn[a];Gn[a++]=null;var h=Gn[a];Gn[a++]=null;var p=Gn[a];Gn[a++]=null;var m=Gn[a];if(Gn[a++]=null,h!==null&&p!==null){var x=h.pending;x===null?p.next=p:(p.next=x.next,x.next=p),h.pending=p}m!==0&&_b(l,p,m)}}function Yu(i,a,l,h){Gn[no++]=i,Gn[no++]=a,Gn[no++]=l,Gn[no++]=h,Ug|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Fg(i,a,l,h){return Yu(i,a,l,h),Vu(i)}function Ks(i,a){return Yu(i,null,null,a),Vu(i)}function _b(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var p=!1,m=i.return;m!==null;)m.childLanes|=l,h=m.alternate,h!==null&&(h.childLanes|=l),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(p=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,p&&a!==null&&(p=31-ze(l),i=m.hiddenUpdates,h=i[p],h===null?i[p]=[a]:h.push(a),a.lane=l|536870912),m):null}function Vu(i){if(50<ic)throw ic=0,Wp=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ro={};function $O(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(i,a,l,h){return new $O(i,a,l,h)}function Pg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function li(i,a){var l=i.alternate;return l===null?(l=En(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Cb(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Xu(i,a,l,h,p,m){var x=0;if(h=i,typeof i=="function")Pg(i)&&(x=1);else if(typeof i=="string")x=ZA(i,l,ut.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case rt:return i=En(31,l,a,p),i.elementType=rt,i.lanes=m,i;case w:return Qs(l.children,p,m,a);case _:x=8,p|=24;break;case O:return i=En(12,l,a,p|2),i.elementType=O,i.lanes=m,i;case F:return i=En(13,l,a,p),i.elementType=F,i.lanes=m,i;case z:return i=En(19,l,a,p),i.elementType=z,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:x=10;break t;case k:x=9;break t;case R:x=11;break t;case U:x=14;break t;case q:x=16,h=null;break t}x=29,l=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=En(x,l,a,p),a.elementType=i,a.type=h,a.lanes=m,a}function Qs(i,a,l,h){return i=En(7,i,h,a),i.lanes=l,i}function Hg(i,a,l){return i=En(6,i,null,a),i.lanes=l,i}function Tb(i){var a=En(18,null,null,0);return a.stateNode=i,a}function Yg(i,a,l){return a=En(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Eb=new WeakMap;function In(i,a){if(typeof i=="object"&&i!==null){var l=Eb.get(i);return l!==void 0?l:(a={value:i,source:a,stack:ti(a)},Eb.set(i,a),a)}return{value:i,source:a,stack:ti(a)}}var io=[],so=0,Gu=null,zl=0,$n=[],Wn=0,Ji=null,Ar=1,Dr="";function ci(i,a){io[so++]=zl,io[so++]=Gu,Gu=i,zl=a}function Ob(i,a,l){$n[Wn++]=Ar,$n[Wn++]=Dr,$n[Wn++]=Ji,Ji=i;var h=Ar;i=Dr;var p=32-ze(h)-1;h&=~(1<<p),l+=1;var m=32-ze(a)+p;if(30<m){var x=p-p%5;m=(h&(1<<x)-1).toString(32),h>>=x,p-=x,Ar=1<<32-ze(a)+p|l<<p|h,Dr=m+i}else Ar=1<<m|l<<p|h,Dr=i}function Vg(i){i.return!==null&&(ci(i,1),Ob(i,1,0))}function Xg(i){for(;i===Gu;)Gu=io[--so],io[so]=null,zl=io[--so],io[so]=null;for(;i===Ji;)Ji=$n[--Wn],$n[Wn]=null,Dr=$n[--Wn],$n[Wn]=null,Ar=$n[--Wn],$n[Wn]=null}function Ab(i,a){$n[Wn++]=Ar,$n[Wn++]=Dr,$n[Wn++]=Ji,Ar=a.id,Dr=a.overflow,Ji=i}var Fe=null,te=null,Mt=!1,ts=null,qn=!1,Gg=Error(n(519));function es(i){var a=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(In(a,i)),Gg}function Db(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[Ue]=i,a[on]=h,l){case"dialog":Ot("cancel",a),Ot("close",a);break;case"iframe":case"object":case"embed":Ot("load",a);break;case"video":case"audio":for(l=0;l<ac.length;l++)Ot(ac[l],a);break;case"source":Ot("error",a);break;case"img":case"image":case"link":Ot("error",a),Ot("load",a);break;case"details":Ot("toggle",a);break;case"input":Ot("invalid",a),Yv(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ot("invalid",a);break;case"textarea":Ot("invalid",a),Xv(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||I1(a.textContent,l)?(h.popover!=null&&(Ot("beforetoggle",a),Ot("toggle",a)),h.onScroll!=null&&Ot("scroll",a),h.onScrollEnd!=null&&Ot("scrollend",a),h.onClick!=null&&(a.onclick=ai),a=!0):a=!1,a||es(i,!0)}function kb(i){for(Fe=i.return;Fe;)switch(Fe.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Fe=Fe.return}}function ao(i){if(i!==Fe)return!1;if(!Mt)return kb(i),Mt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||cm(i.type,i.memoizedProps)),l=!l),l&&te&&es(i),kb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));te=ex(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));te=ex(i)}else a===27?(a=te,ps(i.type)?(i=gm,gm=null,te=i):te=a):te=Fe?Qn(i.stateNode.nextSibling):null;return!0}function Zs(){te=Fe=null,Mt=!1}function Ig(){var i=ts;return i!==null&&(fn===null?fn=i:fn.push.apply(fn,i),ts=null),i}function Ul(i){ts===null?ts=[i]:ts.push(i)}var $g=L(null),Js=null,ui=null;function ns(i,a,l){st($g,a._currentValue),a._currentValue=l}function hi(i){i._currentValue=$g.current,Q($g)}function Wg(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function qg(i,a,l,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var m=p.dependencies;if(m!==null){var x=p.child;m=m.firstContext;t:for(;m!==null;){var C=m;m=p;for(var N=0;N<a.length;N++)if(C.context===a[N]){m.lanes|=l,C=m.alternate,C!==null&&(C.lanes|=l),Wg(m.return,l,i),h||(x=null);break t}m=C.next}}else if(p.tag===18){if(x=p.return,x===null)throw Error(n(341));x.lanes|=l,m=x.alternate,m!==null&&(m.lanes|=l),Wg(x,l,i),x=null}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===i){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}}function oo(i,a,l,h){i=null;for(var p=a,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var x=p.alternate;if(x===null)throw Error(n(387));if(x=x.memoizedProps,x!==null){var C=p.type;Tn(p.pendingProps.value,x.value)||(i!==null?i.push(C):i=[C])}}else if(p===yt.current){if(x=p.alternate,x===null)throw Error(n(387));x.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(hc):i=[hc])}p=p.return}i!==null&&qg(a,i,l,h),a.flags|=262144}function Iu(i){for(i=i.firstContext;i!==null;){if(!Tn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ta(i){Js=i,ui=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Pe(i){return Mb(Js,i)}function $u(i,a){return Js===null&&ta(i),Mb(i,a)}function Mb(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ui===null){if(i===null)throw Error(n(308));ui=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else ui=ui.next=a;return l}var WO=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},qO=r.unstable_scheduleCallback,KO=r.unstable_NormalPriority,Se={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kg(){return{controller:new WO,data:new Map,refCount:0}}function Fl(i){i.refCount--,i.refCount===0&&qO(KO,function(){i.controller.abort()})}var Pl=null,Qg=0,lo=0,co=null;function QO(i,a){if(Pl===null){var l=Pl=[];Qg=0,lo=tm(),co={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Qg++,a.then(jb,jb),a}function jb(){if(--Qg===0&&Pl!==null){co!==null&&(co.status="fulfilled");var i=Pl;Pl=null,lo=0,co=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function ZO(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<l.length;p++)(0,l[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),h}var Rb=A.S;A.S=function(i,a){m1=Ee(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&QO(i,a),Rb!==null&&Rb(i,a)};var ea=L(null);function Zg(){var i=ea.current;return i!==null?i:Qt.pooledCache}function Wu(i,a){a===null?st(ea,ea.current):st(ea,a.pool)}function Lb(){var i=Zg();return i===null?null:{parent:Se._currentValue,pool:i}}var uo=Error(n(460)),Jg=Error(n(474)),qu=Error(n(542)),Ku={then:function(){}};function Nb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Bb(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(ai,ai),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Ub(i),i;default:if(typeof a.status=="string")a.then(ai,ai);else{if(i=Qt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Ub(i),i}throw ra=a,uo}}function na(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ra=l,uo):l}}var ra=null;function zb(){if(ra===null)throw Error(n(459));var i=ra;return ra=null,i}function Ub(i){if(i===uo||i===qu)throw Error(n(483))}var ho=null,Hl=0;function Qu(i){var a=Hl;return Hl+=1,ho===null&&(ho=[]),Bb(ho,i,a)}function Yl(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Zu(i,a){throw a.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Fb(i){function a(G,H){if(i){var $=G.deletions;$===null?(G.deletions=[H],G.flags|=16):$.push(H)}}function l(G,H){if(!i)return null;for(;H!==null;)a(G,H),H=H.sibling;return null}function h(G){for(var H=new Map;G!==null;)G.key!==null?H.set(G.key,G):H.set(G.index,G),G=G.sibling;return H}function p(G,H){return G=li(G,H),G.index=0,G.sibling=null,G}function m(G,H,$){return G.index=$,i?($=G.alternate,$!==null?($=$.index,$<H?(G.flags|=67108866,H):$):(G.flags|=67108866,H)):(G.flags|=1048576,H)}function x(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function C(G,H,$,nt){return H===null||H.tag!==6?(H=Hg($,G.mode,nt),H.return=G,H):(H=p(H,$),H.return=G,H)}function N(G,H,$,nt){var mt=$.type;return mt===w?tt(G,H,$.props.children,nt,$.key):H!==null&&(H.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===q&&na(mt)===H.type)?(H=p(H,$.props),Yl(H,$),H.return=G,H):(H=Xu($.type,$.key,$.props,null,G.mode,nt),Yl(H,$),H.return=G,H)}function W(G,H,$,nt){return H===null||H.tag!==4||H.stateNode.containerInfo!==$.containerInfo||H.stateNode.implementation!==$.implementation?(H=Yg($,G.mode,nt),H.return=G,H):(H=p(H,$.children||[]),H.return=G,H)}function tt(G,H,$,nt,mt){return H===null||H.tag!==7?(H=Qs($,G.mode,nt,mt),H.return=G,H):(H=p(H,$),H.return=G,H)}function it(G,H,$){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Hg(""+H,G.mode,$),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return $=Xu(H.type,H.key,H.props,null,G.mode,$),Yl($,H),$.return=G,$;case S:return H=Yg(H,G.mode,$),H.return=G,H;case q:return H=na(H),it(G,H,$)}if(j(H)||E(H))return H=Qs(H,G.mode,$,null),H.return=G,H;if(typeof H.then=="function")return it(G,Qu(H),$);if(H.$$typeof===B)return it(G,$u(G,H),$);Zu(G,H)}return null}function K(G,H,$,nt){var mt=H!==null?H.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return mt!==null?null:C(G,H,""+$,nt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case b:return $.key===mt?N(G,H,$,nt):null;case S:return $.key===mt?W(G,H,$,nt):null;case q:return $=na($),K(G,H,$,nt)}if(j($)||E($))return mt!==null?null:tt(G,H,$,nt,null);if(typeof $.then=="function")return K(G,H,Qu($),nt);if($.$$typeof===B)return K(G,H,$u(G,$),nt);Zu(G,$)}return null}function J(G,H,$,nt,mt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return G=G.get($)||null,C(H,G,""+nt,mt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case b:return G=G.get(nt.key===null?$:nt.key)||null,N(H,G,nt,mt);case S:return G=G.get(nt.key===null?$:nt.key)||null,W(H,G,nt,mt);case q:return nt=na(nt),J(G,H,$,nt,mt)}if(j(nt)||E(nt))return G=G.get($)||null,tt(H,G,nt,mt,null);if(typeof nt.then=="function")return J(G,H,$,Qu(nt),mt);if(nt.$$typeof===B)return J(G,H,$,$u(H,nt),mt);Zu(H,nt)}return null}function dt(G,H,$,nt){for(var mt=null,Bt=null,pt=H,Ct=H=0,Dt=null;pt!==null&&Ct<$.length;Ct++){pt.index>Ct?(Dt=pt,pt=null):Dt=pt.sibling;var zt=K(G,pt,$[Ct],nt);if(zt===null){pt===null&&(pt=Dt);break}i&&pt&&zt.alternate===null&&a(G,pt),H=m(zt,H,Ct),Bt===null?mt=zt:Bt.sibling=zt,Bt=zt,pt=Dt}if(Ct===$.length)return l(G,pt),Mt&&ci(G,Ct),mt;if(pt===null){for(;Ct<$.length;Ct++)pt=it(G,$[Ct],nt),pt!==null&&(H=m(pt,H,Ct),Bt===null?mt=pt:Bt.sibling=pt,Bt=pt);return Mt&&ci(G,Ct),mt}for(pt=h(pt);Ct<$.length;Ct++)Dt=J(pt,G,Ct,$[Ct],nt),Dt!==null&&(i&&Dt.alternate!==null&&pt.delete(Dt.key===null?Ct:Dt.key),H=m(Dt,H,Ct),Bt===null?mt=Dt:Bt.sibling=Dt,Bt=Dt);return i&&pt.forEach(function(Ss){return a(G,Ss)}),Mt&&ci(G,Ct),mt}function bt(G,H,$,nt){if($==null)throw Error(n(151));for(var mt=null,Bt=null,pt=H,Ct=H=0,Dt=null,zt=$.next();pt!==null&&!zt.done;Ct++,zt=$.next()){pt.index>Ct?(Dt=pt,pt=null):Dt=pt.sibling;var Ss=K(G,pt,zt.value,nt);if(Ss===null){pt===null&&(pt=Dt);break}i&&pt&&Ss.alternate===null&&a(G,pt),H=m(Ss,H,Ct),Bt===null?mt=Ss:Bt.sibling=Ss,Bt=Ss,pt=Dt}if(zt.done)return l(G,pt),Mt&&ci(G,Ct),mt;if(pt===null){for(;!zt.done;Ct++,zt=$.next())zt=it(G,zt.value,nt),zt!==null&&(H=m(zt,H,Ct),Bt===null?mt=zt:Bt.sibling=zt,Bt=zt);return Mt&&ci(G,Ct),mt}for(pt=h(pt);!zt.done;Ct++,zt=$.next())zt=J(pt,G,Ct,zt.value,nt),zt!==null&&(i&&zt.alternate!==null&&pt.delete(zt.key===null?Ct:zt.key),H=m(zt,H,Ct),Bt===null?mt=zt:Bt.sibling=zt,Bt=zt);return i&&pt.forEach(function(cD){return a(G,cD)}),Mt&&ci(G,Ct),mt}function qt(G,H,$,nt){if(typeof $=="object"&&$!==null&&$.type===w&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case b:t:{for(var mt=$.key;H!==null;){if(H.key===mt){if(mt=$.type,mt===w){if(H.tag===7){l(G,H.sibling),nt=p(H,$.props.children),nt.return=G,G=nt;break t}}else if(H.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===q&&na(mt)===H.type){l(G,H.sibling),nt=p(H,$.props),Yl(nt,$),nt.return=G,G=nt;break t}l(G,H);break}else a(G,H);H=H.sibling}$.type===w?(nt=Qs($.props.children,G.mode,nt,$.key),nt.return=G,G=nt):(nt=Xu($.type,$.key,$.props,null,G.mode,nt),Yl(nt,$),nt.return=G,G=nt)}return x(G);case S:t:{for(mt=$.key;H!==null;){if(H.key===mt)if(H.tag===4&&H.stateNode.containerInfo===$.containerInfo&&H.stateNode.implementation===$.implementation){l(G,H.sibling),nt=p(H,$.children||[]),nt.return=G,G=nt;break t}else{l(G,H);break}else a(G,H);H=H.sibling}nt=Yg($,G.mode,nt),nt.return=G,G=nt}return x(G);case q:return $=na($),qt(G,H,$,nt)}if(j($))return dt(G,H,$,nt);if(E($)){if(mt=E($),typeof mt!="function")throw Error(n(150));return $=mt.call($),bt(G,H,$,nt)}if(typeof $.then=="function")return qt(G,H,Qu($),nt);if($.$$typeof===B)return qt(G,H,$u(G,$),nt);Zu(G,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,H!==null&&H.tag===6?(l(G,H.sibling),nt=p(H,$),nt.return=G,G=nt):(l(G,H),nt=Hg($,G.mode,nt),nt.return=G,G=nt),x(G)):l(G,H)}return function(G,H,$,nt){try{Hl=0;var mt=qt(G,H,$,nt);return ho=null,mt}catch(pt){if(pt===uo||pt===qu)throw pt;var Bt=En(29,pt,null,G.mode);return Bt.lanes=nt,Bt.return=G,Bt}finally{}}}var ia=Fb(!0),Pb=Fb(!1),rs=!1;function tp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ep(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ss(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Ut&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=Vu(i),_b(i,null,l),a}return Yu(i,h,a,l),Vu(i)}function Vl(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Mv(i,l)}}function np(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?p=m=x:m=m.next=x,l=l.next}while(l!==null);m===null?p=m=a:m=m.next=a}else p=m=a;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var rp=!1;function Xl(){if(rp){var i=co;if(i!==null)throw i}}function Gl(i,a,l,h){rp=!1;var p=i.updateQueue;rs=!1;var m=p.firstBaseUpdate,x=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var N=C,W=N.next;N.next=null,x===null?m=W:x.next=W,x=N;var tt=i.alternate;tt!==null&&(tt=tt.updateQueue,C=tt.lastBaseUpdate,C!==x&&(C===null?tt.firstBaseUpdate=W:C.next=W,tt.lastBaseUpdate=N))}if(m!==null){var it=p.baseState;x=0,tt=W=N=null,C=m;do{var K=C.lane&-536870913,J=K!==C.lane;if(J?(At&K)===K:(h&K)===K){K!==0&&K===lo&&(rp=!0),tt!==null&&(tt=tt.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var dt=i,bt=C;K=a;var qt=l;switch(bt.tag){case 1:if(dt=bt.payload,typeof dt=="function"){it=dt.call(qt,it,K);break t}it=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=bt.payload,K=typeof dt=="function"?dt.call(qt,it,K):dt,K==null)break t;it=y({},it,K);break t;case 2:rs=!0}}K=C.callback,K!==null&&(i.flags|=64,J&&(i.flags|=8192),J=p.callbacks,J===null?p.callbacks=[K]:J.push(K))}else J={lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},tt===null?(W=tt=J,N=it):tt=tt.next=J,x|=K;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;J=C,C=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);tt===null&&(N=it),p.baseState=N,p.firstBaseUpdate=W,p.lastBaseUpdate=tt,m===null&&(p.shared.lanes=0),us|=x,i.lanes=x,i.memoizedState=it}}function Hb(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function Yb(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Hb(l[i],a)}var fo=L(null),Ju=L(0);function Vb(i,a){i=Si,st(Ju,i),st(fo,a),Si=i|a.baseLanes}function ip(){st(Ju,Si),st(fo,fo.current)}function sp(){Si=Ju.current,Q(fo),Q(Ju)}var On=L(null),Kn=null;function as(i){var a=i.alternate;st(ge,ge.current&1),st(On,i),Kn===null&&(a===null||fo.current!==null||a.memoizedState!==null)&&(Kn=i)}function ap(i){st(ge,ge.current),st(On,i),Kn===null&&(Kn=i)}function Xb(i){i.tag===22?(st(ge,ge.current),st(On,i),Kn===null&&(Kn=i)):os()}function os(){st(ge,ge.current),st(On,On.current)}function An(i){Q(On),Kn===i&&(Kn=null),Q(ge)}var ge=L(0);function th(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||fm(l)||dm(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var fi=0,_t=null,$t=null,xe=null,eh=!1,go=!1,sa=!1,nh=0,Il=0,po=null,JO=0;function ce(){throw Error(n(321))}function op(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!Tn(i[l],a[l]))return!1;return!0}function lp(i,a,l,h,p,m){return fi=m,_t=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,A.H=i===null||i.memoizedState===null?OS:_p,sa=!1,m=l(h,p),sa=!1,go&&(m=Ib(a,l,h,p)),Gb(i),m}function Gb(i){A.H=ql;var a=$t!==null&&$t.next!==null;if(fi=0,xe=$t=_t=null,eh=!1,Il=0,po=null,a)throw Error(n(300));i===null||we||(i=i.dependencies,i!==null&&Iu(i)&&(we=!0))}function Ib(i,a,l,h){_t=i;var p=0;do{if(go&&(po=null),Il=0,go=!1,25<=p)throw Error(n(301));if(p+=1,xe=$t=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}A.H=AS,m=a(l,h)}while(go);return m}function tA(){var i=A.H,a=i.useState()[0];return a=typeof a.then=="function"?$l(a):a,i=i.useState()[0],($t!==null?$t.memoizedState:null)!==i&&(_t.flags|=1024),a}function cp(){var i=nh!==0;return nh=0,i}function up(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function hp(i){if(eh){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}eh=!1}fi=0,xe=$t=_t=null,go=!1,Il=nh=0,po=null}function en(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?_t.memoizedState=xe=i:xe=xe.next=i,xe}function pe(){if($t===null){var i=_t.alternate;i=i!==null?i.memoizedState:null}else i=$t.next;var a=xe===null?_t.memoizedState:xe.next;if(a!==null)xe=a,$t=i;else{if(i===null)throw _t.alternate===null?Error(n(467)):Error(n(310));$t=i,i={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},xe===null?_t.memoizedState=xe=i:xe=xe.next=i}return xe}function rh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(i){var a=Il;return Il+=1,po===null&&(po=[]),i=Bb(po,i,a),a=_t,(xe===null?a.memoizedState:xe.next)===null&&(a=a.alternate,A.H=a===null||a.memoizedState===null?OS:_p),i}function ih(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return $l(i);if(i.$$typeof===B)return Pe(i)}throw Error(n(438,String(i)))}function fp(i){var a=null,l=_t.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=_t.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=rh(),_t.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=lt;return a.index++,l}function di(i,a){return typeof a=="function"?a(i):a}function sh(i){var a=pe();return dp(a,$t,i)}function dp(i,a,l){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var p=i.baseQueue,m=h.pending;if(m!==null){if(p!==null){var x=p.next;p.next=m.next,m.next=x}a.baseQueue=p=m,h.pending=null}if(m=i.baseState,p===null)i.memoizedState=m;else{a=p.next;var C=x=null,N=null,W=a,tt=!1;do{var it=W.lane&-536870913;if(it!==W.lane?(At&it)===it:(fi&it)===it){var K=W.revertLane;if(K===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),it===lo&&(tt=!0);else if((fi&K)===K){W=W.next,K===lo&&(tt=!0);continue}else it={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},N===null?(C=N=it,x=m):N=N.next=it,_t.lanes|=K,us|=K;it=W.action,sa&&l(m,it),m=W.hasEagerState?W.eagerState:l(m,it)}else K={lane:it,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},N===null?(C=N=K,x=m):N=N.next=K,_t.lanes|=it,us|=it;W=W.next}while(W!==null&&W!==a);if(N===null?x=m:N.next=C,!Tn(m,i.memoizedState)&&(we=!0,tt&&(l=co,l!==null)))throw l;i.memoizedState=m,i.baseState=x,i.baseQueue=N,h.lastRenderedState=m}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function gp(i){var a=pe(),l=a.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,m=a.memoizedState;if(p!==null){l.pending=null;var x=p=p.next;do m=i(m,x.action),x=x.next;while(x!==p);Tn(m,a.memoizedState)||(we=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),l.lastRenderedState=m}return[m,h]}function $b(i,a,l){var h=_t,p=pe(),m=Mt;if(m){if(l===void 0)throw Error(n(407));l=l()}else l=a();var x=!Tn(($t||p).memoizedState,l);if(x&&(p.memoizedState=l,we=!0),p=p.queue,yp(Kb.bind(null,h,p,i),[i]),p.getSnapshot!==a||x||xe!==null&&xe.memoizedState.tag&1){if(h.flags|=2048,mo(9,{destroy:void 0},qb.bind(null,h,p,l,a),null),Qt===null)throw Error(n(349));m||(fi&127)!==0||Wb(h,a,l)}return l}function Wb(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=_t.updateQueue,a===null?(a=rh(),_t.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function qb(i,a,l,h){a.value=l,a.getSnapshot=h,Qb(a)&&Zb(i)}function Kb(i,a,l){return l(function(){Qb(a)&&Zb(i)})}function Qb(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!Tn(i,l)}catch{return!0}}function Zb(i){var a=Ks(i,2);a!==null&&dn(a,i,2)}function pp(i){var a=en();if(typeof i=="function"){var l=i;if(i=l(),sa){Or(!0);try{l()}finally{Or(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:i},a}function Jb(i,a,l,h){return i.baseState=l,dp(i,$t,typeof h=="function"?h:di)}function eA(i,a,l,h,p){if(lh(i))throw Error(n(485));if(i=a.action,i!==null){var m={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};A.T!==null?l(!0):m.isTransition=!1,h(m),l=a.pending,l===null?(m.next=a.pending=m,tS(a,m)):(m.next=l.next,a.pending=l.next=m)}}function tS(i,a){var l=a.action,h=a.payload,p=i.state;if(a.isTransition){var m=A.T,x={};A.T=x;try{var C=l(p,h),N=A.S;N!==null&&N(x,C),eS(i,a,C)}catch(W){mp(i,a,W)}finally{m!==null&&x.types!==null&&(m.types=x.types),A.T=m}}else try{m=l(p,h),eS(i,a,m)}catch(W){mp(i,a,W)}}function eS(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){nS(i,a,h)},function(h){return mp(i,a,h)}):nS(i,a,l)}function nS(i,a,l){a.status="fulfilled",a.value=l,rS(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,tS(i,l)))}function mp(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,rS(a),a=a.next;while(a!==h)}i.action=null}function rS(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function iS(i,a){return a}function sS(i,a){if(Mt){var l=Qt.formState;if(l!==null){t:{var h=_t;if(Mt){if(te){e:{for(var p=te,m=qn;p.nodeType!==8;){if(!m){p=null;break e}if(p=Qn(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){te=Qn(p.nextSibling),h=p.data==="F!";break t}}es(h)}h=!1}h&&(a=l[0])}}return l=en(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iS,lastRenderedState:a},l.queue=h,l=CS.bind(null,_t,h),h.dispatch=l,h=pp(!1),m=wp.bind(null,_t,!1,h.queue),h=en(),p={state:a,dispatch:null,action:i,pending:null},h.queue=p,l=eA.bind(null,_t,p,m,l),p.dispatch=l,h.memoizedState=i,[a,l,!1]}function aS(i){var a=pe();return oS(a,$t,i)}function oS(i,a,l){if(a=dp(i,a,iS)[0],i=sh(di)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=$l(a)}catch(x){throw x===uo?qu:x}else h=a;a=pe();var p=a.queue,m=p.dispatch;return l!==a.memoizedState&&(_t.flags|=2048,mo(9,{destroy:void 0},nA.bind(null,p,l),null)),[h,m,i]}function nA(i,a){i.action=a}function lS(i){var a=pe(),l=$t;if(l!==null)return oS(a,l,i);pe(),a=a.memoizedState,l=pe();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function mo(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=_t.updateQueue,a===null&&(a=rh(),_t.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function cS(){return pe().memoizedState}function ah(i,a,l,h){var p=en();_t.flags|=i,p.memoizedState=mo(1|a,{destroy:void 0},l,h===void 0?null:h)}function oh(i,a,l,h){var p=pe();h=h===void 0?null:h;var m=p.memoizedState.inst;$t!==null&&h!==null&&op(h,$t.memoizedState.deps)?p.memoizedState=mo(a,m,l,h):(_t.flags|=i,p.memoizedState=mo(1|a,m,l,h))}function uS(i,a){ah(8390656,8,i,a)}function yp(i,a){oh(2048,8,i,a)}function rA(i){_t.flags|=4;var a=_t.updateQueue;if(a===null)a=rh(),_t.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function hS(i){var a=pe().memoizedState;return rA({ref:a,nextImpl:i}),function(){if((Ut&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}function fS(i,a){return oh(4,2,i,a)}function dS(i,a){return oh(4,4,i,a)}function gS(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function pS(i,a,l){l=l!=null?l.concat([i]):null,oh(4,4,gS.bind(null,a,i),l)}function vp(){}function mS(i,a){var l=pe();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&op(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function yS(i,a){var l=pe();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&op(a,h[1]))return h[0];if(h=i(),sa){Or(!0);try{i()}finally{Or(!1)}}return l.memoizedState=[h,a],h}function bp(i,a,l){return l===void 0||(fi&1073741824)!==0&&(At&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=v1(),_t.lanes|=i,us|=i,l)}function vS(i,a,l,h){return Tn(l,a)?l:fo.current!==null?(i=bp(i,l,h),Tn(i,a)||(we=!0),i):(fi&42)===0||(fi&1073741824)!==0&&(At&261930)===0?(we=!0,i.memoizedState=l):(i=v1(),_t.lanes|=i,us|=i,a)}function bS(i,a,l,h,p){var m=P.p;P.p=m!==0&&8>m?m:8;var x=A.T,C={};A.T=C,wp(i,!1,a,l);try{var N=p(),W=A.S;if(W!==null&&W(C,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var tt=ZO(N,h);Wl(i,a,tt,Mn(i))}else Wl(i,a,h,Mn(i))}catch(it){Wl(i,a,{then:function(){},status:"rejected",reason:it},Mn())}finally{P.p=m,x!==null&&C.types!==null&&(x.types=C.types),A.T=x}}function iA(){}function Sp(i,a,l,h){if(i.tag!==5)throw Error(n(476));var p=SS(i).queue;bS(i,p,a,I,l===null?iA:function(){return xS(i),l(h)})}function SS(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:I},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function xS(i){var a=SS(i);a.next===null&&(a=i.alternate.memoizedState),Wl(i,a.next.queue,{},Mn())}function xp(){return Pe(hc)}function wS(){return pe().memoizedState}function _S(){return pe().memoizedState}function sA(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Mn();i=is(l);var h=ss(a,i,l);h!==null&&(dn(h,a,l),Vl(h,a,l)),a={cache:Kg()},i.payload=a;return}a=a.return}}function aA(i,a,l){var h=Mn();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},lh(i)?TS(a,l):(l=Fg(i,a,l,h),l!==null&&(dn(l,i,h),ES(l,a,h)))}function CS(i,a,l){var h=Mn();Wl(i,a,l,h)}function Wl(i,a,l,h){var p={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(lh(i))TS(a,p);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var x=a.lastRenderedState,C=m(x,l);if(p.hasEagerState=!0,p.eagerState=C,Tn(C,x))return Yu(i,a,p,0),Qt===null&&Hu(),!1}catch{}finally{}if(l=Fg(i,a,p,h),l!==null)return dn(l,i,h),ES(l,a,h),!0}return!1}function wp(i,a,l,h){if(h={lane:2,revertLane:tm(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},lh(i)){if(a)throw Error(n(479))}else a=Fg(i,l,h,2),a!==null&&dn(a,i,2)}function lh(i){var a=i.alternate;return i===_t||a!==null&&a===_t}function TS(i,a){go=eh=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function ES(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Mv(i,l)}}var ql={readContext:Pe,use:ih,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce,useHostTransitionStatus:ce,useFormState:ce,useActionState:ce,useOptimistic:ce,useMemoCache:ce,useCacheRefresh:ce};ql.useEffectEvent=ce;var OS={readContext:Pe,use:ih,useCallback:function(i,a){return en().memoizedState=[i,a===void 0?null:a],i},useContext:Pe,useEffect:uS,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,ah(4194308,4,gS.bind(null,a,i),l)},useLayoutEffect:function(i,a){return ah(4194308,4,i,a)},useInsertionEffect:function(i,a){ah(4,2,i,a)},useMemo:function(i,a){var l=en();a=a===void 0?null:a;var h=i();if(sa){Or(!0);try{i()}finally{Or(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=en();if(l!==void 0){var p=l(a);if(sa){Or(!0);try{l(a)}finally{Or(!1)}}}else p=a;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=aA.bind(null,_t,i),[h.memoizedState,i]},useRef:function(i){var a=en();return i={current:i},a.memoizedState=i},useState:function(i){i=pp(i);var a=i.queue,l=CS.bind(null,_t,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:vp,useDeferredValue:function(i,a){var l=en();return bp(l,i,a)},useTransition:function(){var i=pp(!1);return i=bS.bind(null,_t,i.queue,!0,!1),en().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=_t,p=en();if(Mt){if(l===void 0)throw Error(n(407));l=l()}else{if(l=a(),Qt===null)throw Error(n(349));(At&127)!==0||Wb(h,a,l)}p.memoizedState=l;var m={value:l,getSnapshot:a};return p.queue=m,uS(Kb.bind(null,h,m,i),[i]),h.flags|=2048,mo(9,{destroy:void 0},qb.bind(null,h,m,l,a),null),l},useId:function(){var i=en(),a=Qt.identifierPrefix;if(Mt){var l=Dr,h=Ar;l=(h&~(1<<32-ze(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=nh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=JO++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:xp,useFormState:sS,useActionState:sS,useOptimistic:function(i){var a=en();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=wp.bind(null,_t,!0,l),l.dispatch=a,[i,a]},useMemoCache:fp,useCacheRefresh:function(){return en().memoizedState=sA.bind(null,_t)},useEffectEvent:function(i){var a=en(),l={impl:i};return a.memoizedState=l,function(){if((Ut&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},_p={readContext:Pe,use:ih,useCallback:mS,useContext:Pe,useEffect:yp,useImperativeHandle:pS,useInsertionEffect:fS,useLayoutEffect:dS,useMemo:yS,useReducer:sh,useRef:cS,useState:function(){return sh(di)},useDebugValue:vp,useDeferredValue:function(i,a){var l=pe();return vS(l,$t.memoizedState,i,a)},useTransition:function(){var i=sh(di)[0],a=pe().memoizedState;return[typeof i=="boolean"?i:$l(i),a]},useSyncExternalStore:$b,useId:wS,useHostTransitionStatus:xp,useFormState:aS,useActionState:aS,useOptimistic:function(i,a){var l=pe();return Jb(l,$t,i,a)},useMemoCache:fp,useCacheRefresh:_S};_p.useEffectEvent=hS;var AS={readContext:Pe,use:ih,useCallback:mS,useContext:Pe,useEffect:yp,useImperativeHandle:pS,useInsertionEffect:fS,useLayoutEffect:dS,useMemo:yS,useReducer:gp,useRef:cS,useState:function(){return gp(di)},useDebugValue:vp,useDeferredValue:function(i,a){var l=pe();return $t===null?bp(l,i,a):vS(l,$t.memoizedState,i,a)},useTransition:function(){var i=gp(di)[0],a=pe().memoizedState;return[typeof i=="boolean"?i:$l(i),a]},useSyncExternalStore:$b,useId:wS,useHostTransitionStatus:xp,useFormState:lS,useActionState:lS,useOptimistic:function(i,a){var l=pe();return $t!==null?Jb(l,$t,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:fp,useCacheRefresh:_S};AS.useEffectEvent=hS;function Cp(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:y({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Tp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=Mn(),p=is(h);p.payload=a,l!=null&&(p.callback=l),a=ss(i,p,h),a!==null&&(dn(a,i,h),Vl(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=Mn(),p=is(h);p.tag=1,p.payload=a,l!=null&&(p.callback=l),a=ss(i,p,h),a!==null&&(dn(a,i,h),Vl(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Mn(),h=is(l);h.tag=2,a!=null&&(h.callback=a),a=ss(i,h,l),a!==null&&(dn(a,i,l),Vl(a,i,l))}};function DS(i,a,l,h,p,m,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,m,x):a.prototype&&a.prototype.isPureReactComponent?!Nl(l,h)||!Nl(p,m):!0}function kS(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&Tp.enqueueReplaceState(a,a.state,null)}function aa(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=y({},l));for(var p in i)l[p]===void 0&&(l[p]=i[p])}return l}function MS(i){Pu(i)}function jS(i){console.error(i)}function RS(i){Pu(i)}function ch(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function LS(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Ep(i,a,l){return l=is(l),l.tag=3,l.payload={element:null},l.callback=function(){ch(i,a)},l}function NS(i){return i=is(i),i.tag=3,i}function BS(i,a,l,h){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var m=h.value;i.payload=function(){return p(m)},i.callback=function(){LS(a,l,h)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){LS(a,l,h),typeof p!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var C=h.stack;this.componentDidCatch(h.value,{componentStack:C!==null?C:""})})}function oA(i,a,l,h,p){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&oo(a,l,p,!0),l=On.current,l!==null){switch(l.tag){case 31:case 13:return Kn===null?xh():l.alternate===null&&ue===0&&(ue=3),l.flags&=-257,l.flags|=65536,l.lanes=p,h===Ku?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Qp(i,h,p)),!1;case 22:return l.flags|=65536,h===Ku?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Qp(i,h,p)),!1}throw Error(n(435,l.tag))}return Qp(i,h,p),xh(),!1}if(Mt)return a=On.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==Gg&&(i=Error(n(422),{cause:h}),Ul(In(i,l)))):(h!==Gg&&(a=Error(n(423),{cause:h}),Ul(In(a,l))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=In(h,l),p=Ep(i.stateNode,h,p),np(i,p),ue!==4&&(ue=2)),!1;var m=Error(n(520),{cause:h});if(m=In(m,l),rc===null?rc=[m]:rc.push(m),ue!==4&&(ue=2),a===null)return!0;h=In(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=p&-p,l.lanes|=i,i=Ep(l.stateNode,h,i),np(l,i),!1;case 1:if(a=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(hs===null||!hs.has(m))))return l.flags|=65536,p&=-p,l.lanes|=p,p=NS(p),BS(p,i,l,h),np(l,p),!1}l=l.return}while(l!==null);return!1}var Op=Error(n(461)),we=!1;function He(i,a,l,h){a.child=i===null?Pb(a,null,l,h):ia(a,i.child,l,h)}function zS(i,a,l,h,p){l=l.render;var m=a.ref;if("ref"in h){var x={};for(var C in h)C!=="ref"&&(x[C]=h[C])}else x=h;return ta(a),h=lp(i,a,l,x,m,p),C=cp(),i!==null&&!we?(up(i,a,p),gi(i,a,p)):(Mt&&C&&Vg(a),a.flags|=1,He(i,a,h,p),a.child)}function US(i,a,l,h,p){if(i===null){var m=l.type;return typeof m=="function"&&!Pg(m)&&m.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=m,FS(i,a,m,h,p)):(i=Xu(l.type,null,h,a,a.mode,p),i.ref=a.ref,i.return=a,a.child=i)}if(m=i.child,!Np(i,p)){var x=m.memoizedProps;if(l=l.compare,l=l!==null?l:Nl,l(x,h)&&i.ref===a.ref)return gi(i,a,p)}return a.flags|=1,i=li(m,h),i.ref=a.ref,i.return=a,a.child=i}function FS(i,a,l,h,p){if(i!==null){var m=i.memoizedProps;if(Nl(m,h)&&i.ref===a.ref)if(we=!1,a.pendingProps=h=m,Np(i,p))(i.flags&131072)!==0&&(we=!0);else return a.lanes=i.lanes,gi(i,a,p)}return Ap(i,a,l,h,p)}function PS(i,a,l,h){var p=h.children,m=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,i!==null){for(h=a.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~m}else h=0,a.child=null;return HS(i,a,m,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Wu(a,m!==null?m.cachePool:null),m!==null?Vb(a,m):ip(),Xb(a);else return h=a.lanes=536870912,HS(i,a,m!==null?m.baseLanes|l:l,l,h)}else m!==null?(Wu(a,m.cachePool),Vb(a,m),os(),a.memoizedState=null):(i!==null&&Wu(a,null),ip(),os());return He(i,a,p,l),a.child}function Kl(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function HS(i,a,l,h,p){var m=Zg();return m=m===null?null:{parent:Se._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},i!==null&&Wu(a,null),ip(),Xb(a),i!==null&&oo(i,a,h,!0),a.childLanes=p,null}function uh(i,a){return a=fh({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function YS(i,a,l){return ia(a,i.child,null,l),i=uh(a,a.pendingProps),i.flags|=2,An(a),a.memoizedState=null,i}function lA(i,a,l){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(Mt){if(h.mode==="hidden")return i=uh(a,h),a.lanes=536870912,Kl(null,i);if(ap(a),(i=te)?(i=tx(i,qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ji!==null?{id:Ar,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},l=Tb(i),l.return=a,a.child=l,Fe=a,te=null)):i=null,i===null)throw es(a);return a.lanes=536870912,null}return uh(a,h)}var m=i.memoizedState;if(m!==null){var x=m.dehydrated;if(ap(a),p)if(a.flags&256)a.flags&=-257,a=YS(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(n(558));else if(we||oo(i,a,l,!1),p=(l&i.childLanes)!==0,we||p){if(h=Qt,h!==null&&(x=jv(h,l),x!==0&&x!==m.retryLane))throw m.retryLane=x,Ks(i,x),dn(h,i,x),Op;xh(),a=YS(i,a,l)}else i=m.treeContext,te=Qn(x.nextSibling),Fe=a,Mt=!0,ts=null,qn=!1,i!==null&&Ab(a,i),a=uh(a,h),a.flags|=4096;return a}return i=li(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function hh(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Ap(i,a,l,h,p){return ta(a),l=lp(i,a,l,h,void 0,p),h=cp(),i!==null&&!we?(up(i,a,p),gi(i,a,p)):(Mt&&h&&Vg(a),a.flags|=1,He(i,a,l,p),a.child)}function VS(i,a,l,h,p,m){return ta(a),a.updateQueue=null,l=Ib(a,h,l,p),Gb(i),h=cp(),i!==null&&!we?(up(i,a,m),gi(i,a,m)):(Mt&&h&&Vg(a),a.flags|=1,He(i,a,l,m),a.child)}function XS(i,a,l,h,p){if(ta(a),a.stateNode===null){var m=ro,x=l.contextType;typeof x=="object"&&x!==null&&(m=Pe(x)),m=new l(h,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Tp,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=h,m.state=a.memoizedState,m.refs={},tp(a),x=l.contextType,m.context=typeof x=="object"&&x!==null?Pe(x):ro,m.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Cp(a,l,x,h),m.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Tp.enqueueReplaceState(m,m.state,null),Gl(a,h,m,p),Xl(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){m=a.stateNode;var C=a.memoizedProps,N=aa(l,C);m.props=N;var W=m.context,tt=l.contextType;x=ro,typeof tt=="object"&&tt!==null&&(x=Pe(tt));var it=l.getDerivedStateFromProps;tt=typeof it=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,tt||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||W!==x)&&kS(a,m,h,x),rs=!1;var K=a.memoizedState;m.state=K,Gl(a,h,m,p),Xl(),W=a.memoizedState,C||K!==W||rs?(typeof it=="function"&&(Cp(a,l,it,h),W=a.memoizedState),(N=rs||DS(a,l,N,h,K,W,x))?(tt||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=W),m.props=h,m.state=W,m.context=x,h=N):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{m=a.stateNode,ep(i,a),x=a.memoizedProps,tt=aa(l,x),m.props=tt,it=a.pendingProps,K=m.context,W=l.contextType,N=ro,typeof W=="object"&&W!==null&&(N=Pe(W)),C=l.getDerivedStateFromProps,(W=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==it||K!==N)&&kS(a,m,h,N),rs=!1,K=a.memoizedState,m.state=K,Gl(a,h,m,p),Xl();var J=a.memoizedState;x!==it||K!==J||rs||i!==null&&i.dependencies!==null&&Iu(i.dependencies)?(typeof C=="function"&&(Cp(a,l,C,h),J=a.memoizedState),(tt=rs||DS(a,l,tt,h,K,J,N)||i!==null&&i.dependencies!==null&&Iu(i.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(h,J,N),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(h,J,N)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===i.memoizedProps&&K===i.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&K===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=J),m.props=h,m.state=J,m.context=N,h=tt):(typeof m.componentDidUpdate!="function"||x===i.memoizedProps&&K===i.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&K===i.memoizedState||(a.flags|=1024),h=!1)}return m=h,hh(i,a),h=(a.flags&128)!==0,m||h?(m=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,i!==null&&h?(a.child=ia(a,i.child,null,p),a.child=ia(a,null,l,p)):He(i,a,l,p),a.memoizedState=m.state,i=a.child):i=gi(i,a,p),i}function GS(i,a,l,h){return Zs(),a.flags|=256,He(i,a,l,h),a.child}var Dp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kp(i){return{baseLanes:i,cachePool:Lb()}}function Mp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=kn),i}function IS(i,a,l){var h=a.pendingProps,p=!1,m=(a.flags&128)!==0,x;if((x=m)||(x=i!==null&&i.memoizedState===null?!1:(ge.current&2)!==0),x&&(p=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,i===null){if(Mt){if(p?as(a):os(),(i=te)?(i=tx(i,qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Ji!==null?{id:Ar,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},l=Tb(i),l.return=a,a.child=l,Fe=a,te=null)):i=null,i===null)throw es(a);return dm(i)?a.lanes=32:a.lanes=536870912,null}var C=h.children;return h=h.fallback,p?(os(),p=a.mode,C=fh({mode:"hidden",children:C},p),h=Qs(h,p,l,null),C.return=a,h.return=a,C.sibling=h,a.child=C,h=a.child,h.memoizedState=kp(l),h.childLanes=Mp(i,x,l),a.memoizedState=Dp,Kl(null,h)):(as(a),jp(a,C))}var N=i.memoizedState;if(N!==null&&(C=N.dehydrated,C!==null)){if(m)a.flags&256?(as(a),a.flags&=-257,a=Rp(i,a,l)):a.memoizedState!==null?(os(),a.child=i.child,a.flags|=128,a=null):(os(),C=h.fallback,p=a.mode,h=fh({mode:"visible",children:h.children},p),C=Qs(C,p,l,null),C.flags|=2,h.return=a,C.return=a,h.sibling=C,a.child=h,ia(a,i.child,null,l),h=a.child,h.memoizedState=kp(l),h.childLanes=Mp(i,x,l),a.memoizedState=Dp,a=Kl(null,h));else if(as(a),dm(C)){if(x=C.nextSibling&&C.nextSibling.dataset,x)var W=x.dgst;x=W,h=Error(n(419)),h.stack="",h.digest=x,Ul({value:h,source:null,stack:null}),a=Rp(i,a,l)}else if(we||oo(i,a,l,!1),x=(l&i.childLanes)!==0,we||x){if(x=Qt,x!==null&&(h=jv(x,l),h!==0&&h!==N.retryLane))throw N.retryLane=h,Ks(i,h),dn(x,i,h),Op;fm(C)||xh(),a=Rp(i,a,l)}else fm(C)?(a.flags|=192,a.child=i.child,a=null):(i=N.treeContext,te=Qn(C.nextSibling),Fe=a,Mt=!0,ts=null,qn=!1,i!==null&&Ab(a,i),a=jp(a,h.children),a.flags|=4096);return a}return p?(os(),C=h.fallback,p=a.mode,N=i.child,W=N.sibling,h=li(N,{mode:"hidden",children:h.children}),h.subtreeFlags=N.subtreeFlags&65011712,W!==null?C=li(W,C):(C=Qs(C,p,l,null),C.flags|=2),C.return=a,h.return=a,h.sibling=C,a.child=h,Kl(null,h),h=a.child,C=i.child.memoizedState,C===null?C=kp(l):(p=C.cachePool,p!==null?(N=Se._currentValue,p=p.parent!==N?{parent:N,pool:N}:p):p=Lb(),C={baseLanes:C.baseLanes|l,cachePool:p}),h.memoizedState=C,h.childLanes=Mp(i,x,l),a.memoizedState=Dp,Kl(i.child,h)):(as(a),l=i.child,i=l.sibling,l=li(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(x=a.deletions,x===null?(a.deletions=[i],a.flags|=16):x.push(i)),a.child=l,a.memoizedState=null,l)}function jp(i,a){return a=fh({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function fh(i,a){return i=En(22,i,null,a),i.lanes=0,i}function Rp(i,a,l){return ia(a,i.child,null,l),i=jp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function $S(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),Wg(i.return,a,l)}function Lp(i,a,l,h,p,m){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p,treeForkCount:m}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=l,x.tailMode=p,x.treeForkCount=m)}function WS(i,a,l){var h=a.pendingProps,p=h.revealOrder,m=h.tail;h=h.children;var x=ge.current,C=(x&2)!==0;if(C?(x=x&1|2,a.flags|=128):x&=1,st(ge,x),He(i,a,h,l),h=Mt?zl:0,!C&&i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$S(i,l,a);else if(i.tag===19)$S(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(l=a.child,p=null;l!==null;)i=l.alternate,i!==null&&th(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=a.child,a.child=null):(p=l.sibling,l.sibling=null),Lp(a,!1,p,l,m,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,p=a.child,a.child=null;p!==null;){if(i=p.alternate,i!==null&&th(i)===null){a.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Lp(a,!0,l,null,m,h);break;case"together":Lp(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function gi(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),us|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(oo(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,l=li(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=li(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Np(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Iu(i)))}function cA(i,a,l){switch(a.tag){case 3:Rt(a,a.stateNode.containerInfo),ns(a,Se,i.memoizedState.cache),Zs();break;case 27:case 5:le(a);break;case 4:Rt(a,a.stateNode.containerInfo);break;case 10:ns(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,ap(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(as(a),a.flags|=128,null):(l&a.child.childLanes)!==0?IS(i,a,l):(as(a),i=gi(i,a,l),i!==null?i.sibling:null);as(a);break;case 19:var p=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(oo(i,a,l,!1),h=(l&a.childLanes)!==0),p){if(h)return WS(i,a,l);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),st(ge,ge.current),h)break;return null;case 22:return a.lanes=0,PS(i,a,l,a.pendingProps);case 24:ns(a,Se,i.memoizedState.cache)}return gi(i,a,l)}function qS(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)we=!0;else{if(!Np(i,l)&&(a.flags&128)===0)return we=!1,cA(i,a,l);we=(i.flags&131072)!==0}else we=!1,Mt&&(a.flags&1048576)!==0&&Ob(a,zl,a.index);switch(a.lanes=0,a.tag){case 16:t:{var h=a.pendingProps;if(i=na(a.elementType),a.type=i,typeof i=="function")Pg(i)?(h=aa(i,h),a.tag=1,a=XS(null,a,i,h,l)):(a.tag=0,a=Ap(null,a,i,h,l));else{if(i!=null){var p=i.$$typeof;if(p===R){a.tag=11,a=zS(null,a,i,h,l);break t}else if(p===U){a.tag=14,a=US(null,a,i,h,l);break t}}throw a=T(i)||i,Error(n(306,a,""))}}return a;case 0:return Ap(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,p=aa(h,a.pendingProps),XS(i,a,h,p,l);case 3:t:{if(Rt(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var m=a.memoizedState;p=m.element,ep(i,a),Gl(a,h,null,l);var x=a.memoizedState;if(h=x.cache,ns(a,Se,h),h!==m.cache&&qg(a,[Se],l,!0),Xl(),h=x.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=GS(i,a,h,l);break t}else if(h!==p){p=In(Error(n(424)),a),Ul(p),a=GS(i,a,h,l);break t}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(te=Qn(i.firstChild),Fe=a,Mt=!0,ts=null,qn=!0,l=Pb(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Zs(),h===p){a=gi(i,a,l);break t}He(i,a,h,l)}a=a.child}return a;case 26:return hh(i,a),i===null?(l=ax(a.type,null,a.pendingProps,null))?a.memoizedState=l:Mt||(l=a.type,i=a.pendingProps,h=Ah(gt.current).createElement(l),h[Ue]=a,h[on]=i,Ye(h,l,i),Re(h),a.stateNode=h):a.memoizedState=ax(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return le(a),i===null&&Mt&&(h=a.stateNode=rx(a.type,a.pendingProps,gt.current),Fe=a,qn=!0,p=te,ps(a.type)?(gm=p,te=Qn(h.firstChild)):te=p),He(i,a,a.pendingProps.children,l),hh(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Mt&&((p=h=te)&&(h=FA(h,a.type,a.pendingProps,qn),h!==null?(a.stateNode=h,Fe=a,te=Qn(h.firstChild),qn=!1,p=!0):p=!1),p||es(a)),le(a),p=a.type,m=a.pendingProps,x=i!==null?i.memoizedProps:null,h=m.children,cm(p,m)?h=null:x!==null&&cm(p,x)&&(a.flags|=32),a.memoizedState!==null&&(p=lp(i,a,tA,null,null,l),hc._currentValue=p),hh(i,a),He(i,a,h,l),a.child;case 6:return i===null&&Mt&&((i=l=te)&&(l=PA(l,a.pendingProps,qn),l!==null?(a.stateNode=l,Fe=a,te=null,i=!0):i=!1),i||es(a)),null;case 13:return IS(i,a,l);case 4:return Rt(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=ia(a,null,h,l):He(i,a,h,l),a.child;case 11:return zS(i,a,a.type,a.pendingProps,l);case 7:return He(i,a,a.pendingProps,l),a.child;case 8:return He(i,a,a.pendingProps.children,l),a.child;case 12:return He(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,ns(a,a.type,h.value),He(i,a,h.children,l),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,ta(a),p=Pe(p),h=h(p),a.flags|=1,He(i,a,h,l),a.child;case 14:return US(i,a,a.type,a.pendingProps,l);case 15:return FS(i,a,a.type,a.pendingProps,l);case 19:return WS(i,a,l);case 31:return lA(i,a,l);case 22:return PS(i,a,l,a.pendingProps);case 24:return ta(a),h=Pe(Se),i===null?(p=Zg(),p===null&&(p=Qt,m=Kg(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=l),p=m),a.memoizedState={parent:h,cache:p},tp(a),ns(a,Se,p)):((i.lanes&l)!==0&&(ep(i,a),Gl(a,null,null,l),Xl()),p=i.memoizedState,m=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),ns(a,Se,h)):(h=m.cache,ns(a,Se,h),h!==p.cache&&qg(a,[Se],l,!0))),He(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function pi(i){i.flags|=4}function Bp(i,a,l,h,p){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(w1())i.flags|=8192;else throw ra=Ku,Jg}else i.flags&=-16777217}function KS(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!hx(a))if(w1())i.flags|=8192;else throw ra=Ku,Jg}function dh(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?wt():536870912,i.lanes|=a,So|=a)}function Ql(i,a){if(!Mt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function ee(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function uA(i,a,l){var h=a.pendingProps;switch(Xg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ee(a),null;case 1:return ee(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),hi(Se),kt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(ao(a)?pi(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ig())),ee(a),null;case 26:var p=a.type,m=a.memoizedState;return i===null?(pi(a),m!==null?(ee(a),KS(a,m)):(ee(a),Bp(a,p,null,h,l))):m?m!==i.memoizedState?(pi(a),ee(a),KS(a,m)):(ee(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&pi(a),ee(a),Bp(a,p,i,h,l)),null;case 27:if(Hn(a),l=gt.current,p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&pi(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return ee(a),null}i=ut.current,ao(a)?Db(a):(i=rx(p,h,l),a.stateNode=i,pi(a))}return ee(a),null;case 5:if(Hn(a),p=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&pi(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return ee(a),null}if(m=ut.current,ao(a))Db(a);else{var x=Ah(gt.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof h.is=="string"?x.createElement("select",{is:h.is}):x.createElement("select"),h.multiple?m.multiple=!0:h.size&&(m.size=h.size);break;default:m=typeof h.is=="string"?x.createElement(p,{is:h.is}):x.createElement(p)}}m[Ue]=a,m[on]=h;t:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break t;for(;x.sibling===null;){if(x.return===null||x.return===a)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=m;t:switch(Ye(m,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&pi(a)}}return ee(a),Bp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&pi(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=gt.current,ao(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,p=Fe,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[Ue]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||I1(i.nodeValue,l)),i||es(a,!0)}else i=Ah(i).createTextNode(h),i[Ue]=a,a.stateNode=i}return ee(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=ao(a),l!==null){if(i===null){if(!h)throw Error(n(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Ue]=a}else Zs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ee(a),i=!1}else l=Ig(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(An(a),a):(An(a),null);if((a.flags&128)!==0)throw Error(n(558))}return ee(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=ao(a),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Ue]=a}else Zs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ee(a),p=!1}else p=Ig(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(An(a),a):(An(a),null)}return An(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),m=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(m=h.memoizedState.cachePool.pool),m!==p&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),dh(a,a.updateQueue),ee(a),null);case 4:return kt(),i===null&&im(a.stateNode.containerInfo),ee(a),null;case 10:return hi(a.type),ee(a),null;case 19:if(Q(ge),h=a.memoizedState,h===null)return ee(a),null;if(p=(a.flags&128)!==0,m=h.rendering,m===null)if(p)Ql(h,!1);else{if(ue!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(m=th(i),m!==null){for(a.flags|=128,Ql(h,!1),i=m.updateQueue,a.updateQueue=i,dh(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Cb(l,i),l=l.sibling;return st(ge,ge.current&1|2),Mt&&ci(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&Ee()>vh&&(a.flags|=128,p=!0,Ql(h,!1),a.lanes=4194304)}else{if(!p)if(i=th(m),i!==null){if(a.flags|=128,p=!0,i=i.updateQueue,a.updateQueue=i,dh(a,i),Ql(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Mt)return ee(a),null}else 2*Ee()-h.renderingStartTime>vh&&l!==536870912&&(a.flags|=128,p=!0,Ql(h,!1),a.lanes=4194304);h.isBackwards?(m.sibling=a.child,a.child=m):(i=h.last,i!==null?i.sibling=m:a.child=m,h.last=m)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Ee(),i.sibling=null,l=ge.current,st(ge,p?l&1|2:l&1),Mt&&ci(a,h.treeForkCount),i):(ee(a),null);case 22:case 23:return An(a),sp(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(ee(a),a.subtreeFlags&6&&(a.flags|=8192)):ee(a),l=a.updateQueue,l!==null&&dh(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&Q(ea),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),hi(Se),ee(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function hA(i,a){switch(Xg(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return hi(Se),kt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Hn(a),null;case 31:if(a.memoizedState!==null){if(An(a),a.alternate===null)throw Error(n(340));Zs()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(An(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Zs()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Q(ge),null;case 4:return kt(),null;case 10:return hi(a.type),null;case 22:case 23:return An(a),sp(),i!==null&&Q(ea),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return hi(Se),null;case 25:return null;default:return null}}function QS(i,a){switch(Xg(a),a.tag){case 3:hi(Se),kt();break;case 26:case 27:case 5:Hn(a);break;case 4:kt();break;case 31:a.memoizedState!==null&&An(a);break;case 13:An(a);break;case 19:Q(ge);break;case 10:hi(a.type);break;case 22:case 23:An(a),sp(),i!==null&&Q(ea);break;case 24:hi(Se)}}function Zl(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&i)===i){h=void 0;var m=l.create,x=l.inst;h=m(),x.destroy=h}l=l.next}while(l!==p)}}catch(C){Vt(a,a.return,C)}}function ls(i,a,l){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var m=p.next;h=m;do{if((h.tag&i)===i){var x=h.inst,C=x.destroy;if(C!==void 0){x.destroy=void 0,p=a;var N=l,W=C;try{W()}catch(tt){Vt(p,N,tt)}}}h=h.next}while(h!==m)}}catch(tt){Vt(a,a.return,tt)}}function ZS(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{Yb(a,l)}catch(h){Vt(i,i.return,h)}}}function JS(i,a,l){l.props=aa(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Vt(i,a,h)}}function Jl(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(p){Vt(i,a,p)}}function kr(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(p){Vt(i,a,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){Vt(i,a,p)}else l.current=null}function t1(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(p){Vt(i,i.return,p)}}function zp(i,a,l){try{var h=i.stateNode;RA(h,i.type,l,a),h[on]=a}catch(p){Vt(i,i.return,p)}}function e1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ps(i.type)||i.tag===4}function Up(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||e1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ps(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Fp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=ai));else if(h!==4&&(h===27&&ps(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Fp(i,a,l),i=i.sibling;i!==null;)Fp(i,a,l),i=i.sibling}function gh(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&ps(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(gh(i,a,l),i=i.sibling;i!==null;)gh(i,a,l),i=i.sibling}function n1(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Ye(a,h,l),a[Ue]=i,a[on]=l}catch(m){Vt(i,i.return,m)}}var mi=!1,_e=!1,Pp=!1,r1=typeof WeakSet=="function"?WeakSet:Set,Le=null;function fA(i,a){if(i=i.containerInfo,om=Nh,i=pb(i),Rg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else t:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break t}var x=0,C=-1,N=-1,W=0,tt=0,it=i,K=null;e:for(;;){for(var J;it!==l||p!==0&&it.nodeType!==3||(C=x+p),it!==m||h!==0&&it.nodeType!==3||(N=x+h),it.nodeType===3&&(x+=it.nodeValue.length),(J=it.firstChild)!==null;)K=it,it=J;for(;;){if(it===i)break e;if(K===l&&++W===p&&(C=x),K===m&&++tt===h&&(N=x),(J=it.nextSibling)!==null)break;it=K,K=it.parentNode}it=J}l=C===-1||N===-1?null:{start:C,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(lm={focusedElem:i,selectionRange:l},Nh=!1,Le=a;Le!==null;)if(a=Le,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Le=i;else for(;Le!==null;){switch(a=Le,m=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)p=i[l],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,l=a,p=m.memoizedProps,m=m.memoizedState,h=l.stateNode;try{var dt=aa(l.type,p);i=h.getSnapshotBeforeUpdate(dt,m),h.__reactInternalSnapshotBeforeUpdate=i}catch(bt){Vt(l,l.return,bt)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)hm(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":hm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,Le=i;break}Le=a.return}}function i1(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:vi(i,l),h&4&&Zl(5,l);break;case 1:if(vi(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(x){Vt(l,l.return,x)}else{var p=aa(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(p,a,i.__reactInternalSnapshotBeforeUpdate)}catch(x){Vt(l,l.return,x)}}h&64&&ZS(l),h&512&&Jl(l,l.return);break;case 3:if(vi(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Yb(i,a)}catch(x){Vt(l,l.return,x)}}break;case 27:a===null&&h&4&&n1(l);case 26:case 5:vi(i,l),a===null&&h&4&&t1(l),h&512&&Jl(l,l.return);break;case 12:vi(i,l);break;case 31:vi(i,l),h&4&&o1(i,l);break;case 13:vi(i,l),h&4&&l1(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=xA.bind(null,l),HA(i,l))));break;case 22:if(h=l.memoizedState!==null||mi,!h){a=a!==null&&a.memoizedState!==null||_e,p=mi;var m=_e;mi=h,(_e=a)&&!m?bi(i,l,(l.subtreeFlags&8772)!==0):vi(i,l),mi=p,_e=m}break;case 30:break;default:vi(i,l)}}function s1(i){var a=i.alternate;a!==null&&(i.alternate=null,s1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&mg(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ne=null,cn=!1;function yi(i,a,l){for(l=l.child;l!==null;)a1(i,a,l),l=l.sibling}function a1(i,a,l){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Cn,l)}catch{}switch(l.tag){case 26:_e||kr(l,a),yi(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:_e||kr(l,a);var h=ne,p=cn;ps(l.type)&&(ne=l.stateNode,cn=!1),yi(i,a,l),lc(l.stateNode),ne=h,cn=p;break;case 5:_e||kr(l,a);case 6:if(h=ne,p=cn,ne=null,yi(i,a,l),ne=h,cn=p,ne!==null)if(cn)try{(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).removeChild(l.stateNode)}catch(m){Vt(l,a,m)}else try{ne.removeChild(l.stateNode)}catch(m){Vt(l,a,m)}break;case 18:ne!==null&&(cn?(i=ne,Z1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Ao(i)):Z1(ne,l.stateNode));break;case 4:h=ne,p=cn,ne=l.stateNode.containerInfo,cn=!0,yi(i,a,l),ne=h,cn=p;break;case 0:case 11:case 14:case 15:ls(2,l,a),_e||ls(4,l,a),yi(i,a,l);break;case 1:_e||(kr(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&JS(l,a,h)),yi(i,a,l);break;case 21:yi(i,a,l);break;case 22:_e=(h=_e)||l.memoizedState!==null,yi(i,a,l),_e=h;break;default:yi(i,a,l)}}function o1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ao(i)}catch(l){Vt(a,a.return,l)}}}function l1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ao(i)}catch(l){Vt(a,a.return,l)}}function dA(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new r1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new r1),a;default:throw Error(n(435,i.tag))}}function ph(i,a){var l=dA(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var p=wA.bind(null,i,h);h.then(p,p)}})}function un(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h],m=i,x=a,C=x;t:for(;C!==null;){switch(C.tag){case 27:if(ps(C.type)){ne=C.stateNode,cn=!1;break t}break;case 5:ne=C.stateNode,cn=!1;break t;case 3:case 4:ne=C.stateNode.containerInfo,cn=!0;break t}C=C.return}if(ne===null)throw Error(n(160));a1(m,x,p),ne=null,cn=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)c1(a,i),a=a.sibling}var fr=null;function c1(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:un(a,i),hn(i),h&4&&(ls(3,i,i.return),Zl(3,i),ls(5,i,i.return));break;case 1:un(a,i),hn(i),h&512&&(_e||l===null||kr(l,l.return)),h&64&&mi&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var p=fr;if(un(a,i),hn(i),h&512&&(_e||l===null||kr(l,l.return)),h&4){var m=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){t:{h=i.type,l=i.memoizedProps,p=p.ownerDocument||p;e:switch(h){case"title":m=p.getElementsByTagName("title")[0],(!m||m[El]||m[Ue]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(h),p.head.insertBefore(m,p.querySelector("head > title"))),Ye(m,h,l),m[Ue]=i,Re(m),h=m;break t;case"link":var x=cx("link","href",p).get(h+(l.href||""));if(x){for(var C=0;C<x.length;C++)if(m=x[C],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(C,1);break e}}m=p.createElement(h),Ye(m,h,l),p.head.appendChild(m);break;case"meta":if(x=cx("meta","content",p).get(h+(l.content||""))){for(C=0;C<x.length;C++)if(m=x[C],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(C,1);break e}}m=p.createElement(h),Ye(m,h,l),p.head.appendChild(m);break;default:throw Error(n(468,h))}m[Ue]=i,Re(m),h=m}i.stateNode=h}else ux(p,i.type,i.stateNode);else i.stateNode=lx(p,h,i.memoizedProps);else m!==h?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,h===null?ux(p,i.type,i.stateNode):lx(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&zp(i,i.memoizedProps,l.memoizedProps)}break;case 27:un(a,i),hn(i),h&512&&(_e||l===null||kr(l,l.return)),l!==null&&h&4&&zp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(un(a,i),hn(i),h&512&&(_e||l===null||kr(l,l.return)),i.flags&32){p=i.stateNode;try{Ka(p,"")}catch(dt){Vt(i,i.return,dt)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,zp(i,p,l!==null?l.memoizedProps:p)),h&1024&&(Pp=!0);break;case 6:if(un(a,i),hn(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(dt){Vt(i,i.return,dt)}}break;case 3:if(Mh=null,p=fr,fr=Dh(a.containerInfo),un(a,i),fr=p,hn(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Ao(a.containerInfo)}catch(dt){Vt(i,i.return,dt)}Pp&&(Pp=!1,u1(i));break;case 4:h=fr,fr=Dh(i.stateNode.containerInfo),un(a,i),hn(i),fr=h;break;case 12:un(a,i),hn(i);break;case 31:un(a,i),hn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,ph(i,h)));break;case 13:un(a,i),hn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(yh=Ee()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,ph(i,h)));break;case 22:p=i.memoizedState!==null;var N=l!==null&&l.memoizedState!==null,W=mi,tt=_e;if(mi=W||p,_e=tt||N,un(a,i),_e=tt,mi=W,hn(i),h&8192)t:for(a=i.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(l===null||N||mi||_e||oa(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){N=l=a;try{if(m=N.stateNode,p)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{C=N.stateNode;var it=N.memoizedProps.style,K=it!=null&&it.hasOwnProperty("display")?it.display:null;C.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(dt){Vt(N,N.return,dt)}}}else if(a.tag===6){if(l===null){N=a;try{N.stateNode.nodeValue=p?"":N.memoizedProps}catch(dt){Vt(N,N.return,dt)}}}else if(a.tag===18){if(l===null){N=a;try{var J=N.stateNode;p?J1(J,!0):J1(N.stateNode,!1)}catch(dt){Vt(N,N.return,dt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,ph(i,l))));break;case 19:un(a,i),hn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,ph(i,h)));break;case 30:break;case 21:break;default:un(a,i),hn(i)}}function hn(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(e1(h)){l=h;break}h=h.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,m=Up(i);gh(i,m,p);break;case 5:var x=l.stateNode;l.flags&32&&(Ka(x,""),l.flags&=-33);var C=Up(i);gh(i,C,x);break;case 3:case 4:var N=l.stateNode.containerInfo,W=Up(i);Fp(i,W,N);break;default:throw Error(n(161))}}catch(tt){Vt(i,i.return,tt)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function u1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;u1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function vi(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)i1(i,a.alternate,a),a=a.sibling}function oa(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:ls(4,a,a.return),oa(a);break;case 1:kr(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&JS(a,a.return,l),oa(a);break;case 27:lc(a.stateNode);case 26:case 5:kr(a,a.return),oa(a);break;case 22:a.memoizedState===null&&oa(a);break;case 30:oa(a);break;default:oa(a)}i=i.sibling}}function bi(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=i,m=a,x=m.flags;switch(m.tag){case 0:case 11:case 15:bi(p,m,l),Zl(4,m);break;case 1:if(bi(p,m,l),h=m,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(W){Vt(h,h.return,W)}if(h=m,p=h.updateQueue,p!==null){var C=h.stateNode;try{var N=p.shared.hiddenCallbacks;if(N!==null)for(p.shared.hiddenCallbacks=null,p=0;p<N.length;p++)Hb(N[p],C)}catch(W){Vt(h,h.return,W)}}l&&x&64&&ZS(m),Jl(m,m.return);break;case 27:n1(m);case 26:case 5:bi(p,m,l),l&&h===null&&x&4&&t1(m),Jl(m,m.return);break;case 12:bi(p,m,l);break;case 31:bi(p,m,l),l&&x&4&&o1(p,m);break;case 13:bi(p,m,l),l&&x&4&&l1(p,m);break;case 22:m.memoizedState===null&&bi(p,m,l),Jl(m,m.return);break;case 30:break;default:bi(p,m,l)}a=a.sibling}}function Hp(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Fl(l))}function Yp(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Fl(i))}function dr(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)h1(i,a,l,h),a=a.sibling}function h1(i,a,l,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:dr(i,a,l,h),p&2048&&Zl(9,a);break;case 1:dr(i,a,l,h);break;case 3:dr(i,a,l,h),p&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Fl(i)));break;case 12:if(p&2048){dr(i,a,l,h),i=a.stateNode;try{var m=a.memoizedProps,x=m.id,C=m.onPostCommit;typeof C=="function"&&C(x,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){Vt(a,a.return,N)}}else dr(i,a,l,h);break;case 31:dr(i,a,l,h);break;case 13:dr(i,a,l,h);break;case 23:break;case 22:m=a.stateNode,x=a.alternate,a.memoizedState!==null?m._visibility&2?dr(i,a,l,h):tc(i,a):m._visibility&2?dr(i,a,l,h):(m._visibility|=2,yo(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Hp(x,a);break;case 24:dr(i,a,l,h),p&2048&&Yp(a.alternate,a);break;default:dr(i,a,l,h)}}function yo(i,a,l,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=i,x=a,C=l,N=h,W=x.flags;switch(x.tag){case 0:case 11:case 15:yo(m,x,C,N,p),Zl(8,x);break;case 23:break;case 22:var tt=x.stateNode;x.memoizedState!==null?tt._visibility&2?yo(m,x,C,N,p):tc(m,x):(tt._visibility|=2,yo(m,x,C,N,p)),p&&W&2048&&Hp(x.alternate,x);break;case 24:yo(m,x,C,N,p),p&&W&2048&&Yp(x.alternate,x);break;default:yo(m,x,C,N,p)}a=a.sibling}}function tc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,p=h.flags;switch(h.tag){case 22:tc(l,h),p&2048&&Hp(h.alternate,h);break;case 24:tc(l,h),p&2048&&Yp(h.alternate,h);break;default:tc(l,h)}a=a.sibling}}var ec=8192;function vo(i,a,l){if(i.subtreeFlags&ec)for(i=i.child;i!==null;)f1(i,a,l),i=i.sibling}function f1(i,a,l){switch(i.tag){case 26:vo(i,a,l),i.flags&ec&&i.memoizedState!==null&&JA(l,fr,i.memoizedState,i.memoizedProps);break;case 5:vo(i,a,l);break;case 3:case 4:var h=fr;fr=Dh(i.stateNode.containerInfo),vo(i,a,l),fr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=ec,ec=16777216,vo(i,a,l),ec=h):vo(i,a,l));break;default:vo(i,a,l)}}function d1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function nc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Le=h,p1(h,i)}d1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)g1(i),i=i.sibling}function g1(i){switch(i.tag){case 0:case 11:case 15:nc(i),i.flags&2048&&ls(9,i,i.return);break;case 3:nc(i);break;case 12:nc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,mh(i)):nc(i);break;default:nc(i)}}function mh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Le=h,p1(h,i)}d1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:ls(8,a,a.return),mh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,mh(a));break;default:mh(a)}i=i.sibling}}function p1(i,a){for(;Le!==null;){var l=Le;switch(l.tag){case 0:case 11:case 15:ls(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Fl(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Le=h;else t:for(l=i;Le!==null;){h=Le;var p=h.sibling,m=h.return;if(s1(h),h===l){Le=null;break t}if(p!==null){p.return=m,Le=p;break t}Le=m}}}var gA={getCacheForType:function(i){var a=Pe(Se),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Pe(Se).controller.signal}},pA=typeof WeakMap=="function"?WeakMap:Map,Ut=0,Qt=null,Et=null,At=0,Yt=0,Dn=null,cs=!1,bo=!1,Vp=!1,Si=0,ue=0,us=0,la=0,Xp=0,kn=0,So=0,rc=null,fn=null,Gp=!1,yh=0,m1=0,vh=1/0,bh=null,hs=null,Ae=0,fs=null,xo=null,xi=0,Ip=0,$p=null,y1=null,ic=0,Wp=null;function Mn(){return(Ut&2)!==0&&At!==0?At&-At:A.T!==null?tm():Rv()}function v1(){if(kn===0)if((At&536870912)===0||Mt){var i=Ha;Ha<<=1,(Ha&3932160)===0&&(Ha=262144),kn=i}else kn=536870912;return i=On.current,i!==null&&(i.flags|=32),kn}function dn(i,a,l){(i===Qt&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)&&(wo(i,0),ds(i,At,kn,!1)),Tl(i,l),((Ut&2)===0||i!==Qt)&&(i===Qt&&((Ut&2)===0&&(la|=l),ue===4&&ds(i,At,kn,!1)),Mr(i))}function b1(i,a,l){if((Ut&6)!==0)throw Error(n(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||Gs(i,a),p=h?vA(i,a):Kp(i,a,!0),m=h;do{if(p===0){bo&&!h&&ds(i,a,0,!1);break}else{if(l=i.current.alternate,m&&!mA(l)){p=Kp(i,a,!1),m=!1;continue}if(p===2){if(m=a,i.errorRecoveryDisabledLanes&m)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;t:{var C=i;p=rc;var N=C.current.memoizedState.isDehydrated;if(N&&(wo(C,x).flags|=256),x=Kp(C,x,!1),x!==2){if(Vp&&!N){C.errorRecoveryDisabledLanes|=m,la|=m,p=4;break t}m=fn,fn=p,m!==null&&(fn===null?fn=m:fn.push.apply(fn,m))}p=x}if(m=!1,p!==2)continue}}if(p===1){wo(i,0),ds(i,a,0,!0);break}t:{switch(h=i,m=p,m){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:ds(h,a,kn,!cs);break t;case 2:fn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(p=yh+300-Ee(),10<p)){if(ds(h,a,kn,!cs),Va(h,0,!0)!==0)break t;xi=a,h.timeoutHandle=K1(S1.bind(null,h,l,fn,bh,Gp,a,kn,la,So,cs,m,"Throttled",-0,0),p);break t}S1(h,l,fn,bh,Gp,a,kn,la,So,cs,m,null,-0,0)}}break}while(!0);Mr(i)}function S1(i,a,l,h,p,m,x,C,N,W,tt,it,K,J){if(i.timeoutHandle=-1,it=a.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},f1(a,m,it);var dt=(m&62914560)===m?yh-Ee():(m&4194048)===m?m1-Ee():0;if(dt=tD(it,dt),dt!==null){xi=m,i.cancelPendingCommit=dt(A1.bind(null,i,a,m,l,h,p,x,C,N,tt,it,null,K,J)),ds(i,m,x,!W);return}}A1(i,a,m,l,h,p,x,C,N)}function mA(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var p=l[h],m=p.getSnapshot;p=p.value;try{if(!Tn(m(),p))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ds(i,a,l,h){a&=~Xp,a&=~la,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var p=a;0<p;){var m=31-ze(p),x=1<<m;h[m]=-1,p&=~x}l!==0&&kv(i,l,a)}function Sh(){return(Ut&6)===0?(sc(0),!1):!0}function qp(){if(Et!==null){if(Yt===0)var i=Et.return;else i=Et,ui=Js=null,hp(i),ho=null,Hl=0,i=Et;for(;i!==null;)QS(i.alternate,i),i=i.return;Et=null}}function wo(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,BA(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),xi=0,qp(),Qt=i,Et=l=li(i.current,null),At=a,Yt=0,Dn=null,cs=!1,bo=Gs(i,a),Vp=!1,So=kn=Xp=la=us=ue=0,fn=rc=null,Gp=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var p=31-ze(h),m=1<<p;a|=i[p],h&=~m}return Si=a,Hu(),l}function x1(i,a){_t=null,A.H=ql,a===uo||a===qu?(a=zb(),Yt=3):a===Jg?(a=zb(),Yt=4):Yt=a===Op?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Dn=a,Et===null&&(ue=1,ch(i,In(a,i.current)))}function w1(){var i=On.current;return i===null?!0:(At&4194048)===At?Kn===null:(At&62914560)===At||(At&536870912)!==0?i===Kn:!1}function _1(){var i=A.H;return A.H=ql,i===null?ql:i}function C1(){var i=A.A;return A.A=gA,i}function xh(){ue=4,cs||(At&4194048)!==At&&On.current!==null||(bo=!0),(us&134217727)===0&&(la&134217727)===0||Qt===null||ds(Qt,At,kn,!1)}function Kp(i,a,l){var h=Ut;Ut|=2;var p=_1(),m=C1();(Qt!==i||At!==a)&&(bh=null,wo(i,a)),a=!1;var x=ue;t:do try{if(Yt!==0&&Et!==null){var C=Et,N=Dn;switch(Yt){case 8:qp(),x=6;break t;case 3:case 2:case 9:case 6:On.current===null&&(a=!0);var W=Yt;if(Yt=0,Dn=null,_o(i,C,N,W),l&&bo){x=0;break t}break;default:W=Yt,Yt=0,Dn=null,_o(i,C,N,W)}}yA(),x=ue;break}catch(tt){x1(i,tt)}while(!0);return a&&i.shellSuspendCounter++,ui=Js=null,Ut=h,A.H=p,A.A=m,Et===null&&(Qt=null,At=0,Hu()),x}function yA(){for(;Et!==null;)T1(Et)}function vA(i,a){var l=Ut;Ut|=2;var h=_1(),p=C1();Qt!==i||At!==a?(bh=null,vh=Ee()+500,wo(i,a)):bo=Gs(i,a);t:do try{if(Yt!==0&&Et!==null){a=Et;var m=Dn;e:switch(Yt){case 1:Yt=0,Dn=null,_o(i,a,m,1);break;case 2:case 9:if(Nb(m)){Yt=0,Dn=null,E1(a);break}a=function(){Yt!==2&&Yt!==9||Qt!==i||(Yt=7),Mr(i)},m.then(a,a);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:Nb(m)?(Yt=0,Dn=null,E1(a)):(Yt=0,Dn=null,_o(i,a,m,7));break;case 5:var x=null;switch(Et.tag){case 26:x=Et.memoizedState;case 5:case 27:var C=Et;if(x?hx(x):C.stateNode.complete){Yt=0,Dn=null;var N=C.sibling;if(N!==null)Et=N;else{var W=C.return;W!==null?(Et=W,wh(W)):Et=null}break e}}Yt=0,Dn=null,_o(i,a,m,5);break;case 6:Yt=0,Dn=null,_o(i,a,m,6);break;case 8:qp(),ue=6;break t;default:throw Error(n(462))}}bA();break}catch(tt){x1(i,tt)}while(!0);return ui=Js=null,A.H=h,A.A=p,Ut=l,Et!==null?0:(Qt=null,At=0,Hu(),ue)}function bA(){for(;Et!==null&&!Ps();)T1(Et)}function T1(i){var a=qS(i.alternate,i,Si);i.memoizedProps=i.pendingProps,a===null?wh(i):Et=a}function E1(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=VS(l,a,a.pendingProps,a.type,void 0,At);break;case 11:a=VS(l,a,a.pendingProps,a.type.render,a.ref,At);break;case 5:hp(a);default:QS(l,a),a=Et=Cb(a,Si),a=qS(l,a,Si)}i.memoizedProps=i.pendingProps,a===null?wh(i):Et=a}function _o(i,a,l,h){ui=Js=null,hp(a),ho=null,Hl=0;var p=a.return;try{if(oA(i,p,a,l,At)){ue=1,ch(i,In(l,i.current)),Et=null;return}}catch(m){if(p!==null)throw Et=p,m;ue=1,ch(i,In(l,i.current)),Et=null;return}a.flags&32768?(Mt||h===1?i=!0:bo||(At&536870912)!==0?i=!1:(cs=i=!0,(h===2||h===9||h===3||h===6)&&(h=On.current,h!==null&&h.tag===13&&(h.flags|=16384))),O1(a,i)):wh(a)}function wh(i){var a=i;do{if((a.flags&32768)!==0){O1(a,cs);return}i=a.return;var l=uA(a.alternate,a,Si);if(l!==null){Et=l;return}if(a=a.sibling,a!==null){Et=a;return}Et=a=i}while(a!==null);ue===0&&(ue=5)}function O1(i,a){do{var l=hA(i.alternate,i);if(l!==null){l.flags&=32767,Et=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Et=i;return}Et=i=l}while(i!==null);ue=6,Et=null}function A1(i,a,l,h,p,m,x,C,N){i.cancelPendingCommit=null;do _h();while(Ae!==0);if((Ut&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(m=a.lanes|a.childLanes,m|=Ug,ZE(i,l,m,x,C,N),i===Qt&&(Et=Qt=null,At=0),xo=a,fs=i,xi=l,Ip=m,$p=p,y1=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_A(ri,function(){return R1(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=A.T,A.T=null,p=P.p,P.p=2,x=Ut,Ut|=4;try{fA(i,a,l)}finally{Ut=x,P.p=p,A.T=h}}Ae=1,D1(),k1(),M1()}}function D1(){if(Ae===1){Ae=0;var i=fs,a=xo,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=A.T,A.T=null;var h=P.p;P.p=2;var p=Ut;Ut|=4;try{c1(a,i);var m=lm,x=pb(i.containerInfo),C=m.focusedElem,N=m.selectionRange;if(x!==C&&C&&C.ownerDocument&&gb(C.ownerDocument.documentElement,C)){if(N!==null&&Rg(C)){var W=N.start,tt=N.end;if(tt===void 0&&(tt=W),"selectionStart"in C)C.selectionStart=W,C.selectionEnd=Math.min(tt,C.value.length);else{var it=C.ownerDocument||document,K=it&&it.defaultView||window;if(K.getSelection){var J=K.getSelection(),dt=C.textContent.length,bt=Math.min(N.start,dt),qt=N.end===void 0?bt:Math.min(N.end,dt);!J.extend&&bt>qt&&(x=qt,qt=bt,bt=x);var G=db(C,bt),H=db(C,qt);if(G&&H&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==H.node||J.focusOffset!==H.offset)){var $=it.createRange();$.setStart(G.node,G.offset),J.removeAllRanges(),bt>qt?(J.addRange($),J.extend(H.node,H.offset)):($.setEnd(H.node,H.offset),J.addRange($))}}}}for(it=[],J=C;J=J.parentNode;)J.nodeType===1&&it.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<it.length;C++){var nt=it[C];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}Nh=!!om,lm=om=null}finally{Ut=p,P.p=h,A.T=l}}i.current=a,Ae=2}}function k1(){if(Ae===2){Ae=0;var i=fs,a=xo,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=A.T,A.T=null;var h=P.p;P.p=2;var p=Ut;Ut|=4;try{i1(i,a.alternate,a)}finally{Ut=p,P.p=h,A.T=l}}Ae=3}}function M1(){if(Ae===4||Ae===3){Ae=0,Hs();var i=fs,a=xo,l=xi,h=y1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ae=5:(Ae=0,xo=fs=null,j1(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(hs=null),gg(l),a=a.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Cn,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=A.T,p=P.p,P.p=2,A.T=null;try{for(var m=i.onRecoverableError,x=0;x<h.length;x++){var C=h[x];m(C.value,{componentStack:C.stack})}}finally{A.T=a,P.p=p}}(xi&3)!==0&&_h(),Mr(i),p=i.pendingLanes,(l&261930)!==0&&(p&42)!==0?i===Wp?ic++:(ic=0,Wp=i):ic=0,sc(0)}}function j1(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Fl(a)))}function _h(){return D1(),k1(),M1(),R1()}function R1(){if(Ae!==5)return!1;var i=fs,a=Ip;Ip=0;var l=gg(xi),h=A.T,p=P.p;try{P.p=32>l?32:l,A.T=null,l=$p,$p=null;var m=fs,x=xi;if(Ae=0,xo=fs=null,xi=0,(Ut&6)!==0)throw Error(n(331));var C=Ut;if(Ut|=4,g1(m.current),h1(m,m.current,x,l),Ut=C,sc(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Cn,m)}catch{}return!0}finally{P.p=p,A.T=h,j1(i,a)}}function L1(i,a,l){a=In(l,a),a=Ep(i.stateNode,a,2),i=ss(i,a,2),i!==null&&(Tl(i,2),Mr(i))}function Vt(i,a,l){if(i.tag===3)L1(i,i,l);else for(;a!==null;){if(a.tag===3){L1(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(hs===null||!hs.has(h))){i=In(l,i),l=NS(2),h=ss(a,l,2),h!==null&&(BS(l,h,a,i),Tl(h,2),Mr(h));break}}a=a.return}}function Qp(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new pA;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(l)||(Vp=!0,p.add(l),i=SA.bind(null,i,a,l),a.then(i,i))}function SA(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Qt===i&&(At&l)===l&&(ue===4||ue===3&&(At&62914560)===At&&300>Ee()-yh?(Ut&2)===0&&wo(i,0):Xp|=l,So===At&&(So=0)),Mr(i)}function N1(i,a){a===0&&(a=wt()),i=Ks(i,a),i!==null&&(Tl(i,a),Mr(i))}function xA(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),N1(i,l)}function wA(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),N1(i,l)}function _A(i,a){return an(i,a)}var Ch=null,Co=null,Zp=!1,Th=!1,Jp=!1,gs=0;function Mr(i){i!==Co&&i.next===null&&(Co===null?Ch=Co=i:Co=Co.next=i),Th=!0,Zp||(Zp=!0,TA())}function sc(i,a){if(!Jp&&Th){Jp=!0;do for(var l=!1,h=Ch;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var m=0;else{var x=h.suspendedLanes,C=h.pingedLanes;m=(1<<31-ze(42|i)+1)-1,m&=p&~(x&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,F1(h,m))}else m=At,m=Va(h,h===Qt?m:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(m&3)===0||Gs(h,m)||(l=!0,F1(h,m));h=h.next}while(l);Jp=!1}}function CA(){B1()}function B1(){Th=Zp=!1;var i=0;gs!==0&&NA()&&(i=gs);for(var a=Ee(),l=null,h=Ch;h!==null;){var p=h.next,m=z1(h,a);m===0?(h.next=null,l===null?Ch=p:l.next=p,p===null&&(Co=l)):(l=h,(i!==0||(m&3)!==0)&&(Th=!0)),h=p}Ae!==0&&Ae!==5||sc(i),gs!==0&&(gs=0)}function z1(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var x=31-ze(m),C=1<<x,N=p[x];N===-1?((C&l)===0||(C&h)!==0)&&(p[x]=fg(C,a)):N<=a&&(i.expiredLanes|=C),m&=~C}if(a=Qt,l=At,l=Va(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&ur(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Gs(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&ur(h),gg(l)){case 2:case 8:l=ni;break;case 32:l=ri;break;case 268435456:l=Ua;break;default:l=ri}return h=U1.bind(null,i),l=an(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&ur(h),i.callbackPriority=2,i.callbackNode=null,2}function U1(i,a){if(Ae!==0&&Ae!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(_h()&&i.callbackNode!==l)return null;var h=At;return h=Va(i,i===Qt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(b1(i,h,a),z1(i,Ee()),i.callbackNode!=null&&i.callbackNode===l?U1.bind(null,i):null)}function F1(i,a){if(_h())return null;b1(i,a,!0)}function TA(){zA(function(){(Ut&6)!==0?an(Ys,CA):B1()})}function tm(){if(gs===0){var i=lo;i===0&&(i=Pa,Pa<<=1,(Pa&261888)===0&&(Pa=256)),gs=i}return gs}function P1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ru(""+i)}function H1(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function EA(i,a,l,h,p){if(a==="submit"&&l&&l.stateNode===p){var m=P1((p[on]||null).action),x=h.submitter;x&&(a=(a=x[on]||null)?P1(a.formAction):x.getAttribute("formAction"),a!==null&&(m=a,x=null));var C=new zu("action","action",null,h,p);i.push({event:C,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(gs!==0){var N=x?H1(p,x):new FormData(p);Sp(l,{pending:!0,data:N,method:p.method,action:m},null,N)}}else typeof m=="function"&&(C.preventDefault(),N=x?H1(p,x):new FormData(p),Sp(l,{pending:!0,data:N,method:p.method,action:m},m,N))},currentTarget:p}]})}}for(var em=0;em<zg.length;em++){var nm=zg[em],OA=nm.toLowerCase(),AA=nm[0].toUpperCase()+nm.slice(1);hr(OA,"on"+AA)}hr(vb,"onAnimationEnd"),hr(bb,"onAnimationIteration"),hr(Sb,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(XO,"onTransitionRun"),hr(GO,"onTransitionStart"),hr(IO,"onTransitionCancel"),hr(xb,"onTransitionEnd"),Wa("onMouseEnter",["mouseout","mouseover"]),Wa("onMouseLeave",["mouseout","mouseover"]),Wa("onPointerEnter",["pointerout","pointerover"]),Wa("onPointerLeave",["pointerout","pointerover"]),Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Is("onBeforeInput",["compositionend","keypress","textInput","paste"]),Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function Y1(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;t:{var m=void 0;if(a)for(var x=h.length-1;0<=x;x--){var C=h[x],N=C.instance,W=C.currentTarget;if(C=C.listener,N!==m&&p.isPropagationStopped())break t;m=C,p.currentTarget=W;try{m(p)}catch(tt){Pu(tt)}p.currentTarget=null,m=N}else for(x=0;x<h.length;x++){if(C=h[x],N=C.instance,W=C.currentTarget,C=C.listener,N!==m&&p.isPropagationStopped())break t;m=C,p.currentTarget=W;try{m(p)}catch(tt){Pu(tt)}p.currentTarget=null,m=N}}}}function Ot(i,a){var l=a[pg];l===void 0&&(l=a[pg]=new Set);var h=i+"__bubble";l.has(h)||(V1(a,i,2,!1),l.add(h))}function rm(i,a,l){var h=0;a&&(h|=4),V1(l,i,h,a)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function im(i){if(!i[Eh]){i[Eh]=!0,Bv.forEach(function(l){l!=="selectionchange"&&(DA.has(l)||rm(l,!1,i),rm(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Eh]||(a[Eh]=!0,rm("selectionchange",!1,a))}}function V1(i,a,l,h){switch(vx(a)){case 2:var p=rD;break;case 8:p=iD;break;default:p=bm}l=p.bind(null,a,l,i),p=void 0,!Cg||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(a,l,{capture:!0,passive:p}):i.addEventListener(a,l,!0):p!==void 0?i.addEventListener(a,l,{passive:p}):i.addEventListener(a,l,!1)}function sm(i,a,l,h,p){var m=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var C=h.stateNode.containerInfo;if(C===p)break;if(x===4)for(x=h.return;x!==null;){var N=x.tag;if((N===3||N===4)&&x.stateNode.containerInfo===p)return;x=x.return}for(;C!==null;){if(x=Ga(C),x===null)return;if(N=x.tag,N===5||N===6||N===26||N===27){h=m=x;continue t}C=C.parentNode}}h=h.return}Wv(function(){var W=m,tt=wg(l),it=[];t:{var K=wb.get(i);if(K!==void 0){var J=zu,dt=i;switch(i){case"keypress":if(Nu(l)===0)break t;case"keydown":case"keyup":J=wO;break;case"focusin":dt="focus",J=Ag;break;case"focusout":dt="blur",J=Ag;break;case"beforeblur":case"afterblur":J=Ag;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Qv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=uO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=TO;break;case vb:case bb:case Sb:J=dO;break;case xb:J=OO;break;case"scroll":case"scrollend":J=lO;break;case"wheel":J=DO;break;case"copy":case"cut":case"paste":J=pO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Jv;break;case"toggle":case"beforetoggle":J=MO}var bt=(a&4)!==0,qt=!bt&&(i==="scroll"||i==="scrollend"),G=bt?K!==null?K+"Capture":null:K;bt=[];for(var H=W,$;H!==null;){var nt=H;if($=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||$===null||G===null||(nt=Al(H,G),nt!=null&&bt.push(oc(H,nt,$))),qt)break;H=H.return}0<bt.length&&(K=new J(K,dt,null,l,tt),it.push({event:K,listeners:bt}))}}if((a&7)===0){t:{if(K=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",K&&l!==xg&&(dt=l.relatedTarget||l.fromElement)&&(Ga(dt)||dt[Xa]))break t;if((J||K)&&(K=tt.window===tt?tt:(K=tt.ownerDocument)?K.defaultView||K.parentWindow:window,J?(dt=l.relatedTarget||l.toElement,J=W,dt=dt?Ga(dt):null,dt!==null&&(qt=o(dt),bt=dt.tag,dt!==qt||bt!==5&&bt!==27&&bt!==6)&&(dt=null)):(J=null,dt=W),J!==dt)){if(bt=Qv,nt="onMouseLeave",G="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(bt=Jv,nt="onPointerLeave",G="onPointerEnter",H="pointer"),qt=J==null?K:Ol(J),$=dt==null?K:Ol(dt),K=new bt(nt,H+"leave",J,l,tt),K.target=qt,K.relatedTarget=$,nt=null,Ga(tt)===W&&(bt=new bt(G,H+"enter",dt,l,tt),bt.target=$,bt.relatedTarget=qt,nt=bt),qt=nt,J&&dt)e:{for(bt=kA,G=J,H=dt,$=0,nt=G;nt;nt=bt(nt))$++;nt=0;for(var mt=H;mt;mt=bt(mt))nt++;for(;0<$-nt;)G=bt(G),$--;for(;0<nt-$;)H=bt(H),nt--;for(;$--;){if(G===H||H!==null&&G===H.alternate){bt=G;break e}G=bt(G),H=bt(H)}bt=null}else bt=null;J!==null&&X1(it,K,J,bt,!1),dt!==null&&qt!==null&&X1(it,qt,dt,bt,!0)}}t:{if(K=W?Ol(W):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var Bt=ob;else if(sb(K))if(lb)Bt=HO;else{Bt=FO;var pt=UO}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?W&&Sg(W.elementType)&&(Bt=ob):Bt=PO;if(Bt&&(Bt=Bt(i,W))){ab(it,Bt,l,tt);break t}pt&&pt(i,K,W),i==="focusout"&&W&&K.type==="number"&&W.memoizedProps.value!=null&&bg(K,"number",K.value)}switch(pt=W?Ol(W):window,i){case"focusin":(sb(pt)||pt.contentEditable==="true")&&(to=pt,Lg=W,Bl=null);break;case"focusout":Bl=Lg=to=null;break;case"mousedown":Ng=!0;break;case"contextmenu":case"mouseup":case"dragend":Ng=!1,mb(it,l,tt);break;case"selectionchange":if(VO)break;case"keydown":case"keyup":mb(it,l,tt)}var Ct;if(kg)t:{switch(i){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else Ja?rb(i,l)&&(Dt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Dt="onCompositionStart");Dt&&(tb&&l.locale!=="ko"&&(Ja||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&Ja&&(Ct=qv()):(Zi=tt,Tg="value"in Zi?Zi.value:Zi.textContent,Ja=!0)),pt=Oh(W,Dt),0<pt.length&&(Dt=new Zv(Dt,i,null,l,tt),it.push({event:Dt,listeners:pt}),Ct?Dt.data=Ct:(Ct=ib(l),Ct!==null&&(Dt.data=Ct)))),(Ct=RO?LO(i,l):NO(i,l))&&(Dt=Oh(W,"onBeforeInput"),0<Dt.length&&(pt=new Zv("onBeforeInput","beforeinput",null,l,tt),it.push({event:pt,listeners:Dt}),pt.data=Ct)),EA(it,i,W,l,tt)}Y1(it,a)})}function oc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Oh(i,a){for(var l=a+"Capture",h=[];i!==null;){var p=i,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Al(i,l),p!=null&&h.unshift(oc(i,p,m)),p=Al(i,a),p!=null&&h.push(oc(i,p,m))),i.tag===3)return h;i=i.return}return[]}function kA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function X1(i,a,l,h,p){for(var m=a._reactName,x=[];l!==null&&l!==h;){var C=l,N=C.alternate,W=C.stateNode;if(C=C.tag,N!==null&&N===h)break;C!==5&&C!==26&&C!==27||W===null||(N=W,p?(W=Al(l,m),W!=null&&x.unshift(oc(l,W,N))):p||(W=Al(l,m),W!=null&&x.push(oc(l,W,N)))),l=l.return}x.length!==0&&i.push({event:a,listeners:x})}var MA=/\r\n?/g,jA=/\u0000|\uFFFD/g;function G1(i){return(typeof i=="string"?i:""+i).replace(MA,`
`).replace(jA,"")}function I1(i,a){return a=G1(a),G1(i)===a}function Wt(i,a,l,h,p,m){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Ka(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Ka(i,""+h);break;case"className":Mu(i,"class",h);break;case"tabIndex":Mu(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Mu(i,l,h);break;case"style":Iv(i,h,m);break;case"data":if(a!=="object"){Mu(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Ru(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(a!=="input"&&Wt(i,a,"name",p.name,p,null),Wt(i,a,"formEncType",p.formEncType,p,null),Wt(i,a,"formMethod",p.formMethod,p,null),Wt(i,a,"formTarget",p.formTarget,p,null)):(Wt(i,a,"encType",p.encType,p,null),Wt(i,a,"method",p.method,p,null),Wt(i,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Ru(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=ai);break;case"onScroll":h!=null&&Ot("scroll",i);break;case"onScrollEnd":h!=null&&Ot("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Ru(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":Ot("beforetoggle",i),Ot("toggle",i),ku(i,"popover",h);break;case"xlinkActuate":si(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":si(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":si(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":si(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":si(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":si(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":si(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":si(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":si(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ku(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=aO.get(l)||l,ku(i,l,h))}}function am(i,a,l,h,p,m){switch(l){case"style":Iv(i,h,m);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(l=h.__html,l!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Ka(i,h):(typeof h=="number"||typeof h=="bigint")&&Ka(i,""+h);break;case"onScroll":h!=null&&Ot("scroll",i);break;case"onScrollEnd":h!=null&&Ot("scrollend",i);break;case"onClick":h!=null&&(i.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zv.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),a=l.slice(2,p?l.length-7:void 0),m=i[on]||null,m=m!=null?m[l]:null,typeof m=="function"&&i.removeEventListener(a,m,p),typeof h=="function")){typeof m!="function"&&m!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,p);break t}l in i?i[l]=h:h===!0?i.setAttribute(l,""):ku(i,l,h)}}}function Ye(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",i),Ot("load",i);var h=!1,p=!1,m;for(m in l)if(l.hasOwnProperty(m)){var x=l[m];if(x!=null)switch(m){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:Wt(i,a,m,x,l,null)}}p&&Wt(i,a,"srcSet",l.srcSet,l,null),h&&Wt(i,a,"src",l.src,l,null);return;case"input":Ot("invalid",i);var C=m=x=p=null,N=null,W=null;for(h in l)if(l.hasOwnProperty(h)){var tt=l[h];if(tt!=null)switch(h){case"name":p=tt;break;case"type":x=tt;break;case"checked":N=tt;break;case"defaultChecked":W=tt;break;case"value":m=tt;break;case"defaultValue":C=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(n(137,a));break;default:Wt(i,a,h,tt,l,null)}}Yv(i,m,C,N,W,x,p,!1);return;case"select":Ot("invalid",i),h=x=m=null;for(p in l)if(l.hasOwnProperty(p)&&(C=l[p],C!=null))switch(p){case"value":m=C;break;case"defaultValue":x=C;break;case"multiple":h=C;default:Wt(i,a,p,C,l,null)}a=m,l=x,i.multiple=!!h,a!=null?qa(i,!!h,a,!1):l!=null&&qa(i,!!h,l,!0);return;case"textarea":Ot("invalid",i),m=p=h=null;for(x in l)if(l.hasOwnProperty(x)&&(C=l[x],C!=null))switch(x){case"value":h=C;break;case"defaultValue":p=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(n(91));break;default:Wt(i,a,x,C,l,null)}Xv(i,h,p,m);return;case"option":for(N in l)if(l.hasOwnProperty(N)&&(h=l[N],h!=null))switch(N){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Wt(i,a,N,h,l,null)}return;case"dialog":Ot("beforetoggle",i),Ot("toggle",i),Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":Ot("load",i);break;case"video":case"audio":for(h=0;h<ac.length;h++)Ot(ac[h],i);break;case"image":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"embed":case"source":case"link":Ot("error",i),Ot("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(h=l[W],h!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:Wt(i,a,W,h,l,null)}return;default:if(Sg(a)){for(tt in l)l.hasOwnProperty(tt)&&(h=l[tt],h!==void 0&&am(i,a,tt,h,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(h=l[C],h!=null&&Wt(i,a,C,h,l,null))}function RA(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,x=null,C=null,N=null,W=null,tt=null;for(J in l){var it=l[J];if(l.hasOwnProperty(J)&&it!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":N=it;default:h.hasOwnProperty(J)||Wt(i,a,J,null,h,it)}}for(var K in h){var J=h[K];if(it=l[K],h.hasOwnProperty(K)&&(J!=null||it!=null))switch(K){case"type":m=J;break;case"name":p=J;break;case"checked":W=J;break;case"defaultChecked":tt=J;break;case"value":x=J;break;case"defaultValue":C=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,a));break;default:J!==it&&Wt(i,a,K,J,h,it)}}vg(i,x,C,N,W,tt,m,p);return;case"select":J=x=C=K=null;for(m in l)if(N=l[m],l.hasOwnProperty(m)&&N!=null)switch(m){case"value":break;case"multiple":J=N;default:h.hasOwnProperty(m)||Wt(i,a,m,null,h,N)}for(p in h)if(m=h[p],N=l[p],h.hasOwnProperty(p)&&(m!=null||N!=null))switch(p){case"value":K=m;break;case"defaultValue":C=m;break;case"multiple":x=m;default:m!==N&&Wt(i,a,p,m,h,N)}a=C,l=x,h=J,K!=null?qa(i,!!l,K,!1):!!h!=!!l&&(a!=null?qa(i,!!l,a,!0):qa(i,!!l,l?[]:"",!1));return;case"textarea":J=K=null;for(C in l)if(p=l[C],l.hasOwnProperty(C)&&p!=null&&!h.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Wt(i,a,C,null,h,p)}for(x in h)if(p=h[x],m=l[x],h.hasOwnProperty(x)&&(p!=null||m!=null))switch(x){case"value":K=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==m&&Wt(i,a,x,p,h,m)}Vv(i,K,J);return;case"option":for(var dt in l)if(K=l[dt],l.hasOwnProperty(dt)&&K!=null&&!h.hasOwnProperty(dt))switch(dt){case"selected":i.selected=!1;break;default:Wt(i,a,dt,null,h,K)}for(N in h)if(K=h[N],J=l[N],h.hasOwnProperty(N)&&K!==J&&(K!=null||J!=null))switch(N){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Wt(i,a,N,K,h,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in l)K=l[bt],l.hasOwnProperty(bt)&&K!=null&&!h.hasOwnProperty(bt)&&Wt(i,a,bt,null,h,K);for(W in h)if(K=h[W],J=l[W],h.hasOwnProperty(W)&&K!==J&&(K!=null||J!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,a));break;default:Wt(i,a,W,K,h,J)}return;default:if(Sg(a)){for(var qt in l)K=l[qt],l.hasOwnProperty(qt)&&K!==void 0&&!h.hasOwnProperty(qt)&&am(i,a,qt,void 0,h,K);for(tt in h)K=h[tt],J=l[tt],!h.hasOwnProperty(tt)||K===J||K===void 0&&J===void 0||am(i,a,tt,K,h,J);return}}for(var G in l)K=l[G],l.hasOwnProperty(G)&&K!=null&&!h.hasOwnProperty(G)&&Wt(i,a,G,null,h,K);for(it in h)K=h[it],J=l[it],!h.hasOwnProperty(it)||K===J||K==null&&J==null||Wt(i,a,it,K,h,J)}function $1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var p=l[h],m=p.transferSize,x=p.initiatorType,C=p.duration;if(m&&C&&$1(x)){for(x=0,C=p.responseEnd,h+=1;h<l.length;h++){var N=l[h],W=N.startTime;if(W>C)break;var tt=N.transferSize,it=N.initiatorType;tt&&$1(it)&&(N=N.responseEnd,x+=tt*(N<C?1:(C-W)/(N-W)))}if(--h,a+=8*(m+x)/(p.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var om=null,lm=null;function Ah(i){return i.nodeType===9?i:i.ownerDocument}function W1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q1(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function cm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var um=null;function NA(){var i=window.event;return i&&i.type==="popstate"?i===um?!1:(um=i,!0):(um=null,!1)}var K1=typeof setTimeout=="function"?setTimeout:void 0,BA=typeof clearTimeout=="function"?clearTimeout:void 0,Q1=typeof Promise=="function"?Promise:void 0,zA=typeof queueMicrotask=="function"?queueMicrotask:typeof Q1<"u"?function(i){return Q1.resolve(null).then(i).catch(UA)}:K1;function UA(i){setTimeout(function(){throw i})}function ps(i){return i==="head"}function Z1(i,a){var l=a,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(p),Ao(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")lc(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,lc(l);for(var m=l.firstChild;m;){var x=m.nextSibling,C=m.nodeName;m[El]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=x}}else l==="body"&&lc(i.ownerDocument.body);l=p}while(l);Ao(a)}function J1(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function hm(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":hm(l),mg(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function FA(i,a,l,h){for(;i.nodeType===1;){var p=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[El])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=Qn(i.nextSibling),i===null)break}return null}function PA(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Qn(i.nextSibling),i===null))return null;return i}function tx(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Qn(i.nextSibling),i===null))return null;return i}function fm(i){return i.data==="$?"||i.data==="$~"}function dm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function HA(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Qn(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var gm=null;function ex(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Qn(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function nx(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function rx(i,a,l){switch(a=Ah(l),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function lc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);mg(i)}var Zn=new Map,ix=new Set;function Dh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var wi=P.d;P.d={f:YA,r:VA,D:XA,C:GA,L:IA,m:$A,X:qA,S:WA,M:KA};function YA(){var i=wi.f(),a=Sh();return i||a}function VA(i){var a=Ia(i);a!==null&&a.tag===5&&a.type==="form"?xS(a):wi.r(i)}var To=typeof document>"u"?null:document;function sx(i,a,l){var h=To;if(h&&typeof a=="string"&&a){var p=Xn(a);p='link[rel="'+i+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),ix.has(p)||(ix.add(p),i={rel:i,crossOrigin:l,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),Ye(a,"link",i),Re(a),h.head.appendChild(a)))}}function XA(i){wi.D(i),sx("dns-prefetch",i,null)}function GA(i,a){wi.C(i,a),sx("preconnect",i,a)}function IA(i,a,l){wi.L(i,a,l);var h=To;if(h&&i&&a){var p='link[rel="preload"][as="'+Xn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Xn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Xn(l.imageSizes)+'"]')):p+='[href="'+Xn(i)+'"]';var m=p;switch(a){case"style":m=Eo(i);break;case"script":m=Oo(i)}Zn.has(m)||(i=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Zn.set(m,i),h.querySelector(p)!==null||a==="style"&&h.querySelector(cc(m))||a==="script"&&h.querySelector(uc(m))||(a=h.createElement("link"),Ye(a,"link",i),Re(a),h.head.appendChild(a)))}}function $A(i,a){wi.m(i,a);var l=To;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+Xn(h)+'"][href="'+Xn(i)+'"]',m=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Oo(i)}if(!Zn.has(m)&&(i=y({rel:"modulepreload",href:i},a),Zn.set(m,i),l.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(uc(m)))return}h=l.createElement("link"),Ye(h,"link",i),Re(h),l.head.appendChild(h)}}}function WA(i,a,l){wi.S(i,a,l);var h=To;if(h&&i){var p=$a(h).hoistableStyles,m=Eo(i);a=a||"default";var x=p.get(m);if(!x){var C={loading:0,preload:null};if(x=h.querySelector(cc(m)))C.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Zn.get(m))&&pm(i,l);var N=x=h.createElement("link");Re(N),Ye(N,"link",i),N._p=new Promise(function(W,tt){N.onload=W,N.onerror=tt}),N.addEventListener("load",function(){C.loading|=1}),N.addEventListener("error",function(){C.loading|=2}),C.loading|=4,kh(x,a,h)}x={type:"stylesheet",instance:x,count:1,state:C},p.set(m,x)}}}function qA(i,a){wi.X(i,a);var l=To;if(l&&i){var h=$a(l).hoistableScripts,p=Oo(i),m=h.get(p);m||(m=l.querySelector(uc(p)),m||(i=y({src:i,async:!0},a),(a=Zn.get(p))&&mm(i,a),m=l.createElement("script"),Re(m),Ye(m,"link",i),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},h.set(p,m))}}function KA(i,a){wi.M(i,a);var l=To;if(l&&i){var h=$a(l).hoistableScripts,p=Oo(i),m=h.get(p);m||(m=l.querySelector(uc(p)),m||(i=y({src:i,async:!0,type:"module"},a),(a=Zn.get(p))&&mm(i,a),m=l.createElement("script"),Re(m),Ye(m,"link",i),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},h.set(p,m))}}function ax(i,a,l,h){var p=(p=gt.current)?Dh(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Eo(l.href),l=$a(p).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Eo(l.href);var m=$a(p).hoistableStyles,x=m.get(i);if(x||(p=p.ownerDocument||p,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,x),(m=p.querySelector(cc(i)))&&!m._p&&(x.instance=m,x.state.loading=5),Zn.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Zn.set(i,l),m||QA(p,i,l,x.state))),a&&h===null)throw Error(n(528,""));return x}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Oo(l),l=$a(p).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Eo(i){return'href="'+Xn(i)+'"'}function cc(i){return'link[rel="stylesheet"]['+i+"]"}function ox(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function QA(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Ye(a,"link",l),Re(a),i.head.appendChild(a))}function Oo(i){return'[src="'+Xn(i)+'"]'}function uc(i){return"script[async]"+i}function lx(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Xn(l.href)+'"]');if(h)return a.instance=h,Re(h),h;var p=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Re(h),Ye(h,"style",p),kh(h,l.precedence,i),a.instance=h;case"stylesheet":p=Eo(l.href);var m=i.querySelector(cc(p));if(m)return a.state.loading|=4,a.instance=m,Re(m),m;h=ox(l),(p=Zn.get(p))&&pm(h,p),m=(i.ownerDocument||i).createElement("link"),Re(m);var x=m;return x._p=new Promise(function(C,N){x.onload=C,x.onerror=N}),Ye(m,"link",h),a.state.loading|=4,kh(m,l.precedence,i),a.instance=m;case"script":return m=Oo(l.src),(p=i.querySelector(uc(m)))?(a.instance=p,Re(p),p):(h=l,(p=Zn.get(m))&&(h=y({},l),mm(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),Re(p),Ye(p,"link",h),i.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,kh(h,l.precedence,i));return a.instance}function kh(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,m=p,x=0;x<h.length;x++){var C=h[x];if(C.dataset.precedence===a)m=C;else if(m!==p)break}m?m.parentNode.insertBefore(i,m.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function pm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function mm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Mh=null;function cx(i,a,l){if(Mh===null){var h=new Map,p=Mh=new Map;p.set(l,h)}else p=Mh,h=p.get(l),h||(h=new Map,p.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),p=0;p<l.length;p++){var m=l[p];if(!(m[El]||m[Ue]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(a)||"";x=i+x;var C=h.get(x);C?C.push(m):h.set(x,[m])}}return h}function ux(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function ZA(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function hx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function JA(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Eo(h.href),m=a.querySelector(cc(p));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=jh.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=m,Re(m);return}m=a.ownerDocument||a,h=ox(h),(p=Zn.get(p))&&pm(h,p),m=m.createElement("link"),Re(m);var x=m;x._p=new Promise(function(C,N){x.onload=C,x.onerror=N}),Ye(m,"link",h),l.instance=m}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=jh.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var ym=0;function tD(i,a){return i.stylesheets&&i.count===0&&Lh(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&Lh(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4+a);0<i.imgBytes&&ym===0&&(ym=62500*LA());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Lh(i,i.stylesheets),i.unsuspend)){var m=i.unsuspend;i.unsuspend=null,m()}},(i.imgBytes>ym?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rh=null;function Lh(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rh=new Map,a.forEach(eD,i),Rh=null,jh.call(i))}function eD(i,a){if(!(a.state.loading&4)){var l=Rh.get(i);if(l)var h=l.get(null);else{l=new Map,Rh.set(i,l);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var x=p[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),h=x)}h&&l.set(null,h)}p=a.instance,x=p.getAttribute("data-precedence"),m=l.get(x)||h,m===h&&l.set(null,p),l.set(x,p),this.count++,h=jh.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),m?m.parentNode.insertBefore(p,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),a.state.loading|=4}}var hc={$$typeof:B,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function nD(i,a,l,h,p,m,x,C,N){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yn(0),this.hiddenUpdates=Yn(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function fx(i,a,l,h,p,m,x,C,N,W,tt,it){return i=new nD(i,a,l,x,N,W,tt,it,C),a=1,m===!0&&(a|=24),m=En(3,null,null,a),i.current=m,m.stateNode=i,a=Kg(),a.refCount++,i.pooledCache=a,a.refCount++,m.memoizedState={element:h,isDehydrated:l,cache:a},tp(m),i}function dx(i){return i?(i=ro,i):ro}function gx(i,a,l,h,p,m){p=dx(p),h.context===null?h.context=p:h.pendingContext=p,h=is(a),h.payload={element:l},m=m===void 0?null:m,m!==null&&(h.callback=m),l=ss(i,h,a),l!==null&&(dn(l,i,a),Vl(l,i,a))}function px(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function vm(i,a){px(i,a),(i=i.alternate)&&px(i,a)}function mx(i){if(i.tag===13||i.tag===31){var a=Ks(i,67108864);a!==null&&dn(a,i,67108864),vm(i,67108864)}}function yx(i){if(i.tag===13||i.tag===31){var a=Mn();a=dg(a);var l=Ks(i,a);l!==null&&dn(l,i,a),vm(i,a)}}var Nh=!0;function rD(i,a,l,h){var p=A.T;A.T=null;var m=P.p;try{P.p=2,bm(i,a,l,h)}finally{P.p=m,A.T=p}}function iD(i,a,l,h){var p=A.T;A.T=null;var m=P.p;try{P.p=8,bm(i,a,l,h)}finally{P.p=m,A.T=p}}function bm(i,a,l,h){if(Nh){var p=Sm(h);if(p===null)sm(i,a,h,Bh,l),bx(i,h);else if(aD(p,i,a,l,h))h.stopPropagation();else if(bx(i,h),a&4&&-1<sD.indexOf(i)){for(;p!==null;){var m=Ia(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=ii(m.pendingLanes);if(x!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;x;){var N=1<<31-ze(x);C.entanglements[1]|=N,x&=~N}Mr(m),(Ut&6)===0&&(vh=Ee()+500,sc(0))}}break;case 31:case 13:C=Ks(m,2),C!==null&&dn(C,m,2),Sh(),vm(m,2)}if(m=Sm(h),m===null&&sm(i,a,h,Bh,l),m===p)break;p=m}p!==null&&h.stopPropagation()}else sm(i,a,h,null,l)}}function Sm(i){return i=wg(i),xm(i)}var Bh=null;function xm(i){if(Bh=null,i=Ga(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=c(a),i!==null)return i;i=null}else if(l===31){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Bh=i,null}function vx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(za()){case Ys:return 2;case ni:return 8;case ri:case Vs:return 32;case Ua:return 268435456;default:return 32}default:return 32}}var wm=!1,ms=null,ys=null,vs=null,fc=new Map,dc=new Map,bs=[],sD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bx(i,a){switch(i){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":fc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(a.pointerId)}}function gc(i,a,l,h,p,m){return i===null||i.nativeEvent!==m?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:m,targetContainers:[p]},a!==null&&(a=Ia(a),a!==null&&mx(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),i)}function aD(i,a,l,h,p){switch(a){case"focusin":return ms=gc(ms,i,a,l,h,p),!0;case"dragenter":return ys=gc(ys,i,a,l,h,p),!0;case"mouseover":return vs=gc(vs,i,a,l,h,p),!0;case"pointerover":var m=p.pointerId;return fc.set(m,gc(fc.get(m)||null,i,a,l,h,p)),!0;case"gotpointercapture":return m=p.pointerId,dc.set(m,gc(dc.get(m)||null,i,a,l,h,p)),!0}return!1}function Sx(i){var a=Ga(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){i.blockedOn=a,Lv(i.priority,function(){yx(l)});return}}else if(a===31){if(a=u(l),a!==null){i.blockedOn=a,Lv(i.priority,function(){yx(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zh(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Sm(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);xg=h,l.target.dispatchEvent(h),xg=null}else return a=Ia(l),a!==null&&mx(a),i.blockedOn=l,!1;a.shift()}return!0}function xx(i,a,l){zh(i)&&l.delete(a)}function oD(){wm=!1,ms!==null&&zh(ms)&&(ms=null),ys!==null&&zh(ys)&&(ys=null),vs!==null&&zh(vs)&&(vs=null),fc.forEach(xx),dc.forEach(xx)}function Uh(i,a){i.blockedOn===a&&(i.blockedOn=null,wm||(wm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,oD)))}var Fh=null;function wx(i){Fh!==i&&(Fh=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Fh===i&&(Fh=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],p=i[a+2];if(typeof h!="function"){if(xm(h||l)===null)continue;break}var m=Ia(l);m!==null&&(i.splice(a,3),a-=3,Sp(m,{pending:!0,data:p,method:l.method,action:h},h,p))}}))}function Ao(i){function a(N){return Uh(N,i)}ms!==null&&Uh(ms,i),ys!==null&&Uh(ys,i),vs!==null&&Uh(vs,i),fc.forEach(a),dc.forEach(a);for(var l=0;l<bs.length;l++){var h=bs[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<bs.length&&(l=bs[0],l.blockedOn===null);)Sx(l),l.blockedOn===null&&bs.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var p=l[h],m=l[h+1],x=p[on]||null;if(typeof m=="function")x||wx(l);else if(x){var C=null;if(m&&m.hasAttribute("formAction")){if(p=m,x=m[on]||null)C=x.formAction;else if(xm(p)!==null)continue}else C=x.action;typeof C=="function"?l[h+1]=C:(l.splice(h,3),h-=3),wx(l)}}}function _x(){function i(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return p=x})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function _m(i){this._internalRoot=i}Ph.prototype.render=_m.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var l=a.current,h=Mn();gx(l,h,i,a,null,null)},Ph.prototype.unmount=_m.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;gx(i.current,2,null,i,null,null),Sh(),a[Xa]=null}};function Ph(i){this._internalRoot=i}Ph.prototype.unstable_scheduleHydration=function(i){if(i){var a=Rv();i={blockedOn:null,target:i,priority:a};for(var l=0;l<bs.length&&a!==0&&a<bs[l].priority;l++);bs.splice(l,0,i),l===0&&Sx(i)}};var Cx=t.version;if(Cx!=="19.2.0")throw Error(n(527,Cx,"19.2.0"));P.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=d(a),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var lD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hh.isDisabled&&Hh.supportsFiber)try{Cn=Hh.inject(lD),Oe=Hh}catch{}}return mc.createRoot=function(i,a){if(!s(i))throw Error(n(299));var l=!1,h="",p=MS,m=jS,x=RS;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=fx(i,1,!1,null,null,l,h,null,p,m,x,_x),i[Xa]=a.current,im(i),new _m(a)},mc.hydrateRoot=function(i,a,l){if(!s(i))throw Error(n(299));var h=!1,p="",m=MS,x=jS,C=RS,N=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(N=l.formState)),a=fx(i,1,!0,a,l??null,h,p,N,m,x,C,_x),a.context=dx(null),l=a.current,h=Mn(),h=dg(h),p=is(h),p.callback=null,ss(l,p,h),l=h,a.current.lanes=l,Tl(a,l),Mr(a),i[Xa]=a.current,im(i),new Ph(a)},mc.version="19.2.0",mc}var Lx;function vD(){if(Lx)return Em.exports;Lx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Em.exports=yD(),Em.exports}var bD=vD();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Nx="popstate";function SD(r={}){function t(n,s){let{pathname:o,search:c,hash:u}=n.location;return m0("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(n,s){return typeof s=="string"?s:Pc(s)}return wD(t,e,null,r)}function ie(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function _r(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xD(){return Math.random().toString(36).substring(2,10)}function Bx(r,t){return{usr:r.state,key:r.key,idx:t}}function m0(r,t,e=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?hl(t):t,state:e,key:t&&t.key||n||xD()}}function Pc({pathname:r="/",search:t="",hash:e=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function hl(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substring(e),r=r.substring(0,e));let n=r.indexOf("?");n>=0&&(t.search=r.substring(n),r=r.substring(0,n)),r&&(t.pathname=r)}return t}function wD(r,t,e,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u="POP",f=null,d=g();d==null&&(d=0,c.replaceState({...c.state,idx:d},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let _=g(),O=_==null?null:_-d;d=_,f&&f({action:u,location:w.location,delta:O})}function v(_,O){u="PUSH";let k=m0(w.location,_,O);d=g()+1;let B=Bx(k,d),R=w.createHref(k);try{c.pushState(B,"",R)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(R)}o&&f&&f({action:u,location:w.location,delta:1})}function b(_,O){u="REPLACE";let k=m0(w.location,_,O);d=g();let B=Bx(k,d),R=w.createHref(k);c.replaceState(B,"",R),o&&f&&f({action:u,location:w.location,delta:0})}function S(_){return _D(_)}let w={get action(){return u},get location(){return r(s,c)},listen(_){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Nx,y),f=_,()=>{s.removeEventListener(Nx,y),f=null}},createHref(_){return t(s,_)},createURL:S,encodeLocation(_){let O=S(_);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:v,replace:b,go(_){return c.go(_)}};return w}function _D(r,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),ie(e,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Pc(r);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function cC(r,t,e="/"){return CD(r,t,e,!1)}function CD(r,t,e,n){let s=typeof t=="string"?hl(t):t,o=Ni(s.pathname||"/",e);if(o==null)return null;let c=uC(r);TD(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let d=BD(o);u=LD(c[f],d,n)}return u}function uC(r,t=[],e=[],n="",s=!1){let o=(c,u,f=s,d)=>{let g={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&f)return;ie(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let y=ki([n,g.relativePath]),v=e.concat(g);c.children&&c.children.length>0&&(ie(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),uC(c.children,t,v,y,f)),!(c.path==null&&!c.index)&&t.push({path:y,score:jD(y,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let f of hC(c.path))o(c,u,!0,f)}),t}function hC(r){let t=r.split("/");if(t.length===0)return[];let[e,...n]=t,s=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=hC(n.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),s&&u.push(...c),u.map(f=>r.startsWith("/")&&f===""?"/":f)}function TD(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:RD(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var ED=/^:[\w-]+$/,OD=3,AD=2,DD=1,kD=10,MD=-2,zx=r=>r==="*";function jD(r,t){let e=r.split("/"),n=e.length;return e.some(zx)&&(n+=MD),t&&(n+=AD),e.filter(s=>!zx(s)).reduce((s,o)=>s+(ED.test(o)?OD:o===""?DD:kD),n)}function RD(r,t){return r.length===t.length&&r.slice(0,-1).every((n,s)=>n===t[s])?r[r.length-1]-t[t.length-1]:0}function LD(r,t,e=!1){let{routesMeta:n}=r,s={},o="/",c=[];for(let u=0;u<n.length;++u){let f=n[u],d=u===n.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=Xf({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},g),v=f.route;if(!y&&d&&e&&!n[n.length-1].route.index&&(y=Xf({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:ki([o,y.pathname]),pathnameBase:PD(ki([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ki([o,y.pathnameBase]))}return c}function Xf(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,n]=ND(r.path,r.caseSensitive,r.end),s=t.match(e);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((d,{paramName:g,isOptional:y},v)=>{if(g==="*"){let S=u[v]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const b=u[v];return y&&!b?d[g]=void 0:d[g]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:c,pattern:r}}function ND(r,t=!1,e=!0){_r(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(n.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function BD(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _r(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function Ni(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=r.charAt(e);return n&&n!=="/"?null:r.slice(e)||"/"}function zD(r,t="/"){let{pathname:e,search:n="",hash:s=""}=typeof r=="string"?hl(r):r;return{pathname:e?e.startsWith("/")?e:UD(e,t):t,search:HD(n),hash:YD(s)}}function UD(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function km(r,t,e,n){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FD(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function ly(r){let t=FD(r);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function cy(r,t,e,n=!1){let s;typeof r=="string"?s=hl(r):(s={...r},ie(!s.pathname||!s.pathname.includes("?"),km("?","pathname","search",s)),ie(!s.pathname||!s.pathname.includes("#"),km("#","pathname","hash",s)),ie(!s.search||!s.search.includes("#"),km("#","search","hash",s)));let o=r===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=e;else{let y=t.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?t[y]:"/"}let f=zD(s,u),d=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&e.endsWith("/");return!f.pathname.endsWith("/")&&(d||g)&&(f.pathname+="/"),f}var ki=r=>r.join("/").replace(/\/\/+/g,"/"),PD=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),HD=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,YD=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function VD(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var fC=["POST","PUT","PATCH","DELETE"];new Set(fC);var XD=["GET",...fC];new Set(XD);var fl=M.createContext(null);fl.displayName="DataRouter";var wd=M.createContext(null);wd.displayName="DataRouterState";M.createContext(!1);var dC=M.createContext({isTransitioning:!1});dC.displayName="ViewTransition";var GD=M.createContext(new Map);GD.displayName="Fetchers";var ID=M.createContext(null);ID.displayName="Await";var Cr=M.createContext(null);Cr.displayName="Navigation";var hu=M.createContext(null);hu.displayName="Location";var Tr=M.createContext({outlet:null,matches:[],isDataRoute:!1});Tr.displayName="Route";var uy=M.createContext(null);uy.displayName="RouteError";function $D(r,{relative:t}={}){ie(dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=M.useContext(Cr),{hash:s,pathname:o,search:c}=fu(r,{relative:t}),u=o;return e!=="/"&&(u=o==="/"?e:ki([e,o])),n.createHref({pathname:u,search:c,hash:s})}function dl(){return M.useContext(hu)!=null}function Bs(){return ie(dl(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(hu).location}var gC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pC(r){M.useContext(Cr).static||M.useLayoutEffect(r)}function _d(){let{isDataRoute:r}=M.useContext(Tr);return r?ok():WD()}function WD(){ie(dl(),"useNavigate() may be used only in the context of a <Router> component.");let r=M.useContext(fl),{basename:t,navigator:e}=M.useContext(Cr),{matches:n}=M.useContext(Tr),{pathname:s}=Bs(),o=JSON.stringify(ly(n)),c=M.useRef(!1);return pC(()=>{c.current=!0}),M.useCallback((f,d={})=>{if(_r(c.current,gC),!c.current)return;if(typeof f=="number"){e.go(f);return}let g=cy(f,JSON.parse(o),s,d.relative==="path");r==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ki([t,g.pathname])),(d.replace?e.replace:e.push)(g,d.state,d)},[t,e,o,s,r])}M.createContext(null);function qD(){let{matches:r}=M.useContext(Tr),t=r[r.length-1];return t?t.params:{}}function fu(r,{relative:t}={}){let{matches:e}=M.useContext(Tr),{pathname:n}=Bs(),s=JSON.stringify(ly(e));return M.useMemo(()=>cy(r,JSON.parse(s),n,t==="path"),[r,s,n,t])}function KD(r,t){return mC(r,t)}function mC(r,t,e,n,s){ie(dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=M.useContext(Cr),{matches:c}=M.useContext(Tr),u=c[c.length-1],f=u?u.params:{},d=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let k=y&&y.path||"";yC(d,!y||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let v=Bs(),b;if(t){let k=typeof t=="string"?hl(t):t;ie(g==="/"||k.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${k.pathname}" was given in the \`location\` prop.`),b=k}else b=v;let S=b.pathname||"/",w=S;if(g!=="/"){let k=g.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=cC(r,{pathname:w});_r(y||_!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),_r(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=ek(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},f,k.params),pathname:ki([g,o.encodeLocation?o.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?g:ki([g,o.encodeLocation?o.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),c,e,n,s);return t&&O?M.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},O):O}function QD(){let r=ak(),t=VD(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=M.createElement(M.Fragment,null,M.createElement("p",null,"💿 Hey developer 👋"),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),e?M.createElement("pre",{style:s},e):null,c)}var ZD=M.createElement(QD,null),JD=class extends M.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.unstable_onError?this.props.unstable_onError(r,t):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?M.createElement(Tr.Provider,{value:this.props.routeContext},M.createElement(uy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tk({routeContext:r,match:t,children:e}){let n=M.useContext(fl);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(Tr.Provider,{value:r},e)}function ek(r,t=[],e=null,n=null,s=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let o=r,c=e?.errors;if(c!=null){let d=o.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);ie(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,f=-1;if(e)for(let d=0;d<o.length;d++){let g=o[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=d),g.route.id){let{loaderData:y,errors:v}=e,b=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||b){u=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((d,g,y)=>{let v,b=!1,S=null,w=null;e&&(v=c&&g.route.id?c[g.route.id]:void 0,S=g.route.errorElement||ZD,u&&(f<0&&y===0?(yC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):f===y&&(b=!0,w=g.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,y+1)),O=()=>{let k;return v?k=S:b?k=w:g.route.Component?k=M.createElement(g.route.Component,null):g.route.element?k=g.route.element:k=d,M.createElement(tk,{match:g,routeContext:{outlet:d,matches:_,isDataRoute:e!=null},children:k})};return e&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?M.createElement(JD,{location:e.location,revalidation:e.revalidation,component:S,error:v,children:O(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:n}):O()},null)}function hy(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nk(r){let t=M.useContext(fl);return ie(t,hy(r)),t}function rk(r){let t=M.useContext(wd);return ie(t,hy(r)),t}function ik(r){let t=M.useContext(Tr);return ie(t,hy(r)),t}function fy(r){let t=ik(r),e=t.matches[t.matches.length-1];return ie(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function sk(){return fy("useRouteId")}function ak(){let r=M.useContext(uy),t=rk("useRouteError"),e=fy("useRouteError");return r!==void 0?r:t.errors?.[e]}function ok(){let{router:r}=nk("useNavigate"),t=fy("useNavigate"),e=M.useRef(!1);return pC(()=>{e.current=!0}),M.useCallback(async(s,o={})=>{_r(e.current,gC),e.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:t,...o}))},[r,t])}var Ux={};function yC(r,t,e){!t&&!Ux[r]&&(Ux[r]=!0,_r(!1,e))}M.memo(lk);function lk({routes:r,future:t,state:e,unstable_onError:n}){return mC(r,void 0,e,n,t)}function vC({to:r,replace:t,state:e,relative:n}){ie(dl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=M.useContext(Cr);_r(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(Tr),{pathname:c}=Bs(),u=_d(),f=cy(r,ly(o),c,n==="path"),d=JSON.stringify(f);return M.useEffect(()=>{u(JSON.parse(d),{replace:t,state:e,relative:n})},[u,d,n,t,e]),null}function Of(r){ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ck({basename:r="/",children:t=null,location:e,navigationType:n="POP",navigator:s,static:o=!1}){ie(!dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=r.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:c,navigator:s,static:o,future:{}}),[c,s,o]);typeof e=="string"&&(e=hl(e));let{pathname:f="/",search:d="",hash:g="",state:y=null,key:v="default"}=e,b=M.useMemo(()=>{let S=Ni(f,c);return S==null?null:{location:{pathname:S,search:d,hash:g,state:y,key:v},navigationType:n}},[c,f,d,g,y,v,n]);return _r(b!=null,`<Router basename="${c}"> is not able to match the URL "${f}${d}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:M.createElement(Cr.Provider,{value:u},M.createElement(hu.Provider,{children:t,value:b}))}function uk({children:r,location:t}){return KD(y0(r),t)}function y0(r,t=[]){let e=[];return M.Children.forEach(r,(n,s)=>{if(!M.isValidElement(n))return;let o=[...t,s];if(n.type===M.Fragment){e.push.apply(e,y0(n.props.children,o));return}ie(n.type===Of,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ie(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=y0(n.props.children,o)),e.push(c)}),e}var Af="get",Df="application/x-www-form-urlencoded";function Cd(r){return r!=null&&typeof r.tagName=="string"}function hk(r){return Cd(r)&&r.tagName.toLowerCase()==="button"}function fk(r){return Cd(r)&&r.tagName.toLowerCase()==="form"}function dk(r){return Cd(r)&&r.tagName.toLowerCase()==="input"}function gk(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function pk(r,t){return r.button===0&&(!t||t==="_self")&&!gk(r)}var Yh=null;function mk(){if(Yh===null)try{new FormData(document.createElement("form"),0),Yh=!1}catch{Yh=!0}return Yh}var yk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mm(r){return r!=null&&!yk.has(r)?(_r(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Df}"`),null):r}function vk(r,t){let e,n,s,o,c;if(fk(r)){let u=r.getAttribute("action");n=u?Ni(u,t):null,e=r.getAttribute("method")||Af,s=Mm(r.getAttribute("enctype"))||Df,o=new FormData(r)}else if(hk(r)||dk(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=r.getAttribute("formaction")||u.getAttribute("action");if(n=f?Ni(f,t):null,e=r.getAttribute("formmethod")||u.getAttribute("method")||Af,s=Mm(r.getAttribute("formenctype"))||Mm(u.getAttribute("enctype"))||Df,o=new FormData(u,r),!mk()){let{name:d,type:g,value:y}=r;if(g==="image"){let v=d?`${d}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else d&&o.append(d,y)}}else{if(Cd(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Af,n=null,s=Df,c=r}return o&&s==="text/plain"&&(c=o,o=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dy(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function bk(r,t,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&Ni(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function Sk(r,t){if(r.id in t)return t[r.id];try{let e=await import(r.module);return t[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xk(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function wk(r,t,e){let n=await Promise.all(r.map(async s=>{let o=t.routes[s.route.id];if(o){let c=await Sk(o,e);return c.links?c.links():[]}return[]}));return Ek(n.flat(1).filter(xk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Fx(r,t,e,n,s,o){let c=(f,d)=>e[d]?f.route.id!==e[d].route.id:!0,u=(f,d)=>e[d].pathname!==f.pathname||e[d].route.path?.endsWith("*")&&e[d].params["*"]!==f.params["*"];return o==="assets"?t.filter((f,d)=>c(f,d)||u(f,d)):o==="data"?t.filter((f,d)=>{let g=n.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(c(f,d)||u(f,d))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function _k(r,t,{includeHydrateFallback:e}={}){return Ck(r.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Ck(r){return[...new Set(r)]}function Tk(r){let t={},e=Object.keys(r).sort();for(let n of e)t[n]=r[n];return t}function Ek(r,t){let e=new Set;return new Set(t),r.reduce((n,s)=>{let o=JSON.stringify(Tk(s));return e.has(o)||(e.add(o),n.push({key:o,link:s})),n},[])}function bC(){let r=M.useContext(fl);return dy(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Ok(){let r=M.useContext(wd);return dy(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var gy=M.createContext(void 0);gy.displayName="FrameworkContext";function SC(){let r=M.useContext(gy);return dy(r,"You must render this element inside a <HydratedRouter> element"),r}function Ak(r,t){let e=M.useContext(gy),[n,s]=M.useState(!1),[o,c]=M.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:d,onMouseLeave:g,onTouchStart:y}=t,v=M.useRef(null);M.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let w=O=>{O.forEach(k=>{c(k.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return v.current&&_.observe(v.current),()=>{_.disconnect()}}},[r]),M.useEffect(()=>{if(n){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[n]);let b=()=>{s(!0)},S=()=>{s(!1),c(!1)};return e?r!=="intent"?[o,v,{}]:[o,v,{onFocus:yc(u,b),onBlur:yc(f,S),onMouseEnter:yc(d,b),onMouseLeave:yc(g,S),onTouchStart:yc(y,b)}]:[!1,v,{}]}function yc(r,t){return e=>{r&&r(e),e.defaultPrevented||t(e)}}function Dk({page:r,...t}){let{router:e}=bC(),n=M.useMemo(()=>cC(e.routes,r,e.basename),[e.routes,r,e.basename]);return n?M.createElement(Mk,{page:r,matches:n,...t}):null}function kk(r){let{manifest:t,routeModules:e}=SC(),[n,s]=M.useState([]);return M.useEffect(()=>{let o=!1;return wk(r,t,e).then(c=>{o||s(c)}),()=>{o=!0}},[r,t,e]),n}function Mk({page:r,matches:t,...e}){let n=Bs(),{manifest:s,routeModules:o}=SC(),{basename:c}=bC(),{loaderData:u,matches:f}=Ok(),d=M.useMemo(()=>Fx(r,t,f,s,n,"data"),[r,t,f,s,n]),g=M.useMemo(()=>Fx(r,t,f,s,n,"assets"),[r,t,f,s,n]),y=M.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let S=new Set,w=!1;if(t.forEach(O=>{let k=s.routes[O.route.id];!k||!k.hasLoader||(!d.some(B=>B.route.id===O.route.id)&&O.route.id in u&&o[O.route.id]?.shouldRevalidate||k.hasClientLoader?w=!0:S.add(O.route.id))}),S.size===0)return[];let _=bk(r,c,"data");return w&&S.size>0&&_.searchParams.set("_routes",t.filter(O=>S.has(O.route.id)).map(O=>O.route.id).join(",")),[_.pathname+_.search]},[c,u,n,s,d,t,r,o]),v=M.useMemo(()=>_k(g,s),[g,s]),b=kk(g);return M.createElement(M.Fragment,null,y.map(S=>M.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),v.map(S=>M.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),b.map(({key:S,link:w})=>M.createElement("link",{key:S,nonce:e.nonce,...w})))}function jk(...r){return t=>{r.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var xC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xC&&(window.__reactRouterVersion="7.9.4")}catch{}function Rk({basename:r,children:t,window:e}){let n=M.useRef();n.current==null&&(n.current=SD({window:e,v5Compat:!0}));let s=n.current,[o,c]=M.useState({action:s.action,location:s.location}),u=M.useCallback(f=>{M.startTransition(()=>c(f))},[c]);return M.useLayoutEffect(()=>s.listen(u),[s,u]),M.createElement(ck,{basename:r,children:t,location:o.location,navigationType:o.action,navigator:s})}var wC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_C=M.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:s,reloadDocument:o,replace:c,state:u,target:f,to:d,preventScrollReset:g,viewTransition:y,...v},b){let{basename:S}=M.useContext(Cr),w=typeof d=="string"&&wC.test(d),_,O=!1;if(typeof d=="string"&&w&&(_=d,xC))try{let rt=new URL(window.location.href),lt=d.startsWith("//")?new URL(rt.protocol+d):new URL(d),ct=Ni(lt.pathname,S);lt.origin===rt.origin&&ct!=null?d=ct+lt.search+lt.hash:O=!0}catch{_r(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=$D(d,{relative:s}),[B,R,F]=Ak(n,v),z=zk(d,{replace:c,state:u,target:f,preventScrollReset:g,relative:s,viewTransition:y});function U(rt){t&&t(rt),rt.defaultPrevented||z(rt)}let q=M.createElement("a",{...v,...F,href:_||k,onClick:O||o?t:U,ref:jk(b,R),target:f,"data-discover":!w&&e==="render"?"true":void 0});return B&&!w?M.createElement(M.Fragment,null,q,M.createElement(Dk,{page:k})):q});_C.displayName="Link";var Lk=M.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:s=!1,style:o,to:c,viewTransition:u,children:f,...d},g){let y=fu(c,{relative:d.relative}),v=Bs(),b=M.useContext(wd),{navigator:S,basename:w}=M.useContext(Cr),_=b!=null&&Yk(y)&&u===!0,O=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,k=v.pathname,B=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;e||(k=k.toLowerCase(),B=B?B.toLowerCase():null,O=O.toLowerCase()),B&&w&&(B=Ni(B,w)||B);const R=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let F=k===O||!s&&k.startsWith(O)&&k.charAt(R)==="/",z=B!=null&&(B===O||!s&&B.startsWith(O)&&B.charAt(O.length)==="/"),U={isActive:F,isPending:z,isTransitioning:_},q=F?t:void 0,rt;typeof n=="function"?rt=n(U):rt=[n,F?"active":null,z?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let lt=typeof o=="function"?o(U):o;return M.createElement(_C,{...d,"aria-current":q,className:rt,ref:g,style:lt,to:c,viewTransition:u},typeof f=="function"?f(U):f)});Lk.displayName="NavLink";var Nk=M.forwardRef(({discover:r="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:s,state:o,method:c=Af,action:u,onSubmit:f,relative:d,preventScrollReset:g,viewTransition:y,...v},b)=>{let S=Pk(),w=Hk(u,{relative:d}),_=c.toLowerCase()==="get"?"get":"post",O=typeof u=="string"&&wC.test(u),k=B=>{if(f&&f(B),B.defaultPrevented)return;B.preventDefault();let R=B.nativeEvent.submitter,F=R?.getAttribute("formmethod")||c;S(R||B.currentTarget,{fetcherKey:t,method:F,navigate:e,replace:s,state:o,relative:d,preventScrollReset:g,viewTransition:y})};return M.createElement("form",{ref:b,method:_,action:w,onSubmit:n?f:k,...v,"data-discover":!O&&r==="render"?"true":void 0})});Nk.displayName="Form";function Bk(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CC(r){let t=M.useContext(fl);return ie(t,Bk(r)),t}function zk(r,{target:t,replace:e,state:n,preventScrollReset:s,relative:o,viewTransition:c}={}){let u=_d(),f=Bs(),d=fu(r,{relative:o});return M.useCallback(g=>{if(pk(g,t)){g.preventDefault();let y=e!==void 0?e:Pc(f)===Pc(d);u(r,{replace:y,state:n,preventScrollReset:s,relative:o,viewTransition:c})}},[f,u,d,e,n,t,r,s,o,c])}var Uk=0,Fk=()=>`__${String(++Uk)}__`;function Pk(){let{router:r}=CC("useSubmit"),{basename:t}=M.useContext(Cr),e=sk();return M.useCallback(async(n,s={})=>{let{action:o,method:c,encType:u,formData:f,body:d}=vk(n,t);if(s.navigate===!1){let g=s.fetcherKey||Fk();await r.fetch(g,e,s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:d,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await r.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:d,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,t,e])}function Hk(r,{relative:t}={}){let{basename:e}=M.useContext(Cr),n=M.useContext(Tr);ie(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...fu(r||".",{relative:t})},c=Bs();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),f=u.getAll("index");if(f.some(g=>g==="")){u.delete("index"),f.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!r||r===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:ki([e,o.pathname])),Pc(o)}function Yk(r,{relative:t}={}){let e=M.useContext(dC);ie(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=CC("useViewTransitionState"),s=fu(r,{relative:t});if(!e.isTransitioning)return!1;let o=Ni(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=Ni(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Xf(s.pathname,c)!=null||Xf(s.pathname,o)!=null}var TC=lC();const Vh=oC(TC);var jm={exports:{}},Rm={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px;function Vk(){if(Px)return Rm;Px=1;var r=xd();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var e=typeof Object.is=="function"?Object.is:t,n=r.useSyncExternalStore,s=r.useRef,o=r.useEffect,c=r.useMemo,u=r.useDebugValue;return Rm.useSyncExternalStoreWithSelector=function(f,d,g,y,v){var b=s(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=c(function(){function _(F){if(!O){if(O=!0,k=F,F=y(F),v!==void 0&&S.hasValue){var z=S.value;if(v(z,F))return B=z}return B=F}if(z=B,e(k,F))return z;var U=y(F);return v!==void 0&&v(z,U)?(k=F,z):(k=F,B=U)}var O=!1,k,B,R=g===void 0?null:g;return[function(){return _(d())},R===null?void 0:function(){return _(R())}]},[d,g,y,v]);var w=n(f,b[0],b[1]);return o(function(){S.hasValue=!0,S.value=w},[w]),u(w),w},Rm}var Hx;function Xk(){return Hx||(Hx=1,jm.exports=Vk()),jm.exports}var Gk=Xk();function Ik(r){r()}function $k(){let r=null,t=null;return{clear(){r=null,t=null},notify(){Ik(()=>{let e=r;for(;e;)e.callback(),e=e.next})},get(){const e=[];let n=r;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let n=!0;const s=t={callback:e,next:null,prev:t};return s.prev?s.prev.next=s:r=s,function(){!n||r===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:r=s.next)}}}}var Yx={notify(){},get:()=>[]};function Wk(r,t){let e,n=Yx,s=0,o=!1;function c(w){g();const _=n.subscribe(w);let O=!1;return()=>{O||(O=!0,_(),y())}}function u(){n.notify()}function f(){S.onStateChange&&S.onStateChange()}function d(){return o}function g(){s++,e||(e=r.subscribe(f),n=$k())}function y(){s--,e&&s===0&&(e(),e=void 0,n.clear(),n=Yx)}function v(){o||(o=!0,g())}function b(){o&&(o=!1,y())}const S={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:f,isSubscribed:d,trySubscribe:v,tryUnsubscribe:b,getListeners:()=>n};return S}var qk=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kk=qk(),Qk=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Zk=Qk(),Jk=()=>Kk||Zk?M.useLayoutEffect:M.useEffect,tM=Jk(),eM=Symbol.for("react-redux-context"),nM=typeof globalThis<"u"?globalThis:{};function rM(){if(!M.createContext)return{};const r=nM[eM]??=new Map;let t=r.get(M.createContext);return t||(t=M.createContext(null),r.set(M.createContext,t)),t}var As=rM();function iM(r){const{children:t,context:e,serverState:n,store:s}=r,o=M.useMemo(()=>{const f=Wk(s);return{store:s,subscription:f,getServerState:n?()=>n:void 0}},[s,n]),c=M.useMemo(()=>s.getState(),[s]);tM(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),c!==s.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,c]);const u=e||As;return M.createElement(u.Provider,{value:o},t)}var sM=iM;function py(r=As){return function(){return M.useContext(r)}}var EC=py();function OC(r=As){const t=r===As?EC:py(r),e=()=>{const{store:n}=t();return n};return Object.assign(e,{withTypes:()=>e}),e}var aM=OC();function oM(r=As){const t=r===As?aM:OC(r),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var my=oM(),lM=(r,t)=>r===t;function cM(r=As){const t=r===As?EC:py(r),e=(n,s={})=>{const{equalityFn:o=lM}=typeof s=="function"?{equalityFn:s}:s,c=t(),{store:u,subscription:f,getServerState:d}=c;M.useRef(!0);const g=M.useCallback({[n.name](v){return n(v)}}[n.name],[n]),y=Gk.useSyncExternalStoreWithSelector(f.addNestedSub,u.getState,d||u.getState,g,o);return M.useDebugValue(y),y};return Object.assign(e,{withTypes:()=>e}),e}var yy=cM(),AC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Vx=Nn.createContext&&Nn.createContext(AC),uM=["attr","size","title"];function hM(r,t){if(r==null)return{};var e=fM(r,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function fM(r,t){if(r==null)return{};var e={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(t.indexOf(n)>=0)continue;e[n]=r[n]}return e}function Gf(){return Gf=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Gf.apply(this,arguments)}function Xx(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,n)}return e}function If(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Xx(Object(e),!0).forEach(function(n){dM(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Xx(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function dM(r,t,e){return t=gM(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function gM(r){var t=pM(r,"string");return typeof t=="symbol"?t:t+""}function pM(r,t){if(typeof r!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function DC(r){return r&&r.map((t,e)=>Nn.createElement(t.tag,If({key:e},t.attr),DC(t.child)))}function Gi(r){return t=>Nn.createElement(mM,Gf({attr:If({},r.attr)},t),DC(r.child))}function mM(r){var t=e=>{var{attr:n,size:s,title:o}=r,c=hM(r,uM),u=s||e.size||"1em",f;return e.className&&(f=e.className),r.className&&(f=(f?f+" ":"")+r.className),Nn.createElement("svg",Gf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,c,{className:f,style:If(If({color:r.color||e.color},e.style),r.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Nn.createElement("title",null,o),r.children)};return Vx!==void 0?Nn.createElement(Vx.Consumer,null,e=>t(e)):t(AC)}function yM(r){return Gi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"},child:[]},{tag:"path",attr:{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"},child:[]}]})(r)}function vM(r){return Gi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5M5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z"},child:[]},{tag:"path",attr:{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1"},child:[]}]})(r)}function bM(r){return Gi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"},child:[]}]})(r)}function SM(r){return Gi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]},{tag:"path",attr:{d:"M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"},child:[]}]})(r)}function xM(r){return Gi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m4 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M5.5 7a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"},child:[]},{tag:"path",attr:{d:"M16 8c0 3.15-1.866 2.585-3.567 2.07C11.42 9.763 10.465 9.473 10 10c-.603.683-.475 1.819-.351 2.92C9.826 14.495 9.996 16 8 16a8 8 0 1 1 8-8m-8 7c.611 0 .654-.171.655-.176.078-.146.124-.464.07-1.119-.014-.168-.037-.37-.061-.591-.052-.464-.112-1.005-.118-1.462-.01-.707.083-1.61.704-2.314.369-.417.845-.578 1.272-.618.404-.038.812.026 1.16.104.343.077.702.186 1.025.284l.028.008c.346.105.658.199.953.266.653.148.904.083.991.024C14.717 9.38 15 9.161 15 8a7 7 0 1 0-7 7"},child:[]}]})(r)}function wM(r){return Gi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5m-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"},child:[]}]})(r)}function _M(r){return Gi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"},child:[]}]})(r)}function CM(r){return Gi({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5m0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5m4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5"},child:[]}]})(r)}const du="https://editor-backend-gwvsmxazbq-el.a.run.app/api/v1",gu=()=>{const r=localStorage.getItem("authToken");if(!r)throw new Error("Authentication required. Please login.");return{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}},TM=async r=>{const t=gu(),e=await fetch(`${du}/canvas`,{method:"POST",headers:t,body:JSON.stringify({metadata:{title:r}})});if(!e.ok)throw new Error(`Failed to create canvas: ${e.statusText}`);return e.json()},Gx=async(r,t)=>{const e=gu(),n=await fetch(`${du}/canvas/${r}`,{method:"PATCH",headers:e,body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to update canvas: ${n.statusText}`);return n.json()},EM=async r=>{const t=gu(),e=await fetch(`${du}/canvas/${r}`,{headers:t});if(!e.ok)throw new Error(`Failed to load canvas: ${e.statusText}`);return e.json()},OM=async(r=50,t=0)=>{const e=gu(),n=await fetch(`${du}/canvas?limit=${r}&offset=${t}`,{headers:e});if(!n.ok)throw new Error(`Failed to list canvases: ${n.statusText}`);return n.json()},AM=async(r,t)=>{const e=gu(),n=await fetch(`${du}/canvas/share`,{method:"POST",headers:e,body:JSON.stringify({canvasId:r,userId:t})});if(!n.ok)throw new Error(`Failed to share canvas: ${n.statusText}`);return n.json()},kC="https://editor-backend-gwvsmxazbq-el.a.run.app/api/v1",DM=async r=>{const t=await fetch(`${kC}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),e=await t.json();if(!t.ok)throw new Error(e.message||"Registration failed");return e.success&&e.data.token&&localStorage.setItem("authToken",e.data.token),e},kM=async r=>{const t=await fetch(`${kC}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),e=await t.json();if(!t.ok)throw new Error(e.message||"Login failed");return e.success&&e.data.token&&localStorage.setItem("authToken",e.data.token),e},MC=()=>localStorage.getItem("authToken"),MM=()=>{localStorage.removeItem("authToken")},jM=()=>{const r=MC();if(!r)return null;try{const t=r.split(".");if(t.length!==3)return null;const e=t[1],n=e+"=".repeat((4-e.length%4)%4),s=atob(n),o=JSON.parse(s);if(o&&o.name&&o.email)return{id:o.id||o.sub||"",email:o.email,name:o.name}}catch(t){console.error("Error decoding token:",t)}return null},RM=()=>!!MC(),vy=({title:r="Loading Canvas",text:t="Preparing your editor..."})=>D.jsx("div",{className:"loading-overlay",children:D.jsxs("div",{className:"loading-container",children:[D.jsxs("div",{className:"modern-spinner",children:[D.jsx("div",{className:"spinner-ring"}),D.jsx("div",{className:"spinner-ring"}),D.jsx("div",{className:"spinner-ring"})]}),D.jsx("h3",{className:"loading-title",children:r}),D.jsx("p",{className:"loading-text",children:t})]})}),LM=()=>{const[r,t]=M.useState([]),[e,n]=M.useState(!0),[s,o]=M.useState(!1),c=_d();M.useEffect(()=>{(async()=>{try{n(!0);const v=await OM(50,0);v.success&&v.data&&t(v.data)}catch(v){console.error("Error fetching canvases:",v)}finally{n(!1)}})()},[]);const u=async()=>{o(!0);try{const y=await TM("Untitled Design");y.success&&y.data.id&&c(`/editor/${y.data.id}`)}catch(y){console.error("Error creating canvas:",y),alert("Failed to create new design. Please try again.")}finally{o(!1)}},f=y=>{c(`/editor/${y}`)},d=()=>{MM(),window.location.href="/"},g=y=>{if(!y)return"Unknown date";const v=new Date(y);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(v)};return D.jsxs("div",{className:"dashboard",children:[D.jsxs("div",{className:"dashboard-header",children:[D.jsx("h1",{className:"dashboard-title",children:"My Designs"}),D.jsxs("div",{className:"dashboard-actions",children:[D.jsx("button",{className:"logout-btn",onClick:d,children:"Logout"}),D.jsx("button",{className:"create-new-btn",onClick:u,disabled:s,children:s?"Creating...":"+ Create New Design"})]})]}),D.jsx("div",{className:"dashboard-content",children:e?D.jsx(vy,{title:"Loading Designs",text:"Fetching your designs..."}):r.length===0?D.jsxs("div",{className:"dashboard-empty",children:[D.jsx(vM,{className:"empty-icon"}),D.jsx("h3",{children:"No designs yet"}),D.jsx("p",{children:"Create your first design to get started!"}),D.jsx("button",{className:"create-first-btn",onClick:u,disabled:s,children:s?"Creating...":"Create New Design"})]}):D.jsx("div",{className:"canvas-grid",children:r.map(y=>{const v=y._id||y.id||"";return D.jsxs("div",{className:"canvas-card",onClick:()=>f(v),children:[D.jsx("div",{className:"canvas-card-preview",children:D.jsx("div",{className:"canvas-placeholder",children:y.metadata?.title?.[0]?.toUpperCase()||"D"})}),D.jsxs("div",{className:"canvas-card-info",children:[D.jsx("h3",{className:"canvas-card-title",children:y.metadata?.title||"Untitled Design"}),D.jsxs("p",{className:"canvas-card-date",children:["Updated: ",g(y.metadata?.updatedAt)]})]})]},v)})})})]})},pn=()=>new Map,v0=r=>{const t=pn();return r.forEach((e,n)=>{t.set(n,e)}),t},qr=(r,t,e)=>{let n=r.get(t);return n===void 0&&r.set(t,n=e()),n},NM=(r,t)=>{const e=[];for(const[n,s]of r)e.push(t(s,n));return e},BM=(r,t)=>{for(const[e,n]of r)if(t(n,e))return!0;return!1},Ds=()=>new Set,Lm=r=>r[r.length-1],zM=(r,t)=>{for(let e=0;e<t.length;e++)r.push(t[e])},Bi=Array.from,UM=Array.isArray;class jC{constructor(){this._observers=pn()}on(t,e){return qr(this._observers,t,Ds).add(e),e}once(t,e){const n=(...s)=>{this.off(t,n),e(...s)};this.on(t,n)}off(t,e){const n=this._observers.get(t);n!==void 0&&(n.delete(e),n.size===0&&this._observers.delete(t))}emit(t,e){return Bi((this._observers.get(t)||pn()).values()).forEach(n=>n(...e))}destroy(){this._observers=pn()}}class FM{constructor(){this._observers=pn()}on(t,e){qr(this._observers,t,Ds).add(e)}once(t,e){const n=(...s)=>{this.off(t,n),e(...s)};this.on(t,n)}off(t,e){const n=this._observers.get(t);n!==void 0&&(n.delete(e),n.size===0&&this._observers.delete(t))}emit(t,e){return Bi((this._observers.get(t)||pn()).values()).forEach(n=>n(...e))}destroy(){this._observers=pn()}}const zi=Math.floor,kf=Math.abs,by=(r,t)=>r<t?r:t,La=(r,t)=>r>t?r:t,PM=Math.pow,RC=r=>r!==0?r<0:1/r<0,Ix=1,$x=2,Nm=4,Bm=8,Hc=32,Mi=64,Bn=128,Td=31,b0=63,ba=127,HM=2147483647,LC=Number.MAX_SAFE_INTEGER,YM=Number.isInteger||(r=>typeof r=="number"&&isFinite(r)&&zi(r)===r),VM=String.fromCharCode,XM=r=>r.toLowerCase(),GM=/^\s*/g,IM=r=>r.replace(GM,""),$M=/([A-Z])/g,Wx=(r,t)=>IM(r.replace($M,e=>`${t}${XM(e)}`)),WM=r=>{const t=unescape(encodeURIComponent(r)),e=t.length,n=new Uint8Array(e);for(let s=0;s<e;s++)n[s]=t.codePointAt(s);return n},Yc=typeof TextEncoder<"u"?new TextEncoder:null,qM=r=>Yc.encode(r),KM=Yc?qM:WM;let kc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});kc&&kc.decode(new Uint8Array).length===1&&(kc=null);class pu{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Ke=()=>new pu,Sy=r=>{let t=r.cpos;for(let e=0;e<r.bufs.length;e++)t+=r.bufs[e].length;return t},oe=r=>{const t=new Uint8Array(Sy(r));let e=0;for(let n=0;n<r.bufs.length;n++){const s=r.bufs[n];t.set(s,e),e+=s.length}return t.set(new Uint8Array(r.cbuf.buffer,0,r.cpos),e),t},QM=(r,t)=>{const e=r.cbuf.length;e-r.cpos<t&&(r.bufs.push(new Uint8Array(r.cbuf.buffer,0,r.cpos)),r.cbuf=new Uint8Array(La(e,t)*2),r.cpos=0)},Ne=(r,t)=>{const e=r.cbuf.length;r.cpos===e&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(e*2),r.cpos=0),r.cbuf[r.cpos++]=t},S0=Ne,vt=(r,t)=>{for(;t>ba;)Ne(r,Bn|ba&t),t=zi(t/128);Ne(r,ba&t)},xy=(r,t)=>{const e=RC(t);for(e&&(t=-t),Ne(r,(t>b0?Bn:0)|(e?Mi:0)|b0&t),t=zi(t/64);t>0;)Ne(r,(t>ba?Bn:0)|ba&t),t=zi(t/128)},x0=new Uint8Array(3e4),ZM=x0.length/3,JM=(r,t)=>{if(t.length<ZM){const e=Yc.encodeInto(t,x0).written||0;vt(r,e);for(let n=0;n<e;n++)Ne(r,x0[n])}else me(r,KM(t))},t5=(r,t)=>{const e=unescape(encodeURIComponent(t)),n=e.length;vt(r,n);for(let s=0;s<n;s++)Ne(r,e.codePointAt(s))},Sa=Yc&&Yc.encodeInto?JM:t5,Ed=(r,t)=>{const e=r.cbuf.length,n=r.cpos,s=by(e-n,t.length),o=t.length-s;r.cbuf.set(t.subarray(0,s),n),r.cpos+=s,o>0&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(La(e*2,o)),r.cbuf.set(t.subarray(s)),r.cpos=o)},me=(r,t)=>{vt(r,t.byteLength),Ed(r,t)},wy=(r,t)=>{QM(r,t);const e=new DataView(r.cbuf.buffer,r.cpos,t);return r.cpos+=t,e},e5=(r,t)=>wy(r,4).setFloat32(0,t,!1),n5=(r,t)=>wy(r,8).setFloat64(0,t,!1),r5=(r,t)=>wy(r,8).setBigInt64(0,t,!1),qx=new DataView(new ArrayBuffer(4)),i5=r=>(qx.setFloat32(0,r),qx.getFloat32(0)===r),Vc=(r,t)=>{switch(typeof t){case"string":Ne(r,119),Sa(r,t);break;case"number":YM(t)&&kf(t)<=HM?(Ne(r,125),xy(r,t)):i5(t)?(Ne(r,124),e5(r,t)):(Ne(r,123),n5(r,t));break;case"bigint":Ne(r,122),r5(r,t);break;case"object":if(t===null)Ne(r,126);else if(UM(t)){Ne(r,117),vt(r,t.length);for(let e=0;e<t.length;e++)Vc(r,t[e])}else if(t instanceof Uint8Array)Ne(r,116),me(r,t);else{Ne(r,118);const e=Object.keys(t);vt(r,e.length);for(let n=0;n<e.length;n++){const s=e[n];Sa(r,s),Vc(r,t[s])}}break;case"boolean":Ne(r,t?120:121);break;default:Ne(r,127)}};class Kx extends pu{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&vt(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const Qx=r=>{r.count>0&&(xy(r.encoder,r.count===1?r.s:-r.s),r.count>1&&vt(r.encoder,r.count-2))};class Mf{constructor(){this.encoder=new pu,this.s=0,this.count=0}write(t){this.s===t?this.count++:(Qx(this),this.count=1,this.s=t)}toUint8Array(){return Qx(this),oe(this.encoder)}}const Zx=r=>{if(r.count>0){const t=r.diff*2+(r.count===1?0:1);xy(r.encoder,t),r.count>1&&vt(r.encoder,r.count-2)}};class zm{constructor(){this.encoder=new pu,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Zx(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Zx(this),oe(this.encoder)}}class s5{constructor(){this.sarr=[],this.s="",this.lensE=new Mf}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new pu;return this.sarr.push(this.s),this.s="",Sa(t,this.sarr.join("")),Ed(t,this.lensE.toUint8Array()),oe(t)}}const ks=r=>new Error(r),Pr=()=>{throw ks("Method unimplemented")},Vr=()=>{throw ks("Unexpected case")},NC=ks("Unexpected end of array"),BC=ks("Integer out of Range");class Od{constructor(t){this.arr=t,this.pos=0}}const zs=r=>new Od(r),a5=r=>r.pos!==r.arr.length,o5=(r,t)=>{const e=new Uint8Array(r.arr.buffer,r.pos+r.arr.byteOffset,t);return r.pos+=t,e},qe=r=>o5(r,xt(r)),Jo=r=>r.arr[r.pos++],xt=r=>{let t=0,e=1;const n=r.arr.length;for(;r.pos<n;){const s=r.arr[r.pos++];if(t=t+(s&ba)*e,e*=128,s<Bn)return t;if(t>LC)throw BC}throw NC},_y=r=>{let t=r.arr[r.pos++],e=t&b0,n=64;const s=(t&Mi)>0?-1:1;if((t&Bn)===0)return s*e;const o=r.arr.length;for(;r.pos<o;){if(t=r.arr[r.pos++],e=e+(t&ba)*n,n*=128,t<Bn)return s*e;if(e>LC)throw BC}throw NC},l5=r=>{let t=xt(r);if(t===0)return"";{let e=String.fromCodePoint(Jo(r));if(--t<100)for(;t--;)e+=String.fromCodePoint(Jo(r));else for(;t>0;){const n=t<1e4?t:1e4,s=r.arr.subarray(r.pos,r.pos+n);r.pos+=n,e+=String.fromCodePoint.apply(null,s),t-=n}return decodeURIComponent(escape(e))}},c5=r=>kc.decode(qe(r)),Os=kc?c5:l5,Cy=(r,t)=>{const e=new DataView(r.arr.buffer,r.arr.byteOffset+r.pos,t);return r.pos+=t,e},u5=r=>Cy(r,4).getFloat32(0,!1),h5=r=>Cy(r,8).getFloat64(0,!1),f5=r=>Cy(r,8).getBigInt64(0,!1),d5=[r=>{},r=>null,_y,u5,h5,f5,r=>!1,r=>!0,Os,r=>{const t=xt(r),e={};for(let n=0;n<t;n++){const s=Os(r);e[s]=Xc(r)}return e},r=>{const t=xt(r),e=[];for(let n=0;n<t;n++)e.push(Xc(r));return e},qe],Xc=r=>d5[127-Jo(r)](r);class Jx extends Od{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),a5(this)?this.count=xt(this)+1:this.count=-1),this.count--,this.s}}class jf extends Od{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=_y(this);const t=RC(this.s);this.count=1,t&&(this.s=-this.s,this.count=xt(this)+2)}return this.count--,this.s}}class Um extends Od{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=_y(this),e=t&1;this.diff=zi(t/2),this.count=1,e&&(this.count=xt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class g5{constructor(t){this.decoder=new jf(t),this.str=Os(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}const p5=crypto.getRandomValues.bind(crypto),zC=()=>p5(new Uint32Array(1))[0],m5="10000000-1000-4000-8000"+-1e11,y5=()=>m5.replace(/[018]/g,r=>(r^zC()&15>>r/4).toString(16)),Ca=Date.now,tw=r=>new Promise(r);Promise.all.bind(Promise);const ew=r=>r===void 0?null:r;class v5{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let UC=new v5,Ty=!0;try{typeof localStorage<"u"&&localStorage&&(UC=localStorage,Ty=!1)}catch{}const FC=UC,b5=r=>Ty||addEventListener("storage",r),S5=r=>Ty||removeEventListener("storage",r),x5=Object.assign,PC=Object.keys,w5=(r,t)=>{for(const e in r)t(r[e],e)},_5=(r,t)=>{const e=[];for(const n in r)e.push(t(r[n],n));return e},nw=r=>PC(r).length,rw=r=>PC(r).length,C5=r=>{for(const t in r)return!1;return!0},T5=(r,t)=>{for(const e in r)if(!t(r[e],e))return!1;return!0},HC=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),E5=(r,t)=>r===t||rw(r)===rw(t)&&T5(r,(e,n)=>(e!==void 0||HC(t,n))&&t[n]===e),O5=Object.freeze,YC=r=>{for(const t in r){const e=r[t];(typeof e=="object"||typeof e=="function")&&YC(r[t])}return O5(r)},iw=Symbol("Equality"),Ey=(r,t,e=0)=>{try{for(;e<r.length;e++)r[e](...t)}finally{e<r.length&&Ey(r,t,e+1)}},A5=r=>r,Mc=(r,t)=>{if(r===t)return!0;if(r==null||t==null||r.constructor!==t.constructor)return!1;if(r[iw]!=null)return r[iw](t);switch(r.constructor){case ArrayBuffer:r=new Uint8Array(r),t=new Uint8Array(t);case Uint8Array:{if(r.byteLength!==t.byteLength)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;break}case Set:{if(r.size!==t.size)return!1;for(const e of r)if(!t.has(e))return!1;break}case Map:{if(r.size!==t.size)return!1;for(const e of r.keys())if(!t.has(e)||!Mc(r.get(e),t.get(e)))return!1;break}case Object:if(nw(r)!==nw(t))return!1;for(const e in r)if(!HC(r,e)||!Mc(r[e],t[e]))return!1;break;case Array:if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(!Mc(r[e],t[e]))return!1;break;default:return!1}return!0},D5=(r,t)=>t.includes(r);var VC={};const Ms=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",XC=typeof window<"u"&&typeof document<"u"&&!Ms;let jr;const k5=()=>{if(jr===void 0)if(Ms){jr=pn();const r=process.argv;let t=null;for(let e=0;e<r.length;e++){const n=r[e];n[0]==="-"?(t!==null&&jr.set(t,""),t=n):t!==null&&(jr.set(t,n),t=null)}t!==null&&jr.set(t,"")}else typeof location=="object"?(jr=pn(),(location.search||"?").slice(1).split("&").forEach(r=>{if(r.length!==0){const[t,e]=r.split("=");jr.set(`--${Wx(t,"-")}`,e),jr.set(`-${Wx(t,"-")}`,e)}})):jr=pn();return jr},w0=r=>k5().has(r),$f=r=>ew(Ms?VC[r.toUpperCase().replaceAll("-","_")]:FC.getItem(r)),GC=r=>w0("--"+r)||$f(r)!==null;GC("production");const M5=Ms&&D5(VC.FORCE_COLOR,["true","1","2"]),j5=M5||!w0("--no-colors")&&!GC("no-color")&&(!Ms||process.stdout.isTTY)&&(!Ms||w0("--color")||$f("COLORTERM")!==null||($f("TERM")||"").includes("color")),IC=r=>new Uint8Array(r),R5=(r,t,e)=>new Uint8Array(r,t,e),L5=r=>new Uint8Array(r),N5=r=>{let t="";for(let e=0;e<r.byteLength;e++)t+=VM(r[e]);return btoa(t)},B5=r=>Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("base64"),z5=r=>{const t=atob(r),e=IC(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e},U5=r=>{const t=Buffer.from(r,"base64");return R5(t.buffer,t.byteOffset,t.byteLength)},F5=XC?N5:B5,P5=XC?z5:U5,H5=r=>{const t=IC(r.byteLength);return t.set(r),t};class Y5{constructor(t,e){this.left=t,this.right=e}}const _i=(r,t)=>new Y5(r,t);typeof DOMParser<"u"&&new DOMParser;const V5=r=>NM(r,(t,e)=>`${e}:${t};`).join(""),Ii=Symbol,$C=Ii(),WC=Ii(),X5=Ii(),G5=Ii(),I5=Ii(),qC=Ii(),$5=Ii(),Oy=Ii(),W5=Ii(),q5=r=>{r.length===1&&r[0]?.constructor===Function&&(r=r[0]());const t=[],e=[];let n=0;for(;n<r.length;n++){const s=r[n];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)t.push(s);else if(s.constructor===Object)break}for(n>0&&e.push(t.join(""));n<r.length;n++){const s=r[n];s instanceof Symbol||e.push(s)}return e},K5={[$C]:_i("font-weight","bold"),[WC]:_i("font-weight","normal"),[X5]:_i("color","blue"),[I5]:_i("color","green"),[G5]:_i("color","grey"),[qC]:_i("color","red"),[$5]:_i("color","purple"),[Oy]:_i("color","orange"),[W5]:_i("color","black")},Q5=r=>{r.length===1&&r[0]?.constructor===Function&&(r=r[0]());const t=[],e=[],n=pn();let s=[],o=0;for(;o<r.length;o++){const c=r[o],u=K5[c];if(u!==void 0)n.set(u.left,u.right);else{if(c===void 0)break;if(c.constructor===String||c.constructor===Number){const f=V5(n);o>0||f.length>0?(t.push("%c"+c),e.push(f)):t.push(c)}else break}}for(o>0&&(s=e,s.unshift(t.join("")));o<r.length;o++){const c=r[o];c instanceof Symbol||s.push(c)}return s},KC=j5?Q5:q5,Z5=(...r)=>{console.log(...KC(r)),QC.forEach(t=>t.print(r))},J5=(...r)=>{console.warn(...KC(r)),r.unshift(Oy),QC.forEach(t=>t.print(r))},QC=Ds(),ZC=r=>({[Symbol.iterator](){return this},next:r}),tj=(r,t)=>ZC(()=>{let e;do e=r.next();while(!e.done&&!t(e.value));return e}),Fm=(r,t)=>ZC(()=>{const{done:e,value:n}=r.next();return{done:e,value:e?void 0:t(n)}});class Ay{constructor(t,e){this.clock=t,this.len=e}}class mu{constructor(){this.clients=new Map}}const JC=(r,t,e)=>t.clients.forEach((n,s)=>{const o=r.doc.store.clients.get(s);if(o!=null){const c=o[o.length-1],u=c.id.clock+c.length;for(let f=0,d=n[f];f<n.length&&d.clock<u;d=n[++f])fT(r,o,d.clock,d.len,e)}}),ej=(r,t)=>{let e=0,n=r.length-1;for(;e<=n;){const s=zi((e+n)/2),o=r[s],c=o.clock;if(c<=t){if(t<c+o.len)return s;e=s+1}else n=s-1}return null},tT=(r,t)=>{const e=r.clients.get(t.client);return e!==void 0&&ej(e,t.clock)!==null},Dy=r=>{r.clients.forEach(t=>{t.sort((s,o)=>s.clock-o.clock);let e,n;for(e=1,n=1;e<t.length;e++){const s=t[n-1],o=t[e];s.clock+s.len>=o.clock?s.len=La(s.len,o.clock+o.len-s.clock):(n<e&&(t[n]=o),n++)}t.length=n})},nj=r=>{const t=new mu;for(let e=0;e<r.length;e++)r[e].clients.forEach((n,s)=>{if(!t.clients.has(s)){const o=n.slice();for(let c=e+1;c<r.length;c++)zM(o,r[c].clients.get(s)||[]);t.clients.set(s,o)}});return Dy(t),t},Wf=(r,t,e,n)=>{qr(r.clients,t,()=>[]).push(new Ay(e,n))},rj=()=>new mu,ij=r=>{const t=rj();return r.clients.forEach((e,n)=>{const s=[];for(let o=0;o<e.length;o++){const c=e[o];if(c.deleted){const u=c.id.clock;let f=c.length;if(o+1<e.length)for(let d=e[o+1];o+1<e.length&&d.deleted;d=e[++o+1])f+=d.length;s.push(new Ay(u,f))}}s.length>0&&t.clients.set(n,s)}),t},gl=(r,t)=>{vt(r.restEncoder,t.clients.size),Bi(t.clients.entries()).sort((e,n)=>n[0]-e[0]).forEach(([e,n])=>{r.resetDsCurVal(),vt(r.restEncoder,e);const s=n.length;vt(r.restEncoder,s);for(let o=0;o<s;o++){const c=n[o];r.writeDsClock(c.clock),r.writeDsLen(c.len)}})},ky=r=>{const t=new mu,e=xt(r.restDecoder);for(let n=0;n<e;n++){r.resetDsCurVal();const s=xt(r.restDecoder),o=xt(r.restDecoder);if(o>0){const c=qr(t.clients,s,()=>[]);for(let u=0;u<o;u++)c.push(new Ay(r.readDsClock(),r.readDsLen()))}}return t},sw=(r,t,e)=>{const n=new mu,s=xt(r.restDecoder);for(let o=0;o<s;o++){r.resetDsCurVal();const c=xt(r.restDecoder),u=xt(r.restDecoder),f=e.clients.get(c)||[],d=Be(e,c);for(let g=0;g<u;g++){const y=r.readDsClock(),v=y+r.readDsLen();if(y<d){d<v&&Wf(n,c,d,v-d);let b=Xr(f,y),S=f[b];for(!S.deleted&&S.id.clock<y&&(f.splice(b+1,0,ed(t,S,y-S.id.clock)),b++);b<f.length&&(S=f[b++],S.id.clock<v);)S.deleted||(v<S.id.clock+S.length&&f.splice(b,0,ed(t,S,v-S.id.clock)),S.delete(t))}else Wf(n,c,y,v-y)}}if(n.clients.size>0){const o=new Ta;return vt(o.restEncoder,0),gl(o,n),o.toUint8Array()}return null},eT=zC;class pl extends jC{constructor({guid:t=y5(),collectionid:e=null,gc:n=!0,gcFilter:s=()=>!0,meta:o=null,autoLoad:c=!1,shouldLoad:u=!0}={}){super(),this.gc=n,this.gcFilter=s,this.clientID=eT(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new uT,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=u,this.autoLoad=c,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=tw(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const f=()=>tw(d=>{const g=y=>{(y===void 0||y===!0)&&(this.off("sync",g),d())};this.on("sync",g)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=f()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=f()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Zt(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Bi(this.subdocs).map(t=>t.guid))}transact(t,e=null){return Zt(this,t,e)}get(t,e=Ie){const n=qr(this.share,t,()=>{const o=new e;return o._integrate(this,null),o}),s=n.constructor;if(e!==Ie&&s!==e)if(s===Ie){const o=new e;o._map=n._map,n._map.forEach(c=>{for(;c!==null;c=c.left)c.parent=o}),o._start=n._start;for(let c=o._start;c!==null;c=c.right)c.parent=o;return o._length=n._length,this.share.set(t,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return n}getArray(t=""){return this.get(t,Io)}getText(t=""){return this.get(t,nl)}getMap(t=""){return this.get(t,el)}getXmlElement(t=""){return this.get(t,rl)}getXmlFragment(t=""){return this.get(t,Ea)}toJSON(){const t={};return this.share.forEach((e,n)=>{t[n]=e.toJSON()}),t}destroy(){this.isDestroyed=!0,Bi(this.subdocs).forEach(e=>e.destroy());const t=this._item;if(t!==null){this._item=null;const e=t.content;e.doc=new pl({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Zt(t.parent.doc,n=>{const s=e.doc;t.deleted||n.subdocsAdded.add(s),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class nT{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return xt(this.restDecoder)}readDsLen(){return xt(this.restDecoder)}}class rT extends nT{readLeftID(){return jt(xt(this.restDecoder),xt(this.restDecoder))}readRightID(){return jt(xt(this.restDecoder),xt(this.restDecoder))}readClient(){return xt(this.restDecoder)}readInfo(){return Jo(this.restDecoder)}readString(){return Os(this.restDecoder)}readParentInfo(){return xt(this.restDecoder)===1}readTypeRef(){return xt(this.restDecoder)}readLen(){return xt(this.restDecoder)}readAny(){return Xc(this.restDecoder)}readBuf(){return H5(qe(this.restDecoder))}readJSON(){return JSON.parse(Os(this.restDecoder))}readKey(){return Os(this.restDecoder)}}class sj{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=xt(this.restDecoder),this.dsCurrVal}readDsLen(){const t=xt(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class tl extends sj{constructor(t){super(t),this.keys=[],xt(t),this.keyClockDecoder=new Um(qe(t)),this.clientDecoder=new jf(qe(t)),this.leftClockDecoder=new Um(qe(t)),this.rightClockDecoder=new Um(qe(t)),this.infoDecoder=new Jx(qe(t),Jo),this.stringDecoder=new g5(qe(t)),this.parentInfoDecoder=new Jx(qe(t),Jo),this.typeRefDecoder=new jf(qe(t)),this.lenDecoder=new jf(qe(t))}readLeftID(){return new Go(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Go(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Xc(this.restDecoder)}readBuf(){return qe(this.restDecoder)}readJSON(){return Xc(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class iT{constructor(){this.restEncoder=Ke()}toUint8Array(){return oe(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){vt(this.restEncoder,t)}writeDsLen(t){vt(this.restEncoder,t)}}class yu extends iT{writeLeftID(t){vt(this.restEncoder,t.client),vt(this.restEncoder,t.clock)}writeRightID(t){vt(this.restEncoder,t.client),vt(this.restEncoder,t.clock)}writeClient(t){vt(this.restEncoder,t)}writeInfo(t){S0(this.restEncoder,t)}writeString(t){Sa(this.restEncoder,t)}writeParentInfo(t){vt(this.restEncoder,t?1:0)}writeTypeRef(t){vt(this.restEncoder,t)}writeLen(t){vt(this.restEncoder,t)}writeAny(t){Vc(this.restEncoder,t)}writeBuf(t){me(this.restEncoder,t)}writeJSON(t){Sa(this.restEncoder,JSON.stringify(t))}writeKey(t){Sa(this.restEncoder,t)}}class sT{constructor(){this.restEncoder=Ke(),this.dsCurrVal=0}toUint8Array(){return oe(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,vt(this.restEncoder,e)}writeDsLen(t){t===0&&Vr(),vt(this.restEncoder,t-1),this.dsCurrVal+=t}}class Ta extends sT{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new zm,this.clientEncoder=new Mf,this.leftClockEncoder=new zm,this.rightClockEncoder=new zm,this.infoEncoder=new Kx(S0),this.stringEncoder=new s5,this.parentInfoEncoder=new Kx(S0),this.typeRefEncoder=new Mf,this.lenEncoder=new Mf}toUint8Array(){const t=Ke();return vt(t,0),me(t,this.keyClockEncoder.toUint8Array()),me(t,this.clientEncoder.toUint8Array()),me(t,this.leftClockEncoder.toUint8Array()),me(t,this.rightClockEncoder.toUint8Array()),me(t,oe(this.infoEncoder)),me(t,this.stringEncoder.toUint8Array()),me(t,oe(this.parentInfoEncoder)),me(t,this.typeRefEncoder.toUint8Array()),me(t,this.lenEncoder.toUint8Array()),Ed(t,oe(this.restEncoder)),oe(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Vc(this.restEncoder,t)}writeBuf(t){me(this.restEncoder,t)}writeJSON(t){Vc(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);e===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const aj=(r,t,e,n)=>{n=La(n,t[0].id.clock);const s=Xr(t,n);vt(r.restEncoder,t.length-s),r.writeClient(e),vt(r.restEncoder,n);const o=t[s];o.write(r,n-o.id.clock);for(let c=s+1;c<t.length;c++)t[c].write(r,0)},My=(r,t,e)=>{const n=new Map;e.forEach((s,o)=>{Be(t,o)>s&&n.set(o,s)}),Ad(t).forEach((s,o)=>{e.has(o)||n.set(o,0)}),vt(r.restEncoder,n.size),Bi(n.entries()).sort((s,o)=>o[0]-s[0]).forEach(([s,o])=>{aj(r,t.clients.get(s),s,o)})},oj=(r,t)=>{const e=pn(),n=xt(r.restDecoder);for(let s=0;s<n;s++){const o=xt(r.restDecoder),c=new Array(o),u=r.readClient();let f=xt(r.restDecoder);e.set(u,{i:0,refs:c});for(let d=0;d<o;d++){const g=r.readInfo();switch(Td&g){case 0:{const y=r.readLen();c[d]=new er(jt(u,f),y),f+=y;break}case 10:{const y=xt(r.restDecoder);c[d]=new nr(jt(u,f),y),f+=y;break}default:{const y=(g&(Mi|Bn))===0,v=new De(jt(u,f),null,(g&Bn)===Bn?r.readLeftID():null,null,(g&Mi)===Mi?r.readRightID():null,y?r.readParentInfo()?t.get(r.readString()):r.readLeftID():null,y&&(g&Hc)===Hc?r.readString():null,MT(r,g));c[d]=v,f+=v.length}}}}return e},lj=(r,t,e)=>{const n=[];let s=Bi(e.keys()).sort((b,S)=>b-S);if(s.length===0)return null;const o=()=>{if(s.length===0)return null;let b=e.get(s[s.length-1]);for(;b.refs.length===b.i;)if(s.pop(),s.length>0)b=e.get(s[s.length-1]);else return null;return b};let c=o();if(c===null)return null;const u=new uT,f=new Map,d=(b,S)=>{const w=f.get(b);(w==null||w>S)&&f.set(b,S)};let g=c.refs[c.i++];const y=new Map,v=()=>{for(const b of n){const S=b.id.client,w=e.get(S);w?(w.i--,u.clients.set(S,w.refs.slice(w.i)),e.delete(S),w.i=0,w.refs=[]):u.clients.set(S,[b]),s=s.filter(_=>_!==S)}n.length=0};for(;;){if(g.constructor!==nr){const S=qr(y,g.id.client,()=>Be(t,g.id.client))-g.id.clock;if(S<0)n.push(g),d(g.id.client,g.id.clock-1),v();else{const w=g.getMissing(r,t);if(w!==null){n.push(g);const _=e.get(w)||{refs:[],i:0};if(_.refs.length===_.i)d(w,Be(t,w)),v();else{g=_.refs[_.i++];continue}}else(S===0||S<g.length)&&(g.integrate(r,S),y.set(g.id.client,g.id.clock+g.length))}}if(n.length>0)g=n.pop();else if(c!==null&&c.i<c.refs.length)g=c.refs[c.i++];else{if(c=o(),c===null)break;g=c.refs[c.i++]}}if(u.clients.size>0){const b=new Ta;return My(b,u,new Map),vt(b.restEncoder,0),{missing:f,update:b.toUint8Array()}}return null},cj=(r,t)=>My(r,t.doc.store,t.beforeState),uj=(r,t,e,n=new tl(r))=>Zt(t,s=>{s.local=!1;let o=!1;const c=s.doc,u=c.store,f=oj(n,c),d=lj(s,u,f),g=u.pendingStructs;if(g){for(const[v,b]of g.missing)if(b<Be(u,v)){o=!0;break}if(d){for(const[v,b]of d.missing){const S=g.missing.get(v);(S==null||S>b)&&g.missing.set(v,b)}g.update=qf([g.update,d.update])}}else u.pendingStructs=d;const y=sw(n,s,u);if(u.pendingDs){const v=new tl(zs(u.pendingDs));xt(v.restDecoder);const b=sw(v,s,u);y&&b?u.pendingDs=qf([y,b]):u.pendingDs=y||b}else u.pendingDs=y;if(o){const v=u.pendingStructs.update;u.pendingStructs=null,aT(s.doc,v)}},e,!1),aT=(r,t,e,n=tl)=>{const s=zs(t);uj(s,r,e,new n(s))},hj=(r,t,e)=>aT(r,t,e,rT),fj=(r,t,e=new Map)=>{My(r,t.store,e),gl(r,ij(t.store))},dj=(r,t=new Uint8Array([0]),e=new Ta)=>{const n=oT(t);fj(e,r,n);const s=[e.toUint8Array()];if(r.store.pendingDs&&s.push(r.store.pendingDs),r.store.pendingStructs&&s.push(Dj(r.store.pendingStructs.update,t)),s.length>1){if(e.constructor===yu)return Oj(s.map((o,c)=>c===0?o:Mj(o)));if(e.constructor===Ta)return qf(s)}return s[0]},gj=(r,t)=>dj(r,t,new yu),pj=r=>{const t=new Map,e=xt(r.restDecoder);for(let n=0;n<e;n++){const s=xt(r.restDecoder),o=xt(r.restDecoder);t.set(s,o)}return t},oT=r=>pj(new nT(zs(r))),lT=(r,t)=>(vt(r.restEncoder,t.size),Bi(t.entries()).sort((e,n)=>n[0]-e[0]).forEach(([e,n])=>{vt(r.restEncoder,e),vt(r.restEncoder,n)}),r),mj=(r,t)=>lT(r,Ad(t.store)),yj=(r,t=new sT)=>(r instanceof Map?lT(t,r):mj(t,r),t.toUint8Array()),vj=r=>yj(r,new iT);class bj{constructor(){this.l=[]}}const aw=()=>new bj,ow=(r,t)=>r.l.push(t),lw=(r,t)=>{const e=r.l,n=e.length;r.l=e.filter(s=>t!==s),n===r.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},cT=(r,t,e)=>Ey(r.l,[t,e]);class Go{constructor(t,e){this.client=t,this.clock=e}}const Xh=(r,t)=>r===t||r!==null&&t!==null&&r.client===t.client&&r.clock===t.clock,jt=(r,t)=>new Go(r,t),Sj=r=>{for(const[t,e]of r.doc.share.entries())if(e===r)return t;throw Vr()},zo=(r,t)=>t===void 0?!r.deleted:t.sv.has(r.id.client)&&(t.sv.get(r.id.client)||0)>r.id.clock&&!tT(t.ds,r.id),_0=(r,t)=>{const e=qr(r.meta,_0,Ds),n=r.doc.store;e.has(t)||(t.sv.forEach((s,o)=>{s<Be(n,o)&&js(r,jt(o,s))}),JC(r,t.ds,s=>{}),e.add(t))};class uT{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Ad=r=>{const t=new Map;return r.clients.forEach((e,n)=>{const s=e[e.length-1];t.set(n,s.id.clock+s.length)}),t},Be=(r,t)=>{const e=r.clients.get(t);if(e===void 0)return 0;const n=e[e.length-1];return n.id.clock+n.length},hT=(r,t)=>{let e=r.clients.get(t.id.client);if(e===void 0)e=[],r.clients.set(t.id.client,e);else{const n=e[e.length-1];if(n.id.clock+n.length!==t.id.clock)throw Vr()}e.push(t)},Xr=(r,t)=>{let e=0,n=r.length-1,s=r[n],o=s.id.clock;if(o===t)return n;let c=zi(t/(o+s.length-1)*n);for(;e<=n;){if(s=r[c],o=s.id.clock,o<=t){if(t<o+s.length)return c;e=c+1}else n=c-1;c=zi((e+n)/2)}throw Vr()},xj=(r,t)=>{const e=r.clients.get(t.client);return e[Xr(e,t.clock)]},Pm=xj,C0=(r,t,e)=>{const n=Xr(t,e),s=t[n];return s.id.clock<e&&s instanceof De?(t.splice(n+1,0,ed(r,s,e-s.id.clock)),n+1):n},js=(r,t)=>{const e=r.doc.store.clients.get(t.client);return e[C0(r,e,t.clock)]},cw=(r,t,e)=>{const n=t.clients.get(e.client),s=Xr(n,e.clock),o=n[s];return e.clock!==o.id.clock+o.length-1&&o.constructor!==er&&n.splice(s+1,0,ed(r,o,e.clock-o.id.clock+1)),o},wj=(r,t,e)=>{const n=r.clients.get(t.id.client);n[Xr(n,t.id.clock)]=e},fT=(r,t,e,n,s)=>{if(n===0)return;const o=e+n;let c=C0(r,t,e),u;do u=t[c++],o<u.id.clock+u.length&&C0(r,t,o),s(u);while(c<t.length&&t[c].id.clock<o)};class _j{constructor(t,e,n){this.doc=t,this.deleteSet=new mu,this.beforeState=Ad(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const uw=(r,t)=>t.deleteSet.clients.size===0&&!BM(t.afterState,(e,n)=>t.beforeState.get(n)!==e)?!1:(Dy(t.deleteSet),cj(r,t),gl(r,t.deleteSet),!0),hw=(r,t,e)=>{const n=t._item;(n===null||n.id.clock<(r.beforeState.get(n.id.client)||0)&&!n.deleted)&&qr(r.changed,t,Ds).add(e)},Rf=(r,t)=>{let e=r[t],n=r[t-1],s=t;for(;s>0;e=n,n=r[--s-1]){if(n.deleted===e.deleted&&n.constructor===e.constructor&&n.mergeWith(e)){e instanceof De&&e.parentSub!==null&&e.parent._map.get(e.parentSub)===e&&e.parent._map.set(e.parentSub,n);continue}break}const o=t-s;return o&&r.splice(t+1-o,o),o},Cj=(r,t,e)=>{for(const[n,s]of r.clients.entries()){const o=t.clients.get(n);for(let c=s.length-1;c>=0;c--){const u=s[c],f=u.clock+u.len;for(let d=Xr(o,u.clock),g=o[d];d<o.length&&g.id.clock<f;g=o[++d]){const y=o[d];if(u.clock+u.len<=y.id.clock)break;y instanceof De&&y.deleted&&!y.keep&&e(y)&&y.gc(t,!1)}}}},Tj=(r,t)=>{r.clients.forEach((e,n)=>{const s=t.clients.get(n);for(let o=e.length-1;o>=0;o--){const c=e[o],u=by(s.length-1,1+Xr(s,c.clock+c.len-1));for(let f=u,d=s[f];f>0&&d.id.clock>=c.clock;d=s[f])f-=1+Rf(s,f)}})},dT=(r,t)=>{if(t<r.length){const e=r[t],n=e.doc,s=n.store,o=e.deleteSet,c=e._mergeStructs;try{Dy(o),e.afterState=Ad(e.doc.store),n.emit("beforeObserverCalls",[e,n]);const u=[];e.changed.forEach((f,d)=>u.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(e,f)})),u.push(()=>{e.changedParentTypes.forEach((f,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(f=f.filter(g=>g.target._item===null||!g.target._item.deleted),f.forEach(g=>{g.currentTarget=d,g._path=null}),f.sort((g,y)=>g.path.length-y.path.length),cT(d._dEH,f,e))})}),u.push(()=>n.emit("afterTransaction",[e,n])),Ey(u,[]),e._needFormattingCleanup&&Gj(e)}finally{n.gc&&Cj(o,s,n.gcFilter),Tj(o,s),e.afterState.forEach((g,y)=>{const v=e.beforeState.get(y)||0;if(v!==g){const b=s.clients.get(y),S=La(Xr(b,v),1);for(let w=b.length-1;w>=S;)w-=1+Rf(b,w)}});for(let g=c.length-1;g>=0;g--){const{client:y,clock:v}=c[g].id,b=s.clients.get(y),S=Xr(b,v);S+1<b.length&&Rf(b,S+1)>1||S>0&&Rf(b,S)}if(!e.local&&e.afterState.get(n.clientID)!==e.beforeState.get(n.clientID)&&(Z5(Oy,$C,"[yjs] ",WC,qC,"Changed the client-id because another client seems to be using it."),n.clientID=eT()),n.emit("afterTransactionCleanup",[e,n]),n._observers.has("update")){const g=new yu;uw(g,e)&&n.emit("update",[g.toUint8Array(),e.origin,n,e])}if(n._observers.has("updateV2")){const g=new Ta;uw(g,e)&&n.emit("updateV2",[g.toUint8Array(),e.origin,n,e])}const{subdocsAdded:u,subdocsLoaded:f,subdocsRemoved:d}=e;(u.size>0||d.size>0||f.size>0)&&(u.forEach(g=>{g.clientID=n.clientID,g.collectionid==null&&(g.collectionid=n.collectionid),n.subdocs.add(g)}),d.forEach(g=>n.subdocs.delete(g)),n.emit("subdocs",[{loaded:f,added:u,removed:d},n,e]),d.forEach(g=>g.destroy())),r.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,r])):dT(r,t+1)}}},Zt=(r,t,e=null,n=!0)=>{const s=r._transactionCleanups;let o=!1,c=null;r._transaction===null&&(o=!0,r._transaction=new _j(r,e,n),s.push(r._transaction),s.length===1&&r.emit("beforeAllTransactions",[r]),r.emit("beforeTransaction",[r._transaction,r]));try{c=t(r._transaction)}finally{if(o){const u=r._transaction===s[0];r._transaction=null,u&&dT(s,0)}}return c};function*Ej(r){const t=xt(r.restDecoder);for(let e=0;e<t;e++){const n=xt(r.restDecoder),s=r.readClient();let o=xt(r.restDecoder);for(let c=0;c<n;c++){const u=r.readInfo();if(u===10){const f=xt(r.restDecoder);yield new nr(jt(s,o),f),o+=f}else if((Td&u)!==0){const f=(u&(Mi|Bn))===0,d=new De(jt(s,o),null,(u&Bn)===Bn?r.readLeftID():null,null,(u&Mi)===Mi?r.readRightID():null,f?r.readParentInfo()?r.readString():r.readLeftID():null,f&&(u&Hc)===Hc?r.readString():null,MT(r,u));yield d,o+=d.length}else{const f=r.readLen();yield new er(jt(s,o),f),o+=f}}}}class jy{constructor(t,e){this.gen=Ej(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===nr);return this.curr}}class Ry{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Oj=r=>qf(r,rT,yu),Aj=(r,t)=>{if(r.constructor===er){const{client:e,clock:n}=r.id;return new er(jt(e,n+t),r.length-t)}else if(r.constructor===nr){const{client:e,clock:n}=r.id;return new nr(jt(e,n+t),r.length-t)}else{const e=r,{client:n,clock:s}=e.id;return new De(jt(n,s+t),null,jt(n,s+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},qf=(r,t=tl,e=Ta)=>{if(r.length===1)return r[0];const n=r.map(g=>new t(zs(g)));let s=n.map(g=>new jy(g,!0)),o=null;const c=new e,u=new Ry(c);for(;s=s.filter(v=>v.curr!==null),s.sort((v,b)=>{if(v.curr.id.client===b.curr.id.client){const S=v.curr.id.clock-b.curr.id.clock;return S===0?v.curr.constructor===b.curr.constructor?0:v.curr.constructor===nr?1:-1:S}else return b.curr.id.client-v.curr.id.client}),s.length!==0;){const g=s[0],y=g.curr.id.client;if(o!==null){let v=g.curr,b=!1;for(;v!==null&&v.id.clock+v.length<=o.struct.id.clock+o.struct.length&&v.id.client>=o.struct.id.client;)v=g.next(),b=!0;if(v===null||v.id.client!==y||b&&v.id.clock>o.struct.id.clock+o.struct.length)continue;if(y!==o.struct.id.client)_s(u,o.struct,o.offset),o={struct:v,offset:0},g.next();else if(o.struct.id.clock+o.struct.length<v.id.clock)if(o.struct.constructor===nr)o.struct.length=v.id.clock+v.length-o.struct.id.clock;else{_s(u,o.struct,o.offset);const S=v.id.clock-o.struct.id.clock-o.struct.length;o={struct:new nr(jt(y,o.struct.id.clock+o.struct.length),S),offset:0}}else{const S=o.struct.id.clock+o.struct.length-v.id.clock;S>0&&(o.struct.constructor===nr?o.struct.length-=S:v=Aj(v,S)),o.struct.mergeWith(v)||(_s(u,o.struct,o.offset),o={struct:v,offset:0},g.next())}}else o={struct:g.curr,offset:0},g.next();for(let v=g.curr;v!==null&&v.id.client===y&&v.id.clock===o.struct.id.clock+o.struct.length&&v.constructor!==nr;v=g.next())_s(u,o.struct,o.offset),o={struct:v,offset:0}}o!==null&&(_s(u,o.struct,o.offset),o=null),Ly(u);const f=n.map(g=>ky(g)),d=nj(f);return gl(c,d),c.toUint8Array()},Dj=(r,t,e=tl,n=Ta)=>{const s=oT(t),o=new n,c=new Ry(o),u=new e(zs(r)),f=new jy(u,!1);for(;f.curr;){const g=f.curr,y=g.id.client,v=s.get(y)||0;if(f.curr.constructor===nr){f.next();continue}if(g.id.clock+g.length>v)for(_s(c,g,La(v-g.id.clock,0)),f.next();f.curr&&f.curr.id.client===y;)_s(c,f.curr,0),f.next();else for(;f.curr&&f.curr.id.client===y&&f.curr.id.clock+f.curr.length<=v;)f.next()}Ly(c);const d=ky(u);return gl(o,d),o.toUint8Array()},gT=r=>{r.written>0&&(r.clientStructs.push({written:r.written,restEncoder:oe(r.encoder.restEncoder)}),r.encoder.restEncoder=Ke(),r.written=0)},_s=(r,t,e)=>{r.written>0&&r.currClient!==t.id.client&&gT(r),r.written===0&&(r.currClient=t.id.client,r.encoder.writeClient(t.id.client),vt(r.encoder.restEncoder,t.id.clock+e)),t.write(r.encoder,e),r.written++},Ly=r=>{gT(r);const t=r.encoder.restEncoder;vt(t,r.clientStructs.length);for(let e=0;e<r.clientStructs.length;e++){const n=r.clientStructs[e];vt(t,n.written),Ed(t,n.restEncoder)}},kj=(r,t,e,n)=>{const s=new e(zs(r)),o=new jy(s,!1),c=new n,u=new Ry(c);for(let d=o.curr;d!==null;d=o.next())_s(u,t(d),0);Ly(u);const f=ky(s);return gl(c,f),c.toUint8Array()},Mj=r=>kj(r,A5,tl,yu),fw="You must not compute changes after the event-handler fired.";class Dd{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=jj(this.currentTarget,this.target))}deletes(t){return tT(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw ks(fw);const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(s=>{if(s!==null){const o=e._map.get(s);let c,u;if(this.adds(o)){let f=o.left;for(;f!==null&&this.adds(f);)f=f.left;if(this.deletes(o))if(f!==null&&this.deletes(f))c="delete",u=Lm(f.content.getContent());else return;else f!==null&&this.deletes(f)?(c="update",u=Lm(f.content.getContent())):(c="add",u=void 0)}else if(this.deletes(o))c="delete",u=Lm(o.content.getContent());else return;t.set(s,{action:c,oldValue:u})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw ks(fw);const e=this.target,n=Ds(),s=Ds(),o=[];if(t={added:n,deleted:s,delta:o,keys:this.keys},this.transaction.changed.get(e).has(null)){let u=null;const f=()=>{u&&o.push(u)};for(let d=e._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((u===null||u.delete===void 0)&&(f(),u={delete:0}),u.delete+=d.length,s.add(d)):this.adds(d)?((u===null||u.insert===void 0)&&(f(),u={insert:[]}),u.insert=u.insert.concat(d.content.getContent()),n.add(d)):((u===null||u.retain===void 0)&&(f(),u={retain:0}),u.retain+=d.length);u!==null&&u.retain===void 0&&f()}this._changes=t}return t}}const jj=(r,t)=>{const e=[];for(;t._item!==null&&t!==r;){if(t._item.parentSub!==null)e.unshift(t._item.parentSub);else{let n=0,s=t._item.parent._start;for(;s!==t._item&&s!==null;)!s.deleted&&s.countable&&(n+=s.length),s=s.right;e.unshift(n)}t=t._item.parent}return e},Qe=()=>{J5("Invalid access: Add Yjs type to a document before reading data.")},pT=80;let Ny=0;class Rj{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=Ny++}}const Lj=r=>{r.timestamp=Ny++},mT=(r,t,e)=>{r.p.marker=!1,r.p=t,t.marker=!0,r.index=e,r.timestamp=Ny++},Nj=(r,t,e)=>{if(r.length>=pT){const n=r.reduce((s,o)=>s.timestamp<o.timestamp?s:o);return mT(n,t,e),n}else{const n=new Rj(t,e);return r.push(n),n}},kd=(r,t)=>{if(r._start===null||t===0||r._searchMarker===null)return null;const e=r._searchMarker.length===0?null:r._searchMarker.reduce((o,c)=>kf(t-o.index)<kf(t-c.index)?o:c);let n=r._start,s=0;for(e!==null&&(n=e.p,s=e.index,Lj(e));n.right!==null&&s<t;){if(!n.deleted&&n.countable){if(t<s+n.length)break;s+=n.length}n=n.right}for(;n.left!==null&&s>t;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);return e!==null&&kf(e.index-s)<n.parent.length/pT?(mT(e,n,s),e):Nj(r._searchMarker,n,s)},Gc=(r,t,e)=>{for(let n=r.length-1;n>=0;n--){const s=r[n];if(e>0){let o=s.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(s.index-=o.length);if(o===null||o.marker===!0){r.splice(n,1);continue}s.p=o,o.marker=!0}(t<s.index||e>0&&t===s.index)&&(s.index=La(t,s.index+e))}},Md=(r,t,e)=>{const n=r,s=t.changedParentTypes;for(;qr(s,r,()=>[]).push(e),r._item!==null;)r=r._item.parent;cT(n._eH,e,t)};class Ie{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=aw(),this._dEH=aw(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw Pr()}clone(){throw Pr()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){ow(this._eH,t)}observeDeep(t){ow(this._dEH,t)}unobserve(t){lw(this._eH,t)}unobserveDeep(t){lw(this._dEH,t)}toJSON(){}}const yT=(r,t,e)=>{r.doc??Qe(),t<0&&(t=r._length+t),e<0&&(e=r._length+e);let n=e-t;const s=[];let o=r._start;for(;o!==null&&n>0;){if(o.countable&&!o.deleted){const c=o.content.getContent();if(c.length<=t)t-=c.length;else{for(let u=t;u<c.length&&n>0;u++)s.push(c[u]),n--;t=0}}o=o.right}return s},vT=r=>{r.doc??Qe();const t=[];let e=r._start;for(;e!==null;){if(e.countable&&!e.deleted){const n=e.content.getContent();for(let s=0;s<n.length;s++)t.push(n[s])}e=e.right}return t},Ic=(r,t)=>{let e=0,n=r._start;for(r.doc??Qe();n!==null;){if(n.countable&&!n.deleted){const s=n.content.getContent();for(let o=0;o<s.length;o++)t(s[o],e++,r)}n=n.right}},bT=(r,t)=>{const e=[];return Ic(r,(n,s)=>{e.push(t(n,s,r))}),e},Bj=r=>{let t=r._start,e=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(e===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};e=t.content.getContent(),n=0,t=t.right}const s=e[n++];return e.length<=n&&(e=null),{done:!1,value:s}}}},ST=(r,t)=>{r.doc??Qe();const e=kd(r,t);let n=r._start;for(e!==null&&(n=e.p,t-=e.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},Kf=(r,t,e,n)=>{let s=e;const o=r.doc,c=o.clientID,u=o.store,f=e===null?t._start:e.right;let d=[];const g=()=>{d.length>0&&(s=new De(jt(c,Be(u,c)),s,s&&s.lastId,f,f&&f.id,t,null,new Oa(d)),s.integrate(r,0),d=[])};n.forEach(y=>{if(y===null)d.push(y);else switch(y.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(y);break;default:switch(g(),y.constructor){case Uint8Array:case ArrayBuffer:s=new De(jt(c,Be(u,c)),s,s&&s.lastId,f,f&&f.id,t,null,new vu(new Uint8Array(y))),s.integrate(r,0);break;case pl:s=new De(jt(c,Be(u,c)),s,s&&s.lastId,f,f&&f.id,t,null,new bu(y)),s.integrate(r,0);break;default:if(y instanceof Ie)s=new De(jt(c,Be(u,c)),s,s&&s.lastId,f,f&&f.id,t,null,new $i(y)),s.integrate(r,0);else throw new Error("Unexpected content type in insert operation")}}}),g()},xT=()=>ks("Length exceeded!"),wT=(r,t,e,n)=>{if(e>t._length)throw xT();if(e===0)return t._searchMarker&&Gc(t._searchMarker,e,n.length),Kf(r,t,null,n);const s=e,o=kd(t,e);let c=t._start;for(o!==null&&(c=o.p,e-=o.index,e===0&&(c=c.prev,e+=c&&c.countable&&!c.deleted?c.length:0));c!==null;c=c.right)if(!c.deleted&&c.countable){if(e<=c.length){e<c.length&&js(r,jt(c.id.client,c.id.clock+e));break}e-=c.length}return t._searchMarker&&Gc(t._searchMarker,s,n.length),Kf(r,t,c,n)},zj=(r,t,e)=>{let s=(t._searchMarker||[]).reduce((o,c)=>c.index>o.index?c:o,{index:0,p:t._start}).p;if(s)for(;s.right;)s=s.right;return Kf(r,t,s,e)},_T=(r,t,e,n)=>{if(n===0)return;const s=e,o=n,c=kd(t,e);let u=t._start;for(c!==null&&(u=c.p,e-=c.index);u!==null&&e>0;u=u.right)!u.deleted&&u.countable&&(e<u.length&&js(r,jt(u.id.client,u.id.clock+e)),e-=u.length);for(;n>0&&u!==null;)u.deleted||(n<u.length&&js(r,jt(u.id.client,u.id.clock+n)),u.delete(r),n-=u.length),u=u.right;if(n>0)throw xT();t._searchMarker&&Gc(t._searchMarker,s,-o+n)},Qf=(r,t,e)=>{const n=t._map.get(e);n!==void 0&&n.delete(r)},By=(r,t,e,n)=>{const s=t._map.get(e)||null,o=r.doc,c=o.clientID;let u;if(n==null)u=new Oa([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:u=new Oa([n]);break;case Uint8Array:u=new vu(n);break;case pl:u=new bu(n);break;default:if(n instanceof Ie)u=new $i(n);else throw new Error("Unexpected content type")}new De(jt(c,Be(o.store,c)),s,s&&s.lastId,null,null,t,e,u).integrate(r,0)},zy=(r,t)=>{r.doc??Qe();const e=r._map.get(t);return e!==void 0&&!e.deleted?e.content.getContent()[e.length-1]:void 0},CT=r=>{const t={};return r.doc??Qe(),r._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},TT=(r,t)=>{r.doc??Qe();const e=r._map.get(t);return e!==void 0&&!e.deleted},Uj=(r,t)=>{const e={};return r._map.forEach((n,s)=>{let o=n;for(;o!==null&&(!t.sv.has(o.id.client)||o.id.clock>=(t.sv.get(o.id.client)||0));)o=o.left;o!==null&&zo(o,t)&&(e[s]=o.content.getContent()[o.length-1])}),e},Gh=r=>(r.doc??Qe(),tj(r._map.entries(),t=>!t[1].deleted));class Fj extends Dd{}class Io extends Ie{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Io;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Io}clone(){const t=new Io;return t.insert(0,this.toArray().map(e=>e instanceof Ie?e.clone():e)),t}get length(){return this.doc??Qe(),this._length}_callObserver(t,e){super._callObserver(t,e),Md(this,t,new Fj(this,t))}insert(t,e){this.doc!==null?Zt(this.doc,n=>{wT(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.doc!==null?Zt(this.doc,e=>{zj(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){this.doc!==null?Zt(this.doc,n=>{_T(n,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return ST(this,t)}toArray(){return vT(this)}slice(t=0,e=this.length){return yT(this,t,e)}toJSON(){return this.map(t=>t instanceof Ie?t.toJSON():t)}map(t){return bT(this,t)}forEach(t){Ic(this,t)}[Symbol.iterator](){return Bj(this)}_write(t){t.writeTypeRef(uR)}}const Pj=r=>new Io;class Hj extends Dd{constructor(t,e,n){super(t,e),this.keysChanged=n}}class el extends Ie{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((n,s)=>{this.set(s,n)}),this._prelimContent=null}_copy(){return new el}clone(){const t=new el;return this.forEach((e,n)=>{t.set(n,e instanceof Ie?e.clone():e)}),t}_callObserver(t,e){Md(this,t,new Hj(this,t,e))}toJSON(){this.doc??Qe();const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const s=e.content.getContent()[e.length-1];t[n]=s instanceof Ie?s.toJSON():s}}),t}get size(){return[...Gh(this)].length}keys(){return Fm(Gh(this),t=>t[0])}values(){return Fm(Gh(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return Fm(Gh(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??Qe(),this._map.forEach((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Zt(this.doc,e=>{Qf(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return this.doc!==null?Zt(this.doc,n=>{By(n,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return zy(this,t)}has(t){return TT(this,t)}clear(){this.doc!==null?Zt(this.doc,t=>{this.forEach(function(e,n,s){Qf(t,s,n)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(hR)}}const Yj=r=>new el,Cs=(r,t)=>r===t||typeof r=="object"&&typeof t=="object"&&r&&t&&E5(r,t);class T0{constructor(t,e,n,s){this.left=t,this.right=e,this.index=n,this.currentAttributes=s}forward(){switch(this.right===null&&Vr(),this.right.content.constructor){case Me:this.right.deleted||ml(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const dw=(r,t,e)=>{for(;t.right!==null&&e>0;){switch(t.right.content.constructor){case Me:t.right.deleted||ml(t.currentAttributes,t.right.content);break;default:t.right.deleted||(e<t.right.length&&js(r,jt(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Ih=(r,t,e,n)=>{const s=new Map,o=n?kd(t,e):null;if(o){const c=new T0(o.p.left,o.p,o.index,s);return dw(r,c,e-o.index)}else{const c=new T0(null,t._start,0,s);return dw(r,c,e)}},ET=(r,t,e,n)=>{for(;e.right!==null&&(e.right.deleted===!0||e.right.content.constructor===Me&&Cs(n.get(e.right.content.key),e.right.content.value));)e.right.deleted||n.delete(e.right.content.key),e.forward();const s=r.doc,o=s.clientID;n.forEach((c,u)=>{const f=e.left,d=e.right,g=new De(jt(o,Be(s.store,o)),f,f&&f.lastId,d,d&&d.id,t,null,new Me(u,c));g.integrate(r,0),e.right=g,e.forward()})},ml=(r,t)=>{const{key:e,value:n}=t;n===null?r.delete(e):r.set(e,n)},OT=(r,t)=>{for(;r.right!==null;){if(!(r.right.deleted||r.right.content.constructor===Me&&Cs(t[r.right.content.key]??null,r.right.content.value)))break;r.forward()}},AT=(r,t,e,n)=>{const s=r.doc,o=s.clientID,c=new Map;for(const u in n){const f=n[u],d=e.currentAttributes.get(u)??null;if(!Cs(d,f)){c.set(u,d);const{left:g,right:y}=e;e.right=new De(jt(o,Be(s.store,o)),g,g&&g.lastId,y,y&&y.id,t,null,new Me(u,f)),e.right.integrate(r,0),e.forward()}}return c},Hm=(r,t,e,n,s)=>{e.currentAttributes.forEach((v,b)=>{s[b]===void 0&&(s[b]=null)});const o=r.doc,c=o.clientID;OT(e,s);const u=AT(r,t,e,s),f=n.constructor===String?new Gr(n):n instanceof Ie?new $i(n):new Na(n);let{left:d,right:g,index:y}=e;t._searchMarker&&Gc(t._searchMarker,e.index,f.getLength()),g=new De(jt(c,Be(o.store,c)),d,d&&d.lastId,g,g&&g.id,t,null,f),g.integrate(r,0),e.right=g,e.index=y,e.forward(),ET(r,t,e,u)},gw=(r,t,e,n,s)=>{const o=r.doc,c=o.clientID;OT(e,s);const u=AT(r,t,e,s);t:for(;e.right!==null&&(n>0||u.size>0&&(e.right.deleted||e.right.content.constructor===Me));){if(!e.right.deleted)switch(e.right.content.constructor){case Me:{const{key:f,value:d}=e.right.content,g=s[f];if(g!==void 0){if(Cs(g,d))u.delete(f);else{if(n===0)break t;u.set(f,d)}e.right.delete(r)}else e.currentAttributes.set(f,d);break}default:n<e.right.length&&js(r,jt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length;break}e.forward()}if(n>0){let f="";for(;n>0;n--)f+=`
`;e.right=new De(jt(c,Be(o.store,c)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new Gr(f)),e.right.integrate(r,0),e.forward()}ET(r,t,e,u)},DT=(r,t,e,n,s)=>{let o=t;const c=pn();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===Me){const d=o.content;c.set(d.key,d)}o=o.right}let u=0,f=!1;for(;t!==o;){if(e===t&&(f=!0),!t.deleted){const d=t.content;switch(d.constructor){case Me:{const{key:g,value:y}=d,v=n.get(g)??null;(c.get(g)!==d||v===y)&&(t.delete(r),u++,!f&&(s.get(g)??null)===y&&v!==y&&(v===null?s.delete(g):s.set(g,v))),!f&&!t.deleted&&ml(s,d);break}}}t=t.right}return u},Vj=(r,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Me){const n=t.content.key;e.has(n)?t.delete(r):e.add(n)}t=t.left}},Xj=r=>{let t=0;return Zt(r.doc,e=>{let n=r._start,s=r._start,o=pn();const c=v0(o);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case Me:ml(c,s.content);break;default:t+=DT(e,n,s,o,c),o=v0(c),n=s;break}s=s.right}}),t},Gj=r=>{const t=new Set,e=r.doc;for(const[n,s]of r.afterState.entries()){const o=r.beforeState.get(n)||0;s!==o&&fT(r,e.store.clients.get(n),o,s,c=>{!c.deleted&&c.content.constructor===Me&&c.constructor!==er&&t.add(c.parent)})}Zt(e,n=>{JC(r,r.deleteSet,s=>{if(s instanceof er||!s.parent._hasFormatting||t.has(s.parent))return;const o=s.parent;s.content.constructor===Me?t.add(o):Vj(n,s)});for(const s of t)Xj(s)})},pw=(r,t,e)=>{const n=e,s=v0(t.currentAttributes),o=t.right;for(;e>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case $i:case Na:case Gr:e<t.right.length&&js(r,jt(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(r);break}t.forward()}o&&DT(r,o,t.right,s,t.currentAttributes);const c=(t.left||t.right).parent;return c._searchMarker&&Gc(c._searchMarker,t.index,-n+e),t};class Ij extends Dd{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,e=[];Zt(t,n=>{const s=new Map,o=new Map;let c=this.target._start,u=null;const f={};let d="",g=0,y=0;const v=()=>{if(u!==null){let b=null;switch(u){case"delete":y>0&&(b={delete:y}),y=0;break;case"insert":(typeof d=="object"||d.length>0)&&(b={insert:d},s.size>0&&(b.attributes={},s.forEach((S,w)=>{S!==null&&(b.attributes[w]=S)}))),d="";break;case"retain":g>0&&(b={retain:g},C5(f)||(b.attributes=x5({},f))),g=0;break}b&&e.push(b),u=null}};for(;c!==null;){switch(c.content.constructor){case $i:case Na:this.adds(c)?this.deletes(c)||(v(),u="insert",d=c.content.getContent()[0],v()):this.deletes(c)?(u!=="delete"&&(v(),u="delete"),y+=1):c.deleted||(u!=="retain"&&(v(),u="retain"),g+=1);break;case Gr:this.adds(c)?this.deletes(c)||(u!=="insert"&&(v(),u="insert"),d+=c.content.str):this.deletes(c)?(u!=="delete"&&(v(),u="delete"),y+=c.length):c.deleted||(u!=="retain"&&(v(),u="retain"),g+=c.length);break;case Me:{const{key:b,value:S}=c.content;if(this.adds(c)){if(!this.deletes(c)){const w=s.get(b)??null;Cs(w,S)?S!==null&&c.delete(n):(u==="retain"&&v(),Cs(S,o.get(b)??null)?delete f[b]:f[b]=S)}}else if(this.deletes(c)){o.set(b,S);const w=s.get(b)??null;Cs(w,S)||(u==="retain"&&v(),f[b]=w)}else if(!c.deleted){o.set(b,S);const w=f[b];w!==void 0&&(Cs(w,S)?w!==null&&c.delete(n):(u==="retain"&&v(),S===null?delete f[b]:f[b]=S))}c.deleted||(u==="insert"&&v(),ml(s,c.content));break}}c=c.right}for(v();e.length>0;){const b=e[e.length-1];if(b.retain!==void 0&&b.attributes===void 0)e.pop();else break}}),this._delta=e}return this._delta}}class nl extends Ie{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Qe(),this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new nl}clone(){const t=new nl;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new Ij(this,t,e);Md(this,t,n),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??Qe();let t="",e=this._start;for(;e!==null;)!e.deleted&&e.countable&&e.content.constructor===Gr&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){this.doc!==null?Zt(this.doc,n=>{const s=new T0(null,this._start,0,new Map);for(let o=0;o<t.length;o++){const c=t[o];if(c.insert!==void 0){const u=!e&&typeof c.insert=="string"&&o===t.length-1&&s.right===null&&c.insert.slice(-1)===`
`?c.insert.slice(0,-1):c.insert;(typeof u!="string"||u.length>0)&&Hm(n,this,s,u,c.attributes||{})}else c.retain!==void 0?gw(n,this,s,c.retain,c.attributes||{}):c.delete!==void 0&&pw(n,s,c.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,n){this.doc??Qe();const s=[],o=new Map,c=this.doc;let u="",f=this._start;function d(){if(u.length>0){const y={};let v=!1;o.forEach((S,w)=>{v=!0,y[w]=S});const b={insert:u};v&&(b.attributes=y),s.push(b),u=""}}const g=()=>{for(;f!==null;){if(zo(f,t)||e!==void 0&&zo(f,e))switch(f.content.constructor){case Gr:{const y=o.get("ychange");t!==void 0&&!zo(f,t)?(y===void 0||y.user!==f.id.client||y.type!=="removed")&&(d(),o.set("ychange",n?n("removed",f.id):{type:"removed"})):e!==void 0&&!zo(f,e)?(y===void 0||y.user!==f.id.client||y.type!=="added")&&(d(),o.set("ychange",n?n("added",f.id):{type:"added"})):y!==void 0&&(d(),o.delete("ychange")),u+=f.content.str;break}case $i:case Na:{d();const y={insert:f.content.getContent()[0]};if(o.size>0){const v={};y.attributes=v,o.forEach((b,S)=>{v[S]=b})}s.push(y);break}case Me:zo(f,t)&&(d(),ml(o,f.content));break}f=f.right}d()};return t||e?Zt(c,y=>{t&&_0(y,t),e&&_0(y,e),g()},"cleanup"):g(),s}insert(t,e,n){if(e.length<=0)return;const s=this.doc;s!==null?Zt(s,o=>{const c=Ih(o,this,t,!n);n||(n={},c.currentAttributes.forEach((u,f)=>{n[f]=u})),Hm(o,this,c,e,n)}):this._pending.push(()=>this.insert(t,e,n))}insertEmbed(t,e,n){const s=this.doc;s!==null?Zt(s,o=>{const c=Ih(o,this,t,!n);Hm(o,this,c,e,n||{})}):this._pending.push(()=>this.insertEmbed(t,e,n||{}))}delete(t,e){if(e===0)return;const n=this.doc;n!==null?Zt(n,s=>{pw(s,Ih(s,this,t,!0),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,n){if(e===0)return;const s=this.doc;s!==null?Zt(s,o=>{const c=Ih(o,this,t,!1);c.right!==null&&gw(o,this,c,e,n)}):this._pending.push(()=>this.format(t,e,n))}removeAttribute(t){this.doc!==null?Zt(this.doc,e=>{Qf(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){this.doc!==null?Zt(this.doc,n=>{By(n,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return zy(this,t)}getAttributes(){return CT(this)}_write(t){t.writeTypeRef(fR)}}const $j=r=>new nl;class Ym{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??Qe()}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(e)))do if(e=t.content.type,!t.deleted&&(e.constructor===rl||e.constructor===Ea)&&e._start!==null)t=e._start;else for(;t!==null;){const n=t.next;if(n!==null){t=n;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Ea extends Ie{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ea}clone(){const t=new Ea;return t.insert(0,this.toArray().map(e=>e instanceof Ie?e.clone():e)),t}get length(){return this.doc??Qe(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new Ym(this,t)}querySelector(t){t=t.toUpperCase();const n=new Ym(this,s=>s.nodeName&&s.nodeName.toUpperCase()===t).next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),Bi(new Ym(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){Md(this,t,new Kj(this,e,t))}toString(){return bT(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const s=t.createDocumentFragment();return n!==void 0&&n._createAssociation(s,this),Ic(this,o=>{s.insertBefore(o.toDOM(t,e,n),null)}),s}insert(t,e){this.doc!==null?Zt(this.doc,n=>{wT(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(this.doc!==null)Zt(this.doc,n=>{const s=t&&t instanceof Ie?t._item:t;Kf(n,this,s,e)});else{const n=this._prelimContent,s=t===null?0:n.findIndex(o=>o===t)+1;if(s===0&&t!==null)throw ks("Reference item not found");n.splice(s,0,...e)}}delete(t,e=1){this.doc!==null?Zt(this.doc,n=>{_T(n,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return vT(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return ST(this,t)}slice(t=0,e=this.length){return yT(this,t,e)}forEach(t){Ic(this,t)}_write(t){t.writeTypeRef(gR)}}const Wj=r=>new Ea;class rl extends Ea{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((n,s)=>{this.setAttribute(s,n)}),this._prelimAttrs=null}_copy(){return new rl(this.nodeName)}clone(){const t=new rl(this.nodeName),e=this.getAttributes();return w5(e,(n,s)=>{typeof n=="string"&&t.setAttribute(s,n)}),t.insert(0,this.toArray().map(n=>n instanceof Ie?n.clone():n)),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const u in t)n.push(u);n.sort();const s=n.length;for(let u=0;u<s;u++){const f=n[u];e.push(f+'="'+t[f]+'"')}const o=this.nodeName.toLocaleLowerCase(),c=e.length>0?" "+e.join(" "):"";return`<${o}${c}>${super.toString()}</${o}>`}removeAttribute(t){this.doc!==null?Zt(this.doc,e=>{Qf(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){this.doc!==null?Zt(this.doc,n=>{By(n,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return zy(this,t)}hasAttribute(t){return TT(this,t)}getAttributes(t){return t?Uj(this,t):CT(this)}toDOM(t=document,e={},n){const s=t.createElement(this.nodeName),o=this.getAttributes();for(const c in o){const u=o[c];typeof u=="string"&&s.setAttribute(c,u)}return Ic(this,c=>{s.appendChild(c.toDOM(t,e,n))}),n!==void 0&&n._createAssociation(s,this),s}_write(t){t.writeTypeRef(dR),t.writeKey(this.nodeName)}}const qj=r=>new rl(r.readKey());class Kj extends Dd{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class Zf extends el{constructor(t){super(),this.hookName=t}_copy(){return new Zf(this.hookName)}clone(){const t=new Zf(this.hookName);return this.forEach((e,n)=>{t.set(n,e)}),t}toDOM(t=document,e={},n){const s=e[this.hookName];let o;return s!==void 0?o=s.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(o,this),o}_write(t){t.writeTypeRef(pR),t.writeKey(this.hookName)}}const Qj=r=>new Zf(r.readKey());class Jf extends nl{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new Jf}clone(){const t=new Jf;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const s=t.createTextNode(this.toString());return n!==void 0&&n._createAssociation(s,this),s}toString(){return this.toDelta().map(t=>{const e=[];for(const s in t.attributes){const o=[];for(const c in t.attributes[s])o.push({key:c,value:t.attributes[s][c]});o.sort((c,u)=>c.key<u.key?-1:1),e.push({nodeName:s,attrs:o})}e.sort((s,o)=>s.nodeName<o.nodeName?-1:1);let n="";for(let s=0;s<e.length;s++){const o=e[s];n+=`<${o.nodeName}`;for(let c=0;c<o.attrs.length;c++){const u=o.attrs[c];n+=` ${u.key}="${u.value}"`}n+=">"}n+=t.insert;for(let s=e.length-1;s>=0;s--)n+=`</${e[s].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(mR)}}const Zj=r=>new Jf;class Uy{constructor(t,e){this.id=t,this.length=e}get deleted(){throw Pr()}mergeWith(t){return!1}write(t,e,n){throw Pr()}integrate(t,e){throw Pr()}}const Jj=0;class er extends Uy{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),hT(t.doc.store,this)}write(t,e){t.writeInfo(Jj),t.writeLen(this.length-e)}getMissing(t,e){return null}}class vu{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new vu(this.content)}splice(t){throw Pr()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const tR=r=>new vu(r.readBuf());class $c{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new $c(this.len)}splice(t){const e=new $c(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){Wf(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const eR=r=>new $c(r.readLen()),kT=(r,t)=>new pl({guid:r,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class bu{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),t.meta!==null&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new bu(kT(this.doc.guid,this.opts))}splice(t){throw Pr()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const nR=r=>new bu(kT(r.readString(),r.readAny()));class Na{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Na(this.embed)}splice(t){throw Pr()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const rR=r=>new Na(r.readJSON());class Me{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Me(this.key,this.value)}splice(t){throw Pr()}mergeWith(t){return!1}integrate(t,e){const n=e.parent;n._searchMarker=null,n._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const iR=r=>new Me(r.readKey(),r.readJSON());class td{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new td(this.arr)}splice(t){const e=new td(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let s=e;s<n;s++){const o=this.arr[s];t.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}}const sR=r=>{const t=r.readLen(),e=[];for(let n=0;n<t;n++){const s=r.readString();s==="undefined"?e.push(void 0):e.push(JSON.parse(s))}return new td(e)},aR=$f("node_env")==="development";class Oa{constructor(t){this.arr=t,aR&&YC(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Oa(this.arr)}splice(t){const e=new Oa(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let s=e;s<n;s++){const o=this.arr[s];t.writeAny(o)}}getRef(){return 8}}const oR=r=>{const t=r.readLen(),e=[];for(let n=0;n<t;n++)e.push(r.readAny());return new Oa(e)};class Gr{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Gr(this.str)}splice(t){const e=new Gr(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"�",e.str="�"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(e===0?this.str:this.str.slice(e))}getRef(){return 4}}const lR=r=>new Gr(r.readString()),cR=[Pj,Yj,$j,qj,Wj,Qj,Zj],uR=0,hR=1,fR=2,dR=3,gR=4,pR=5,mR=6;class $i{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new $i(this.type._copy())}splice(t){throw Pr()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;e!==null;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;e!==null;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(t,!0),n=n.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const yR=r=>new $i(cR[r.readTypeRef()](r)),ed=(r,t,e)=>{const{client:n,clock:s}=t.id,o=new De(jt(n,s+e),t,jt(n,s+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&o.markDeleted(),t.keep&&(o.keep=!0),t.redone!==null&&(o.redone=jt(t.redone.client,t.redone.clock+e)),t.right=o,o.right!==null&&(o.right.left=o),r._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),t.length=e,o};class De extends Uy{constructor(t,e,n,s,o,c,u,f){super(t,f.getLength()),this.origin=n,this.left=e,this.right=s,this.rightOrigin=o,this.parent=c,this.parentSub=u,this.redone=null,this.content=f,this.info=this.content.isCountable()?$x:0}set marker(t){(this.info&Bm)>0!==t&&(this.info^=Bm)}get marker(){return(this.info&Bm)>0}get keep(){return(this.info&Ix)>0}set keep(t){this.keep!==t&&(this.info^=Ix)}get countable(){return(this.info&$x)>0}get deleted(){return(this.info&Nm)>0}set deleted(t){this.deleted!==t&&(this.info^=Nm)}markDeleted(){this.info|=Nm}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Be(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Be(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Go&&this.id.client!==this.parent.client&&this.parent.clock>=Be(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=cw(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=js(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===er||this.right&&this.right.constructor===er)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===De?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===De&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Go){const n=Pm(e,this.parent);n.constructor===er?this.parent=null:this.parent=n.content.type}return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=cw(t,t.doc.store,jt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,s;if(n!==null)s=n.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const o=new Set,c=new Set;for(;s!==null&&s!==this.right;){if(c.add(s),o.add(s),Xh(this.origin,s.origin)){if(s.id.client<this.id.client)n=s,o.clear();else if(Xh(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&c.has(Pm(t.doc.store,s.origin)))o.has(Pm(t.doc.store,s.origin))||(n=s,o.clear());else break;s=s.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),hT(t.doc.store,this),this.content.integrate(t,this),hw(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new er(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:jt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Xh(t.origin,this.lastId)&&this.right===t&&Xh(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(n=>{n.p===t&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&this.parentSub===null&&(e._length-=this.length),this.markDeleted(),Wf(t.deleteSet,this.id.client,this.id.clock,this.length),hw(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw Vr();this.content.gc(t),e?wj(t,this,new er(this.id,this.length)):this.content=new $c(this.length)}write(t,e){const n=e>0?jt(this.id.client,this.id.clock+e-1):this.origin,s=this.rightOrigin,o=this.parentSub,c=this.content.getRef()&Td|(n===null?0:Bn)|(s===null?0:Mi)|(o===null?0:Hc);if(t.writeInfo(c),n!==null&&t.writeLeftID(n),s!==null&&t.writeRightID(s),n===null&&s===null){const u=this.parent;if(u._item!==void 0){const f=u._item;if(f===null){const d=Sj(u);t.writeParentInfo(!0),t.writeString(d)}else t.writeParentInfo(!1),t.writeLeftID(f.id)}else u.constructor===String?(t.writeParentInfo(!0),t.writeString(u)):u.constructor===Go?(t.writeParentInfo(!1),t.writeLeftID(u)):Vr();o!==null&&t.writeString(o)}this.content.write(t,e)}}const MT=(r,t)=>vR[t&Td](r),vR=[()=>{Vr()},eR,sR,tR,lR,rR,iR,yR,oR,nR,()=>{Vr()}],bR=10;class nr extends Uy{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){Vr()}write(t,e){t.writeInfo(bR),vt(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const jT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},RT="__ $YJS$ __";jT[RT]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");jT[RT]=!0;const LT=new Map;class SR{constructor(t){this.room=t,this.onmessage=null,this._onChange=e=>e.key===t&&this.onmessage!==null&&this.onmessage({data:P5(e.newValue||"")}),b5(this._onChange)}postMessage(t){FC.setItem(this.room,F5(L5(t)))}close(){S5(this._onChange)}}const xR=typeof BroadcastChannel>"u"?SR:BroadcastChannel,Fy=r=>qr(LT,r,()=>{const t=Ds(),e=new xR(r);return e.onmessage=n=>t.forEach(s=>s(n.data,"broadcastchannel")),{bc:e,subs:t}}),wR=(r,t)=>(Fy(r).subs.add(t),t),_R=(r,t)=>{const e=Fy(r),n=e.subs.delete(t);return n&&e.subs.size===0&&(e.bc.close(),LT.delete(r)),n},Uo=(r,t,e=null)=>{const n=Fy(r);n.bc.postMessage(t),n.subs.forEach(s=>s(t,e))},NT=0,Py=1,BT=2,E0=(r,t)=>{vt(r,NT);const e=vj(t);me(r,e)},zT=(r,t,e)=>{vt(r,Py),me(r,gj(t,e))},CR=(r,t,e)=>zT(t,e,qe(r)),UT=(r,t,e)=>{try{hj(t,qe(r),e)}catch(n){console.error("Caught error while handling a Yjs update",n)}},TR=(r,t)=>{vt(r,BT),me(r,t)},ER=UT,OR=(r,t,e,n)=>{const s=xt(r);switch(s){case NT:CR(r,t,e);break;case Py:UT(r,e,n);break;case BT:ER(r,e,n);break;default:throw new Error("Unknown message type")}return s},AR=0,DR=(r,t,e)=>{switch(xt(r)){case AR:e(t,Os(r))}},Vm=3e4;class kR extends FM{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const e=Ca();this.getLocalState()!==null&&Vm/2<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const n=[];this.meta.forEach((s,o)=>{o!==this.clientID&&Vm<=e-s.lastUpdated&&this.states.has(o)&&n.push(o)}),n.length>0&&Hy(this,n,"timeout")},zi(Vm/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),s=n===void 0?0:n.clock+1,o=this.states.get(e);t===null?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:s,lastUpdated:Ca()});const c=[],u=[],f=[],d=[];t===null?d.push(e):o==null?t!=null&&c.push(e):(u.push(e),Mc(o,t)||f.push(e)),(c.length>0||f.length>0||d.length>0)&&this.emit("change",[{added:c,updated:f,removed:d},"local"]),this.emit("update",[{added:c,updated:u,removed:d},"local"])}setLocalStateField(t,e){const n=this.getLocalState();n!==null&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const Hy=(r,t,e)=>{const n=[];for(let s=0;s<t.length;s++){const o=t[s];if(r.states.has(o)){if(r.states.delete(o),o===r.clientID){const c=r.meta.get(o);r.meta.set(o,{clock:c.clock+1,lastUpdated:Ca()})}n.push(o)}}n.length>0&&(r.emit("change",[{added:[],updated:[],removed:n},e]),r.emit("update",[{added:[],updated:[],removed:n},e]))},jc=(r,t,e=r.states)=>{const n=t.length,s=Ke();vt(s,n);for(let o=0;o<n;o++){const c=t[o],u=e.get(c)||null,f=r.meta.get(c).clock;vt(s,c),vt(s,f),Sa(s,JSON.stringify(u))}return oe(s)},MR=(r,t,e)=>{const n=zs(t),s=Ca(),o=[],c=[],u=[],f=[],d=xt(n);for(let g=0;g<d;g++){const y=xt(n);let v=xt(n);const b=JSON.parse(Os(n)),S=r.meta.get(y),w=r.states.get(y),_=S===void 0?0:S.clock;(_<v||_===v&&b===null&&r.states.has(y))&&(b===null?y===r.clientID&&r.getLocalState()!=null?v++:r.states.delete(y):r.states.set(y,b),r.meta.set(y,{clock:v,lastUpdated:s}),S===void 0&&b!==null?o.push(y):S!==void 0&&b===null?f.push(y):b!==null&&(Mc(b,w)||u.push(y),c.push(y)))}(o.length>0||u.length>0||f.length>0)&&r.emit("change",[{added:o,updated:u,removed:f},e]),(o.length>0||c.length>0||f.length>0)&&r.emit("update",[{added:o,updated:c,removed:f},e])},jR=r=>_5(r,(t,e)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&"),ma=0,FT=3,$o=1,RR=2,Su=[];Su[ma]=(r,t,e,n,s)=>{vt(r,ma);const o=OR(t,r,e.doc,e);n&&o===Py&&!e.synced&&(e.synced=!0)};Su[FT]=(r,t,e,n,s)=>{vt(r,$o),me(r,jc(e.awareness,Array.from(e.awareness.getStates().keys())))};Su[$o]=(r,t,e,n,s)=>{MR(e.awareness,qe(t),e)};Su[RR]=(r,t,e,n,s)=>{DR(t,e.doc,(o,c)=>LR(e,c))};const mw=3e4,LR=(r,t)=>console.warn(`Permission denied to access ${r.url}.
${t}`),PT=(r,t,e)=>{const n=zs(t),s=Ke(),o=xt(n),c=r.messageHandlers[o];return c?c(s,n,r,e,o):console.error("Unable to compute message"),s},O0=(r,t,e)=>{t===r.ws&&(r.emit("connection-close",[e,r]),r.ws=null,t.close(),r.wsconnecting=!1,r.wsconnected?(r.wsconnected=!1,r.synced=!1,Hy(r.awareness,Array.from(r.awareness.getStates().keys()).filter(n=>n!==r.doc.clientID),r),r.emit("status",[{status:"disconnected"}])):r.wsUnsuccessfulReconnects++,setTimeout(HT,by(PM(2,r.wsUnsuccessfulReconnects)*100,r.maxBackoffTime),r))},HT=r=>{if(r.shouldConnect&&r.ws===null){const t=new r._WS(r.url,r.protocols);t.binaryType="arraybuffer",r.ws=t,r.wsconnecting=!0,r.wsconnected=!1,r.synced=!1,t.onmessage=e=>{r.wsLastMessageReceived=Ca();const n=PT(r,new Uint8Array(e.data),!0);Sy(n)>1&&t.send(oe(n))},t.onerror=e=>{r.emit("connection-error",[e,r])},t.onclose=e=>{O0(r,t,e)},t.onopen=()=>{r.wsLastMessageReceived=Ca(),r.wsconnecting=!1,r.wsconnected=!0,r.wsUnsuccessfulReconnects=0,r.emit("status",[{status:"connected"}]);const e=Ke();if(vt(e,ma),E0(e,r.doc),t.send(oe(e)),r.awareness.getLocalState()!==null){const n=Ke();vt(n,$o),me(n,jc(r.awareness,[r.doc.clientID])),t.send(oe(n))}},r.emit("status",[{status:"connecting"}])}},Xm=(r,t)=>{const e=r.ws;r.wsconnected&&e&&e.readyState===e.OPEN&&e.send(t),r.bcconnected&&Uo(r.bcChannel,t,r)};class NR extends jC{constructor(t,e,n,{connect:s=!0,awareness:o=new kR(n),params:c={},protocols:u=[],WebSocketPolyfill:f=WebSocket,resyncInterval:d=-1,maxBackoffTime:g=2500,disableBc:y=!1}={}){for(super();t[t.length-1]==="/";)t=t.slice(0,t.length-1);this.serverUrl=t,this.bcChannel=t+"/"+e,this.maxBackoffTime=g,this.params=c,this.protocols=u,this.roomname=e,this.doc=n,this._WS=f,this.awareness=o,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=y,this.wsUnsuccessfulReconnects=0,this.messageHandlers=Su.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=s,this._resyncInterval=0,d>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const v=Ke();vt(v,ma),E0(v,n),this.ws.send(oe(v))}},d)),this._bcSubscriber=(v,b)=>{if(b!==this){const S=PT(this,new Uint8Array(v),!1);Sy(S)>1&&Uo(this.bcChannel,oe(S),this)}},this._updateHandler=(v,b)=>{if(b!==this){const S=Ke();vt(S,ma),TR(S,v),Xm(this,oe(S))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:v,updated:b,removed:S},w)=>{const _=v.concat(b).concat(S),O=Ke();vt(O,$o),me(O,jc(o,_)),Xm(this,oe(O))},this._exitHandler=()=>{Hy(this.awareness,[n.clientID],"app closed")},Ms&&typeof process<"u"&&process.on("exit",this._exitHandler),o.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&mw<Ca()-this.wsLastMessageReceived&&O0(this,this.ws,null)},mw/10),s&&this.connect()}get url(){const t=jR(this.params);return this.serverUrl+"/"+this.roomname+(t.length===0?"":"?"+t)}get synced(){return this._synced}set synced(t){this._synced!==t&&(this._synced=t,this.emit("synced",[t]),this.emit("sync",[t]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),Ms&&typeof process<"u"&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(wR(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const t=Ke();vt(t,ma),E0(t,this.doc),Uo(this.bcChannel,oe(t),this);const e=Ke();vt(e,ma),zT(e,this.doc),Uo(this.bcChannel,oe(e),this);const n=Ke();vt(n,FT),Uo(this.bcChannel,oe(n),this);const s=Ke();vt(s,$o),me(s,jc(this.awareness,[this.doc.clientID])),Uo(this.bcChannel,oe(s),this)}disconnectBc(){const t=Ke();vt(t,$o),me(t,jc(this.awareness,[this.doc.clientID],new Map)),Xm(this,oe(t)),this.bcconnected&&(_R(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&O0(this,this.ws,null)}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(HT(this),this.connectBc())}}function Y(r,t,e){return(t=(function(n){var s=(function(o,c){if(typeof o!="object"||!o)return o;var u=o[Symbol.toPrimitive];if(u!==void 0){var f=u.call(o,c);if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(o)})(n,"string");return typeof s=="symbol"?s:s+""})(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function yw(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),e.push.apply(e,n)}return e}function V(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(e),!0).forEach((function(n){Y(r,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):yw(Object(e)).forEach((function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))}))}return r}function se(r,t){if(r==null)return{};var e,n,s=(function(c,u){if(c==null)return{};var f={};for(var d in c)if({}.hasOwnProperty.call(c,d)){if(u.indexOf(d)>=0)continue;f[d]=c[d]}return f})(r,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)e=o[n],t.indexOf(e)>=0||{}.propertyIsEnumerable.call(r,e)&&(s[e]=r[e])}return s}function Kr(r,t){return t||(t=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(t)}}))}class vw{constructor(){Y(this,"browserShadowBlurConstant",1),Y(this,"DPI",96),Y(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),Y(this,"perfLimitSizeTotal",2097152),Y(this,"maxCacheSideLimit",4096),Y(this,"minCacheSideLimit",256),Y(this,"disableStyleCopyPaste",!1),Y(this,"enableGLFiltering",!0),Y(this,"textureSize",4096),Y(this,"forceGLPutImageData",!1),Y(this,"cachesBoundsOfCurve",!1),Y(this,"fontPaths",{}),Y(this,"NUM_FRACTION_DIGITS",4)}}const Nt=new class extends vw{constructor(r){super(),this.configure(r)}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,r)}addFonts(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=V(V({},this.fontPaths),r)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach((r=>{delete this.fontPaths[r]}))}clearFonts(){this.fontPaths={}}restoreDefaults(r){const t=new vw,e=r?.reduce(((n,s)=>(n[s]=t[s],n)),{})||t;this.configure(e)}},Rs=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return console[r]("fabric",...e)};class Fr extends Error{constructor(t,e){super("fabric: ".concat(t),e)}}class BR extends Fr{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class zR{}class UR extends zR{testPrecision(t,e){const n="precision ".concat(e,` float;
void main(){}`),s=t.createShader(t.FRAGMENT_SHADER);return!!s&&(t.shaderSource(s,n),t.compileShader(s),!!t.getShaderParameter(s,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find((n=>this.testPrecision(e,n))),e.getExtension("WEBGL_lose_context").loseContext(),Rs("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const FR={};let bw;const Ir=()=>bw||(bw={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new UR,dispose(){},copyPasteData:FR}),yl=()=>Ir().document,jd=()=>Ir().window,YT=()=>{var r;return Math.max((r=Nt.devicePixelRatio)!==null&&r!==void 0?r:jd().devicePixelRatio,1)},Rc=new class{constructor(){Y(this,"charWidthsCache",{}),Y(this,"boundsOfCurveCache",{})}getFontCache(r){let{fontFamily:t,fontStyle:e,fontWeight:n}=r;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const s=this.charWidthsCache[t],o="".concat(e.toLowerCase(),"_").concat((n+"").toLowerCase());return s[o]||(s[o]={}),s[o]}clearFontCache(r){(r=(r||"").toLowerCase())?this.charWidthsCache[r]&&delete this.charWidthsCache[r]:this.charWidthsCache={}}limitDimsByArea(r){const{perfLimitSizeTotal:t}=Nt,e=Math.sqrt(t*r);return[Math.floor(e),Math.floor(t/e)]}},A0="6.7.1";function Lf(){}const xu=Math.PI/2,nd=2*Math.PI,Yy=Math.PI/180,sn=Object.freeze([1,0,0,1,0,0]),Vy=16,xs=.4477152502,Tt="center",Ht="left",mn="top",D0="bottom",ye="right",yn="none",Xy=/\r?\n/,VT="moving",Rd="scaling",XT="rotating",Gy="rotate",GT="skewing",Wc="resizing",PR="modifyPoly",HR="modifyPath",rd="changed",Ld="scale",xn="scaleX",sr="scaleY",vl="skewX",bl="skewY",ke="fill",vn="stroke",id="modified",Do="json",Gm="svg",ft=new class{constructor(){this[Do]=new Map,this[Gm]=new Map}has(r){return this[Do].has(r)}getClass(r){const t=this[Do].get(r);if(!t)throw new Fr("No class registered for ".concat(r));return t}setClass(r,t){t?this[Do].set(t,r):(this[Do].set(r.type,r),this[Do].set(r.type.toLowerCase(),r))}getSVGClass(r){return this[Gm].get(r)}setSVGClass(r,t){this[Gm].set(t??r.type.toLowerCase(),r)}},sd=new class extends Array{remove(r){const t=this.indexOf(r);t>-1&&this.splice(t,1)}cancelAll(){const r=this.splice(0);return r.forEach((t=>t.abort())),r}cancelByCanvas(r){if(!r)return[];const t=this.filter((e=>{var n;return e.target===r||typeof e.target=="object"&&((n=e.target)===null||n===void 0?void 0:n.canvas)===r}));return t.forEach((e=>e.abort())),t}cancelByTarget(r){if(!r)return[];const t=this.filter((e=>e.target===r));return t.forEach((e=>e.abort())),t}};class YR{constructor(){Y(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach((n=>{let[s,o]=n;this.on(s,o)})),()=>this.off(t);if(e){const n=t;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(e),()=>this.off(n,e)}return()=>!1}once(t,e){if(typeof t=="object"){const n=[];return Object.entries(t).forEach((s=>{let[o,c]=s;n.push(this.once(o,c))})),()=>n.forEach((s=>s()))}if(e){const n=this.on(t,(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];e.call(this,...o),n()}));return n}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const n=this.__eventListeners[t],s=n.indexOf(e);s>-1&&n.splice(s,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof t=="object"?Object.entries(t).forEach((n=>{let[s,o]=n;this._removeEventListener(s,o)})):this._removeEventListener(t,e)}fire(t,e){var n;if(!this.__eventListeners)return;const s=(n=this.__eventListeners[t])===null||n===void 0?void 0:n.concat();if(s)for(let o=0;o<s.length;o++)s[o].call(this,e||{})}}const Fo=(r,t)=>{const e=r.indexOf(t);return e!==-1&&r.splice(e,1),r},Ui=r=>{if(r===0)return 1;switch(Math.abs(r)/xu){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},Fi=r=>{if(r===0)return 0;const t=r/xu,e=Math.sign(r);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(r)};class Z{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new Z(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new Z(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new Z(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new Z(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new Z(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new Z(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new Z(this.x/t.x,this.y/t.y)}scalarDivide(t){return new Z(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new Z(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}midPointFrom(t){return this.lerp(t)}min(t){return new Z(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new Z(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n}clone(){return new Z(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Iy;const n=Fi(t),s=Ui(t),o=this.subtract(e);return new Z(o.x*s-o.y*n,o.x*n+o.y*s).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Z(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const Iy=new Z(0,0),Nf=r=>!!r&&Array.isArray(r._objects);function IT(r){class t extends r{constructor(){super(...arguments),Y(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];const c=this._objects.push(...s);return s.forEach((u=>this._onObjectAdded(u))),c}insertAt(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),c=1;c<s;c++)o[c-1]=arguments[c];return this._objects.splice(n,0,...o),o.forEach((u=>this._onObjectAdded(u))),this._objects.length}remove(){const n=this._objects,s=[];for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return c.forEach((f=>{const d=n.indexOf(f);d!==-1&&(n.splice(d,1),s.push(f),this._onObjectRemoved(f))})),s}forEachObject(n){this.getObjects().forEach(((s,o,c)=>n(s,o,c)))}getObjects(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return s.length===0?[...this._objects]:this._objects.filter((c=>c.isType(...s)))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,s){return!!this._objects.includes(n)||!!s&&this._objects.some((o=>o instanceof t&&o.contains(n,!0)))}complexity(){return this._objects.reduce(((n,s)=>n+=s.complexity?s.complexity():0),0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(Fo(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(Fo(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,s){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==0){const c=this.findNewLowerIndex(n,o,s);return Fo(this._objects,n),this._objects.splice(c,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,s){if(!n)return!1;const o=this._objects.indexOf(n);if(o!==this._objects.length-1){const c=this.findNewUpperIndex(n,o,s);return Fo(this._objects,n),this._objects.splice(c,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,s){return n!==this._objects[s]&&(Fo(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,s,o){let c;if(o){c=s;for(let u=s-1;u>=0;--u)if(n.isOverlapping(this._objects[u])){c=u;break}}else c=s-1;return c}findNewUpperIndex(n,s,o){let c;if(o){c=s;for(let u=s+1;u<this._objects.length;++u)if(n.isOverlapping(this._objects[u])){c=u;break}}else c=s+1;return c}collectObjects(n){let{left:s,top:o,width:c,height:u}=n,{includeIntersecting:f=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const d=[],g=new Z(s,o),y=g.add(new Z(c,u));for(let v=this._objects.length-1;v>=0;v--){const b=this._objects[v];b.selectable&&b.visible&&(f&&b.intersectsWithRect(g,y)||b.isContainedWithinRect(g,y)||f&&b.containsPoint(g)||f&&b.containsPoint(y))&&d.push(b)}return d}}return t}class $T extends YR{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function Bf(r){return jd().requestAnimationFrame(r)}function VR(r){return jd().cancelAnimationFrame(r)}let XR=0;const Ls=()=>XR++,Pi=()=>{const r=yl().createElement("canvas");if(!r||r.getContext===void 0)throw new Fr("Failed to create `canvas` element");return r},GR=()=>yl().createElement("img"),ar=r=>{const t=Pi();return t.width=r.width,t.height=r.height,t},WT=(r,t,e)=>r.toDataURL("image/".concat(t),e),qT=(r,t,e)=>new Promise(((n,s)=>{r.toBlob(n,"image/".concat(t),e)})),ve=r=>r*Yy,Hi=r=>r/Yy,IR=r=>r.every(((t,e)=>t===sn[e])),gn=(r,t,e)=>new Z(r).transform(t,e),Sr=r=>{const t=1/(r[0]*r[3]-r[1]*r[2]),e=[t*r[3],-t*r[1],-t*r[2],t*r[0],0,0],{x:n,y:s}=new Z(r[4],r[5]).transform(e,!0);return e[4]=-n,e[5]=-s,e},Ge=(r,t,e)=>[r[0]*t[0]+r[2]*t[1],r[1]*t[0]+r[3]*t[1],r[0]*t[2]+r[2]*t[3],r[1]*t[2]+r[3]*t[3],e?0:r[0]*t[4]+r[2]*t[5]+r[4],e?0:r[1]*t[4]+r[3]*t[5]+r[5]],$y=(r,t)=>r.reduceRight(((e,n)=>n&&e?Ge(n,e,t):n||e),void 0)||sn.concat(),KT=r=>{let[t,e]=r;return Math.atan2(e,t)},ad=r=>{const t=KT(r),e=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(e),s=(r[0]*r[3]-r[2]*r[1])/n,o=Math.atan2(r[0]*r[2]+r[1]*r[3],e);return{angle:Hi(t),scaleX:n,scaleY:s,skewX:Hi(o),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},wu=function(r){return[1,0,0,1,r,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Sl(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=ve(r),s=Ui(n),o=Fi(n);return[s,o,-o,s,t?t-(s*t-o*e):0,e?e-(o*t+s*e):0]}const Wy=function(r){return[r,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,0,0]},QT=r=>Math.tan(ve(r)),ZT=r=>[1,0,QT(r),1,0,0],JT=r=>[1,QT(r),0,1,0,0],Nd=r=>{let{scaleX:t=1,scaleY:e=1,flipX:n=!1,flipY:s=!1,skewX:o=0,skewY:c=0}=r,u=Wy(n?-t:t,s?-e:e);return o&&(u=Ge(u,ZT(o),!0)),c&&(u=Ge(u,JT(c),!0)),u},$R=r=>{const{translateX:t=0,translateY:e=0,angle:n=0}=r;let s=wu(t,e);n&&(s=Ge(s,Sl({angle:n})));const o=Nd(r);return IR(o)||(s=Ge(s,o)),s},zf=function(r){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((function(n,s){if(t&&t.aborted)return s(new BR("loadImage"));const o=GR();let c;t&&(c=function(f){o.src="",s(f)},t.addEventListener("abort",c,{once:!0}));const u=function(){o.onload=o.onerror=null,c&&t?.removeEventListener("abort",c),n(o)};r?(o.onload=u,o.onerror=function(){c&&t?.removeEventListener("abort",c),s(new Fr("Error loading ".concat(o.src)))},e&&(o.crossOrigin=e),o.src=r):u()}))},qc=function(r){let{signal:t,reviver:e=Lf}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((n,s)=>{const o=[];t&&t.addEventListener("abort",s,{once:!0}),Promise.all(r.map((c=>ft.getClass(c.type).fromObject(c,{signal:t}).then((u=>(e(c,u),o.push(u),u)))))).then(n).catch((c=>{o.forEach((u=>{u.dispose&&u.dispose()})),s(c)})).finally((()=>{t&&t.removeEventListener("abort",s)}))}))},Bd=function(r){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(((e,n)=>{const s=[];t&&t.addEventListener("abort",n,{once:!0});const o=Object.values(r).map((u=>u&&u.type&&ft.has(u.type)?qc([u],{signal:t}).then((f=>{let[d]=f;return s.push(d),d})):u)),c=Object.keys(r);Promise.all(o).then((u=>u.reduce(((f,d,g)=>(f[c[g]]=d,f)),{}))).then(e).catch((u=>{s.forEach((f=>{f.dispose&&f.dispose()})),n(u)})).finally((()=>{t&&t.removeEventListener("abort",n)}))}))},xl=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce(((t,e)=>(e in r&&(t[e]=r[e]),t)),{})},qy=(r,t)=>Object.keys(r).reduce(((e,n)=>(t(r[n],n,r)&&(e[n]=r[n]),e)),{}),Jt=(r,t)=>parseFloat(Number(r).toFixed(t)),Kc=r=>"matrix("+r.map((t=>Jt(t,Nt.NUM_FRACTION_DIGITS))).join(" ")+")",rr=r=>!!r&&r.toLive!==void 0,Sw=r=>!!r&&typeof r.toObject=="function",xw=r=>!!r&&r.offsetX!==void 0&&"source"in r,da=r=>!!r&&"multiSelectionStacking"in r;function t2(r){const t=r&&vr(r);let e=0,n=0;if(!r||!t)return{left:e,top:n};let s=r;const o=t.documentElement,c=t.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===t?(e=c.scrollLeft||o.scrollLeft||0,n=c.scrollTop||o.scrollTop||0):(e+=s.scrollLeft||0,n+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:e,top:n}}const vr=r=>r.ownerDocument||null,e2=r=>{var t;return((t=r.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},n2=function(r,t,e){let{width:n,height:s}=e,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=s,o>1&&(r.setAttribute("width",(n*o).toString()),r.setAttribute("height",(s*o).toString()),t.scale(o,o))},k0=(r,t)=>{let{width:e,height:n}=t;e&&(r.style.width=typeof e=="number"?"".concat(e,"px"):e),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function ww(r){return r.onselectstart!==void 0&&(r.onselectstart=()=>!1),r.style.userSelect=yn,r}class r2{constructor(t){Y(this,"_originalCanvasStyle",void 0),Y(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(n=t)&&n.getContext!==void 0?t:t&&yl().getElementById(t)||Pi();var n;if(e.hasAttribute("data-fabric"))throw new Fr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:n}=t;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(e)),s.setAttribute("height","".concat(n)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:n,ctx:s}=this.lower;n2(n,s,t,e)}setCSSDimensions(t){k0(this.lower.el,t)}calcOffset(){return(function(t){var e;const n=t&&vr(t),s={left:0,top:0};if(!n)return s;const o=((e=e2(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};s.left+=parseInt(o.borderLeftWidth,10)||0,s.top+=parseInt(o.borderTopWidth,10)||0,s.left+=parseInt(o.paddingLeft,10)||0,s.top+=parseInt(o.paddingTop,10)||0;let c={left:0,top:0};const u=n.documentElement;t.getBoundingClientRect!==void 0&&(c=t.getBoundingClientRect());const f=t2(t);return{left:c.left+f.left-(u.clientLeft||0)+s.left,top:c.top+f.top-(u.clientTop||0)+s.top}})(this.lower.el)}dispose(){Ir().dispose(this.lower.el),delete this.lower}}const WR={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...sn]};class _u extends IT($T){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return _u.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new r2(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];const o=super.insertAt(t,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),o}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(Rs("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?YT():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const s=V({width:this.width,height:this.height},t);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}n||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const n=t,s=[...this.viewportTransform],o=gn(t,Sr(s));s[0]=e,s[3]=e;const c=gn(o,s);s[4]+=n.x-c.x,s[5]+=n.y-c.y,this.setViewportTransform(s)}setZoom(t){this.zoomToPoint(new Z(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new Z(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Bf((()=>this.renderAndReset())))}calcViewportBoundaries(){const t=this.width,e=this.height,n=Sr(this.viewportTransform),s=gn({x:0,y:0},n),o=gn({x:t,y:e},n),c=s.min(o),u=s.max(o);return this.vptCoords={tl:c,tr:new Z(u.x,c.y),bl:new Z(c.x,u.y),br:u}}cancelRequestedRender(){this.nextRenderHandle&&(VR(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const n=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,s)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const n=this.viewportTransform;t.save(),t.transform(...n),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let n=0,s=e.length;n<s;++n)e[n]&&e[n].render(t)}_renderBackgroundOrOverlay(t,e){const n=this["".concat(e,"Color")],s=this["".concat(e,"Image")],o=this.viewportTransform,c=this["".concat(e,"Vpt")];if(!n&&!s)return;const u=rr(n);if(n){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=u?n.toLive(t):n,c&&t.transform(...o),u){t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const f=n.gradientTransform||n.patternTransform;f&&t.transform(...f)}t.fill(),t.restore()}if(s){t.save();const{skipOffscreen:f}=this;this.skipOffscreen=c,c&&t.transform(...o),s.render(t),this.skipOffscreen=f,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new Z(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new Z(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new Z(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new Z(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new Z(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return gn(this.getCenterPoint(),Sr(this.viewportTransform))}_centerObject(t,e){t.setXY(e,Tt,Tt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const n=this.clipPath,s=n&&!n.excludeFromExport?this._toObject(n,t,e):null;return V(V(V({version:A0},xl(this,e)),{},{objects:this._objects.filter((o=>!o.excludeFromExport)).map((o=>this._toObject(o,t,e)))},this.__serializeBgOverlay(t,e)),s?{clipPath:s}:null)}_toObject(t,e,n){let s;this.includeDefaultValues||(s=t.includeDefaultValues,t.includeDefaultValues=!1);const o=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=!!s),o}__serializeBgOverlay(t,e){const n={},s=this.backgroundImage,o=this.overlayImage,c=this.backgroundColor,u=this.overlayColor;return rr(c)?c.excludeFromExport||(n.background=c.toObject(e)):c&&(n.background=c),rr(u)?u.excludeFromExport||(n.overlay=u.toObject(e)):u&&(n.overlay=u),s&&!s.excludeFromExport&&(n.backgroundImage=this._toObject(s,t,e)),o&&!o.excludeFromExport&&(n.overlayImage=this._toObject(o,t,e)),n}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const n=e.width||"".concat(this.width),s=e.height||"".concat(this.height),o=Nt.NUM_FRACTION_DIGITS,c=e.viewBox;let u;if(c)u='viewBox="'.concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height,'" ');else if(this.svgViewportTransformation){const f=this.viewportTransform;u='viewBox="'.concat(Jt(-f[4]/f[0],o)," ").concat(Jt(-f[5]/f[3],o)," ").concat(Jt(this.width/f[0],o)," ").concat(Jt(this.height/f[3],o),'" ')}else u='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',s,'" ',u,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",A0,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(Ls()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map((t=>{const e=this["".concat(t,"Color")];if(rr(e)){const n=this["".concat(t,"Vpt")],s=this.viewportTransform,o={isType:()=>!1,width:this.width/(n?s[0]:1),height:this.height/(n?s[3]:1)};return e.toSVG(o,{additionalTransform:n?Kc(s):""})}})).join("")}createSVGFontFacesMarkup(){const t=[],e={},n=Nt.fontPaths;this._objects.forEach((function o(c){t.push(c),Nf(c)&&c._objects.forEach(o)})),t.forEach((o=>{if(!(c=o)||typeof c._renderText!="function")return;var c;const{styles:u,fontFamily:f}=o;!e[f]&&n[f]&&(e[f]=!0,u&&Object.values(u).forEach((d=>{Object.values(d).forEach((g=>{let{fontFamily:y=""}=g;!e[y]&&n[y]&&(e[y]=!0)}))})))}));const s=Object.keys(e).map((o=>`		@font-face {
			font-family: '`.concat(o,`';
			src: url('`).concat(n[o],`');
		}
`))).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject((n=>{n.excludeFromExport||this._setSVGObject(t,n,e)}))}_setSVGObject(t,e,n){t.push(e.toSVG(n))}_setSVGBgOverlayImage(t,e,n){const s=this[e];s&&!s.excludeFromExport&&s.toSVG&&t.push(s.toSVG(n))}_setSVGBgOverlayColor(t,e){const n=this["".concat(e,"Color")];if(n)if(rr(n)){const s=n.repeat||"",o=this.width,c=this.height,u=this["".concat(e,"Vpt")]?Kc(Sr(this.viewportTransform)):"";t.push('<rect transform="'.concat(u," translate(").concat(o/2,",").concat(c/2,')" x="').concat(n.offsetX-o/2,'" y="').concat(n.offsetY-c/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!xw(n)?o:n.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!xw(n)?c:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Fr("`json` is undefined"));const s=typeof t=="string"?JSON.parse(t):t,{objects:o=[],backgroundImage:c,background:u,overlayImage:f,overlay:d,clipPath:g}=s,y=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([qc(o,{reviver:e,signal:n}),Bd({backgroundImage:c,backgroundColor:u,overlayImage:f,overlayColor:d,clipPath:g},{signal:n})]).then((v=>{let[b,S]=v;return this.clear(),this.add(...b),this.set(s),this.set(S),this.renderOnAddRemove=y,this}))}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=ar(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:n=1,multiplier:s=1,enableRetinaScaling:o=!1}=t,c=s*(o?this.getRetinaScaling():1);return WT(this.toCanvasElement(c,t),e,n)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:n=1,multiplier:s=1,enableRetinaScaling:o=!1}=t,c=s*(o?this.getRetinaScaling():1);return qT(this.toCanvasElement(c,t),e,n)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:n,left:s,top:o,filter:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=(e||this.width)*t,f=(n||this.height)*t,d=this.getZoom(),g=this.width,y=this.height,v=this.skipControlsDrawing,b=d*t,S=this.viewportTransform,w=[b,0,0,b,(S[4]-(s||0))*t,(S[5]-(o||0))*t],_=this.enableRetinaScaling,O=ar({width:u,height:f}),k=c?this._objects.filter((B=>c(B))):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=w,this.width=u,this.height=f,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(O.getContext("2d"),k),this.viewportTransform=S,this.width=g,this.height=y,this.calcViewportBoundaries(),this.enableRetinaScaling=_,this.skipControlsDrawing=v,O}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),sd.cancelByCanvas(this),this.disposed=!0,new Promise(((t,e)=>{const n=()=>{this.destroy(),t(!0)};n.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=n:n()}))}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject((t=>t.dispose())),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}Y(_u,"ownDefaults",WR);const qR=["touchstart","touchmove","touchend"],KR=r=>{const t=t2(r.target),e=(function(n){const s=n.changedTouches;return s&&s[0]?s[0]:n})(r);return new Z(e.clientX+t.left,e.clientY+t.top)},M0=r=>qR.includes(r.type)||r.pointerType==="touch",_w=r=>{r.preventDefault(),r.stopPropagation()},ji=r=>{let t=0,e=0,n=0,s=0;for(let o=0,c=r.length;o<c;o++){const{x:u,y:f}=r[o];(u>n||!o)&&(n=u),(u<t||!o)&&(t=u),(f>s||!o)&&(s=f),(f<e||!o)&&(e=f)}return{left:t,top:e,width:n-t,height:s-e}},QR=["translateX","translateY","scaleX","scaleY"],ZR=(r,t)=>od(r,Ge(t,r.calcOwnMatrix())),od=(r,t)=>{const e=ad(t),{translateX:n,translateY:s,scaleX:o,scaleY:c}=e,u=se(e,QR),f=new Z(n,s);r.flipX=!1,r.flipY=!1,Object.assign(r,u),r.set({scaleX:o,scaleY:c}),r.setPositionByOrigin(f,Tt,Tt)},JR=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},i2=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),Ky=(r,t,e)=>{const n=r/2,s=t/2,o=[new Z(-n,-s),new Z(n,-s),new Z(-n,s),new Z(n,s)].map((u=>u.transform(e))),c=ji(o);return new Z(c.width,c.height)},zd=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sn;return Ge(Sr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:sn),r)},Wo=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sn,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sn;return r.transform(zd(t,e))},t3=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sn,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sn;return r.transform(zd(t,e),!0)},e3=(r,t,e)=>{const n=zd(t,e);return od(r,Ge(n,r.calcOwnMatrix())),n},s2=(r,t)=>{var e;const{transform:{target:n}}=t;(e=n.canvas)===null||e===void 0||e.fire("object:".concat(r),V(V({},t),{},{target:n})),n.fire(r,t)},n3={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ce=r=>typeof r=="string"?n3[r]:r-.5,ld="not-allowed";function a2(r){return Ce(r.originX)===Ce(Tt)&&Ce(r.originY)===Ce(Tt)}function Cw(r){return .5-Ce(r)}const wr=(r,t)=>r[t],o2=(r,t,e,n)=>({e:r,transform:t,pointer:new Z(e,n)});function l2(r,t){const e=r.getTotalAngle()+Hi(Math.atan2(t.y,t.x))+360;return Math.round(e%360/45)}function Qy(r,t,e,n,s){var o;let{target:c,corner:u}=r;const f=c.controls[u],d=((o=c.canvas)===null||o===void 0?void 0:o.getZoom())||1,g=c.padding/d,y=(function(v,b,S,w){const _=v.getRelativeCenterPoint(),O=S!==void 0&&w!==void 0?v.translateToGivenOrigin(_,Tt,Tt,S,w):new Z(v.left,v.top);return(v.angle?b.rotate(-ve(v.angle),_):b).subtract(O)})(c,new Z(n,s),t,e);return y.x>=g&&(y.x-=g),y.x<=-g&&(y.x+=g),y.y>=g&&(y.y-=g),y.y<=g&&(y.y+=g),y.x-=f.offsetX,y.y-=f.offsetY,y}const r3=(r,t,e,n)=>{const{target:s,offsetX:o,offsetY:c}=t,u=e-o,f=n-c,d=!wr(s,"lockMovementX")&&s.left!==u,g=!wr(s,"lockMovementY")&&s.top!==f;return d&&s.set(Ht,u),g&&s.set(mn,f),(d||g)&&s2(VT,o2(r,t,e,n)),d||g},Tw={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Im=(r,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+6*(t-r)*e:e<.5?t:e<2/3?r+(t-r)*(2/3-e)*6:r),Ew=(r,t,e,n)=>{r/=255,t/=255,e/=255;const s=Math.max(r,t,e),o=Math.min(r,t,e);let c,u;const f=(s+o)/2;if(s===o)c=u=0;else{const d=s-o;switch(u=f>.5?d/(2-s-o):d/(s+o),s){case r:c=(t-e)/d+(t<e?6:0);break;case t:c=(e-r)/d+2;break;case e:c=(r-t)/d+4}c/=6}return[Math.round(360*c),Math.round(100*u),Math.round(100*f),n]},Ow=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},$h=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),Aw=r=>{let[t,e,n,s=1]=r;const o=Math.round(.3*t+.59*e+.11*n);return[o,o,o,s]};class It{constructor(t){if(Y(this,"isUnrecognised",!1),t)if(t instanceof It)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,n,s,o=1]=t;this.setSource([e,n,s,o])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in Tw&&(t=Tw[t]),t==="transparent"?[255,255,255,0]:It.sourceFromHex(t)||It.sourceFromRgb(t)||It.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,n]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,n]=Ew(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(n,"%)")}toHsla(){const[t,e,n,s]=Ew(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(n,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,n,s]=this.getSource();return"".concat($h(t)).concat($h(e)).concat($h(n)).concat($h(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(Aw(this.getSource())),this}toBlackWhite(t){const[e,,,n]=Aw(this.getSource()),s=e<(t||127)?0:255;return this.setSource([s,s,s,n]),this}overlayWith(t){t instanceof It||(t=new It(t));const e=this.getSource(),n=t.getSource(),[s,o,c]=e.map(((u,f)=>Math.round(.5*u+.5*n[f])));return this.setSource([s,o,c,e[3]]),this}static fromRgb(t){return It.fromRgba(t)}static fromRgba(t){return new It(It.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(e){const[n,s,o]=e.slice(1,4).map((c=>{const u=parseFloat(c);return c.endsWith("%")?Math.round(2.55*u):u}));return[n,s,o,Ow(e[4])]}}static fromHsl(t){return It.fromHsla(t)}static fromHsla(t){return new It(It.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!e)return;const n=(It.parseAngletoDegrees(e[1])%360+360)%360/360,s=parseFloat(e[2])/100,o=parseFloat(e[3])/100;let c,u,f;if(s===0)c=u=f=o;else{const d=o<=.5?o*(s+1):o+s-o*s,g=2*o-d;c=Im(g,d,n+1/3),u=Im(g,d,n),f=Im(g,d,n-1/3)}return[Math.round(255*c),Math.round(255*u),Math.round(255*f),Ow(e[4])]}static fromHex(t){return new It(It.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let n;n=e.length<=4?e.split("").map((f=>f+f)):e.match(/.{2}/g);const[s,o,c,u=255]=n.map((f=>parseInt(f,16)));return[s,o,c,u/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),n=parseFloat(e);return e.includes("rad")?Hi(n):e.includes("turn")?360*n:n}}const qo=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vy;const e=/\D{0,2}$/.exec(r),n=parseFloat(r),s=Nt.DPI;switch(e?.[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*t;default:return n}},i3=r=>{const[t,e]=r.trim().split(" "),[n,s]=(o=t)&&o!==yn?[o.slice(1,4),o.slice(5,8)]:o===yn?[o,o]:["Mid","Mid"];var o;return{meetOrSlice:e||"meet",alignX:n,alignY:s}},Qc=function(r,t){let e,n,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e="url(#SVGID_".concat(t.id,")");else{const o=new It(t),c=o.getAlpha();e=o.toRgb(),c!==1&&(n=c.toString())}else e="none";return s?"".concat(r,": ").concat(e,"; ").concat(n?"".concat(r,"-opacity: ").concat(n,"; "):""):"".concat(r,'="').concat(e,'" ').concat(n?"".concat(r,'-opacity="').concat(n,'" '):"")};class c2{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):yn,o=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",u=this.strokeLineJoin?this.strokeLineJoin:"miter",f=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=this.opacity!==void 0?this.opacity:"1",g=this.visible?"":" visibility: hidden;",y=t?"":this.getSvgFilter(),v=Qc(ke,this.fill);return[Qc(vn,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",u,"; ","stroke-miterlimit: ",f,"; ",v,"fill-rule: ",e,"; ","opacity: ",d,";",y,g].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Kc(n));return"".concat(s).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=s,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:n,withShadow:s,additionalTransform:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=e?"":'style="'.concat(this.getSvgStyles(),'" '),u=s?'style="'.concat(this.getSvgFilter(),'" '):"",f=this.clipPath,d=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=f&&f.absolutePositioned,y=this.stroke,v=this.fill,b=this.shadow,S=[],w=t.indexOf("COMMON_PARTS");let _;f&&(f.clipPathId="CLIPPATH_".concat(Ls()),_='<clipPath id="'.concat(f.clipPathId,`" >
`).concat(f.toClipPathSVG(n),`</clipPath>
`)),g&&S.push("<g ",u,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),g?"":u+this.getSvgCommons(),` >
`);const O=[c,d,e?"":this.addPaintOrder()," ",o?'transform="'.concat(o,'" '):""].join("");return t[w]=O,rr(v)&&S.push(v.toSVG(this)),rr(y)&&S.push(y.toSVG(this)),b&&S.push(b.toSVG(this)),f&&S.push(_),S.push(t.join("")),S.push(`</g>
`),g&&S.push(`</g>
`),n?n(S.join("")):S.join("")}addPaintOrder(){return this.paintFirst!==ke?' paint-order="'.concat(this.paintFirst,'" '):""}}function Ud(r){return new RegExp("^("+r.join("|")+")\\b","i")}const Aa="textDecorationThickness",u2=["fontSize","fontWeight","fontFamily","fontStyle"],h2=["underline","overline","linethrough"],f2=[...u2,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],d2=[...f2,...h2,"textBackgroundColor","direction",Aa],s3=[...u2,...h2,vn,"strokeWidth",ke,"deltaY","textBackgroundColor",Aa],a3={_reNewline:Xy,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Ht,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Ht,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Aa]:66.667},Ur="justify",cd="justify-left",Lc="justify-right",Nc="justify-center";var Dw,kw,Mw;const xr=String.raw(Dw||(Dw=Kr(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),$m=String.raw(kw||(kw=Kr(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),o3=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+xr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+xr+"))?\\s+(.*)"),l3={cx:Ht,x:Ht,r:"radius",cy:mn,y:mn,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Aa},Wm="font-size",qm="clip-path";Ud(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Ud(["symbol","image","marker","pattern","view","svg"]);const jw=Ud(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(Mw||(Mw=Kr(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),xr,$m,xr,$m,xr,$m,xr));const c3=new Z(1,0),g2=new Z,p2=(r,t)=>r.rotate(t),j0=(r,t)=>new Z(t).subtract(r),R0=r=>r.distanceFrom(g2),L0=(r,t)=>Math.atan2(Bc(r,t),h3(r,t)),u3=r=>L0(c3,r),Zy=r=>r.eq(g2)?r:r.scalarDivide(R0(r)),m2=function(r){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Zy(new Z(-r.y,r.x).scalarMultiply(t?1:-1))},Bc=(r,t)=>r.x*t.y-r.y*t.x,h3=(r,t)=>r.x*t.x+r.y*t.y,Rw=(r,t,e)=>{if(r.eq(t)||r.eq(e))return!0;const n=Bc(t,e),s=Bc(t,r),o=Bc(e,r);return n>=0?s>=0&&o<=0:!(s<=0&&o>=0)},Lw="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Nw=new RegExp("(?:\\s|^)"+Lw+Lw+"("+xr+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Ri{constructor(t){const e=typeof t=="string"?Ri.parseShadow(t):t;Object.assign(this,Ri.ownDefaults,e),this.id=Ls()}static parseShadow(t){const e=t.trim(),[,n=0,s=0,o=0]=(Nw.exec(e)||[]).map((c=>parseFloat(c)||0));return{color:(e.replace(Nw,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:s,blur:o}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=p2(new Z(this.offsetX,this.offsetY),ve(-t.angle)),n=new It(this.color);let s=40,o=40;return t.width&&t.height&&(s=100*Jt((Math.abs(e.x)+this.blur)/t.width,Nt.NUM_FRACTION_DIGITS)+20,o=100*Jt((Math.abs(e.y)+this.blur)/t.height,Nt.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(o,'%" height="').concat(100+2*o,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Jt(this.blur?this.blur/2:0,Nt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Jt(e.x,Nt.NUM_FRACTION_DIGITS),'" dy="').concat(Jt(e.y,Nt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=Ri.ownDefaults;return this.includeDefaultValues?t:qy(t,((n,s)=>n!==e[s]))}static async fromObject(t){return new this(t)}}Y(Ri,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Y(Ri,"type","shadow"),ft.setClass(Ri,"shadow");const il=(r,t,e)=>Math.max(r,Math.min(t,e)),f3=[mn,Ht,xn,sr,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",vl,bl],Wi=[ke,vn,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],d3={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Ht,originY:mn,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:ke,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},g3=(r,t,e,n)=>-e*Math.cos(r/n*xu)+e+t,p3=()=>!1;class Jy{constructor(t){let{startValue:e,byValue:n,duration:s=500,delay:o=0,easing:c=g3,onStart:u=Lf,onChange:f=Lf,onComplete:d=Lf,abort:g=p3,target:y}=t;Y(this,"_state","pending"),Y(this,"durationProgress",0),Y(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=o,this.easing=c,this._onStart=u,this._onChange=f,this._onComplete=d,this._abort=g,this.target=y,this.startValue=e,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout((()=>Bf(t)),this.delay):Bf(t)}tick(t){const e=(t||+new Date)-this.startTime,n=Math.min(e,this.duration);this.durationProgress=n/this.duration;const{value:s,valueProgress:o}=this.calculate(n);this.value=Object.freeze(s),this.valueProgress=o,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Bf(this.tick)))}register(){sd.push(this)}unregister(){sd.remove(this)}abort(){this._state="aborted",this.unregister()}}const m3=["startValue","endValue"];class y3 extends Jy{constructor(t){let{startValue:e=0,endValue:n=100}=t;super(V(V({},se(t,m3)),{},{startValue:e,byValue:n-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const v3=["startValue","endValue"];class b3 extends Jy{constructor(t){let{startValue:e=[0],endValue:n=[100]}=t;super(V(V({},se(t,v3)),{},{startValue:e,byValue:n.map(((s,o)=>s-e[o]))}))}calculate(t){const e=this.startValue.map(((n,s)=>this.easing(t,n,this.byValue[s],this.duration,s)));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const S3=["startValue","endValue","easing","onChange","onComplete","abort"],x3=(r,t,e,n)=>t+e*(1-Math.cos(r/n*xu)),Km=r=>r&&((t,e,n)=>r(new It(t).toRgba(),e,n));class w3 extends Jy{constructor(t){let{startValue:e,endValue:n,easing:s=x3,onChange:o,onComplete:c,abort:u}=t,f=se(t,S3);const d=new It(e).getSource(),g=new It(n).getSource();super(V(V({},f),{},{startValue:d,byValue:g.map(((y,v)=>y-d[v])),easing:s,onChange:Km(o),onComplete:Km(c),abort:Km(u)}))}calculate(t){const[e,n,s,o]=this.startValue.map(((u,f)=>this.easing(t,u,this.byValue[f],this.duration,f))),c=[...[e,n,s].map(Math.round),il(0,o,1)];return{value:c,valueProgress:c.map(((u,f)=>this.byValue[f]!==0?Math.abs((u-this.startValue[f])/this.byValue[f]):0)).find((u=>u!==0))||0}}}function y2(r){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(r)?new b3(r):new y3(r);return t.start(),t}function _3(r){const t=new w3(r);return t.start(),t}class ae{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some((e=>e.eq(t)))}append(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.points=this.points.concat(e.filter((s=>!this.includes(s)))),this}static isPointContained(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(n))return t.eq(e);if(e.x===n.x)return t.x===e.x&&(s||t.y>=Math.min(e.y,n.y)&&t.y<=Math.max(e.y,n.y));if(e.y===n.y)return t.y===e.y&&(s||t.x>=Math.min(e.x,n.x)&&t.x<=Math.max(e.x,n.x));{const o=j0(e,n),c=j0(e,t).divide(o);return s?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static isPointInPolygon(t,e){const n=new Z(t).setX(Math.min(t.x-1,...e.map((o=>o.x))));let s=0;for(let o=0;o<e.length;o++){const c=this.intersectSegmentSegment(e[o],e[(o+1)%e.length],t,n);if(c.includes(t))return!0;s+=+(c.status==="Intersection")}return s%2==1}static intersectLineLine(t,e,n,s){let o=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const u=e.x-t.x,f=e.y-t.y,d=s.x-n.x,g=s.y-n.y,y=t.x-n.x,v=t.y-n.y,b=d*v-g*y,S=u*v-f*y,w=g*u-d*f;if(w!==0){const _=b/w,O=S/w;return(o||0<=_&&_<=1)&&(c||0<=O&&O<=1)?new ae("Intersection").append(new Z(t.x+_*u,t.y+_*f)):new ae}if(b===0||S===0){const _=o||c||ae.isPointContained(t,n,s)||ae.isPointContained(e,n,s)||ae.isPointContained(n,t,e)||ae.isPointContained(s,t,e);return new ae(_?"Coincident":void 0)}return new ae("Parallel")}static intersectSegmentLine(t,e,n,s){return ae.intersectLineLine(t,e,n,s,!1,!0)}static intersectSegmentSegment(t,e,n,s){return ae.intersectLineLine(t,e,n,s,!1,!1)}static intersectLinePolygon(t,e,n){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const o=new ae,c=n.length;for(let u,f,d,g=0;g<c;g++){if(u=n[g],f=n[(g+1)%c],d=ae.intersectLineLine(t,e,u,f,s,!1),d.status==="Coincident")return d;o.append(...d.points)}return o.points.length>0&&(o.status="Intersection"),o}static intersectSegmentPolygon(t,e,n){return ae.intersectLinePolygon(t,e,n,!1)}static intersectPolygonPolygon(t,e){const n=new ae,s=t.length,o=[];for(let c=0;c<s;c++){const u=t[c],f=t[(c+1)%s],d=ae.intersectSegmentPolygon(u,f,e);d.status==="Coincident"?(o.push(d),n.append(u,f)):n.append(...d.points)}return o.length>0&&o.length===t.length?new ae("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(t,e,n){const s=e.min(n),o=e.max(n),c=new Z(o.x,s.y),u=new Z(s.x,o.y);return ae.intersectPolygonPolygon(t,[s,c,o,u])}}class C3 extends $T{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?gn(t,this.group.calcTransformMatrix()):t}setXY(t,e,n){this.group&&(t=gn(t,Sr(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,n)}getRelativeXY(){return new Z(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:n,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),o=[t,e,n,s];if(this.group){const c=this.group.calcTransformMatrix();return o.map((u=>gn(u,c)))}return o}intersectsWithRect(t,e){return ae.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=ae.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every((e=>t.containsPoint(e)))}isContainedWithinRect(t,e){const{left:n,top:s,width:o,height:c}=this.getBoundingRect();return n>=t.x&&n+o<=e.x&&s>=t.y&&s+c<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return ae.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some((n=>n.x<=e.x&&n.x>=t.x&&n.y<=e.y&&n.y>=t.y))||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every((n=>(n.x>=e.x||n.x<=t.x)&&(n.y>=e.y||n.y<=t.y)))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return ji(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(xn,t),this._set(sr,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?Hi(KT(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||sn.concat()}calcACoords(){const t=Sl({angle:this.angle}),{x:e,y:n}=this.getRelativeCenterPoint(),s=wu(e,n),o=Ge(s,t),c=this._getTransformedDimensions(),u=c.x/2,f=c.y/2;return{tl:gn({x:-u,y:-f},o),tr:gn({x:u,y:-f},o),bl:gn({x:-u,y:f},o),br:gn({x:u,y:f},o)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ce(this.originX),Ce(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const n=this.transformMatrixKey(t),s=this.matrixCache;return s&&s.key.every(((o,c)=>o===n[c]))?s.value:(this.group&&(e=Ge(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:n,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const n=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},o=$R(s);return this.ownMatrixCache={key:t,value:o},o}_getNonTransformedDimensions(){return new Z(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=V({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),n=e.strokeWidth;let s=n,o=0;this.strokeUniform&&(s=0,o=n);const c=e.width+s,u=e.height+s;let f;return f=e.skewX===0&&e.skewY===0?new Z(c*e.scaleX,u*e.scaleY):Ky(c,u,Nd(e)),f.scalarAdd(o)}translateToGivenOrigin(t,e,n,s,o){let c=t.x,u=t.y;const f=Ce(s)-Ce(e),d=Ce(o)-Ce(n);if(f||d){const g=this._getTransformedDimensions();c+=f*g.x,u+=d*g.y}return new Z(c,u)}translateToCenterPoint(t,e,n){if(e===Tt&&n===Tt)return t;const s=this.translateToGivenOrigin(t,e,n,Tt,Tt);return this.angle?s.rotate(ve(this.angle),t):s}translateToOriginPoint(t,e,n){const s=this.translateToGivenOrigin(t,Tt,Tt,e,n);return this.angle?s.rotate(ve(this.angle),t):s}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?gn(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new Z(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,n){const s=this.translateToCenterPoint(t,e,n),o=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:o.x,top:o.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Ht,mn)}}const T3=["type"],E3=["extraParam"];let Ei=class Uf extends C3{static getDefaults(){return Uf.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){Rs("warn","Setting type has no effect",t)}constructor(t){super(),Y(this,"_cacheContext",null),Object.assign(this,Uf.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Pi(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,n=t.height,s=Nt.maxCacheSideLimit,o=Nt.minCacheSideLimit;if(e<=s&&n<=s&&e*n<=Nt.perfLimitSizeTotal)return e<o&&(t.width=o),n<o&&(t.height=o),t;const c=e/n,[u,f]=Rc.limitDimsByArea(c),d=il(o,u,s),g=il(o,f,s);return e>d&&(t.zoomX/=e/d,t.width=d,t.capped=!0),n>g&&(t.zoomY/=n/g,t.height=g,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),n=e.x*t.x/this.scaleX,s=e.y*t.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(s+2),zoomX:t.x,zoomY:t.y,x:n,y:s}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,{width:n,height:s,zoomX:o,zoomY:c,x:u,y:f}=this._limitCacheSize(this._getCacheCanvasDimensions()),d=n!==t.width||s!==t.height,g=this.zoomX!==o||this.zoomY!==c;if(!t||!e)return!1;if(d||g){n!==t.width||s!==t.height?(t.width=n,t.height=s):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height));const y=u/2,v=f/2;return this.cacheTranslationX=Math.round(t.width/2-y)+y,this.cacheTranslationY=Math.round(t.height/2-v)+v,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(o,c),this.zoomX=o,this.zoomY=c,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new Z(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=ad(this.calcTransformMatrix());return new Z(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return t.scalarMultiply(e*n)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==xn&&t!==sr||(e=this._constrainScale(e)),t===xn&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof Ri||(e=new Ri(e));const n=this[t]!==e;return this[t]=e,n&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:e,zoomY:n,cacheTranslationX:s,cacheTranslationY:o}=this,{width:c,height:u}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:e,zoomY:n,cacheTranslationX:s,cacheTranslationY:o,width:c,height:u,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===vn&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e,n){t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(n,0,0),t.restore()}drawObject(t,e,n){const s=this.fill,o=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,n),this.fill=s,this.stroke=o}createClipPathLayer(t,e){const n=ar(e),s=n.getContext("2d");if(s.translate(e.cacheTranslationX,e.cacheTranslationY),s.scale(e.zoomX,e.zoomY),t._cacheCanvas=n,e.parentClipPaths.forEach((o=>{o.transform(s)})),e.parentClipPaths.push(t),t.absolutePositioned){const o=Sr(this.calcTransformMatrix());s.transform(o[0],o[1],o[2],o[3],o[4],o[5])}return t.transform(s),t.drawObject(s,!0,e),n}_drawClipPath(t,e,n){if(!e)return;e._transformDone=!0;const s=this.createClipPathLayer(e,n);this.drawClipPathOnCache(t,e,s)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,n=this._cacheContext;return!(!e||!n||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&n&&!t&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),n.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,rr(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:n}=e;n&&(rr(n)?(t.fillStyle=n.toLive(t),this._applyPatternGradientTransform(t,n)):t.fillStyle=n)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&t.setLineDash(e)}_setShadow(t){if(!this.shadow)return;const e=this.shadow,n=this.canvas,s=this.getCanvasRetinaScaling(),[o,,,c]=n?.viewportTransform||sn,u=o*s,f=c*s,d=e.nonScaling?new Z(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*Nt.browserShadowBlurConstant*(u+f)*(d.x+d.y)/4,t.shadowOffsetX=e.offsetX*u*d.x,t.shadowOffsetY=e.offsetY*f*d.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!rr(e))return{offsetX:0,offsetY:0};const n=e.gradientTransform||e.patternTransform,s=-this.width/2+e.offsetX||0,o=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,s,o):t.transform(1,0,0,1,s,o),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:s,offsetY:o}}_renderPaintInOrder(t){this.paintFirst===vn?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var n;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),o=this.getCanvasRetinaScaling(),c=s.x/this.scaleX/o,u=s.y/this.scaleY/o,f=ar({width:Math.ceil(c),height:Math.ceil(u)}),d=f.getContext("2d");d&&(d.beginPath(),d.moveTo(0,0),d.lineTo(c,0),d.lineTo(c,u),d.lineTo(0,u),d.closePath(),d.translate(c/2,u/2),d.scale(s.zoomX/this.scaleX/o,s.zoomY/this.scaleY/o),this._applyPatternGradientTransform(d,e),d.fillStyle=e.toLive(t),d.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/s.zoomX,o*this.scaleY/s.zoomY),t.strokeStyle=(n=d.createPattern(f,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new Z(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(ft.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=i2(this),n=this.group,s=this.shadow,o=Math.abs,c=t.enableRetinaScaling?YT():1,u=(t.multiplier||1)*c,f=t.canvasProvider||(k=>new _u(k,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&JR(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&e3(this,this.getViewportTransform()),this.setCoords();const d=Pi(),g=this.getBoundingRect(),y=this.shadow,v=new Z;if(y){const k=y.blur,B=y.nonScaling?new Z(1,1):this.getObjectScaling();v.x=2*Math.round(o(y.offsetX)+k)*o(B.x),v.y=2*Math.round(o(y.offsetY)+k)*o(B.y)}const b=g.width+v.x,S=g.height+v.y;d.width=Math.ceil(b),d.height=Math.ceil(S);const w=f(d);t.format==="jpeg"&&(w.backgroundColor="#fff"),this.setPositionByOrigin(new Z(w.width/2,w.height/2),Tt,Tt);const _=this.canvas;w._objects=[this],this.set("canvas",w),this.setCoords();const O=w.toCanvasElement(u||1,t);return this.set("canvas",_),this.shadow=s,n&&(this.group=n),this.set(e),this.setCoords(),w._objects=[],w.destroy(),O}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return WT(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return qT(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:n,originY:s}=this;if(e){const{x:o,y:c}=this.getRelativeCenterPoint();this.originX=Tt,this.originY=Tt,this.left=o,this.top=c}if(this.set("angle",t),e){const{x:o,y:c}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,s);this.left=o,this.top=c,this.originX=n,this.originY=s}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){sd.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Ir().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce(((n,s)=>{let[o,c]=s;return n[o]=this._animate(o,c,e),n}),{})}_animate(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=t.split("."),o=this.constructor.colorProperties.includes(s[s.length-1]),{abort:c,startValue:u,onChange:f,onComplete:d}=n,g=V(V({},n),{},{target:this,startValue:u??s.reduce(((y,v)=>y[v]),this),endValue:e,abort:c?.bind(this),onChange:(y,v,b)=>{s.reduce(((S,w,_)=>(_===s.length-1&&(S[w]=y),S[w])),this),f&&f(y,v,b)},onComplete:(y,v,b)=>{this.setCoords(),d&&d(y,v,b)}});return o?_3(g):y2(g)}isDescendantOf(t){const{parent:e,group:n}=this;return e===t||n===t||!!e&&e.isDescendantOf(t)||!!n&&n!==e&&n.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),n=t.getAncestors();if(e.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[t,...n.slice(0,n.length-1)],common:[this]};for(let s,o=0;o<e.length;o++){if(s=e[o],s===t)return{fork:[this,...e.slice(0,o)],otherFork:[],common:e.slice(o)};for(let c=0;c<n.length;c++){if(this===n[c])return{fork:[],otherFork:[t,...n.slice(0,c)],common:[this,...e]};if(s===n[c])return{fork:[this,...e.slice(0,o)],otherFork:[t,...n.slice(0,c)],common:e.slice(o)}}}return{fork:[this,...e],otherFork:[t,...n],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const n=e.common[0]||this.canvas;if(!n)return;const s=e.fork.pop(),o=e.otherFork.pop(),c=n._objects.indexOf(s),u=n._objects.indexOf(o);return c>-1&&c>u}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Uf.customProperties,this.constructor.customProperties||[]);let e;const n=Nt.NUM_FRACTION_DIGITS,{clipPath:s,fill:o,stroke:c,shadow:u,strokeDashArray:f,left:d,top:g,originX:y,originY:v,width:b,height:S,strokeWidth:w,strokeLineCap:_,strokeDashOffset:O,strokeLineJoin:k,strokeUniform:B,strokeMiterLimit:R,scaleX:F,scaleY:z,angle:U,flipX:q,flipY:rt,opacity:lt,visible:ct,backgroundColor:E,fillRule:X,paintFirst:T,globalCompositeOperation:j,skewX:A,skewY:P}=this;s&&!s.excludeFromExport&&(e=s.toObject(t.concat("inverted","absolutePositioned")));const I=ot=>Jt(ot,n),at=V(V({},xl(this,t)),{},{type:this.constructor.type,version:A0,originX:y,originY:v,left:I(d),top:I(g),width:I(b),height:I(S),fill:Sw(o)?o.toObject():o,stroke:Sw(c)?c.toObject():c,strokeWidth:I(w),strokeDashArray:f&&f.concat(),strokeLineCap:_,strokeDashOffset:O,strokeLineJoin:k,strokeUniform:B,strokeMiterLimit:I(R),scaleX:I(F),scaleY:I(z),angle:I(U),flipX:q,flipY:rt,opacity:I(lt),shadow:u&&u.toObject(),visible:ct,backgroundColor:E,fillRule:X,paintFirst:T,globalCompositeOperation:j,skewX:I(A),skewY:I(P)},e?{clipPath:e}:null);return this.includeDefaultValues?at:this._removeDefaultValues(at)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),n=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return qy(t,((s,o)=>{if(o===Ht||o===mn||o==="type")return!0;const c=n[o];return s!==c&&!(Array.isArray(s)&&Array.isArray(c)&&s.length===0&&c.length===0)}))}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=se(t,T3),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=n,o=se(n,E3);return Bd(e,o).then((c=>s?(delete c[s],new this(e[s],c)):new this(c)))}static fromObject(t,e){return this._fromObject(t,e)}};Y(Ei,"stateProperties",f3),Y(Ei,"cacheProperties",Wi),Y(Ei,"ownDefaults",d3),Y(Ei,"type","FabricObject"),Y(Ei,"colorProperties",[ke,vn,"backgroundColor"]),Y(Ei,"customProperties",[]),ft.setClass(Ei),ft.setClass(Ei,"object");const wl=(r,t,e)=>(n,s,o,c)=>{const u=t(n,s,o,c);return u&&s2(r,V(V({},o2(n,s,o,c)),e)),u};function _l(r){return(t,e,n,s)=>{const{target:o,originX:c,originY:u}=e,f=o.getRelativeCenterPoint(),d=o.translateToOriginPoint(f,c,u),g=r(t,e,n,s);return o.setPositionByOrigin(d,e.originX,e.originY),g}}const Bw=wl(Wc,_l(((r,t,e,n)=>{const s=Qy(t,t.originX,t.originY,e,n);if(Ce(t.originX)===Ce(Tt)||Ce(t.originX)===Ce(ye)&&s.x<0||Ce(t.originX)===Ce(Ht)&&s.x>0){const{target:o}=t,c=o.strokeWidth/(o.strokeUniform?o.scaleX:1),u=a2(t)?2:1,f=o.width,d=Math.abs(s.x*u/o.scaleX)-c;return o.set("width",Math.max(d,1)),f!==o.width}return!1})));function O3(r,t,e,n,s){n=n||{};const o=this.sizeX||n.cornerSize||s.cornerSize,c=this.sizeY||n.cornerSize||s.cornerSize,u=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,f=u?vn:ke,d=!u&&(n.cornerStrokeColor||s.cornerStrokeColor);let g,y=t,v=e;r.save(),r.fillStyle=n.cornerColor||s.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",o>c?(g=o,r.scale(1,c/o),v=e*o/c):c>o?(g=c,r.scale(o/c,1),y=t*c/o):g=o,r.beginPath(),r.arc(y,v,g/2,0,nd,!1),r[f](),d&&r.stroke(),r.restore()}function A3(r,t,e,n,s){n=n||{};const o=this.sizeX||n.cornerSize||s.cornerSize,c=this.sizeY||n.cornerSize||s.cornerSize,u=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,f=u?vn:ke,d=!u&&(n.cornerStrokeColor||s.cornerStrokeColor),g=o/2,y=c/2;r.save(),r.fillStyle=n.cornerColor||s.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",r.translate(t,e);const v=s.getTotalAngle();r.rotate(ve(v)),r["".concat(f,"Rect")](-g,-y,o,c),d&&r.strokeRect(-g,-y,o,c),r.restore()}class pr{constructor(t){Y(this,"visible",!0),Y(this,"actionName",Ld),Y(this,"angle",0),Y(this,"x",0),Y(this,"y",0),Y(this,"offsetX",0),Y(this,"offsetY",0),Y(this,"sizeX",0),Y(this,"sizeY",0),Y(this,"touchSizeX",0),Y(this,"touchSizeY",0),Y(this,"cursorStyle","crosshair"),Y(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,n,s){var o;let{tl:c,tr:u,br:f,bl:d}=s;return((o=e.canvas)===null||o===void 0?void 0:o.getActiveObject())===e&&e.isControlVisible(t)&&ae.isPointInPolygon(n,[c,u,f,d])}getActionHandler(t,e,n){return this.actionHandler}getMouseDownHandler(t,e,n){return this.mouseDownHandler}getMouseUpHandler(t,e,n){return this.mouseUpHandler}cursorStyleHandler(t,e,n){return e.cursorStyle}getActionName(t,e,n){return e.actionName}getVisibility(t,e){var n,s;return(n=(s=t._controlsVisibility)===null||s===void 0?void 0:s[e])!==null&&n!==void 0?n:this.visible}setVisibility(t,e,n){this.visible=t}positionHandler(t,e,n,s){return new Z(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,n,s,o,c){const u=$y([wu(n,s),Sl({angle:t}),Wy((o?this.touchSizeX:this.sizeX)||e,(o?this.touchSizeY:this.sizeY)||e)]);return{tl:new Z(-.5,-.5).transform(u),tr:new Z(.5,-.5).transform(u),br:new Z(.5,.5).transform(u),bl:new Z(-.5,.5).transform(u)}}render(t,e,n,s,o){((s=s||{}).cornerStyle||o.cornerStyle)==="circle"?O3.call(this,t,e,n,s,o):A3.call(this,t,e,n,s,o)}}const D3=(r,t,e)=>e.lockRotation?ld:t.cursorStyle,k3=wl(XT,_l(((r,t,e,n)=>{let{target:s,ex:o,ey:c,theta:u,originX:f,originY:d}=t;const g=s.translateToOriginPoint(s.getRelativeCenterPoint(),f,d);if(wr(s,"lockRotation"))return!1;const y=Math.atan2(c-g.y,o-g.x),v=Math.atan2(n-g.y,e-g.x);let b=Hi(v-y+u);if(s.snapAngle&&s.snapAngle>0){const w=s.snapAngle,_=s.snapThreshold||w,O=Math.ceil(b/w)*w,k=Math.floor(b/w)*w;Math.abs(b-k)<_?b=k:Math.abs(b-O)<_&&(b=O)}b<0&&(b=360+b),b%=360;const S=s.angle!==b;return s.angle=b,S})));function v2(r,t){const e=t.canvas,n=r[e.uniScaleKey];return e.uniformScaling&&!n||!e.uniformScaling&&n}function b2(r,t,e){const n=wr(r,"lockScalingX"),s=wr(r,"lockScalingY");if(n&&s||!t&&(n||s)&&e||n&&t==="x"||s&&t==="y")return!0;const{width:o,height:c,strokeWidth:u}=r;return o===0&&u===0&&t!=="y"||c===0&&u===0&&t!=="x"}const M3=["e","se","s","sw","w","nw","n","ne","e"],Cc=(r,t,e)=>{const n=v2(r,e);if(b2(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",n))return ld;const s=l2(e,t);return"".concat(M3[s],"-resize")};function tv(r,t,e,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const o=t.target,c=s.by,u=v2(r,o);let f,d,g,y,v,b;if(b2(o,c,u))return!1;if(t.gestureScale)d=t.scaleX*t.gestureScale,g=t.scaleY*t.gestureScale;else{if(f=Qy(t,t.originX,t.originY,e,n),v=c!=="y"?Math.sign(f.x||t.signX||1):1,b=c!=="x"?Math.sign(f.y||t.signY||1):1,t.signX||(t.signX=v),t.signY||(t.signY=b),wr(o,"lockScalingFlip")&&(t.signX!==v||t.signY!==b))return!1;if(y=o._getTransformedDimensions(),u&&!c){const _=Math.abs(f.x)+Math.abs(f.y),{original:O}=t,k=_/(Math.abs(y.x*O.scaleX/o.scaleX)+Math.abs(y.y*O.scaleY/o.scaleY));d=O.scaleX*k,g=O.scaleY*k}else d=Math.abs(f.x*o.scaleX/y.x),g=Math.abs(f.y*o.scaleY/y.y);a2(t)&&(d*=2,g*=2),t.signX!==v&&c!=="y"&&(t.originX=Cw(t.originX),d*=-1,t.signX=v),t.signY!==b&&c!=="x"&&(t.originY=Cw(t.originY),g*=-1,t.signY=b)}const S=o.scaleX,w=o.scaleY;return c?(c==="x"&&o.set(xn,d),c==="y"&&o.set(sr,g)):(!wr(o,"lockScalingX")&&o.set(xn,d),!wr(o,"lockScalingY")&&o.set(sr,g)),S!==o.scaleX||w!==o.scaleY}const Wh=wl(Rd,_l(((r,t,e,n)=>tv(r,t,e,n)))),j3=wl(Rd,_l(((r,t,e,n)=>tv(r,t,e,n,{by:"x"})))),R3=wl(Rd,_l(((r,t,e,n)=>tv(r,t,e,n,{by:"y"})))),L3=["target","ex","ey","skewingSide"],Qm={x:{counterAxis:"y",scale:xn,skew:vl,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:sr,skew:bl,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},N3=["ns","nesw","ew","nwse"],B3=(r,t,e)=>{if(t.x!==0&&wr(e,"lockSkewingY")||t.y!==0&&wr(e,"lockSkewingX"))return ld;const n=l2(e,t)%4;return"".concat(N3[n],"-resize")};function S2(r,t,e,n,s){const{target:o}=e,{counterAxis:c,origin:u,lockSkewing:f,skew:d,flip:g}=Qm[r];if(wr(o,f))return!1;const{origin:y,flip:v}=Qm[c],b=Ce(e[y])*(o[v]?-1:1),S=-Math.sign(b)*(o[g]?-1:1),w=.5*-((o[d]===0&&Qy(e,Tt,Tt,n,s)[r]>0||o[d]>0?1:-1)*S)+.5;return wl(GT,_l(((O,k,B,R)=>(function(F,z,U){let{target:q,ex:rt,ey:lt,skewingSide:ct}=z,E=se(z,L3);const{skew:X}=Qm[F],T=U.subtract(new Z(rt,lt)).divide(new Z(q.scaleX,q.scaleY))[F],j=q[X],A=E[X],P=Math.tan(ve(A)),I=F==="y"?q._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:q._getTransformedDimensions({scaleX:1,scaleY:1}).y,at=2*T*ct/Math.max(I,1)+P,ot=Hi(Math.atan(at));q.set(X,ot);const L=j!==q[X];if(L&&F==="y"){const{skewX:Q,scaleX:st}=q,ut=q._getTransformedDimensions({skewY:j}),ht=q._getTransformedDimensions(),gt=Q!==0?ut.x/ht.x:1;gt!==1&&q.set(xn,gt*st)}return L})(r,k,new Z(B,R)))))(t,V(V({},e),{},{[u]:w,skewingSide:S}),n,s)}const z3=(r,t,e,n)=>S2("x",r,t,e,n),U3=(r,t,e,n)=>S2("y",r,t,e,n);function Fd(r,t){return r[t.canvas.altActionKey]}const qh=(r,t,e)=>{const n=Fd(r,e);return t.x===0?n?vl:sr:t.y===0?n?bl:xn:""},Ho=(r,t,e)=>Fd(r,e)?B3(0,t,e):Cc(r,t,e),zw=(r,t,e,n)=>Fd(r,t.target)?U3(r,t,e,n):j3(r,t,e,n),Uw=(r,t,e,n)=>Fd(r,t.target)?z3(r,t,e,n):R3(r,t,e,n),x2=()=>({ml:new pr({x:-.5,y:0,cursorStyleHandler:Ho,actionHandler:zw,getActionName:qh}),mr:new pr({x:.5,y:0,cursorStyleHandler:Ho,actionHandler:zw,getActionName:qh}),mb:new pr({x:0,y:.5,cursorStyleHandler:Ho,actionHandler:Uw,getActionName:qh}),mt:new pr({x:0,y:-.5,cursorStyleHandler:Ho,actionHandler:Uw,getActionName:qh}),tl:new pr({x:-.5,y:-.5,cursorStyleHandler:Cc,actionHandler:Wh}),tr:new pr({x:.5,y:-.5,cursorStyleHandler:Cc,actionHandler:Wh}),bl:new pr({x:-.5,y:.5,cursorStyleHandler:Cc,actionHandler:Wh}),br:new pr({x:.5,y:.5,cursorStyleHandler:Cc,actionHandler:Wh}),mtr:new pr({x:0,y:-.5,actionHandler:k3,cursorStyleHandler:D3,offsetY:-40,withConnection:!0,actionName:Gy})}),F3=()=>({mr:new pr({x:.5,y:0,actionHandler:Bw,cursorStyleHandler:Ho,actionName:Wc}),ml:new pr({x:-.5,y:0,actionHandler:Bw,cursorStyleHandler:Ho,actionName:Wc})}),P3=()=>V(V({},x2()),F3());class Zc extends Ei{static getDefaults(){return V(V({},super.getDefaults()),Zc.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),Zc.ownDefaults),this.setOptions(t)}static createControls(){return{controls:x2()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,n=e.target,s=e.action;if(this===n&&s&&s.startsWith(Ld))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let s=n.length-1;s>=0;s--){const[o,c]=n[s],u=this.controls[o];if(u.shouldActivate(o,this,t,e?c.touchCorner:c.corner))return this.__corner=o,{key:o,control:u,coord:this.oCoords[o]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),n=wu(e.x,e.y),s=Sl({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),o=Ge(n,s),c=Ge(t,o),u=Ge(c,[1/t[0],0,0,1/t[3],0,0]),f=this.group?ad(this.calcTransformMatrix()):void 0;f&&(f.scaleX=Math.abs(f.scaleX),f.scaleY=Math.abs(f.scaleY));const d=this._calculateCurrentDimensions(f),g={};return this.forEachControl(((y,v)=>{const b=y.positionHandler(d,u,this,y);g[v]=Object.assign(b,this._calcCornerCoords(y,b))})),g}_calcCornerCoords(t,e){const n=this.getTotalAngle();return{corner:t.calcCornerCoords(n,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(n,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),s=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/s[0],1/s[3]),t.rotate(ve(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=V({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);t.save(),t.strokeStyle=s.borderColor,this._setLineDash(t,s.borderDashArray),this.strokeBorders(t,e),s.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:s}=this,o=V({hasBorders:n,hasControls:s},e),c=this.getViewportTransform(),u=o.hasBorders,f=o.hasControls,d=Ge(c,this.calcTransformMatrix()),g=ad(d);t.save(),t.translate(g.translateX,g.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(g.angle-=180),t.rotate(ve(this.group?g.angle:this.angle)),u&&this.drawBorders(t,g,e),f&&this.drawControls(t,e),t.restore()}drawBorders(t,e,n){let s;if(n&&n.forActiveSelection||this.group){const o=Ky(this.width,this.height,Nd(e)),c=this.isStrokeAccountedForInDimensions()?Iy:(this.strokeUniform?new Z().scalarAdd(this.canvas?this.canvas.getZoom():1):new Z(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);s=o.add(c).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,s,n)}drawControlsConnectingLines(t,e){let n=!1;t.beginPath(),this.forEachControl(((s,o)=>{s.withConnection&&s.getVisibility(this,o)&&(n=!0,t.moveTo(s.x*e.x,s.y*e.y),t.lineTo(s.x*e.x+s.offsetX,s.y*e.y+s.offsetY))})),n&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:o,cornerColor:c}=this,u=V({cornerStrokeColor:s,cornerDashArray:o,cornerColor:c},e);t.setTransform(n,0,0,n,0,0),t.strokeStyle=t.fillStyle=u.cornerColor,this.transparentCorners||(t.strokeStyle=u.cornerStrokeColor),this._setLineDash(t,u.cornerDashArray),this.forEachControl(((f,d)=>{if(f.getVisibility(this,d)){const g=this.oCoords[d];f.render(t,g.x,g.y,u,this)}})),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach((e=>{let[n,s]=e;return this.setControlVisible(n,s)}))}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e);const s=this.width+4,o=this.height+4;return e.clearRect(-s/2,-o/2,s,o),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function w2(r,t){return t.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(e.prototype,n)||Object.create(null))}))})),r}Y(Zc,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Ze extends Zc{}w2(Ze,[c2]),ft.setClass(Ze),ft.setClass(Ze,"object");const H3=(r,t,e,n)=>{const s=2*(n=Math.round(n))+1,{data:o}=r.getImageData(t-n,e-n,s,s);for(let c=3;c<o.length;c+=4)if(o[c]>0)return!1;return!0};class _2{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new Z(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new Z(1/this.options.scaleX,1/this.options.scaleY):new Z(1,1)}createSideVector(t,e){const n=j0(t,e);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(t,e,n){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new Z(t);return e.y+=e.x*Math.tan(ve(this.options.skewY)),e.x+=e.y*Math.tan(ve(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const Y3=new Z;class Ko extends _2{static getOrthogonalRotationFactor(t,e){const n=e?L0(t,e):u3(t);return Math.abs(n)<xu?-1:1}constructor(t,e,n,s){super(s),Y(this,"AB",void 0),Y(this,"AC",void 0),Y(this,"alpha",void 0),Y(this,"bisector",void 0),this.A=new Z(t),this.B=new Z(e),this.C=new Z(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=L0(this.AB,this.AC),this.bisector=Zy(p2(this.AB.eq(Y3)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(t,e),o=m2(s),c=Ko.getOrthogonalRotationFactor(o,this.bisector);return this.scaleUnitVector(o,n*c)}projectBevel(){const t=[];return(this.alpha%nd==0?[this.B]:[this.B,this.C]).forEach((e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))})),t}projectMiter(){const t=[],e=Math.abs(this.alpha),n=1/Math.sin(e/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),o=this.options.strokeUniform?R0(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return R0(s)/this.strokeProjectionMagnitude<=o&&t.push(this.applySkew(this.A.add(s))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const n=[],s=new Z(Ko.getOrthogonalRotationFactor(this.bisector),Ko.getOrthogonalRotationFactor(new Z(this.bisector.y,this.bisector.x)));return[new Z(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new Z(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach((o=>{Rw(o,t,e)&&n.push(this.A.add(o))})),n}projectRoundWithSkew(t,e){const n=[],{skewX:s,skewY:o,scaleX:c,scaleY:u,strokeUniform:f}=this.options,d=new Z(Math.tan(ve(s)),Math.tan(ve(o))),g=this.strokeProjectionMagnitude,y=f?g/u/Math.sqrt(1/u**2+1/c**2*d.y**2):g/Math.sqrt(1+d.y**2),v=new Z(Math.sqrt(Math.max(g**2-y**2,0)),y),b=f?g/Math.sqrt(1+d.x**2*(1/u)**2/(1/c+1/c*d.x*d.y)**2):g/Math.sqrt(1+d.x**2/(1+d.x*d.y)**2),S=new Z(b,Math.sqrt(Math.max(g**2-b**2,0)));return[S,S.scalarMultiply(-1),v,v.scalarMultiply(-1)].map((w=>this.applySkew(f?w.multiply(this.strokeUniformScalar):w))).forEach((w=>{Rw(w,t,e)&&n.push(this.applySkew(this.A).add(w))})),n}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%nd==0,n=this.applySkew(this.A),s=t[e?0:2].subtract(n),o=t[e?1:0].subtract(n),c=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),u=Bc(s,c)>0,f=u?s:o,d=u?o:s;return this.isSkewed()?t.push(...this.projectRoundWithSkew(f,d)):t.push(...this.projectRoundNoSkew(f,d)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector})))}}class Fw extends _2{constructor(t,e,n){super(n),this.A=new Z(t),this.T=new Z(e)}calcOrthogonalProjection(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(t,e);return this.scaleUnitVector(m2(s),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new Z(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new Ko(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new Z(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(Zy(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(n);t.push(s.add(e),s.subtract(e))}return t.map((e=>this.applySkew(e)))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t})))}}const V3=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(r.length===0)return n;const s=r.reduce(((o,c)=>(o[o.length-1].eq(c)||o.push(new Z(c)),o)),[new Z(r[0])]);if(s.length===1)e=!0;else if(!e){const o=s[0],c=((u,f)=>{for(let d=u.length-1;d>=0;d--)if(f(u[d],d,u))return d;return-1})(s,(u=>!u.eq(o)));s.splice(c+1)}return s.forEach(((o,c,u)=>{let f,d;c===0?(d=u[1],f=e?o:u[u.length-1]):c===u.length-1?(f=u[c-1],d=e?o:u[0]):(f=u[c-1],d=u[c+1]),e&&u.length===1?n.push(...new Fw(o,o,t).project()):!e||c!==0&&c!==u.length-1?n.push(...new Ko(o,f,d,t).project()):n.push(...new Fw(o,c===0?d:f,t).project())})),n},ev=r=>{const t={};return Object.keys(r).forEach((e=>{t[e]={},Object.keys(r[e]).forEach((n=>{t[e][n]=V({},r[e][n])}))})),t},X3=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let vc;const nv=r=>{if(vc||vc||(vc="Intl"in jd()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),vc){const t=vc.segment(r);return Array.from(t).map((e=>{let{segment:n}=e;return n}))}return G3(r)},G3=r=>{const t=[];for(let e,n=0;n<r.length;n++)(e=I3(r,n))!==!1&&t.push(e);return t},I3=(r,t)=>{const e=r.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return r.charAt(t);if(55296<=e&&e<=56319){if(r.length<=t+1)throw"High surrogate without following low surrogate";const s=r.charCodeAt(t+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return r.charAt(t)+r.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(t-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1},rv=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return r.fill!==t.fill||r.stroke!==t.stroke||r.strokeWidth!==t.strokeWidth||r.fontSize!==t.fontSize||r.fontFamily!==t.fontFamily||r.fontWeight!==t.fontWeight||r.fontStyle!==t.fontStyle||r.textDecorationThickness!==t.textDecorationThickness||r.textBackgroundColor!==t.textBackgroundColor||r.deltaY!==t.deltaY||e&&(r.overline!==t.overline||r.underline!==t.underline||r.linethrough!==t.linethrough)},$3=(r,t)=>{const e=t.split(`
`),n=[];let s=-1,o={};r=ev(r);for(let c=0;c<e.length;c++){const u=nv(e[c]);if(r[c])for(let f=0;f<u.length;f++){s++;const d=r[c][f];d&&Object.keys(d).length>0&&(rv(o,d,!0)?n.push({start:s,end:s+1,style:d}):n[n.length-1].end++),o=d||{}}else s+=u.length,o={}}return n},W3=(r,t)=>{if(!Array.isArray(r))return ev(r);const e=t.split(Xy),n={};let s=-1,o=0;for(let c=0;c<e.length;c++){const u=nv(e[c]);for(let f=0;f<u.length;f++)s++,r[o]&&r[o].start<=s&&s<r[o].end&&(n[c]=n[c]||{},n[c][f]=V({},r[o].style),s===r[o].end-1&&o++)}return n},Us=["display","transform",ke,"fill-opacity","fill-rule","opacity",vn,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Pw(r,t){const e=r.nodeName,n=r.getAttribute("class"),s=r.getAttribute("id"),o="(?![a-zA-Z\\-]+)";let c;if(c=new RegExp("^"+e,"i"),t=t.replace(c,""),s&&t.length&&(c=new RegExp("#"+s+o,"i"),t=t.replace(c,"")),n&&t.length){const u=n.split(" ");for(let f=u.length;f--;)c=new RegExp("\\."+u[f]+o,"i"),t=t.replace(c,"")}return t.length===0}function q3(r,t){let e=!0;const n=Pw(r,t.pop());return n&&t.length&&(e=(function(s,o){let c,u=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&o.length;)u&&(c=o.pop()),u=Pw(s=s.parentElement,c);return o.length===0})(r,t)),n&&e&&t.length===0}const K3=r=>{var t;return(t=l3[r])!==null&&t!==void 0?t:r},Q3=new RegExp("(".concat(xr,")"),"gi"),Z3=r=>r.replace(Q3," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Hw,Yw,Vw,Xw,Gw,Iw,$w;const rn="(".concat(xr,")"),J3=String.raw(Hw||(Hw=Kr(["(skewX)(",")"],["(skewX)\\(","\\)"])),rn),t4=String.raw(Yw||(Yw=Kr(["(skewY)(",")"],["(skewY)\\(","\\)"])),rn),e4=String.raw(Vw||(Vw=Kr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),rn,rn,rn),n4=String.raw(Xw||(Xw=Kr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),rn,rn),r4=String.raw(Gw||(Gw=Kr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),rn,rn),i4=String.raw(Iw||(Iw=Kr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),rn,rn,rn,rn,rn,rn),iv="(?:".concat(i4,"|").concat(r4,"|").concat(e4,"|").concat(n4,"|").concat(J3,"|").concat(t4,")"),s4="(?:".concat(iv,"*)"),a4=String.raw($w||($w=Kr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),s4),o4=new RegExp(a4),l4=new RegExp(iv),c4=new RegExp(iv,"g");function N0(r){const t=[];if(!(r=Z3(r).replace(/\s*([()])\s*/gi,"$1"))||r&&!o4.test(r))return[...sn];for(const e of r.matchAll(c4)){const n=l4.exec(e[0]);if(!n)continue;let s=sn;const o=n.filter((S=>!!S)),[,c,...u]=o,[f,d,g,y,v,b]=u.map((S=>parseFloat(S)));switch(c){case"translate":s=wu(f,d);break;case Gy:s=Sl({angle:f},{x:d,y:g});break;case Ld:s=Wy(f,d);break;case vl:s=ZT(f);break;case bl:s=JT(f);break;case"matrix":s=[f,d,g,y,v,b]}t.push(s)}return $y(t)}function u4(r,t,e,n){const s=Array.isArray(t);let o,c=t;if(r!==ke&&r!==vn||t!==yn){if(r==="strokeUniform")return t==="non-scaling-stroke";if(r==="strokeDashArray")c=t===yn?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")c=e&&e.transformMatrix?Ge(e.transformMatrix,N0(t)):N0(t);else if(r==="visible")c=t!==yn&&t!=="hidden",e&&e.visible===!1&&(c=!1);else if(r==="opacity")c=parseFloat(t),e&&e.opacity!==void 0&&(c*=e.opacity);else if(r==="textAnchor")c=t==="start"?Ht:t==="end"?ye:Tt;else if(r==="charSpacing"||r===Aa)o=qo(t,n)/n*1e3;else if(r==="paintFirst"){const u=t.indexOf(ke),f=t.indexOf(vn);c=ke,(u>-1&&f>-1&&f<u||u===-1&&f>-1)&&(c=vn)}else{if(r==="href"||r==="xlink:href"||r==="font"||r==="id")return t;if(r==="imageSmoothing")return t==="optimizeQuality";o=s?t.map(qo):qo(t,n)}}else c="";return!s&&isNaN(o)?c:o}function h4(r,t){const e=r.match(o3);if(!e)return;const n=e[1],s=e[3],o=e[4],c=e[5],u=e[6];n&&(t.fontStyle=n),s&&(t.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),o&&(t.fontSize=qo(o)),u&&(t.fontFamily=u),c&&(t.lineHeight=c==="normal"?1:c)}function f4(r,t){r.replace(/;\s*$/,"").split(";").forEach((e=>{if(!e)return;const[n,s]=e.split(":");t[n.trim().toLowerCase()]=s.trim()}))}function d4(r){const t={},e=r.getAttribute("style");return e&&(typeof e=="string"?f4(e,t):(function(n,s){Object.entries(n).forEach((o=>{let[c,u]=o;u!==void 0&&(s[c.toLowerCase()]=u)}))})(e,t)),t}const g4={stroke:"strokeOpacity",fill:"fillOpacity"};function qi(r,t,e){if(!r)return{};let n,s={},o=Vy;r.parentNode&&jw.test(r.parentNode.nodeName)&&(s=qi(r.parentElement,t,e),s.fontSize&&(n=o=qo(s.fontSize)));const c=V(V(V({},t.reduce(((d,g)=>{const y=r.getAttribute(g);return y&&(d[g]=y),d}),{})),(function(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y={};for(const v in g)q3(d,v.split(" "))&&(y=V(V({},y),g[v]));return y})(r,e)),d4(r));c[qm]&&r.setAttribute(qm,c[qm]),c[Wm]&&(n=qo(c[Wm],o),c[Wm]="".concat(n));const u={};for(const d in c){const g=K3(d),y=u4(g,c[d],s,n);u[g]=y}u&&u.font&&h4(u.font,u);const f=V(V({},s),u);return jw.test(r.nodeName)?f:(function(d){const g=Ze.getDefaults();return Object.entries(g4).forEach((y=>{let[v,b]=y;if(d[b]===void 0||d[v]==="")return;if(d[v]===void 0){if(!g[v])return;d[v]=g[v]}if(d[v].indexOf("url(")===0)return;const S=new It(d[v]);d[v]=S.setAlpha(Jt(S.getAlpha()*d[b],2)).toRgba()})),d})(f)}const p4=["left","top","width","height","visible"],C2=["rx","ry"];class yr extends Ze{static getDefaults(){return V(V({},super.getDefaults()),yr.ownDefaults)}constructor(t){super(),Object.assign(this,yr.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:n}=this,s=-e/2,o=-n/2,c=this.rx?Math.min(this.rx,e/2):0,u=this.ry?Math.min(this.ry,n/2):0,f=c!==0||u!==0;t.beginPath(),t.moveTo(s+c,o),t.lineTo(s+e-c,o),f&&t.bezierCurveTo(s+e-xs*c,o,s+e,o+xs*u,s+e,o+u),t.lineTo(s+e,o+n-u),f&&t.bezierCurveTo(s+e,o+n-xs*u,s+e-xs*c,o+n,s+e-c,o+n),t.lineTo(s+c,o+n),f&&t.bezierCurveTo(s+xs*c,o+n,s,o+n-xs*u,s,o+n-u),t.lineTo(s,o+u),f&&t.bezierCurveTo(s,o+xs*u,s+xs*c,o,s+c,o),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...C2,...t])}_toSVG(){const{width:t,height:e,rx:n,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(n,'" ry="').concat(s,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,n){const s=qi(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:c=0,width:u=0,height:f=0,visible:d=!0}=s,g=se(s,p4);return new this(V(V(V({},e),g),{},{left:o,top:c,width:u,height:f,visible:!!(d&&u&&f)}))}}Y(yr,"type","Rect"),Y(yr,"cacheProperties",[...Wi,...C2]),Y(yr,"ownDefaults",{rx:0,ry:0}),Y(yr,"ATTRIBUTE_NAMES",[...Us,"x","y","rx","ry","width","height"]),ft.setClass(yr),ft.setSVGClass(yr);const Ai="initialization",ud="added",sv="removed",hd="imperative",T2=(r,t)=>{const{strokeUniform:e,strokeWidth:n,width:s,height:o,group:c}=t,u=c&&c!==r?zd(c.calcTransformMatrix(),r.calcTransformMatrix()):null,f=u?t.getRelativeCenterPoint().transform(u):t.getRelativeCenterPoint(),d=!t.isStrokeAccountedForInDimensions(),g=e&&d?t3(new Z(n,n),void 0,r.calcTransformMatrix()):Iy,y=!e&&d?n:0,v=Ky(s+y,o+y,$y([u,t.calcOwnMatrix()],!0)).add(g).scalarDivide(2);return[f.subtract(v),f.add(v)]};class Pd{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:n,strategy:s}=t;return e===Ai||e===hd||!!n&&s!==n}shouldLayoutClipPath(t){let{type:e,target:{clipPath:n}}=t;return e!==Ai&&n&&!n.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:n,target:s}=e;if(n===hd&&e.overrides)return e.overrides;if(t.length===0)return;const{left:o,top:c,width:u,height:f}=ji(t.map((y=>T2(s,y))).reduce(((y,v)=>y.concat(v)),[])),d=new Z(u,f),g=new Z(o,c).add(d.scalarDivide(2));if(n===Ai){const y=this.getInitialSize(e,{size:d,center:g});return{center:g,relativeCorrection:new Z(0,0),size:y}}return{center:g.transform(s.calcOwnMatrix()),size:d}}}Y(Pd,"type","strategy");class B0 extends Pd{shouldPerformLayout(t){return!0}}Y(B0,"type","fit-content"),ft.setClass(B0);const m4=["strategy"],y4=["target","strategy","bubbles","prevStrategy"],E2="layoutManager";class Jc{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new B0;Y(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=V(V({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const n=this.getLayoutResult(e);n&&this.commitLayout(e,n),this.onAfterLayout(e,n),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:n}=e;return[id,VT,Wc,XT,Rd,GT,rd,PR,HR].map((s=>t.on(s,(o=>this.performLayout(s===id?{type:"object_modified",trigger:s,e:o,target:n}:{type:"object_modifying",trigger:s,e:o,target:n})))))}subscribe(t,e){this.unsubscribe(t,e);const n=this.attachHandlers(t,e);this._subscriptions.set(t,n)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach((n=>n())),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach((e=>this.unsubscribe(e,t)))}subscribeTargets(t){t.targets.forEach((e=>this.subscribe(e,t)))}onBeforeLayout(t){const{target:e,type:n}=t,{canvas:s}=e;if(n===Ai||n===ud?this.subscribeTargets(t):n===sv&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),s&&s.fire("object:layout:before",{target:e,context:t}),n===hd&&t.deep){const o=se(t,m4);e.forEachObject((c=>c.layoutManager&&c.layoutManager.performLayout(V(V({},o),{},{bubbles:!1,target:c}))))}}getLayoutResult(t){const{target:e,strategy:n,type:s}=t,o=n.calcLayoutResult(t,e.getObjects());if(!o)return;const c=s===Ai?new Z:e.getRelativeCenterPoint(),{center:u,correction:f=new Z,relativeCorrection:d=new Z}=o,g=c.subtract(u).add(f).transform(s===Ai?sn:Sr(e.calcOwnMatrix()),!0).add(d);return{result:o,prevCenter:c,nextCenter:u,offset:g}}commitLayout(t,e){const{target:n}=t,{result:{size:s},nextCenter:o}=e;var c,u;n.set({width:s.x,height:s.y}),this.layoutObjects(t,e),t.type===Ai?n.set({left:(c=t.x)!==null&&c!==void 0?c:o.x+s.x*Ce(n.originX),top:(u=t.y)!==null&&u!==void 0?u:o.y+s.y*Ce(n.originY)}):(n.setPositionByOrigin(o,Tt,Tt),n.setCoords(),n.set("dirty",!0))}layoutObjects(t,e){const{target:n}=t;n.forEachObject((s=>{s.group===n&&this.layoutObject(t,e,s)})),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,n.clipPath)}layoutObject(t,e,n){let{offset:s}=e;n.set({left:n.left+s.x,top:n.top+s.y})}onAfterLayout(t,e){const{target:n,strategy:s,bubbles:o,prevStrategy:c}=t,u=se(t,y4),{canvas:f}=n;n.fire("layout:after",{context:t,result:e}),f&&f.fire("object:layout:after",{context:t,result:e,target:n});const d=n.parent;o&&d!=null&&d.layoutManager&&((u.path||(u.path=[])).push(n),d.layoutManager.performLayout(V(V({},u),{},{target:d}))),n.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach((e=>e.forEach((n=>n())))),t.clear()}toObject(){return{type:E2,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ft.setClass(Jc,E2);const v4=["type","objects","layoutManager"];class b4 extends Jc{performLayout(){}}class xa extends IT(Ze){static getDefaults(){return V(V({},super.getDefaults()),xa.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Y(this,"_activeObjects",[]),Y(this,"__objectSelectionTracker",void 0),Y(this,"__objectSelectionDisposer",void 0),Object.assign(this,xa.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var n;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject((s=>{this.enterGroup(s,!1)})),this.layoutManager=(n=e.layoutManager)!==null&&n!==void 0?n:new Jc,this.layoutManager.performLayout({type:Ai,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(Rs("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(Rs("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter(((e,n,s)=>this.canEnterGroup(e)&&s.indexOf(e)===n))}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(e),o=super.add(...s);return this._onAfterObjectsChange(ud,s),o}insertAt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];const o=this._filterObjectsBeforeEnteringGroup(n),c=super.insertAt(t,...o);return this._onAfterObjectsChange(ud,o),c}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(sv,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const n=this[t];return super._set(t,e),t==="canvas"&&n!==e&&(this._objects||[]).forEach((s=>{s._set(t,e)})),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:n}=e;const s=this._activeObjects;if(t)s.push(n),this._set("dirty",!0);else if(s.length>0){const o=s.indexOf(n);o>-1&&(s.splice(o,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&od(t,Ge(Sr(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===t||t.isDescendantOf(n))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(od(t,Ge(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const n=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const t=Ze.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,e,n){this._renderBackground(t);for(let o=0;o<this._objects.length;o++){var s;const c=this._objects[o];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&c.group!==this?(t.save(),t.transform(...Sr(this.calcTransformMatrix())),c.render(t),t.restore()):c.group===this&&c.render(t)}this._drawClipPath(t,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject((t=>t.setCoords()))}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(V({target:this,type:hd},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const n=this.includeDefaultValues;return this._objects.filter((function(s){return!s.excludeFromExport})).map((function(s){const o=s.includeDefaultValues;s.includeDefaultValues=n;const c=s[t||"toObject"](e);return s.includeDefaultValues=o,c}))}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return V(V(V({},super.toObject(["subTargetCheck","interactive",...t])),e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject((t=>{this._watchObject(!1,t),t.dispose()})),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=yr.prototype._toSVG.call(this),n=e.indexOf("COMMON_PARTS");e[n]='for="group" ';const s=e.join("");return t?t(s):s}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(t);n&&e.push("		",n);for(let s=0;s<this._objects.length;s++)e.push("		",this._objects[s].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],n=this._createSVGBgRect(t);n&&e.push("	",n);for(let s=0;s<this._objects.length;s++)e.push("	",this._objects[s].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:n,objects:s=[],layoutManager:o}=t,c=se(t,v4);return Promise.all([qc(s,e),Bd(c,e)]).then((u=>{let[f,d]=u;const g=new this(f,V(V(V({},c),d),{},{layoutManager:new b4}));if(o){const y=ft.getClass(o.type),v=ft.getClass(o.strategy);g.layoutManager=new y(new v)}else g.layoutManager=new Jc;return g.layoutManager.subscribeTargets({type:Ai,target:g,targets:g.getObjects()}),g.setCoords(),g}))}}Y(xa,"type","Group"),Y(xa,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ft.setClass(xa);const S4=(r,t)=>Math.min(t.width/r.width,t.height/r.height),x4=(r,t)=>Math.max(t.width/r.width,t.height/r.height),z0="\\s*,?\\s*",bc="".concat(z0,"(").concat(xr,")"),w4="".concat(bc).concat(bc).concat(bc).concat(z0,"([01])").concat(z0,"([01])").concat(bc).concat(bc),_4={m:"l",M:"L"},C4=(r,t,e,n,s,o,c,u,f,d,g)=>{const y=Ui(r),v=Fi(r),b=Ui(t),S=Fi(t),w=e*s*b-n*o*S+c,_=n*s*b+e*o*S+u;return["C",d+f*(-e*s*v-n*o*y),g+f*(-n*s*v+e*o*y),w+f*(e*s*S+n*o*b),_+f*(n*s*S-e*o*b),w,_]},Ww=(r,t,e,n)=>{const s=Math.atan2(t,r),o=Math.atan2(n,e);return o>=s?o-s:2*Math.PI-(s-o)};function qw(r,t,e,n,s,o,c,u){let f;if(Nt.cachesBoundsOfCurve&&(f=[...arguments].join(),Rc.boundsOfCurveCache[f]))return Rc.boundsOfCurveCache[f];const d=Math.sqrt,g=Math.abs,y=[],v=[[0,0],[0,0]];let b=6*r-12*e+6*s,S=-3*r+9*e-9*s+3*c,w=3*e-3*r;for(let R=0;R<2;++R){if(R>0&&(b=6*t-12*n+6*o,S=-3*t+9*n-9*o+3*u,w=3*n-3*t),g(S)<1e-12){if(g(b)<1e-12)continue;const rt=-w/b;0<rt&&rt<1&&y.push(rt);continue}const F=b*b-4*w*S;if(F<0)continue;const z=d(F),U=(-b+z)/(2*S);0<U&&U<1&&y.push(U);const q=(-b-z)/(2*S);0<q&&q<1&&y.push(q)}let _=y.length;const O=_,k=O2(r,t,e,n,s,o,c,u);for(;_--;){const{x:R,y:F}=k(y[_]);v[0][_]=R,v[1][_]=F}v[0][O]=r,v[1][O]=t,v[0][O+1]=c,v[1][O+1]=u;const B=[new Z(Math.min(...v[0]),Math.min(...v[1])),new Z(Math.max(...v[0]),Math.max(...v[1]))];return Nt.cachesBoundsOfCurve&&(Rc.boundsOfCurveCache[f]=B),B}const T4=(r,t,e)=>{let[n,s,o,c,u,f,d,g]=e;const y=((v,b,S,w,_,O,k)=>{if(S===0||w===0)return[];let B=0,R=0,F=0;const z=Math.PI,U=k*Yy,q=Fi(U),rt=Ui(U),lt=.5*(-rt*v-q*b),ct=.5*(-rt*b+q*v),E=S**2,X=w**2,T=ct**2,j=lt**2,A=E*X-E*T-X*j;let P=Math.abs(S),I=Math.abs(w);if(A<0){const le=Math.sqrt(1-A/(E*X));P*=le,I*=le}else F=(_===O?-1:1)*Math.sqrt(A/(E*T+X*j));const at=F*P*ct/I,ot=-F*I*lt/P,L=rt*at-q*ot+.5*v,Q=q*at+rt*ot+.5*b;let st=Ww(1,0,(lt-at)/P,(ct-ot)/I),ut=Ww((lt-at)/P,(ct-ot)/I,(-lt-at)/P,(-ct-ot)/I);O===0&&ut>0?ut-=2*z:O===1&&ut<0&&(ut+=2*z);const ht=Math.ceil(Math.abs(ut/z*2)),gt=[],yt=ut/ht,Rt=8/3*Math.sin(yt/4)*Math.sin(yt/4)/Math.sin(yt/2);let kt=st+yt;for(let le=0;le<ht;le++)gt[le]=C4(st,kt,rt,q,P,I,L,Q,Rt,B,R),B=gt[le][5],R=gt[le][6],st=kt,kt+=yt;return gt})(d-r,g-t,s,o,u,f,c);for(let v=0,b=y.length;v<b;v++)y[v][1]+=r,y[v][2]+=t,y[v][3]+=r,y[v][4]+=t,y[v][5]+=r,y[v][6]+=t;return y},E4=r=>{let t=0,e=0,n=0,s=0;const o=[];let c,u=0,f=0;for(const d of r){const g=[...d];let y;switch(g[0]){case"l":g[1]+=t,g[2]+=e;case"L":t=g[1],e=g[2],y=["L",t,e];break;case"h":g[1]+=t;case"H":t=g[1],y=["L",t,e];break;case"v":g[1]+=e;case"V":e=g[1],y=["L",t,e];break;case"m":g[1]+=t,g[2]+=e;case"M":t=g[1],e=g[2],n=g[1],s=g[2],y=["M",t,e];break;case"c":g[1]+=t,g[2]+=e,g[3]+=t,g[4]+=e,g[5]+=t,g[6]+=e;case"C":u=g[3],f=g[4],t=g[5],e=g[6],y=["C",g[1],g[2],u,f,t,e];break;case"s":g[1]+=t,g[2]+=e,g[3]+=t,g[4]+=e;case"S":c==="C"?(u=2*t-u,f=2*e-f):(u=t,f=e),t=g[3],e=g[4],y=["C",u,f,g[1],g[2],t,e],u=y[3],f=y[4];break;case"q":g[1]+=t,g[2]+=e,g[3]+=t,g[4]+=e;case"Q":u=g[1],f=g[2],t=g[3],e=g[4],y=["Q",u,f,t,e];break;case"t":g[1]+=t,g[2]+=e;case"T":c==="Q"?(u=2*t-u,f=2*e-f):(u=t,f=e),t=g[1],e=g[2],y=["Q",u,f,t,e];break;case"a":g[6]+=t,g[7]+=e;case"A":T4(t,e,g).forEach((v=>o.push(v))),t=g[6],e=g[7];break;case"z":case"Z":t=n,e=s,y=["Z"]}y?(o.push(y),c=y[0]):c=""}return o},fd=(r,t,e,n)=>Math.sqrt((e-r)**2+(n-t)**2),O2=(r,t,e,n,s,o,c,u)=>f=>{const d=f**3,g=(b=>3*b**2*(1-b))(f),y=(b=>3*b*(1-b)**2)(f),v=(b=>(1-b)**3)(f);return new Z(c*d+s*g+e*y+r*v,u*d+o*g+n*y+t*v)},A2=r=>r**2,D2=r=>2*r*(1-r),k2=r=>(1-r)**2,O4=(r,t,e,n,s,o,c,u)=>f=>{const d=A2(f),g=D2(f),y=k2(f),v=3*(y*(e-r)+g*(s-e)+d*(c-s)),b=3*(y*(n-t)+g*(o-n)+d*(u-o));return Math.atan2(b,v)},A4=(r,t,e,n,s,o)=>c=>{const u=A2(c),f=D2(c),d=k2(c);return new Z(s*u+e*f+r*d,o*u+n*f+t*d)},D4=(r,t,e,n,s,o)=>c=>{const u=1-c,f=2*(u*(e-r)+c*(s-e)),d=2*(u*(n-t)+c*(o-n));return Math.atan2(d,f)},Kw=(r,t,e)=>{let n=new Z(t,e),s=0;for(let o=1;o<=100;o+=1){const c=r(o/100);s+=fd(n.x,n.y,c.x,c.y),n=c}return s},k4=(r,t)=>{let e,n=0,s=0,o={x:r.x,y:r.y},c=V({},o),u=.01,f=0;const d=r.iterator,g=r.angleFinder;for(;s<t&&u>1e-4;)c=d(n),f=n,e=fd(o.x,o.y,c.x,c.y),e+s>t?(n-=u,u/=2):(o=c,n+=u,s+=e);return V(V({},c),{},{angle:g(f)})},M2=r=>{let t,e,n=0,s=0,o=0,c=0,u=0;const f=[];for(const d of r){const g={x:s,y:o,command:d[0],length:0};switch(d[0]){case"M":e=g,e.x=c=s=d[1],e.y=u=o=d[2];break;case"L":e=g,e.length=fd(s,o,d[1],d[2]),s=d[1],o=d[2];break;case"C":t=O2(s,o,d[1],d[2],d[3],d[4],d[5],d[6]),e=g,e.iterator=t,e.angleFinder=O4(s,o,d[1],d[2],d[3],d[4],d[5],d[6]),e.length=Kw(t,s,o),s=d[5],o=d[6];break;case"Q":t=A4(s,o,d[1],d[2],d[3],d[4]),e=g,e.iterator=t,e.angleFinder=D4(s,o,d[1],d[2],d[3],d[4]),e.length=Kw(t,s,o),s=d[3],o=d[4];break;case"Z":e=g,e.destX=c,e.destY=u,e.length=fd(s,o,c,u),s=c,o=u}n+=e.length,f.push(e)}return f.push({length:n,x:s,y:o}),f},M4=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M2(r),n=0;for(;t-e[n].length>0&&n<e.length-2;)t-=e[n].length,n++;const s=e[n],o=t/s.length,c=r[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return V(V({},new Z(s.x,s.y).lerp(new Z(s.destX,s.destY),o)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return V(V({},new Z(s.x,s.y).lerp(new Z(c[1],c[2]),o)),{},{angle:Math.atan2(c[2]-s.y,c[1]-s.x)});case"C":case"Q":return k4(s,t)}},j4=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Qw=new RegExp(w4,"g"),R4=new RegExp(xr,"gi"),L4={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},N4=r=>{var t;const e=[],n=(t=r.match(j4))!==null&&t!==void 0?t:[];for(const s of n){const o=s[0];if(o==="z"||o==="Z"){e.push([o]);continue}const c=L4[o.toLowerCase()];let u=[];if(o==="a"||o==="A"){Qw.lastIndex=0;for(let f=null;f=Qw.exec(s);)u.push(...f.slice(1))}else u=s.match(R4)||[];for(let f=0;f<u.length;f+=c){const d=new Array(c),g=_4[o];d[0]=f>0&&g?g:o;for(let y=0;y<c;y++)d[y+1]=parseFloat(u[f+y]);e.push(d)}}return e},B4=(r,t)=>r.map((e=>e.map(((n,s)=>s===0||t===void 0?n:Jt(n,t))).join(" "))).join(" ");function U0(r,t){const e=r.style;e&&t&&(typeof t=="string"?e.cssText+=";"+t:Object.entries(t).forEach((n=>{let[s,o]=n;return e.setProperty(s,o)})))}class z4 extends r2{constructor(t){let{allowTouchScrolling:e=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),Y(this,"upper",void 0),Y(this,"container",void 0);const{el:s}=this.lower,o=this.createUpperCanvas();this.upper={el:o,ctx:o.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:e}),this.applyCanvasStyle(o,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const c=this.createContainerElement();c.classList.add(n),s.parentNode&&s.parentNode.replaceChild(c,s),c.append(s,o),this.container=c}createUpperCanvas(){const{el:t}=this.lower,e=Pi();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=yl().createElement("div");return t.setAttribute("data-fabric","wrapper"),U0(t,{position:"relative"}),ww(t),t}applyCanvasStyle(t,e){const{styles:n,allowTouchScrolling:s}=e;U0(t,V(V({},n),{},{"touch-action":s?"manipulation":yn})),ww(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:n,ctx:s}=this.upper;n2(n,s,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),k0(this.upper.el,t),k0(this.container,t)}cleanupDOM(t){const e=this.container,{el:n}=this.lower,{el:s}=this.upper;super.cleanupDOM(t),e.removeChild(s),e.removeChild(n),e.parentNode&&e.parentNode.replaceChild(n,e)}dispose(){super.dispose(),Ir().dispose(this.upper.el),delete this.upper,delete this.container}}class Hd extends _u{constructor(){super(...arguments),Y(this,"targets",[]),Y(this,"_hoveredTargets",[]),Y(this,"_objectsToRender",void 0),Y(this,"_currentTransform",null),Y(this,"_groupSelector",null),Y(this,"contextTopDirty",!1)}static getDefaults(){return V(V({},super.getDefaults()),Hd.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new z4(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter((e=>!e.group&&e!==t)).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),n=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,n){const s=this.targetFindTolerance,o=this.pixelFindContext;this.clearContext(o),o.save(),o.translate(-e+s,-n+s),o.transform(...this.viewportTransform);const c=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(o),t.selectionBackgroundColor=c,o.restore();const u=Math.round(s*this.getRetinaScaling());return H3(o,u,u,u)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find((n=>!!n&&t[n]===!0)):t[e])}_shouldClearSelection(t,e){const n=this.getActiveObjects(),s=this._activeObject;return!!(!e||e&&s&&n.length>1&&n.indexOf(e)===-1&&s!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&s&&s!==e)}_shouldCenterTransform(t,e,n){if(!t)return;let s;return e===Ld||e===xn||e===sr||e===Wc?s=this.centeredScaling||t.centeredScaling:e===Gy&&(s=this.centeredRotation||t.centeredRotation),s?!n:n}_getOriginFromCorner(t,e){const n={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?n.x=ye:["mr","tr","br"].includes(e)&&(n.x=Ht),["tl","mt","tr"].includes(e)?n.y=D0:["bl","mb","br"].includes(e)&&(n.y=mn)),n}_setupCurrentTransform(t,e,n){var s;const o=e.group?Wo(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:c="",control:u}=e.getActiveControl()||{},f=n&&u?(s=u.getActionHandler(t,e,u))===null||s===void 0?void 0:s.bind(u):r3,d=((b,S,w,_)=>{if(!S||!b)return"drag";const O=_.controls[S];return O.getActionName(w,O,_)})(n,c,t,e),g=t[this.centeredKey],y=this._shouldCenterTransform(e,d,g)?{x:Tt,y:Tt}:this._getOriginFromCorner(e,c),v={target:e,action:d,actionHandler:f,actionPerformed:!1,corner:c,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:o.x-e.left,offsetY:o.y-e.top,originX:y.x,originY:y.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:ve(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:g,original:V(V({},i2(e)),{},{originX:y.x,originY:y.y})};this._currentTransform=v,this.fire("before:transform",{e:t,transform:v})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:n,deltaX:s,deltaY:o}=this._groupSelector,c=new Z(e,n).transform(this.viewportTransform),u=new Z(e+s,n+o).transform(this.viewportTransform),f=this.selectionLineWidth/2;let d=Math.min(c.x,u.x),g=Math.min(c.y,u.y),y=Math.max(c.x,u.x),v=Math.max(c.y,u.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(d,g,y-d,v-g)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,d+=f,g+=f,y-=f,v-=f,Ze.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(d,g,y-d,v-g))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),n=this._activeObject,s=this.getActiveObjects();if(this.targets=[],n&&s.length>=1){if(n.findControl(e,M0(t))||s.length>1&&this.searchPossibleTargets([n],e))return n;if(n===this.searchPossibleTargets([n],e)){if(this.preserveObjectStacking){const o=this.targets;this.targets=[];const c=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&c&&c!==n?(this.targets=o,n):c}return n}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let n=t.getCoords();const s=this.getZoom(),o=t.padding/s;if(o){const[c,u,f,d]=n,g=Math.atan2(u.y-c.y,u.x-c.x),y=Ui(g)*o,v=Fi(g)*o,b=y+v,S=y-v;n=[new Z(c.x-S,c.y-b),new Z(u.x+b,u.y-S),new Z(f.x+S,f.y+b),new Z(d.x-b,d.y+S)]}return ae.isPointInPolygon(e,n)}_checkTarget(t,e){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,Wo(e,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,e.x,e.y)))}_searchPossibleTargets(t,e){let n=t.length;for(;n--;){const s=t[n];if(this._checkTarget(s,e)){if(Nf(s)&&s.subTargetCheck){const o=this._searchPossibleTargets(s._objects,e);o&&this.targets.push(o)}return s}}}searchPossibleTargets(t,e){const n=this._searchPossibleTargets(t,e);if(n&&Nf(n)&&n.interactive&&this.targets[0]){const s=this.targets;for(let o=s.length-1;o>0;o--){const c=s[o];if(!Nf(c)||!c.interactive)return c}return s[0]}return n}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,s=n.getBoundingClientRect();let o=KR(t),c=s.width||0,u=s.height||0;c&&u||(mn in s&&D0 in s&&(u=Math.abs(s.top-s.bottom)),ye in s&&Ht in s&&(c=Math.abs(s.right-s.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,e||(o=Wo(o,void 0,this.viewportTransform));const f=this.getRetinaScaling();f!==1&&(o.x/=f,o.y/=f);const d=c===0||u===0?new Z(1,1):new Z(n.width/c,n.height/u);return o.multiply(d)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Pi(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return da(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let n=!1,s=!1;const o=this.getActiveObjects(),c=[],u=[];t.forEach((f=>{o.includes(f)||(n=!0,f.fire("deselected",{e,target:f}),u.push(f))})),o.forEach((f=>{t.includes(f)||(n=!0,f.fire("selected",{e,target:f}),c.push(f))})),t.length>0&&o.length>0?(s=!0,n&&this.fire("selection:updated",{e,selected:c,deselected:u})):o.length>0?(s=!0,this.fire("selection:created",{e,selected:c})):t.length>0&&(s=!0,this.fire("selection:cleared",{e,deselected:u})),s&&(this._objectsToRender=void 0)}setActiveObject(t,e){const n=this.getActiveObjects(),s=this._setActiveObject(t,e);return this._fireSelectionEvents(n,e),s}_setActiveObject(t,e){const n=this._activeObject;return n!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,da(t)&&n!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const n=this._activeObject;return!!n&&!n.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(t),da(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),n=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[n]});const s=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),s}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,n=e.target,s={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),e.actionPerformed&&(this.fire("object:modified",s),n.fire(id,s))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;da(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,n){const s=this._realizeGroupTransformOnObject(t),o=super._toObject(t,e,n);return t.set(s),o}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&da(e)&&this._activeObject===e){const n=xl(t,["angle","flipX","flipY",Ht,xn,sr,vl,bl,mn]);return ZR(t,e.calcOwnMatrix()),n}return{}}_setSVGObject(t,e,n){const s=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,n),e.set(s)}}Y(Hd,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class U4{constructor(t){Y(this,"targets",[]),Y(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:s}=t.getActiveObject()||{};s&&s.focus()},n=t.upperCanvasEl;n.addEventListener("click",e),this.__disposer=()=>n.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach((t=>{t.isEditing&&t.exitEditing()}))}add(t){this.targets.push(t)}remove(t){this.unregister(t),Fo(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const F4=["target","oldTarget","fireCanvas","e"],jn={passive:!1},ko=(r,t)=>{const e=r.getViewportPoint(t),n=r.getScenePoint(t);return{viewportPoint:e,scenePoint:n,pointer:e,absolutePointer:n}},ws=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return r.addEventListener(...e)},Jn=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];return r.removeEventListener(...e)},P4={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class $r extends Hd{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),Y(this,"_isClick",void 0),Y(this,"textEditingManager",new U4(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach((e=>{this[e]=this[e].bind(this)})),this.addOrRemove(ws,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const n=this.upperCanvasEl,s=this._getEventPrefix();t(e2(n),"resize",this._onResize),t(n,s+"down",this._onMouseDown),t(n,"".concat(s,"move"),this._onMouseMove,jn),t(n,"".concat(s,"out"),this._onMouseOut),t(n,"".concat(s,"enter"),this._onMouseEnter),t(n,"wheel",this._onMouseWheel),t(n,"contextmenu",this._onContextMenu),t(n,"click",this._onClick),t(n,"dblclick",this._onClick),t(n,"dragstart",this._onDragStart),t(n,"dragend",this._onDragEnd),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,jn)}removeListeners(){this.addOrRemove(Jn,"remove");const t=this._getEventPrefix(),e=vr(this.upperCanvasEl);Jn(e,"".concat(t,"up"),this._onMouseUp),Jn(e,"touchend",this._onTouchEnd,jn),Jn(e,"".concat(t,"move"),this._onMouseMove,jn),Jn(e,"touchmove",this._onMouseMove,jn),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,n=V({e:t},ko(this,t));this.fire("mouse:out",V(V({},n),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",V({},n)),this._hoveredTargets.forEach((s=>{this.fire("mouse:out",V(V({},n),{},{target:s})),s&&s.fire("mouseout",V({},n))})),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",V({e:t},ko(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const n={e:t,target:e};return this.fire("dragstart",n),e.fire("dragstart",n),void ws(this.upperCanvasEl,"drag",this._onDragProgress)}_w(t)}_renderDragEffects(t,e,n){let s=!1;const o=this._dropTarget;o&&o!==e&&o!==n&&(o.clearContextTop(),s=!0),e?.clearContextTop(),n!==e&&n?.clearContextTop();const c=this.contextTop;c.save(),c.transform(...this.viewportTransform),e&&(c.save(),e.transform(c),e.renderDragSourceEffect(t),c.restore(),s=!0),n&&(c.save(),n.transform(c),n.renderDropTargetEffect(t),c.restore(),s=!0),c.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==yn,n=e?this._activeObject:void 0,s={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:n};Jn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:n,targets:s}=this.findDragTargets(t),o=this._dragSource,c={e:t,target:n,subTargets:s,dragSource:o,canDrop:!1,dropTarget:void 0};let u;this.fire(e,c),this._fireEnterLeaveEvents(n,c),n&&(n.canDrop(t)&&(u=n),n.fire(e,c));for(let f=0;f<s.length;f++){const d=s[f];d.canDrop(t)&&(u=d),d.fire(e,c)}this._renderDragEffects(t,o,u),this._dropTarget=u}_onDragEnter(t){const{target:e,targets:n}=this.findDragTargets(t),s={e:t,target:e,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(e,s)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:n}=this.findDragTargets(t),s=this._basicEventHandler("drop:before",V({e:t,target:e,subTargets:n,dragSource:this._dragSource},ko(this,t)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(t){const e=this.findTarget(t),n=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:n});return this.stopContextMenu&&_w(t),this._basicEventHandler("contextmenu",s),!1}_onClick(t){const e=t.detail;e>3||e<2||(this._cacheTransformEventData(t),e==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),e==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let e=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||n&&this._target===n)&&(e=!0),e&&t.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,o=this._getEventPrefix(),c=vr(s);ws(c,"touchend",this._onTouchEnd,jn),e&&ws(c,"touchmove",this._onMouseMove,jn),Jn(s,"".concat(o,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();Jn(e,"".concat(n,"move"),this._onMouseMove,jn);const s=vr(e);ws(s,"".concat(n,"up"),this._onMouseUp),ws(s,"".concat(n,"move"),this._onMouseMove,jn)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),n=vr(this.upperCanvasEl);Jn(n,"touchend",this._onTouchEnd,jn),Jn(n,"touchmove",this._onMouseMove,jn),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((()=>{ws(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0}),400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(t)){const s=vr(this.upperCanvasEl);Jn(s,"".concat(n,"up"),this._onMouseUp),Jn(s,"".concat(n,"move"),this._onMouseMove,jn),ws(e,"".concat(n,"move"),this._onMouseMove,jn)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const n=this._currentTransform,s=this._isClick,o=this._target,{button:c}=t;if(c)return(this.fireMiddleClick&&c===1||this.fireRightClick&&c===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let u,f,d=!1;if(n&&(this._finalizeCurrentTransform(t),d=n.actionPerformed),!s){const g=o===this._activeObject;this.handleSelection(t),d||(d=this._shouldRender(o)||!g&&o===this._activeObject)}if(o){const g=o.findControl(this.getViewportPoint(t),M0(t)),{key:y,control:v}=g||{};if(f=y,o.selectable&&o!==this._activeObject&&o.activeOn==="up")this.setActiveObject(o,t),d=!0;else if(v){const b=v.getMouseUpHandler(t,o,v);b&&(u=this.getScenePoint(t),b.call(v,t,n,u.x,u.y))}o.isMoving=!1}if(n&&(n.target!==o||n.corner!==f)){const g=n.target&&n.target.controls[n.corner],y=g&&g.getMouseUpHandler(t,n.target,g);u=u||this.getScenePoint(t),y&&y.call(g,t,n,u.x,u.y)}this._setCursorFromEvent(t,o),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,o&&(o.__corner=void 0),d?this.requestRenderAll():s||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:n,subTargets:s=[]}=e;this.fire(t,e),n&&n.fire(t,e);for(let o=0;o<s.length;o++)s[o]!==n&&s[o].fire(t,e);return e}_handleEvent(t,e,n){const s=this._target,o=this.targets||[],c=V(V(V({e:t,target:s,subTargets:o},ko(this,t)),{},{transform:this._currentTransform},e==="up:before"||e==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{}),e==="down:before"||e==="down"?n:{});this.fire("mouse:".concat(e),c),s&&s.fire("mouse".concat(e),c);for(let u=0;u<o.length;u++)o[u]!==s&&o[u].fire("mouse".concat(e),c)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target,n=!!e&&e===this._activeObject;const{button:s}=t;if(s)return(this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(t,"down",{alreadySelected:n}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let o=this._shouldRender(e),c=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,c=!0,o=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const u=this.getScenePoint(t);this._groupSelector={x:u.x,y:u.y,deltaY:0,deltaX:0}}if(n=!!e&&e===this._activeObject,e){e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const u=e.findControl(this.getViewportPoint(t),M0(t));if(e===this._activeObject&&(u||!c)){this._setupCurrentTransform(t,e,n);const f=u?u.control:void 0,d=this.getScenePoint(t),g=f&&f.getMouseDownHandler(t,e,f);g&&g.call(f,t,this._currentTransform,d.x,d.y)}}o&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:n}),o&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=Wo(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const n=this.getScenePoint(t);e.deltaX=n.x-e.x,e.deltaY=n.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const n=this.findTarget(t);this._setCursorFromEvent(t,n),this._fireOverOutEvents(t,n)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const n=this._hoveredTarget,s=this._hoveredTargets,o=this.targets,c=Math.max(s.length,o.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:n,fireCanvas:!0});for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("mouse",{e:t,target:o[u],oldTarget:s[u]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const n=this._draggedoverTarget,s=this._hoveredTargets,o=this.targets,c=Math.max(s.length,o.length);this.fireSyntheticInOutEvents("drag",V(V({},e),{},{target:t,oldTarget:n,fireCanvas:!0}));for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("drag",V(V({},e),{},{target:o[u],oldTarget:s[u]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:n,oldTarget:s,fireCanvas:o,e:c}=e,u=se(e,F4);const{targetIn:f,targetOut:d,canvasIn:g,canvasOut:y}=P4[t],v=s!==n;if(s&&v){const b=V(V({},u),{},{e:c,target:s,nextTarget:n},ko(this,c));o&&this.fire(y,b),s.fire(d,b)}if(n&&v){const b=V(V({},u),{},{e:c,target:n,previousTarget:s},ko(this,c));o&&this.fire(g,b),n.fire(f,b)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),n=this._currentTransform,s=n.target,o=s.group?Wo(e,void 0,s.group.calcTransformMatrix()):e;n.shiftKey=t.shiftKey,n.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,n,o),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,n){const{action:s,actionHandler:o,target:c}=e,u=!!o&&o(t,e,n.x,n.y);u&&c.setCoords(),s==="drag"&&u&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||u}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let n=e.hoverCursor||this.hoverCursor;const s=da(this._activeObject)?this._activeObject:null,o=(!s||e.group!==s)&&e.findControl(this.getViewportPoint(t));if(o){const c=o.control;this.setCursor(c.cursorStyleHandler(t,c,e))}else e.subTargetCheck&&this.targets.concat().reverse().map((c=>{n=c.hoverCursor||n})),this.setCursor(n)}handleMultiSelection(t,e){const n=this._activeObject,s=da(n);if(n&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(n!==e||s)&&(s||!e.isDescendantOf(n)&&!n.isDescendantOf(e))&&!e.onSelect({e:t})&&!n.getActiveControl()){if(s){const o=n.getObjects();if(e===n){const c=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(o,c)||this.searchPossibleTargets(this._objects,c))||!e.selectable)return!1}e.group===n?(n.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),t)):(n.multiSelectAdd(e),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(o,t)}else{n.isEditing&&n.exitEditing();const o=new(ft.getClass("ActiveSelection"))([],{canvas:this});o.multiSelectAdd(n,e),this._hoveredTarget=o,this._setActiveObject(o,t),this._fireSelectionEvents([n],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:n,deltaX:s,deltaY:o}=this._groupSelector,c=new Z(e,n),u=c.add(new Z(s,o)),f=c.min(u),d=c.max(u).subtract(f),g=this.collectObjects({left:f.x,top:f.y,width:d.x,height:d.y},{includeIntersecting:!this.selectionFullyContained}),y=c.eq(u)?g[0]?[g[0]]:[]:g.length>1?g.filter((v=>!v.onSelect({e:t}))).reverse():g;if(y.length===1)this.setActiveObject(y[0],t);else if(y.length>1){const v=ft.getClass("ActiveSelection");this.setActiveObject(new v(y,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const j2={x1:0,y1:0,x2:0,y2:0},H4=V(V({},j2),{},{r1:0,r2:0}),Yo=(r,t)=>isNaN(r)&&typeof t=="number"?t:r,Y4=/^(\d+\.\d+)%|(\d+)%$/;function R2(r){return r&&Y4.test(r)}function L2(r,t){const e=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(R2(r)?100:1):NaN;return il(0,Yo(e,t),1)}const V4=/\s*;\s*/,X4=/\s*:\s*/;function G4(r,t){let e,n;const s=r.getAttribute("style");if(s){const c=s.split(V4);c[c.length-1]===""&&c.pop();for(let u=c.length;u--;){const[f,d]=c[u].split(X4).map((g=>g.trim()));f==="stop-color"?e=d:f==="stop-opacity"&&(n=d)}}const o=new It(e||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:L2(r.getAttribute("offset"),0),color:o.toRgb(),opacity:Yo(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*o.getAlpha()*t}}function I4(r,t){const e=[],n=r.getElementsByTagName("stop"),s=L2(t,1);for(let o=n.length;o--;)e.push(G4(n[o],s));return e}function N2(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function B2(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function gr(r,t){return r.getAttribute(t)}function $4(r,t){return(function(e,n){let s,{width:o,height:c,gradientUnits:u}=n;return Object.keys(e).reduce(((f,d)=>{const g=e[d];return g==="Infinity"?s=1:g==="-Infinity"?s=0:(s=typeof g=="string"?parseFloat(g):g,typeof g=="string"&&R2(g)&&(s*=.01,u==="pixels"&&(d!=="x1"&&d!=="x2"&&d!=="r2"||(s*=o),d!=="y1"&&d!=="y2"||(s*=c)))),f[d]=s,f}),{})})(N2(r)==="linear"?(function(e){return{x1:gr(e,"x1")||0,y1:gr(e,"y1")||0,x2:gr(e,"x2")||"100%",y2:gr(e,"y2")||0}})(r):(function(e){return{x1:gr(e,"fx")||gr(e,"cx")||"50%",y1:gr(e,"fy")||gr(e,"cy")||"50%",r1:0,x2:gr(e,"cx")||"50%",y2:gr(e,"cy")||"50%",r2:gr(e,"r")||"50%"}})(r),V(V({},t),{},{gradientUnits:B2(r)}))}class Kh{constructor(t){const{type:e="linear",gradientUnits:n="pixels",coords:s={},colorStops:o=[],offsetX:c=0,offsetY:u=0,gradientTransform:f,id:d}=t||{};Object.assign(this,{type:e,gradientUnits:n,coords:V(V({},e==="radial"?H4:j2),s),colorStops:o,offsetX:c,offsetY:u,gradientTransform:f,id:d?"".concat(d,"_").concat(Ls()):Ls()})}addColorStop(t){for(const e in t){const n=new It(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(t){return V(V({},xl(this,t)),{},{type:this.type,coords:V({},this.coords),colorStops:this.colorStops.map((e=>V({},e))),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],s=this.gradientTransform?this.gradientTransform.concat():sn.concat(),o=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",c=this.colorStops.map((y=>V({},y))).sort(((y,v)=>y.offset-v.offset));let u=-this.offsetX,f=-this.offsetY;var d;o==="objectBoundingBox"?(u/=t.width,f/=t.height):(u+=t.width/2,f+=t.height/2),(d=t)&&typeof d._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(u-=t.pathOffset.x,f-=t.pathOffset.y),s[4]-=u,s[5]-=f;const g=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(Kc(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:y,y1:v,x2:b,y2:S}=this.coords;n.push("<linearGradient ",g,' x1="',y,'" y1="',v,'" x2="',b,'" y2="',S,`">
`)}else if(this.type==="radial"){const{x1:y,y1:v,x2:b,y2:S,r1:w,r2:_}=this.coords,O=w>_;n.push("<radialGradient ",g,' cx="',O?y:b,'" cy="',O?v:S,'" r="',O?w:_,'" fx="',O?b:y,'" fy="',O?S:v,`">
`),O&&(c.reverse(),c.forEach((B=>{B.offset=1-B.offset})));const k=Math.min(w,_);if(k>0){const B=k/Math.max(w,_);c.forEach((R=>{R.offset+=B*(1-R.offset)}))}}return c.forEach((y=>{let{color:v,offset:b,opacity:S}=y;n.push("<stop ",'offset="',100*b+"%",'" style="stop-color:',v,S!==void 0?";stop-opacity: "+S:";",`"/>
`)})),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(t){const{x1:e,y1:n,x2:s,y2:o,r1:c,r2:u}=this.coords,f=this.type==="linear"?t.createLinearGradient(e,n,s,o):t.createRadialGradient(e,n,c,s,o,u);return this.colorStops.forEach((d=>{let{color:g,opacity:y,offset:v}=d;f.addColorStop(v,y!==void 0?new It(g).setAlpha(y).toRgba():g)})),f}static async fromObject(t){const{colorStops:e,gradientTransform:n}=t;return new this(V(V({},t),{},{colorStops:e?e.map((s=>V({},s))):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(t,e,n){const s=B2(t),o=e._findCenterFromElement();return new this(V({id:t.getAttribute("id")||void 0,type:N2(t),coords:$4(t,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:I4(t,n.opacity),gradientUnits:s,gradientTransform:N0(t.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:e.width/2-o.x,offsetY:e.height/2-o.y}:{offsetX:0,offsetY:0}))}}Y(Kh,"type","Gradient"),ft.setClass(Kh,"gradient"),ft.setClass(Kh,"linear"),ft.setClass(Kh,"radial");const W4=["type","source","patternTransform"];class Zm{get type(){return"pattern"}set type(t){Rs("warn","Setting type has no effect",t)}constructor(t){Y(this,"repeat","repeat"),Y(this,"offsetX",0),Y(this,"offsetY",0),Y(this,"crossOrigin",""),this.id=Ls(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:n}=this;return V(V({},xl(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:n,offsetX:Jt(this.offsetX,Nt.NUM_FRACTION_DIGITS),offsetY:Jt(this.offsetY,Nt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:n}=t;const{source:s,repeat:o,id:c}=this,u=Yo(this.offsetX/e,0),f=Yo(this.offsetY/n,0),d=o==="repeat-y"||o==="no-repeat"?1+Math.abs(u||0):Yo(s.width/e,0),g=o==="repeat-x"||o==="no-repeat"?1+Math.abs(f||0):Yo(s.height/n,0);return['<pattern id="SVGID_'.concat(c,'" x="').concat(u,'" y="').concat(f,'" width="').concat(d,'" height="').concat(g,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:n,source:s,patternTransform:o}=t,c=se(t,W4);const u=await zf(s,V(V({},e),{},{crossOrigin:c.crossOrigin}));return new this(V(V({},c),{},{patternTransform:o&&o.slice(0),source:u}))}}Y(Zm,"type","Pattern"),ft.setClass(Zm),ft.setClass(Zm,"pattern");const q4=["path","left","top"],K4=["d"];class ga extends Ze{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:s,top:o}=e,c=se(e,q4);super(),Object.assign(this,ga.ownDefaults),this.setOptions(c),this._setPath(t||[],!0),typeof s=="number"&&this.set(Ht,s),typeof o=="number"&&this.set(mn,o)}_setPath(t,e){this.path=E4(Array.isArray(t)?t:N4(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new Z(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,n=-this.pathOffset.y;t.beginPath();for(const s of this.path)switch(s[0]){case"L":t.lineTo(s[1]+e,s[2]+n);break;case"M":t.moveTo(s[1]+e,s[2]+n);break;case"C":t.bezierCurveTo(s[1]+e,s[2]+n,s[3]+e,s[4]+n,s[5]+e,s[6]+n);break;case"Q":t.quadraticCurveTo(s[1]+e,s[2]+n,s[3]+e,s[4]+n);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V(V({},super.toObject(t)),{},{path:this.path.map((e=>e.slice()))})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=B4(this.path,Nt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=Nt.NUM_FRACTION_DIGITS;return" translate(".concat(Jt(-this.pathOffset.x,t),", ").concat(Jt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:n,pathOffset:s}=this._calcDimensions();this.set({width:e,height:n,pathOffset:s}),t&&this.setPositionByOrigin(s,Tt,Tt)}_calcBoundsFromPath(){const t=[];let e=0,n=0,s=0,o=0;for(const c of this.path)switch(c[0]){case"L":s=c[1],o=c[2],t.push({x:e,y:n},{x:s,y:o});break;case"M":s=c[1],o=c[2],e=s,n=o;break;case"C":t.push(...qw(s,o,c[1],c[2],c[3],c[4],c[5],c[6])),s=c[5],o=c[6];break;case"Q":t.push(...qw(s,o,c[1],c[2],c[1],c[2],c[3],c[4])),s=c[3],o=c[4];break;case"Z":s=e,o=n}return ji(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return V(V({},t),{},{pathOffset:new Z(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,n){const s=qi(t,this.ATTRIBUTE_NAMES,n),{d:o}=s;return new this(o,V(V(V({},se(s,K4)),e),{},{left:void 0,top:void 0}))}}Y(ga,"type","Path"),Y(ga,"cacheProperties",[...Wi,"path","fillRule"]),Y(ga,"ATTRIBUTE_NAMES",[...Us,"d"]),ft.setClass(ga),ft.setSVGClass(ga);const Q4=["left","top","radius"],z2=["radius","startAngle","endAngle","counterClockwise"];class Lr extends Ze{static getDefaults(){return V(V({},super.getDefaults()),Lr.ownDefaults)}constructor(t){super(),Object.assign(this,Lr.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,ve(this.startAngle),ve(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(xn)}getRadiusY(){return this.get("radius")*this.get(sr)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...z2,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,n=ve(this.startAngle),s=ve(this.endAngle),o=Ui(n)*e,c=Fi(n)*e,u=Ui(s)*e,f=Fi(s)*e,d=t>180?1:0,g=this.counterClockwise?0:1;return['<path d="M '.concat(o," ").concat(c," A ").concat(e," ").concat(e," 0 ").concat(d," ").concat(g," ").concat(u," ").concat(f,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,e,n){const s=qi(t,this.ATTRIBUTE_NAMES,n),{left:o=0,top:c=0,radius:u=0}=s;return new this(V(V({},se(s,Q4)),{},{radius:u,left:o-u,top:c-u}))}static fromObject(t){return super._fromObject(t)}}Y(Lr,"type","Circle"),Y(Lr,"cacheProperties",[...Wi,...z2]),Y(Lr,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Y(Lr,"ATTRIBUTE_NAMES",["cx","cy","r",...Us]),ft.setClass(Lr),ft.setSVGClass(Lr);const Z4=["x1","y1","x2","y2"],J4=["x1","y1","x2","y2"],F0=["x1","x2","y1","y2"];class pa extends Ze{constructor(){let[t,e,n,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,pa.ownDefaults),this.setOptions(o),this.x1=t,this.x2=n,this.y1=e,this.y2=s,this._setWidthHeight();const{left:c,top:u}=o;typeof c=="number"&&this.set(Ht,c),typeof u=="number"&&this.set(mn,u)}_setWidthHeight(){const{x1:t,y1:e,x2:n,y2:s}=this;this.width=Math.abs(n-t),this.height=Math.abs(s-e);const{left:o,top:c,width:u,height:f}=ji([{x:t,y:e},{x:n,y:s}]),d=new Z(o+u/2,c+f/2);this.setPositionByOrigin(d,Tt,Tt)}_set(t,e){return super._set(t,e),F0.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const n=t.strokeStyle;var s;rr(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n}_findCenterFromElement(){return new Z((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V(V({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:n,y2:s,width:o,height:c}=this,u=t<=e?-1:1,f=n<=s?-1:1;return{x1:u*o/2,x2:u*-o/2,y1:f*c/2,y2:f*-c/2}}_toSVG(){const{x1:t,x2:e,y1:n,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(n,'" x2="').concat(e,'" y2="').concat(s,`" />
`)]}static async fromElement(t,e,n){const s=qi(t,this.ATTRIBUTE_NAMES,n),{x1:o=0,y1:c=0,x2:u=0,y2:f=0}=s;return new this([o,c,u,f],se(s,Z4))}static fromObject(t){let{x1:e,y1:n,x2:s,y2:o}=t,c=se(t,J4);return this._fromObject(V(V({},c),{},{points:[e,n,s,o]}),{extraParam:"points"})}}Y(pa,"type","Line"),Y(pa,"cacheProperties",[...Wi,...F0]),Y(pa,"ATTRIBUTE_NAMES",Us.concat(F0)),ft.setClass(pa),ft.setSVGClass(pa);class Ts extends Ze{static getDefaults(){return V(V({},super.getDefaults()),Ts.ownDefaults)}constructor(t){super(),Object.assign(this,Ts.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}Y(Ts,"type","Triangle"),Y(Ts,"ownDefaults",{width:100,height:100}),ft.setClass(Ts),ft.setSVGClass(Ts);const U2=["rx","ry"];class Nr extends Ze{static getDefaults(){return V(V({},super.getDefaults()),Nr.ownDefaults)}constructor(t){super(),Object.assign(this,Nr.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(xn)}getRy(){return this.get("ry")*this.get(sr)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...U2,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,nd,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,n){const s=qi(t,this.ATTRIBUTE_NAMES,n);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function tL(r){if(!r)return[];const t=r.replace(/,/g," ").trim().split(/\s+/),e=[];for(let n=0;n<t.length;n+=2)e.push({x:parseFloat(t[n]),y:parseFloat(t[n+1])});return e}Y(Nr,"type","Ellipse"),Y(Nr,"cacheProperties",[...Wi,...U2]),Y(Nr,"ownDefaults",{rx:0,ry:0}),Y(Nr,"ATTRIBUTE_NAMES",[...Us,"cx","cy","rx","ry"]),ft.setClass(Nr),ft.setSVGClass(Nr);const eL=["left","top"],F2={exactBoundingBox:!1};class mr extends Ze{static getDefaults(){return V(V({},super.getDefaults()),mr.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Y(this,"strokeDiff",void 0),Object.assign(this,mr.ownDefaults),this.setOptions(e),this.points=t;const{left:n,top:s}=e;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Ht,n),typeof s=="number"&&this.set(mn,s)}isOpen(){return!0}_projectStrokeOnPoints(t){return V3(this.points,t,this.isOpen())}_calcDimensions(t){t=V({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map((d=>d.projectedPoint)):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new Z,strokeOffset:new Z,strokeDiff:new Z};const n=ji(e),s=Nd(V(V({},t),{},{scaleX:1,scaleY:1})),o=ji(this.points.map((d=>gn(d,s,!0)))),c=new Z(this.scaleX,this.scaleY);let u=n.left+n.width/2,f=n.top+n.height/2;return this.exactBoundingBox&&(u-=f*Math.tan(ve(this.skewX)),f-=u*Math.tan(ve(this.skewY))),V(V({},n),{},{pathOffset:new Z(u,f),strokeOffset:new Z(o.left,o.top).subtract(new Z(n.left,n.top)).multiply(c),strokeDiff:new Z(n.width,n.height).subtract(new Z(o.width,o.height)).multiply(c)})}_findCenterFromElement(){const t=ji(this.points);return new Z(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:n,width:s,height:o,pathOffset:c,strokeOffset:u,strokeDiff:f}=this._calcDimensions();this.set({width:s,height:o,pathOffset:c,strokeOffset:u,strokeDiff:f}),t&&this.setPositionByOrigin(new Z(e+s/2,n+o/2),Tt,Tt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new Z(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let c;if(Object.keys(t).some((u=>this.strokeUniform||this.constructor.layoutProperties.includes(u)))){var e,n;const{width:u,height:f}=this._calcDimensions(t);c=new Z((e=t.width)!==null&&e!==void 0?e:u,(n=t.height)!==null&&n!==void 0?n:f)}else{var s,o;c=new Z((s=t.width)!==null&&s!==void 0?s:this.width,(o=t.height)!==null&&o!==void 0?o:this.height)}return c.multiply(new Z(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const n=this.initialized&&this[t]!==e,s=super._set(t,e);return this.exactBoundingBox&&n&&((t===xn||t===sr)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),s}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V(V({},super.toObject(t)),{},{points:this.points.map((e=>{let{x:n,y:s}=e;return{x:n,y:s}}))})}_toSVG(){const t=[],e=this.pathOffset.x,n=this.pathOffset.y,s=Nt.NUM_FRACTION_DIGITS;for(let o=0,c=this.points.length;o<c;o++)t.push(Jt(this.points[o].x-e,s),",",Jt(this.points[o].y-n,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,n=this.pathOffset.x,s=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-n,this.points[0].y-s);for(let o=0;o<e;o++){const c=this.points[o];t.lineTo(c.x-n,c.y-s)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,n){return new this(tL(t.getAttribute("points")),V(V({},se(qi(t,this.ATTRIBUTE_NAMES,n),eL)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}Y(mr,"ownDefaults",F2),Y(mr,"type","Polyline"),Y(mr,"layoutProperties",[vl,bl,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Y(mr,"cacheProperties",[...Wi,"points"]),Y(mr,"ATTRIBUTE_NAMES",[...Us]),ft.setClass(mr),ft.setSVGClass(mr);class Vo extends mr{isOpen(){return!1}}Y(Vo,"ownDefaults",F2),Y(Vo,"type","Polygon"),ft.setClass(Vo),ft.setSVGClass(Vo);class P2 extends Ze{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const n in e)for(const s in e[n])for(const o in e[n][s])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const n=e===void 0?this.styles:{0:this.styles[e]};for(const s in n)for(const o in n[s])if(n[s][o][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let n,s,o=0,c=!0,u=0;for(const f in e){n=0;for(const d in e[f]){const g=e[f][d]||{};o++,g[t]!==void 0?(s?g[t]!==s&&(c=!1):s=g[t],g[t]===this[t]&&delete g[t]):c=!1,Object.keys(g).length!==0?n++:delete e[f][d]}n===0&&delete e[f]}for(let f=0;f<this._textLines.length;f++)u+=this._textLines[f].length;c&&o===u&&(this[t]=s,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let n,s,o;for(s in e){for(o in n=e[s],n)delete n[o][t],Object.keys(n[o]).length===0&&delete n[o];Object.keys(n).length===0&&delete e[s]}}_extendStyles(t,e){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(t);this._getLineStyle(n)||this._setLineStyle(n);const o=qy(V(V({},this._getStyleDeclaration(n,s)),e),(c=>c!==void 0));this._setStyleDeclaration(n,s,o)}getSelectionStyles(t,e,n){const s=[];for(let o=t;o<(e||t);o++)s.push(this.getStyleAtPosition(o,n));return s}getStyleAtPosition(t,e){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(n,s):this._getStyleDeclaration(n,s)}setSelectionStyles(t,e,n){for(let s=e;s<(n||e);s++)this._extendStyles(s,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var n;const s=this.styles&&this.styles[t];return s&&(n=s[e])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(t,e){return V(V({},xl(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,n){this.styles[t][e]=n}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}Y(P2,"_styleProperties",s3);const nL=/  +/g,rL=/"/g;function Jm(r,t,e,n,s){return"		".concat((function(o,c){let{left:u,top:f,width:d,height:g}=c,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nt.NUM_FRACTION_DIGITS;const v=Qc(ke,o,!1),[b,S,w,_]=[u,f,d,g].map((O=>Jt(O,y)));return"<rect ".concat(v,' x="').concat(b,'" y="').concat(S,'" width="').concat(w,'" height="').concat(_,'"></rect>')})(r,{left:t,top:e,width:n,height:s}),`
`)}const iL=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let t0;class nn extends P2{static getDefaults(){return V(V({},super.getDefaults()),nn.ownDefaults)}constructor(t,e){super(),Y(this,"__charBounds",[]),Object.assign(this,nn.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=M2(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Ur)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,n,s,o,c,u;for(let f=0,d=this._textLines.length;f<d;f++)if((this.textAlign===Ur||f!==d-1&&!this.isEndOfWrapping(f))&&(s=0,o=this._textLines[f],e=this.getLineWidth(f),e<this.width&&(u=this.textLines[f].match(this._reSpacesAndTabs)))){n=u.length,t=(this.width-e)/n;for(let g=0;g<=o.length;g++)c=this.__charBounds[f][g],this._reSpaceAndTab.test(o[g])?(c.width+=t,c.kernedWidth+=t,c.left+=s,s+=t):c.left+=s}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const n=e?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<n.length;s++){if(t<=n[s].length)return{lineIndex:s,charIndex:t};t-=n[s].length+this.missingNewlineOffset(s,e)}return{lineIndex:s-1,charIndex:n[s-1].length<t?n[s-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===vn?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,n){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Tt:t.textBaseline="middle";break;case"ascender":t.textBaseline=mn;break;case"descender":t.textBaseline=D0}t.font=this._getFontDeclaration(e,n)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,n=this._textLines.length;e<n;e++){const s=this.getLineWidth(e);s>t&&(t=s)}return t}_renderTextLine(t,e,n,s,o,c){this._renderChars(t,e,n,s,o,c)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,n=this._getLeftOffset();let s=this._getTopOffset();for(let o=0,c=this._textLines.length;o<c;o++){const u=this.getHeightOfLine(o);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",o)){s+=u;continue}const f=this._textLines[o].length,d=this._getLineLeftOffset(o);let g,y,v=0,b=0,S=this.getValueOfPropertyAt(o,0,"textBackgroundColor");for(let w=0;w<f;w++){const _=this.__charBounds[o][w];y=this.getValueOfPropertyAt(o,w,"textBackgroundColor"),this.path?(t.save(),t.translate(_.renderLeft,_.renderTop),t.rotate(_.angle),t.fillStyle=y,y&&t.fillRect(-_.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),_.width,u/this.lineHeight),t.restore()):y!==S?(g=n+d+b,this.direction==="rtl"&&(g=this.width-g-v),t.fillStyle=S,S&&t.fillRect(g,s,v,u/this.lineHeight),b=_.left,v=_.width,S=y):v+=_.kernedWidth}y&&!this.path&&(g=n+d+b,this.direction==="rtl"&&(g=this.width-g-v),t.fillStyle=y,t.fillRect(g,s,v,u/this.lineHeight)),s+=u}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,n,s){const o=Rc.getFontCache(e),c=this._getFontDeclaration(e),u=n+t,f=n&&c===this._getFontDeclaration(s),d=e.fontSize/this.CACHE_FONT_SIZE;let g,y,v,b;if(n&&o[n]!==void 0&&(v=o[n]),o[t]!==void 0&&(b=g=o[t]),f&&o[u]!==void 0&&(y=o[u],b=y-v),g===void 0||v===void 0||y===void 0){const S=(function(){return t0||(t0=ar({width:0,height:0}).getContext("2d")),t0})();this._setTextStyles(S,e,!0),g===void 0&&(b=g=S.measureText(t).width,o[t]=g),v===void 0&&f&&n&&(v=S.measureText(n).width,o[n]=v),f&&y===void 0&&(y=S.measureText(u).width,o[u]=y,b=y-v)}return{width:g*d,kernedWidth:b*d}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,n,s=0;const o=this.pathSide===ye,c=this.path,u=this._textLines[t],f=u.length,d=new Array(f);this.__charBounds[t]=d;for(let g=0;g<f;g++){const y=u[g];n=this._getGraphemeBox(y,t,g,e),d[g]=n,s+=n.kernedWidth,e=y}if(d[f]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},c&&c.segmentsInfo){let g=0;const y=c.segmentsInfo[c.segmentsInfo.length-1].length;switch(this.textAlign){case Ht:g=o?y-s:0;break;case Tt:g=(y-s)/2;break;case ye:g=o?0:y-s}g+=this.pathStartOffset*(o?-1:1);for(let v=o?f-1:0;o?v>=0:v<f;o?v--:v++)n=d[v],g>y?g%=y:g<0&&(g+=y),this._setGraphemeOnPath(g,n),g+=n.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(t,e){const n=t+e.kernedWidth/2,s=this.path,o=M4(s.path,n,s.segmentsInfo);e.renderLeft=o.x-s.pathOffset.x,e.renderTop=o.y-s.pathOffset.y,e.angle=o.angle+(this.pathSide===ye?Math.PI:0)}_getGraphemeBox(t,e,n,s,o){const c=this.getCompleteStyleDeclaration(e,n),u=s?this.getCompleteStyleDeclaration(e,n-1):{},f=this._measureChar(t,c,s,u);let d,g=f.kernedWidth,y=f.width;this.charSpacing!==0&&(d=this._getWidthOfCharSpacing(),y+=d,g+=d);const v={width:y,left:0,height:c.fontSize,kernedWidth:g,deltaY:c.deltaY};if(n>0&&!o){const b=this.__charBounds[e][n-1];v.left=b.left+b.width+f.kernedWidth-f.width}return v}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let n=1,s=this._textLines[t].length;n<s;n++)e=Math.max(this.getHeightOfChar(t,n),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let n=0,s=this._textLines.length;n<s;n++)t=this.getHeightOfLine(n),e+=n===s-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let n=0;const s=this._getLeftOffset(),o=this._getTopOffset();for(let c=0,u=this._textLines.length;c<u;c++){const f=this.getHeightOfLine(c),d=f/this.lineHeight,g=this._getLineLeftOffset(c);this._renderTextLine(e,t,this._textLines[c],s+g,o+n+d,c),n+=f}t.restore()}_renderTextFill(t){(this.fill||this.styleHas(ke))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,n,s,o,c){const u=this.getHeightOfLine(c),f=this.textAlign.includes(Ur),d=this.path,g=!f&&this.charSpacing===0&&this.isEmptyStyles(c)&&!d,y=this.direction==="ltr",v=this.direction==="ltr"?1:-1,b=e.direction;let S,w,_,O,k,B="",R=0;if(e.save(),b!==this.direction&&(e.canvas.setAttribute("dir",y?"ltr":"rtl"),e.direction=y?"ltr":"rtl",e.textAlign=y?Ht:ye),o-=u*this._fontSizeFraction/this.lineHeight,g)return this._renderChar(t,e,c,0,n.join(""),s,o),void e.restore();for(let F=0,z=n.length-1;F<=z;F++)O=F===z||this.charSpacing||d,B+=n[F],_=this.__charBounds[c][F],R===0?(s+=v*(_.kernedWidth-_.width),R+=_.width):R+=_.kernedWidth,f&&!O&&this._reSpaceAndTab.test(n[F])&&(O=!0),O||(S=S||this.getCompleteStyleDeclaration(c,F),w=this.getCompleteStyleDeclaration(c,F+1),O=rv(S,w,!1)),O&&(d?(e.save(),e.translate(_.renderLeft,_.renderTop),e.rotate(_.angle),this._renderChar(t,e,c,F,B,-R/2,0),e.restore()):(k=s,this._renderChar(t,e,c,F,B,k,o)),B="",S=w,s+=v*R,R=0);e.restore()}_applyPatternGradientTransformText(t){const e=this.width+this.strokeWidth,n=this.height+this.strokeWidth,s=ar({width:e,height:n}),o=s.getContext("2d");return s.width=e,s.height=n,o.beginPath(),o.moveTo(0,0),o.lineTo(e,0),o.lineTo(e,n),o.lineTo(0,n),o.closePath(),o.translate(e/2,n/2),o.fillStyle=t.toLive(o),this._applyPatternGradientTransform(o,t),o.fill(),o.createPattern(s,"no-repeat")}handleFiller(t,e,n){let s,o;return rr(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,o=-this.height/2,t.translate(s,o),t[e]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:o}):(t[e]=n.toLive(t),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:n,strokeWidth:s}=e;return t.lineWidth=s,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",n)}_setFillStyles(t,e){let{fill:n}=e;return this.handleFiller(t,"fillStyle",n)}_renderChar(t,e,n,s,o,c,u){const f=this._getStyleDeclaration(n,s),d=this.getCompleteStyleDeclaration(n,s),g=t==="fillText"&&d.fill,y=t==="strokeText"&&d.stroke&&d.strokeWidth;if(y||g){if(e.save(),e.font=this._getFontDeclaration(d),f.textBackgroundColor&&this._removeShadow(e),f.deltaY&&(u+=f.deltaY),g){const v=this._setFillStyles(e,d);e.fillText(o,c-v.offsetX,u-v.offsetY)}if(y){const v=this._setStrokeStyles(e,d);e.strokeText(o,c-v.offsetX,u-v.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,n){const s=this.get2DCursorLocation(t,!0),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),c=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),u={fontSize:o*n.size,deltaY:c+o*n.baseline};this.setSelectionStyles(u,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),n=this.width-e,s=this.textAlign,o=this.direction,c=this.isEndOfWrapping(t);let u=0;return s===Ur||s===Nc&&!c||s===Lc&&!c||s===cd&&!c?0:(s===Tt&&(u=n/2),s===ye&&(u=n),s===Nc&&(u=n/2),s===Lc&&(u=n),o==="rtl"&&(s===ye||s===Ur||s===Lc?u=0:s===Ht||s===cd?u=-n:s!==Tt&&s!==Nc||(u=-n/2)),u)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,n){var s;return(s=this._getStyleDeclaration(t,e)[n])!==null&&s!==void 0?s:this[n]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let n=this._getTopOffset();const s=this._getLeftOffset(),o=this.path,c=this._getWidthOfCharSpacing(),u=e==="linethrough"?.5:e==="overline"?1:0,f=this.offsets[e];for(let d=0,g=this._textLines.length;d<g;d++){const y=this.getHeightOfLine(d);if(!this[e]&&!this.styleHas(e,d)){n+=y;continue}const v=this._textLines[d],b=y/this.lineHeight,S=this._getLineLeftOffset(d);let w=0,_=0,O=this.getValueOfPropertyAt(d,0,e),k=this.getValueOfPropertyAt(d,0,ke),B=this.getValueOfPropertyAt(d,0,Aa),R=O,F=k,z=B;const U=n+b*(1-this._fontSizeFraction);let q=this.getHeightOfChar(d,0),rt=this.getValueOfPropertyAt(d,0,"deltaY");for(let E=0,X=v.length;E<X;E++){const T=this.__charBounds[d][E];R=this.getValueOfPropertyAt(d,E,e),F=this.getValueOfPropertyAt(d,E,ke),z=this.getValueOfPropertyAt(d,E,Aa);const j=this.getHeightOfChar(d,E),A=this.getValueOfPropertyAt(d,E,"deltaY");if(o&&R&&F){const P=this.fontSize*z/1e3;t.save(),t.fillStyle=k,t.translate(T.renderLeft,T.renderTop),t.rotate(T.angle),t.fillRect(-T.kernedWidth/2,f*j+A-u*P,T.kernedWidth,P),t.restore()}else if((R!==O||F!==k||j!==q||z!==B||A!==rt)&&_>0){const P=this.fontSize*B/1e3;let I=s+S+w;this.direction==="rtl"&&(I=this.width-I-_),O&&k&&B&&(t.fillStyle=k,t.fillRect(I,U+f*q+rt-u*P,_,P)),w=T.left,_=T.width,O=R,B=z,k=F,q=j,rt=A}else _+=T.kernedWidth}let lt=s+S+w;this.direction==="rtl"&&(lt=this.width-lt-_),t.fillStyle=F;const ct=this.fontSize*z/1e3;R&&F&&z&&t.fillRect(lt,U+f*q+rt-u*ct,_-c,ct),n+=y}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;const c=t.includes("'")||t.includes('"')||t.includes(",")||nn.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,n,"".concat(o?this.CACHE_FONT_SIZE:s,"px"),c].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return nv(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),n=new Array(e.length),s=[`
`];let o=[];for(let c=0;c<e.length;c++)n[c]=this.graphemeSplit(e[c]),o=o.concat(n[c],s);return o.pop(),{_unwrappedLines:n,lines:e,graphemeText:o,graphemeLines:n}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V(V({},super.toObject([...d2,...t])),{},{styles:$3(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:n}=this.constructor;super.set(t,e);let s=!1,o=!1;if(typeof t=="object")for(const c in t)c==="path"&&this.setPathInfo(),s=s||n.includes(c),o=o||c==="path";else s=n.includes(t),o=t==="path";return o&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,n){const s=qi(t,nn.ATTRIBUTE_NAMES,n),o=V(V({},e),s),{textAnchor:c=Ht,textDecoration:u="",dx:f=0,dy:d=0,top:g=0,left:y=0,fontSize:v=Vy,strokeWidth:b=1}=o,S=se(o,iL),w=new this((t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),V({left:y+f,top:g+d,underline:u.includes("underline"),overline:u.includes("overline"),linethrough:u.includes("line-through"),strokeWidth:0,fontSize:v},S)),_=w.getScaledHeight()/w.height,O=((w.height+w.strokeWidth)*w.lineHeight-w.height)*_,k=w.getScaledHeight()+O;let B=0;return c===Tt&&(B=w.getScaledWidth()/2),c===ye&&(B=w.getScaledWidth()),w.set({left:w.left-B,top:w.top-(k-w.fontSize*(.07+w._fontSizeFraction))/w.lineHeight,strokeWidth:b}),w}static fromObject(t){return this._fromObject(V(V({},t),{},{styles:W3(t.styles||{},t.text)}),{extraParam:"text"})}}Y(nn,"textLayoutProperties",f2),Y(nn,"cacheProperties",[...Wi,...d2]),Y(nn,"ownDefaults",a3),Y(nn,"type","Text"),Y(nn,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Y(nn,"ATTRIBUTE_NAMES",Us.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),w2(nn,[class extends c2{_toSVG(){const r=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(r){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0}),e=this.path;return e?t+e._createBaseSVGMarkup(e._toSVG(),{reviver:r,withShadow:!0,additionalTransform:Kc(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(r){let{textBgRects:t,textSpans:e}=r;const n=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(rL,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(r,t){const e=[],n=[];let s,o=r;this.backgroundColor&&n.push(...Jm(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,u=this._textLines.length;c<u;c++)s=this._getLineLeftOffset(c),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(n,c,t+s,o),this._setSVGTextLineText(e,c,t+s,o),o+=this.getHeightOfLine(c);return{textSpans:e,textBgRects:n}}_createTextCharSpan(r,t,e,n,s){const o=Nt.NUM_FRACTION_DIGITS,c=this.getSvgSpanStyles(t,r!==r.trim()||!!r.match(nL)),u=c?'style="'.concat(c,'"'):"",f=t.deltaY,d=f?' dy="'.concat(Jt(f,o),'" '):"",{angle:g,renderLeft:y,renderTop:v,width:b}=s;let S="";if(y!==void 0){const w=b/2;g&&(S=' rotate="'.concat(Jt(Hi(g),o),'"'));const _=Sl({angle:Hi(g)});_[4]=y,_[5]=v;const O=new Z(-w,0).transform(_);e=O.x,n=O.y}return'<tspan x="'.concat(Jt(e,o),'" y="').concat(Jt(n,o),'" ').concat(d).concat(S).concat(u,">").concat(X3(r),"</tspan>")}_setSVGTextLineText(r,t,e,n){const s=this.getHeightOfLine(t),o=this.textAlign.includes(Ur),c=this._textLines[t];let u,f,d,g,y,v="",b=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let S=0,w=c.length-1;S<=w;S++)y=S===w||this.charSpacing||this.path,v+=c[S],d=this.__charBounds[t][S],b===0?(e+=d.kernedWidth-d.width,b+=d.width):b+=d.kernedWidth,o&&!y&&this._reSpaceAndTab.test(c[S])&&(y=!0),y||(u=u||this.getCompleteStyleDeclaration(t,S),f=this.getCompleteStyleDeclaration(t,S+1),y=rv(u,f,!0)),y&&(g=this._getStyleDeclaration(t,S),r.push(this._createTextCharSpan(v,g,e,n,d)),v="",u=f,this.direction==="rtl"?e-=b:e+=b,b=0)}_setSVGTextLineBg(r,t,e,n){const s=this._textLines[t],o=this.getHeightOfLine(t)/this.lineHeight;let c,u=0,f=0,d=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let g=0;g<s.length;g++){const{left:y,width:v,kernedWidth:b}=this.__charBounds[t][g];c=this.getValueOfPropertyAt(t,g,"textBackgroundColor"),c!==d?(d&&r.push(...Jm(d,e+f,n,u,o)),f=y,u=v,d=c):u+=b}c&&r.push(...Jm(d,e+f,n,u,o))}_getSVGLineTopOffset(r){let t,e=0;for(t=0;t<r;t++)e+=this.getHeightOfLine(t);const n=this.getHeightOfLine(t);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(r){return"".concat(super.getSvgStyles(r)," text-decoration-thickness: ").concat(Jt(this.textDecorationThickness*this.getObjectScaling().y/10,Nt.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(r,t){const{fontFamily:e,strokeWidth:n,stroke:s,fill:o,fontSize:c,fontStyle:u,fontWeight:f,deltaY:d,textDecorationThickness:g,linethrough:y,overline:v,underline:b}=r,S=this.getSvgTextDecoration({underline:b??this.underline,overline:v??this.overline,linethrough:y??this.linethrough}),w=g||this.textDecorationThickness;return[s?Qc(vn,s):"",n?"stroke-width: ".concat(n,"; "):"",e?"font-family: ".concat(e.includes("'")||e.includes('"')?e:"'".concat(e,"'"),"; "):"",c?"font-size: ".concat(c,"px; "):"",u?"font-style: ".concat(u,"; "):"",f?"font-weight: ".concat(f,"; "):"",S?"text-decoration: ".concat(S,"; text-decoration-thickness: ").concat(Jt(w*this.getObjectScaling().y/10,Nt.NUM_FRACTION_DIGITS),"%; "):"",o?Qc(ke,o):"",d?"baseline-shift: ".concat(-d,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(r){return["overline","underline","line-through"].filter((t=>r[t.replace("-","")])).join(" ")}}]),ft.setClass(nn),ft.setSVGClass(nn);class sL{constructor(t){Y(this,"target",void 0),Y(this,"__mouseDownInPlace",!1),Y(this,"__dragStartFired",!1),Y(this,"__isDraggingOver",!1),Y(this,"__dragStartSelection",void 0),Y(this,"__dragImageDisposer",void 0),Y(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach((n=>n())),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,n=e.getSelectionStartFromPointer(t);return e.isEditing&&n>=e.selectionStart&&n<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var n;let{selectionStart:s,selectionEnd:o}=e;const c=this.target,u=c.canvas,f=new Z(c.flipX?-1:1,c.flipY?-1:1),d=c._getCursorBoundaries(s),g=new Z(d.left+d.leftOffset,d.top+d.topOffset).multiply(f).transform(c.calcTransformMatrix()),y=u.getScenePoint(t).subtract(g),v=c.getCanvasRetinaScaling(),b=c.getBoundingRect(),S=g.subtract(new Z(b.left,b.top)),w=u.viewportTransform,_=S.add(y).transform(w,!0),O=c.backgroundColor,k=ev(c.styles);c.backgroundColor="";const B={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};c.setSelectionStyles(B,0,s),c.setSelectionStyles(B,o,c.text.length),c.dirty=!0;const R=c.toCanvasElement({enableRetinaScaling:u.enableRetinaScaling,viewportTransform:!0});c.backgroundColor=O,c.styles=k,c.dirty=!0,U0(R,{position:"fixed",left:"".concat(-R.width,"px"),border:yn,width:"".concat(R.width/v,"px"),height:"".concat(R.height/v,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{R.remove()},vr(t.target||this.target.hiddenTextarea).body.appendChild(R),(n=t.dataTransfer)===null||n===void 0||n.setDragImage(R,_.x,_.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,n=this.isActive();if(n&&t.dataTransfer){const s=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},o=e._text.slice(s.selectionStart,s.selectionEnd).join(""),c=V({text:e.text,value:o},s);t.dataTransfer.setData("text/plain",o),t.dataTransfer.setData("application/fabric",JSON.stringify({value:o,styles:e.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,c)}return e.abortCursorAnimation(),n}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),n=this.__dragStartSelection;return e<n.selectionStart||e>n.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const n=this.targetCanDrop(e);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,n=this.targetCanDrop(e);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:n}=t,s=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let o=(e=n.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(o&&!s){const c=this.target,u=c.canvas;let f=c.getSelectionStartFromPointer(n);const{styles:d}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},g=o[Math.max(0,o.length-1)],y=0;if(this.__dragStartSelection){const v=this.__dragStartSelection.selectionStart,b=this.__dragStartSelection.selectionEnd;f>v&&f<=b?f=v:f>b&&(f-=b-v),c.removeChars(v,b),delete this.__dragStartSelection}c._reNewline.test(g)&&(c._reNewline.test(c._text[f])||f===c._text.length)&&(o=o.trimEnd()),t.didDrop=!0,t.dropTarget=c,c.insertChars(o,d,f),u.setActiveObject(c),c.enterEditing(n),c.selectionStart=Math.min(f+y,c._text.length),c.selectionEnd=Math.min(c.selectionStart+o.length,c._text.length),c.hiddenTextarea.value=c.text,c._updateTextarea(),c.hiddenTextarea.focus(),c.fire(rd,{index:f+y,action:"drop"}),u.fire("text:changed",{target:c}),u.contextTopDirty=!0,u.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const s=this.target,o=this.target.canvas,{selectionStart:c,selectionEnd:u}=this.__dragStartSelection,f=((n=e.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||yn;f===yn?(s.selectionStart=c,s.selectionEnd=u,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),f==="move"&&(s.removeChars(c,u),s.selectionStart=s.selectionEnd=c,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(rd,{index:c,action:"dragend"}),o.fire("text:changed",{target:s}),o.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Zw=/[ \n\.,;!\?\-]/;class aL extends nn{constructor(){super(...arguments),Y(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:n,delay:s,onComplete:o}=t;return y2({startValue:this._currentCursorOpacity,endValue:e,duration:n,delay:s,onComplete:o,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:c=>{this._currentCursorOpacity=c,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach((e=>{e&&!e.isDone()&&(t=!0,e.abort())})),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some((t=>!t||t.isDone()))&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findWordBoundaryRight(t){let e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}findLineBoundaryLeft(t){let e=0,n=t-1;for(;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e}findLineBoundaryRight(t){let e=0,n=t;for(;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e}searchWordBoundary(t,e){const n=this._text;let s=t>0&&this._reSpace.test(n[t])&&(e===-1||!Xy.test(n[t-1]))?t-1:t,o=n[s];for(;s>0&&s<n.length&&!Zw.test(o);)s+=e,o=n[s];return e===-1&&Zw.test(o)&&s++,s}selectWord(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const n=this.searchWordBoundary(t,-1),s=Math.max(n,this.searchWordBoundary(t,1));this.selectionStart=n,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const n=this.findLineBoundaryLeft(t),s=this.findLineBoundaryRight(t);this.selectionStart=n,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;vr(e).activeElement!==e&&e.focus();const n=this.getSelectionStartFromPointer(t),s=this.selectionStart,o=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&s!==o||s!==n&&o!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===o||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,n){const s=n.slice(0,t),o=this.graphemeSplit(s).length;if(t===e)return{selectionStart:o,selectionEnd:o};const c=n.slice(t,e);return{selectionStart:o,selectionEnd:o+this.graphemeSplit(c).length}}fromGraphemeToStringSelection(t,e,n){const s=n.slice(0,t).join("").length;return t===e?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+n.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),s=n.lineIndex,o=n.charIndex,c=this.getValueOfPropertyAt(s,o,"fontSize")*this.lineHeight,u=e.leftOffset,f=this.getCanvasRetinaScaling(),d=this.canvas.upperCanvasEl,g=d.width/f,y=d.height/f,v=g-c,b=y-c,S=new Z(e.left+u,e.top+e.topOffset+c).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new Z(d.clientWidth/g,d.clientHeight/y));return S.x<0&&(S.x=0),S.x>v&&(S.x=v),S.y<0&&(S.y=0),S.y>b&&(S.y=b),S.x+=this.canvas._offset.left,S.y+=this.canvas._offset.top,{left:"".concat(S.x,"px"),top:"".concat(S.y,"px"),fontSize:"".concat(c,"px"),charHeight:c}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(id),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(t,!0),{lineIndex:o,charIndex:c}=this.get2DCursorLocation(e,!0);if(n!==o){if(this.styles[n])for(let u=s;u<this._unwrappedTextLines[n].length;u++)delete this.styles[n][u];if(this.styles[o])for(let u=c;u<this._unwrappedTextLines[o].length;u++){const f=this.styles[o][u];f&&(this.styles[n]||(this.styles[n]={}),this.styles[n][s+u-c]=f)}for(let u=n+1;u<=o;u++)delete this.styles[u];this.shiftLineStyles(o,n-o)}else if(this.styles[n]){const u=this.styles[n],f=c-s;for(let d=s;d<c;d++)delete u[d];for(const d in this.styles[n]){const g=parseInt(d,10);g>=c&&(u[g-f]=u[d],delete u[d])}}}shiftLineStyles(t,e){const n=Object.assign({},this.styles);for(const s in this.styles){const o=parseInt(s,10);o>t&&(this.styles[o+e]=n[o],n[o-e]||delete this.styles[o])}}insertNewlineStyleObject(t,e,n,s){const o={},c=this._unwrappedTextLines[t].length,u=c===e;let f=!1;n||(n=1),this.shiftLineStyles(t,n);const d=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const y in this.styles[t]){const v=parseInt(y,10);v>=e&&(f=!0,o[v-e]=this.styles[t][y],u&&e===0||delete this.styles[t][y])}let g=!1;for(f&&!u&&(this.styles[t+n]=o,g=!0),(g||c>e)&&n--;n>0;)s&&s[n-1]?this.styles[t+n]={0:V({},s[n-1])}:d?this.styles[t+n]={0:V({},d)}:delete this.styles[t+n],n--;this._forceClearCache=!0}insertCharStyleObject(t,e,n,s){this.styles||(this.styles={});const o=this.styles[t],c=o?V({},o):{};n||(n=1);for(const f in c){const d=parseInt(f,10);d>=e&&(o[d+n]=c[d],c[d-n]||delete o[d])}if(this._forceClearCache=!0,s){for(;n--;)Object.keys(s[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+n]=V({},s[n]));return}if(!o)return;const u=o[e?e-1:1];for(;u&&n--;)this.styles[t][e+n]=V({},u)}insertNewStyleBlock(t,e,n){const s=this.get2DCursorLocation(e,!0),o=[0];let c,u=0;for(let f=0;f<t.length;f++)t[f]===`
`?(u++,o[u]=0):o[u]++;for(o[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,o[0],n),n=n&&n.slice(o[0]+1)),u&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+o[0],u),c=1;c<u;c++)o[c]>0?this.insertCharStyleObject(s.lineIndex+c,0,o[c],n):n&&this.styles[s.lineIndex+c]&&n[0]&&(this.styles[s.lineIndex+c][0]=n[0]),n=n&&n.slice(o[c]+1);o[c]>0&&this.insertCharStyleObject(s.lineIndex+c,0,o[c],n)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;s>n&&this.removeStyleFromTo(n,s);const o=this.graphemeSplit(t);this.insertNewStyleBlock(o,n,e),this._text=[...this._text.slice(0,n),...o,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,n){n<=t?(e===t?this._selectionDirection=Ht:this._selectionDirection===ye&&(this._selectionDirection=Ht,this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?this._selectionDirection===ye?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection=ye:this._selectionDirection===Ht&&(this._selectionDirection=ye,this.selectionStart=e),this.selectionEnd=n)}}class oL extends aL{initHiddenTextarea(){const t=this.canvas&&vr(this.canvas.getElement())||yl(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map((c=>{let[u,f]=c;return e.setAttribute(u,f)}));const{top:n,left:s,fontSize:o}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(o,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map((c=>{let[u,f]=c;return e.addEventListener(u,this[f].bind(this))})),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste,{value:n,selectionStart:s,selectionEnd:o}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const c=()=>{this.updateFromTextArea(),this.fire(rd),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void c();const u=this._splitTextIntoLines(n).graphemeText,f=this._text.length,d=u.length,g=this.selectionStart,y=this.selectionEnd,v=g!==y;let b,S,w,_,O=d-f;const k=this.fromStringToGraphemeSelection(s,o,n),B=g>k.selectionStart;v?(S=this._text.slice(g,y),O+=y-g):d<f&&(S=B?this._text.slice(y+O,y):this._text.slice(g,g-O));const R=u.slice(k.selectionEnd-O,k.selectionEnd);if(S&&S.length&&(R.length&&(b=this.getSelectionStyles(g,g+1,!1),b=R.map((()=>b[0]))),v?(w=g,_=y):B?(w=y-S.length,_=y):(w=y,_=y+S.length),this.removeStyleFromTo(w,_)),R.length){const{copyPasteData:F}=Ir();e&&R.join("")===F.copiedText&&!Nt.disableStyleCopyPaste&&(b=F.copiedTextStyle),this.insertNewStyleBlock(R,g,b)}c()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:n,selectionEnd:s}=e;this.compositionStart=n,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=Ir();t.copiedText=this.getSelectedText(),Nt.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let n,s=this._getLineLeftOffset(t);return e>0&&(n=this.__charBounds[t][e-1],s+=n.left+n.width),s}getDownCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),s=this.get2DCursorLocation(n),o=s.lineIndex;if(o===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-n;const c=s.charIndex,u=this._getWidthBeforeCursor(o,c),f=this._getIndexOnLine(o+1,u);return this._textLines[o].slice(c).length+f+1+this.missingNewlineOffset(o)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const n=this._getSelectionForOffset(t,e),s=this.get2DCursorLocation(n),o=s.lineIndex;if(o===0||t.metaKey||t.keyCode===33)return-n;const c=s.charIndex,u=this._getWidthBeforeCursor(o,c),f=this._getIndexOnLine(o-1,u),d=this._textLines[o].slice(0,c),g=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+f-d.length+(1-g)}_getIndexOnLine(t,e){const n=this._textLines[t];let s,o,c=this._getLineLeftOffset(t),u=0;for(let f=0,d=n.length;f<d;f++)if(s=this.__charBounds[t][f].width,c+=s,c>e){o=!0;const g=c-s,y=c,v=Math.abs(g-e);u=Math.abs(y-e)<v?f:f-1;break}return o||(u=n.length-1),u}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const n=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===ye);if(e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const s=this.text.length;this.selectionStart=il(0,this.selectionStart,s),this.selectionEnd=il(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===Ht?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,n){let s;if(t.altKey)s=this["findWordBoundary".concat(n)](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=n==="Left"?-1:1,!0;s=this["findLineBoundary".concat(n)](this[e])}return s!==void 0&&this[e]!==s&&(this[e]=s,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=Ht,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===ye&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Ht,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const n="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===Ht&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=ye,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=ye,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const Jw=r=>!!r.button;class lL extends oL{constructor(){super(...arguments),Y(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new sL(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e,alreadySelected:n}=t;this.canvas&&this.editable&&!Jw(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),n&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=n||this.isEditing)))}mouseUpHandler(t){let{e,transform:n}=t;const s=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const o=this.canvas._activeObject;if(o&&o!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||Jw(e)||s||this.selected&&!this.getActiveControl()&&(this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),n=this.selectionStart,s=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,s,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(Sr(this.calcTransformMatrix())).add(new Z(-this._getLeftOffset(),-this._getTopOffset()));let n=0,s=0,o=0;for(let d=0;d<this._textLines.length&&n<=e.y;d++)n+=this.getHeightOfLine(d),o=d,d>0&&(s+=this._textLines[d-1].length+this.missingNewlineOffset(d-1));let c=Math.abs(this._getLineLeftOffset(o));const u=this._textLines[o].length,f=this.__charBounds[o];for(let d=0;d<u;d++){const g=c+f[d].kernedWidth;if(e.x<=g){Math.abs(e.x-g)<=Math.abs(e.x-c)&&s++;break}c=g,s++}return Math.min(this.flipX?u-s:s,this._text.length)}}const Qh="moveCursorUp",Zh="moveCursorDown",Jh="moveCursorLeft",tf="moveCursorRight",ef="exitEditing",t_=(r,t)=>{const e=t.getRetinaScaling();r.setTransform(e,0,0,e,0,0);const n=t.viewportTransform;r.transform(n[0],n[1],n[2],n[3],n[4],n[5])},cL=V({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:ef,27:ef,33:Qh,34:Zh,35:tf,36:Jh,37:Jh,38:Qh,39:tf,40:Zh},keysMapRtl:{9:ef,27:ef,33:Qh,34:Zh,35:Jh,36:tf,37:tf,38:Qh,39:Jh,40:Zh},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Di extends lL{static getDefaults(){return V(V({},super.getDefaults()),Di.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,V(V({},Di.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof $r&&this.canvas.textEditingManager.remove(this),e instanceof $r&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,n)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,n)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(t);return this.isEditing=e,n}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries(),n=this.findAncestorsWithClipPath(),s=n.length>0;let o,c=t;if(s){o=ar(t.canvas),c=o.getContext("2d"),t_(c,this.canvas);const u=this.calcTransformMatrix();c.transform(u[0],u[1],u[2],u[3],u[4],u[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(c,e):this.renderCursor(c,e),s)for(const u of n){const f=u.clipPath,d=ar(t.canvas),g=d.getContext("2d");if(t_(g,this.canvas),!f.absolutePositioned){const y=u.calcTransformMatrix();g.transform(y[0],y[1],y[2],y[3],y[4],y[5])}f.transform(g),f.drawObject(g,!0,{}),this.drawClipPathOnCache(c,f,d)}s&&(t.setTransform(1,0,0,1,0,0),t.drawImage(o,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let e=this;for(;e;)e.clipPath&&t.push(e),e=e.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),s=this._getTopOffset(),o=this._getCursorBoundariesOffsets(t,e);return{left:n,top:s,leftOffset:o.left,topOffset:o.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,n=0;const{charIndex:s,lineIndex:o}=this.get2DCursorLocation(t);for(let d=0;d<o;d++)e+=this.getHeightOfLine(d);const c=this._getLineLeftOffset(o),u=this.__charBounds[o][s];u&&(n=u.left),this.charSpacing!==0&&s===this._textLines[o].length&&(n-=this._getWidthOfCharSpacing());const f={top:e,left:c+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===ye||this.textAlign===Ur||this.textAlign===Lc?f.left*=-1:this.textAlign===Ht||this.textAlign===cd?f.left=c-(n>0?n:0):this.textAlign!==Tt&&this.textAlign!==Nc||(f.left=c-(n>0?n:0))),f}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const n=this.get2DCursorLocation(t),s=n.lineIndex,o=n.charIndex>0?n.charIndex-1:0,c=this.getValueOfPropertyAt(s,o,"fontSize"),u=this.getObjectScaling().x*this.canvas.getZoom(),f=this.cursorWidth/u,d=this.getValueOfPropertyAt(s,o,"deltaY"),g=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-c*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,o,"fill"),opacity:this._currentCursorOpacity,left:e.left+e.leftOffset-f/2,top:g+e.top+d,width:f,height:c}}_renderCursor(t,e,n){const{color:s,opacity:o,left:c,top:u,width:f,height:d}=this.getCursorRenderingData(n,e);t.fillStyle=s,t.globalAlpha=o,t.fillRect(c,u,f,d)}renderSelection(t,e){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,n,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,n){const s=e.selectionStart,o=e.selectionEnd,c=this.textAlign.includes(Ur),u=this.get2DCursorLocation(s),f=this.get2DCursorLocation(o),d=u.lineIndex,g=f.lineIndex,y=u.charIndex<0?0:u.charIndex,v=f.charIndex<0?0:f.charIndex;for(let b=d;b<=g;b++){const S=this._getLineLeftOffset(b)||0;let w=this.getHeightOfLine(b),_=0,O=0,k=0;if(b===d&&(O=this.__charBounds[d][y].left),b>=d&&b<g)k=c&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(v===0)k=this.__charBounds[g][v].left;else{const U=this._getWidthOfCharSpacing();k=this.__charBounds[g][v-1].left+this.__charBounds[g][v-1].width-U}_=w,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(w/=this.lineHeight);let B=n.left+S+O,R=w,F=0;const z=k-O;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",R=1,F=w):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===ye||this.textAlign===Ur||this.textAlign===Lc?B=this.width-B-z:this.textAlign===Ht||this.textAlign===cd?B=n.left+S-k:this.textAlign!==Tt&&this.textAlign!==Nc||(B=n.left+S-k)),t.fillRect(B,n.top+n.topOffset+F,z,R),n.topOffset+=_}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,ke)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Y(Di,"ownDefaults",cL),Y(Di,"type","IText"),ft.setClass(Di),ft.setClass(Di,"i-text");class Es extends Di{static getDefaults(){return V(V({},super.getDefaults()),Es.ownDefaults)}constructor(t,e){super(t,V(V({},Es.ownDefaults),e))}static createControls(){return{controls:P3()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Ur)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,n=0,s=0;const o={};for(let c=0;c<t.graphemeLines.length;c++)t.graphemeText[s]===`
`&&c>0?(n=0,s++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[s])&&c>0&&(n++,s++),o[c]={line:e,offset:n},s+=t.graphemeLines[c].length,n+=t.graphemeLines[c].length;return o}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];n&&(e=n.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,n=0,s=t+1,o=!1;const c=this._styleMap[t],u=this._styleMap[t+1];c&&(t=c.line,n=c.offset),u&&(s=u.line,o=s===t,e=u.offset);const f=t===void 0?this.styles:{line:this.styles[t]};for(const d in f)for(const g in f[d]){const y=parseInt(g,10);if(y>=n&&(!o||y<e))for(const v in f[d][g])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];if(!n)return{};t=n.line,e=n.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,n){const s=this._styleMap[t];super._setStyleDeclaration(s.line,s.offset+e,n)}_deleteStyleDeclaration(t,e){const n=this._styleMap[t];super._deleteStyleDeclaration(n.line,n.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const n=this.getGraphemeDataForRender(t),s=[];for(let o=0;o<n.wordsData.length;o++)s.push(...this._wrapLine(o,e,n));return this.isWrapping=!1,s}getGraphemeDataForRender(t){const e=this.splitByGrapheme,n=e?"":" ";let s=0;return{wordsData:t.map(((o,c)=>{let u=0;const f=e?this.graphemeSplit(o):this.wordSplit(o);return f.length===0?[{word:[],width:0}]:f.map((d=>{const g=e?[d]:this.graphemeSplit(d),y=this._measureWord(g,c,u);return s=Math.max(y,s),u+=g.length+n.length,{word:g,width:y}}))})),largestWordWidth:s}}_measureWord(t,e){let n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=0;for(let c=0,u=t.length;c<u;c++)o+=this._getGraphemeBox(t[c],e,c+s,n,!0).kernedWidth,n=t[c];return o}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,n){let{largestWordWidth:s,wordsData:o}=n,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const u=this._getWidthOfCharSpacing(),f=this.splitByGrapheme,d=[],g=f?"":" ";let y=0,v=[],b=0,S=0,w=!0;e-=c;const _=Math.max(e,s,this.dynamicMinWidth),O=o[t];let k;for(b=0,k=0;k<O.length;k++){const{word:B,width:R}=O[k];b+=B.length,y+=S+R-u,y>_&&!w?(d.push(v),v=[],y=R,w=!0):y+=u,w||f||v.push(g),v=v.concat(B),S=f?0:this._measureWord([g],t,b),b++,w=!1}return k&&d.push(v),s+c>this.dynamicMinWidth&&(this.dynamicMinWidth=s-u+c),d}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),n=this._wrapText(e.lines,this.width),s=new Array(n.length);for(let o=0;o<n.length;o++)s[o]=n[o].join("");return e.lines=s,e.graphemeLines=n,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const n=parseInt(e,10);if(this._textLines[n]){const s=this._styleMap[e].line;t.set("".concat(s),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}Y(Es,"type","Textbox"),Y(Es,"textLayoutProperties",[...Di.textLayoutProperties,"width"]),Y(Es,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ft.setClass(Es);class e_ extends Pd{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:n}=t,{clipPath:s,group:o}=n;if(!s||!this.shouldPerformLayout(t))return;const{width:c,height:u}=ji(T2(n,s)),f=new Z(c,u);if(s.absolutePositioned)return{center:Wo(s.getRelativeCenterPoint(),void 0,o?o.calcTransformMatrix():void 0),size:f};{const d=s.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:g=new Z,correction:y=new Z}=this.calcBoundingBox(e,t)||{};return{center:g.add(d),correction:y.subtract(d),size:f}}return{center:n.getRelativeCenterPoint().add(d),size:f}}}}Y(e_,"type","clip-path"),ft.setClass(e_);class n_ extends Pd{getInitialSize(t,e){let{target:n}=t,{size:s}=e;return new Z(n.width||s.x,n.height||s.y)}}Y(n_,"type","fixed"),ft.setClass(n_);class uL extends Jc{subscribeTargets(t){const e=t.target;t.targets.reduce(((n,s)=>(s.parent&&n.add(s.parent),n)),new Set).forEach((n=>{n.layoutManager.subscribeTargets({target:n,targets:[e]})}))}unsubscribeTargets(t){const e=t.target,n=e.getObjects();t.targets.reduce(((s,o)=>(o.parent&&s.add(o.parent),s)),new Set).forEach((s=>{!n.some((o=>o.parent===s))&&s.layoutManager.unsubscribeTargets({target:s,targets:[e]})}))}}class ya extends xa{static getDefaults(){return V(V({},super.getDefaults()),ya.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ya.ownDefaults),this.setOptions(e);const{left:n,top:s,layoutManager:o}=e;this.groupInit(t,{left:n,top:s,layoutManager:o??new uL})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach((s=>{const o=this._objects.findIndex((u=>u.isInFrontOf(s))),c=o===-1?this.size():o;this.insertAt(c,s)}))}canEnterGroup(t){return this.getObjects().some((e=>e.isDescendantOf(t)||t.isDescendantOf(e)))?(Rs("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const n=new Set;e.forEach((s=>{const{parent:o}=s;o&&n.add(o)})),t===sv?n.forEach((s=>{s._onAfterObjectsChange(ud,e)})):n.forEach((s=>{s._set("dirty",!0)}))}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=V(V({hasControls:!1},n),{},{forActiveSelection:!0});for(let o=0;o<this._objects.length;o++)this._objects[o]._renderControls(t,s);super._renderControls(t,e),t.restore()}}Y(ya,"type","ActiveSelection"),Y(ya,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ft.setClass(ya),ft.setClass(ya,"activeSelection");class hL{constructor(){Y(this,"resources",{})}applyFilters(t,e,n,s,o){const c=o.getContext("2d");if(!c)return;c.drawImage(e,0,0,n,s);const u={sourceWidth:n,sourceHeight:s,imageData:c.getImageData(0,0,n,s),originalEl:e,originalImageData:c.getImageData(0,0,n,s),canvasEl:o,ctx:c,filterBackend:this};t.forEach((d=>{d.applyTo(u)}));const{imageData:f}=u;return f.width===n&&f.height===s||(o.width=f.width,o.height=f.height),c.putImageData(f,0,0),u}}class H2{constructor(){let{tileSize:t=Nt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Y(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Y(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const n=ar({width:t,height:e}),s=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)}applyFilters(t,e,n,s,o,c){const u=this.gl,f=o.getContext("2d");if(!u||!f)return;let d;c&&(d=this.getCachedTexture(c,e));const g={originalWidth:e.width||e.naturalWidth||0,originalHeight:e.height||e.naturalHeight||0,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:u,sourceTexture:this.createTexture(u,n,s,d?void 0:e),targetTexture:this.createTexture(u,n,s),originalTexture:d||this.createTexture(u,n,s,d?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:o},y=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,y),t.forEach((v=>{v&&v.applyTo(g)})),(function(v){const b=v.targetCanvas,S=b.width,w=b.height,_=v.destinationWidth,O=v.destinationHeight;S===_&&w===O||(b.width=_,b.height=O)})(g),this.copyGLTo2D(u,g),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(g.sourceTexture),u.deleteTexture(g.targetTexture),u.deleteFramebuffer(y),f.setTransform(1,0,0,1,0,0),g}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,n,s,o){const{NEAREST:c,TEXTURE_2D:u,RGBA:f,UNSIGNED_BYTE:d,CLAMP_TO_EDGE:g,TEXTURE_MAG_FILTER:y,TEXTURE_MIN_FILTER:v,TEXTURE_WRAP_S:b,TEXTURE_WRAP_T:S}=t,w=t.createTexture();return t.bindTexture(u,w),t.texParameteri(u,y,o||c),t.texParameteri(u,v,o||c),t.texParameteri(u,b,g),t.texParameteri(u,S,g),s?t.texImage2D(u,0,f,f,d,s):t.texImage2D(u,0,f,e,n,0,f,d,null),w}getCachedTexture(t,e,n){const{textureCache:s}=this;if(s[t])return s[t];{const o=this.createTexture(this.gl,e.width,e.height,e,n);return o&&(s[t]=o),o}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const n=t.canvas,s=e.targetCanvas,o=s.getContext("2d");if(!o)return;o.translate(0,s.height),o.scale(1,-1);const c=n.height-s.height;o.drawImage(n,0,c,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(t,e){const n=e.targetCanvas.getContext("2d"),s=e.destinationWidth,o=e.destinationHeight,c=s*o*4;if(!n)return;const u=new Uint8Array(this.imageBuffer,0,c),f=new Uint8ClampedArray(this.imageBuffer,0,c);t.readPixels(0,0,s,o,t.RGBA,t.UNSIGNED_BYTE,u);const d=new ImageData(f,s,o);n.putImageData(d,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const n=t.getExtension("WEBGL_debug_renderer_info");if(n){const s=t.getParameter(n.UNMASKED_RENDERER_WEBGL),o=t.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(e.renderer=s.toLowerCase()),o&&(e.vendor=o.toLowerCase())}return this.gpuInfo=e,e}}let e0;function fL(){const{WebGLProbe:r}=Ir();return r.queryWebGL(Pi()),Nt.enableGLFiltering&&r.isSupported(Nt.textureSize)?new H2({tileSize:Nt.textureSize}):new hL}function n0(){return!e0&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(e0=fL()),e0}const dL=["filters","resizeFilter","src","crossOrigin","type"],Y2=["cropX","cropY"];class Rn extends Ze{static getDefaults(){return V(V({},super.getDefaults()),Rn.ownDefaults)}constructor(t,e){super(),Y(this,"_lastScaleX",1),Y(this,"_lastScaleY",1),Y(this,"_filterScalingX",1),Y(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Rn.ownDefaults),this.setOptions(e),this.cacheKey="texture".concat(Ls()),this.setElement(typeof t=="string"?(this.canvas&&vr(this.canvas.getElement())||yl()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){var e;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(n),(e=t.classList)===null||e===void 0||e.add(Rn.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=n0(!1);e instanceof H2&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((t=>{const e=this[t];e&&Ir().dispose(e),this[t]=void 0}))}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach((n=>{n&&e.push(n.toObject())})),V(V({},super.toObject([...Y2,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,n=-this.width/2,s=-this.height/2;let o=[],c=[],u="",f="";if(!e)return[];if(this.hasCrop()){const d=Ls();o.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(f=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(f).concat(u,`></image>
`)),this.stroke||this.strokeDashArray){const d=this.fill;this.fill=null,c=['	<rect x="'.concat(n,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=d}return o=this.paintFirst!==ke?o.concat(c,t):o.concat(t,c),o}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return zf(t,{crossOrigin:e,signal:n}).then((s=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(s)}))}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.x,o=n.y,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||s>e&&o>e)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=o);const u=ar(c),{width:f,height:d}=c;this._element=u,this._lastScaleX=t.scaleX=s,this._lastScaleY=t.scaleY=o,n0().applyFilters([t],c,f,d,this._element),this._filterScalingX=u.width/this._originalElement.width,this._filterScalingY=u.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter((o=>o&&!o.isNeutralState())),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,n=e.naturalWidth||e.width,s=e.naturalHeight||e.height;if(this._element===this._originalElement){const o=ar({width:n,height:s});this._element=o,this._filteredEl=o}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1);n0().applyFilters(t,this._originalElement,n,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const n=this._filterScalingX,s=this._filterScalingY,o=this.width,c=this.height,u=Math.max(this.cropX,0),f=Math.max(this.cropY,0),d=e.naturalWidth||e.width,g=e.naturalHeight||e.height,y=u*n,v=f*s,b=Math.min(o*n,d-y),S=Math.min(c*s,g-v),w=-o/2,_=-c/2,O=Math.min(o,d/n-u),k=Math.min(c,g/s-f);e&&t.drawImage(e,y,v,b,S,w,_,O,k)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=t||n.width,this.height=e||n.height}parsePreserveAspectRatioAttribute(){const t=i3(this.preserveAspectRatio||""),e=this.width,n=this.height,s={width:e,height:n};let o,c=this._element.width,u=this._element.height,f=1,d=1,g=0,y=0,v=0,b=0;return!t||t.alignX===yn&&t.alignY===yn?(f=e/c,d=n/u):(t.meetOrSlice==="meet"&&(f=d=S4(this._element,s),o=(e-c*f)/2,t.alignX==="Min"&&(g=-o),t.alignX==="Max"&&(g=o),o=(n-u*d)/2,t.alignY==="Min"&&(y=-o),t.alignY==="Max"&&(y=o)),t.meetOrSlice==="slice"&&(f=d=x4(this._element,s),o=c-e/f,t.alignX==="Mid"&&(v=o/2),t.alignX==="Max"&&(v=o),o=u-n/d,t.alignY==="Mid"&&(b=o/2),t.alignY==="Max"&&(b=o),c=e/f,u=n/d)),{width:c,height:u,scaleX:f,scaleY:d,offsetLeft:g,offsetTop:y,cropX:v,cropY:b}}static fromObject(t,e){let{filters:n,resizeFilter:s,src:o,crossOrigin:c,type:u}=t,f=se(t,dL);return Promise.all([zf(o,V(V({},e),{},{crossOrigin:c})),n&&qc(n,e),s&&qc([s],e),Bd(f,e)]).then((d=>{let[g,y=[],[v]=[],b={}]=d;return new this(g,V(V({},f),{},{src:o,filters:y,resizeFilter:v},b))}))}static fromURL(t){let{crossOrigin:e=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return zf(t,{crossOrigin:e,signal:n}).then((o=>new this(o,s)))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const s=qi(t,this.ATTRIBUTE_NAMES,n);return this.fromURL(s["xlink:href"]||s.href,e,s).catch((o=>(Rs("log","Unable to parse Image",o),null)))}}Y(Rn,"type","Image"),Y(Rn,"cacheProperties",[...Wi,...Y2]),Y(Rn,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Y(Rn,"CSS_CANVAS","canvas-img"),Y(Rn,"ATTRIBUTE_NAMES",[...Us,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),ft.setClass(Rn),ft.setSVGClass(Rn);Ud(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Yd=r=>r.webgl!==void 0,av="precision highp float",gL=`
    `.concat(av,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),pL=["type"],mL=["type"],yL=new RegExp(av,"g");class je{get type(){return this.constructor.type}constructor(){let t=se(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pL);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return gL}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Ir();s!=="highp"&&(e=e.replace(yL,av.replace("highp",s)));const o=t.createShader(t.VERTEX_SHADER),c=t.createShader(t.FRAGMENT_SHADER),u=t.createProgram();if(!o||!c||!u)throw new Fr("Vertex, fragment shader or program creation error");if(t.shaderSource(o,n),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Fr("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.shaderSource(c,e),t.compileShader(c),!t.getShaderParameter(c,t.COMPILE_STATUS))throw new Fr("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(c)));if(t.attachShader(u,o),t.attachShader(u,c),t.linkProgram(u),!t.getProgramParameter(u,t.LINK_STATUS))throw new Fr('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(u)));const f=this.getUniformLocations(t,u)||{};return f.uStepW=t.getUniformLocation(u,"uStepW"),f.uStepH=t.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:this.getAttributeLocations(t,u),uniformLocations:f}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const n=this.constructor.uniformLocations,s={};for(let o=0;o<n.length;o++)s[n[o]]=t.getUniformLocation(e,n[o]);return s}sendAttributeData(t,e,n){const s=e.aPosition,o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const n=t.destinationWidth,s=t.destinationHeight;t.sourceWidth===n&&t.sourceHeight===s||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,n,s)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){Yd(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,n=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:e,sourceHeight:n}=t,s=ar({width:e,height:n});t.helpLayer=s}}toObject(){const t=Object.keys(this.constructor.defaults||{});return V({type:this.type},t.reduce(((e,n)=>(e[n]=this[n],e)),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(se(t,mL))}}Y(je,"type","BaseFilter"),Y(je,"uniformLocations",[]);const vL={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class nf extends je{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(vL[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const n=new It(this.color).getSource(),s=this.alpha,o=n[0]*s,c=n[1]*s,u=n[2]*s,f=1-s;for(let d=0;d<e.length;d+=4){const g=e[d],y=e[d+1],v=e[d+2];let b,S,w;switch(this.mode){case"multiply":b=g*o/255,S=y*c/255,w=v*u/255;break;case"screen":b=255-(255-g)*(255-o)/255,S=255-(255-y)*(255-c)/255,w=255-(255-v)*(255-u)/255;break;case"add":b=g+o,S=y+c,w=v+u;break;case"difference":b=Math.abs(g-o),S=Math.abs(y-c),w=Math.abs(v-u);break;case"subtract":b=g-o,S=y-c,w=v-u;break;case"darken":b=Math.min(g,o),S=Math.min(y,c),w=Math.min(v,u);break;case"lighten":b=Math.max(g,o),S=Math.max(y,c),w=Math.max(v,u);break;case"overlay":b=o<128?2*g*o/255:255-2*(255-g)*(255-o)/255,S=c<128?2*y*c/255:255-2*(255-y)*(255-c)/255,w=u<128?2*v*u/255:255-2*(255-v)*(255-u)/255;break;case"exclusion":b=o+g-2*o*g/255,S=c+y-2*c*y/255,w=u+v-2*u*v/255;break;case"tint":b=o+g*f,S=c+y*f,w=u+v*f}e[d]=b,e[d+1]=S,e[d+2]=w}}sendUniformData(t,e){const n=new It(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(e.uColor,n)}}Y(nf,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Y(nf,"type","BlendColor"),Y(nf,"uniformLocations",["uColor"]),ft.setClass(nf);const bL={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},SL=["type","image"];class rf extends je{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return bL[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:n}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]}applyTo2d(t){let{imageData:{data:e,width:n,height:s},filterBackend:{resources:o}}=t;const c=this.image;o.blendImage||(o.blendImage=Pi());const u=o.blendImage,f=u.getContext("2d");u.width!==n||u.height!==s?(u.width=n,u.height=s):f.clearRect(0,0,n,s),f.setTransform(c.scaleX,0,0,c.scaleY,c.left,c.top),f.drawImage(c.getElement(),0,0,n,s);const d=f.getImageData(0,0,n,s).data;for(let g=0;g<e.length;g+=4){const y=e[g],v=e[g+1],b=e[g+2],S=e[g+3],w=d[g],_=d[g+1],O=d[g+2],k=d[g+3];switch(this.mode){case"multiply":e[g]=y*w/255,e[g+1]=v*_/255,e[g+2]=b*O/255,e[g+3]=S*k/255;break;case"mask":e[g+3]=k}}}sendUniformData(t,e){const n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)}toObject(){return V(V({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:n,image:s}=t,o=se(t,SL);return Rn.fromObject(s,e).then((c=>new this(V(V({},o),{},{image:c}))))}}Y(rf,"type","BlendImage"),Y(rf,"defaults",{mode:"multiply",alpha:1}),Y(rf,"uniformLocations",["uTransformMatrix","uImage"]),ft.setClass(rf);class sf extends je{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(t){Yd(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){let{imageData:{data:e,width:n,height:s}}=t;this.aspectRatio=n/s,this.horizontal=!0;let o=this.getBlurValue()*n;const c=new Uint8ClampedArray(e),u=15,f=4*n;for(let d=0;d<e.length;d+=4){let g=0,y=0,v=0,b=0,S=0;const w=d-d%f,_=w+f;for(let O=-14;O<u;O++){const k=O/u,B=4*Math.floor(o*k),R=1-Math.abs(k);let F=d+B;F<w?F=w:F>_&&(F=_);const z=e[F+3]*R;g+=e[F]*z,y+=e[F+1]*z,v+=e[F+2]*z,b+=z,S+=R}c[d]=g/b,c[d+1]=y/b,c[d+2]=v/b,c[d+3]=b/S}this.horizontal=!1,o=this.getBlurValue()*s;for(let d=0;d<c.length;d+=4){let g=0,y=0,v=0,b=0,S=0;const w=d%f,_=c.length-f+w;for(let O=-14;O<u;O++){const k=O/u,B=Math.floor(o*k)*f,R=1-Math.abs(k);let F=d+B;F<w?F=w:F>_&&(F=_);const z=c[F+3]*R;g+=c[F]*z,y+=c[F+1]*z,v+=c[F+2]*z,b+=z,S+=R}e[d]=g/b,e[d+1]=y/b,e[d+2]=v/b,e[d+3]=b/S}}sendUniformData(t,e){const n=this.chooseRightDelta();t.uniform2fv(e.uDelta,n)}isNeutralState(){return this.blur===0}getBlurValue(){let t=1;const{horizontal:e,aspectRatio:n}=this;return e?n>1&&(t=1/n):n<1&&(t=n),t*this.blur*.12}chooseRightDelta(){const t=this.getBlurValue();return this.horizontal?[t,0]:[0,t]}}Y(sf,"type","Blur"),Y(sf,"defaults",{blur:0}),Y(sf,"uniformLocations",["uDelta"]),ft.setClass(sf);class af extends je{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=Math.round(255*this.brightness);for(let s=0;s<e.length;s+=4)e[s]+=n,e[s+1]+=n,e[s+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}Y(af,"type","Brightness"),Y(af,"defaults",{brightness:0}),Y(af,"uniformLocations",["uBrightness"]),ft.setClass(af);const V2={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Xo extends je{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,n=this.matrix,s=this.colorsOnly;for(let o=0;o<e.length;o+=4){const c=e[o],u=e[o+1],f=e[o+2];if(e[o]=c*n[0]+u*n[1]+f*n[2]+255*n[4],e[o+1]=c*n[5]+u*n[6]+f*n[7]+255*n[9],e[o+2]=c*n[10]+u*n[11]+f*n[12]+255*n[14],!s){const d=e[o+3];e[o]+=d*n[3],e[o+1]+=d*n[8],e[o+2]+=d*n[13],e[o+3]=c*n[15]+u*n[16]+f*n[17]+d*n[18]+255*n[19]}}}sendUniformData(t,e){const n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],o=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,s),t.uniform4fv(e.uConstants,o)}toObject(){return V(V({},super.toObject()),{},{matrix:[...this.matrix]})}}function Ba(r,t){var e;const n=(Y(e=class extends Xo{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",r),Y(e,"defaults",{colorsOnly:!1,matrix:t}),e);return ft.setClass(n,r),n}Y(Xo,"type","ColorMatrix"),Y(Xo,"defaults",V2),Y(Xo,"uniformLocations",["uColorMatrix","uConstants"]),ft.setClass(Xo);Ba("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Ba("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Ba("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Ba("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Ba("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Ba("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Ba("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class r_ extends je{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){Yd(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach((e=>{e.applyTo(t)}))}toObject(){return{type:this.type,subFilters:this.subFilters.map((t=>t.toObject()))}}isNeutralState(){return!this.subFilters.some((t=>!t.isNeutralState()))}static fromObject(t,e){return Promise.all((t.subFilters||[]).map((n=>ft.getClass(n.type).fromObject(n,e)))).then((n=>new this({subFilters:n})))}}Y(r_,"type","Composed"),ft.setClass(r_);class of extends je{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(let o=0;o<e.length;o+=4)e[o]=s*(e[o]-128)+128,e[o+1]=s*(e[o+1]-128)+128,e[o+2]=s*(e[o+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}Y(of,"type","Contrast"),Y(of,"defaults",{contrast:0}),Y(of,"uniformLocations",["uContrast"]),ft.setClass(of);const xL={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class lf extends je{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return xL[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,n=e.data,s=this.matrix,o=Math.round(Math.sqrt(s.length)),c=Math.floor(o/2),u=e.width,f=e.height,d=t.ctx.createImageData(u,f),g=d.data,y=this.opaque?1:0;let v,b,S,w,_,O,k,B,R,F,z,U,q;for(z=0;z<f;z++)for(F=0;F<u;F++){for(_=4*(z*u+F),v=0,b=0,S=0,w=0,q=0;q<o;q++)for(U=0;U<o;U++)k=z+q-c,O=F+U-c,k<0||k>=f||O<0||O>=u||(B=4*(k*u+O),R=s[q*o+U],v+=n[B]*R,b+=n[B+1]*R,S+=n[B+2]*R,y||(w+=n[B+3]*R));g[_]=v,g[_+1]=b,g[_+2]=S,g[_+3]=y?n[_+3]:w}t.imageData=d}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return V(V({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Y(lf,"type","Convolute"),Y(lf,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Y(lf,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ft.setClass(lf);const X2="Gamma";class cf extends je{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.gamma,s=1/n[0],o=1/n[1],c=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const u=this.rgbValues;for(let f=0;f<256;f++)u.r[f]=255*Math.pow(f/255,s),u.g[f]=255*Math.pow(f/255,o),u.b[f]=255*Math.pow(f/255,c);for(let f=0;f<e.length;f+=4)e[f]=u.r[e[f]],e[f+1]=u.g[e[f+1]],e[f+2]=u.b[e[f+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:X2,gamma:this.gamma.concat()}}}Y(cf,"type",X2),Y(cf,"defaults",{gamma:[1,1,1]}),Y(cf,"uniformLocations",["uGamma"]),ft.setClass(cf);const wL={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class uf extends je{applyTo2d(t){let{imageData:{data:e}}=t;for(let n,s=0;s<e.length;s+=4){const o=e[s],c=e[s+1],u=e[s+2];switch(this.mode){case"average":n=(o+c+u)/3;break;case"lightness":n=(Math.min(o,c,u)+Math.max(o,c,u))/2;break;case"luminosity":n=.21*o+.72*c+.07*u}e[s+2]=e[s+1]=e[s]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return wL[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}Y(uf,"type","Grayscale"),Y(uf,"defaults",{mode:"average"}),Y(uf,"uniformLocations",["uMode"]),ft.setClass(uf);const _L=V(V({},V2),{},{rotation:0});class r0 extends Xo{calculateMatrix(){const t=this.rotation*Math.PI,e=Ui(t),n=Fi(t),s=1/3,o=Math.sqrt(s)*n,c=1-e;this.matrix=[e+c/3,s*c-o,s*c+o,0,0,s*c+o,e+s*c,s*c-o,0,0,s*c-o,s*c+o,e+s*c,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}Y(r0,"type","HueRotation"),Y(r0,"defaults",_L),ft.setClass(r0);class hf extends je{applyTo2d(t){let{imageData:{data:e}}=t;for(let n=0;n<e.length;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2],this.alpha&&(e[n+3]=255-e[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}Y(hf,"type","Invert"),Y(hf,"defaults",{alpha:!1,invert:!0}),Y(hf,"uniformLocations",["uInvert","uAlpha"]),ft.setClass(hf);class ff extends je{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=this.noise;for(let s=0;s<e.length;s+=4){const o=(.5-Math.random())*n;e[s]+=o,e[s+1]+=o,e[s+2]+=o}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}Y(ff,"type","Noise"),Y(ff,"defaults",{noise:0}),Y(ff,"uniformLocations",["uNoise","uSeed"]),ft.setClass(ff);class df extends je{applyTo2d(t){let{imageData:{data:e,width:n,height:s}}=t;for(let o=0;o<s;o+=this.blocksize)for(let c=0;c<n;c+=this.blocksize){const u=4*o*n+4*c,f=e[u],d=e[u+1],g=e[u+2],y=e[u+3];for(let v=o;v<Math.min(o+this.blocksize,s);v++)for(let b=c;b<Math.min(c+this.blocksize,n);b++){const S=4*v*n+4*b;e[S]=f,e[S+1]=d,e[S+2]=g,e[S+3]=y}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}Y(df,"type","Pixelate"),Y(df,"defaults",{blocksize:4}),Y(df,"uniformLocations",["uBlocksize"]),ft.setClass(df);class gf extends je{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=255*this.distance,s=new It(this.color).getSource(),o=[s[0]-n,s[1]-n,s[2]-n],c=[s[0]+n,s[1]+n,s[2]+n];for(let u=0;u<e.length;u+=4){const f=e[u],d=e[u+1],g=e[u+2];f>o[0]&&d>o[1]&&g>o[2]&&f<c[0]&&d<c[1]&&g<c[2]&&(e[u+3]=0)}}sendUniformData(t,e){const n=new It(this.color).getSource(),s=this.distance,o=[0+n[0]/255-s,0+n[1]/255-s,0+n[2]/255-s,1],c=[n[0]/255+s,n[1]/255+s,n[2]/255+s,1];t.uniform4fv(e.uLow,o),t.uniform4fv(e.uHigh,c)}}Y(gf,"type","RemoveColor"),Y(gf,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Y(gf,"uniformLocations",["uLow","uHigh"]),ft.setClass(gf);class pf extends je{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),s=new Array(n);for(let o=1;o<=n;o++)s[o-1]=t(o*e);return s}generateShader(t){const e=new Array(t);for(let n=1;n<=t;n++)e[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map(((n,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `))).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){Yd(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const n=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(n)/n}}applyTo2d(t){const e=t.imageData,n=this.scaleX,s=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/s;const o=e.width,c=e.height,u=Math.round(o*n),f=Math.round(c*s);let d;d=this.resizeType==="sliceHack"?this.sliceByTwo(t,o,c,u,f):this.resizeType==="hermite"?this.hermiteFastResize(t,o,c,u,f):this.resizeType==="bilinear"?this.bilinearFiltering(t,o,c,u,f):this.resizeType==="lanczos"?this.lanczosResize(t,o,c,u,f):new ImageData(u,f),t.imageData=d}sliceByTwo(t,e,n,s,o){const c=t.imageData,u=.5;let f=!1,d=!1,g=e*u,y=n*u;const v=t.filterBackend.resources;let b=0,S=0;const w=e;let _=0;v.sliceByTwo||(v.sliceByTwo=Pi());const O=v.sliceByTwo;(O.width<1.5*e||O.height<n)&&(O.width=1.5*e,O.height=n);const k=O.getContext("2d");for(k.clearRect(0,0,1.5*e,n),k.putImageData(c,0,0),s=Math.floor(s),o=Math.floor(o);!f||!d;)e=g,n=y,s<Math.floor(g*u)?g=Math.floor(g*u):(g=s,f=!0),o<Math.floor(y*u)?y=Math.floor(y*u):(y=o,d=!0),k.drawImage(O,b,S,e,n,w,_,g,y),b=w,S=_,_+=y;return k.getImageData(b,S,s,o)}lanczosResize(t,e,n,s,o){const c=t.imageData.data,u=t.ctx.createImageData(s,o),f=u.data,d=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,y=this.rcpScaleY,v=2/this.rcpScaleX,b=2/this.rcpScaleY,S=Math.ceil(g*this.lanczosLobes/2),w=Math.ceil(y*this.lanczosLobes/2),_={},O={x:0,y:0},k={x:0,y:0};return(function B(R){let F,z,U,q,rt,lt,ct,E,X,T,j;for(O.x=(R+.5)*g,k.x=Math.floor(O.x),F=0;F<o;F++){for(O.y=(F+.5)*y,k.y=Math.floor(O.y),rt=0,lt=0,ct=0,E=0,X=0,z=k.x-S;z<=k.x+S;z++)if(!(z<0||z>=e)){T=Math.floor(1e3*Math.abs(z-O.x)),_[T]||(_[T]={});for(let A=k.y-w;A<=k.y+w;A++)A<0||A>=n||(j=Math.floor(1e3*Math.abs(A-O.y)),_[T][j]||(_[T][j]=d(Math.sqrt(Math.pow(T*v,2)+Math.pow(j*b,2))/1e3)),U=_[T][j],U>0&&(q=4*(A*e+z),rt+=U,lt+=U*c[q],ct+=U*c[q+1],E+=U*c[q+2],X+=U*c[q+3]))}q=4*(F*s+R),f[q]=lt/rt,f[q+1]=ct/rt,f[q+2]=E/rt,f[q+3]=X/rt}return++R<s?B(R):u})(0)}bilinearFiltering(t,e,n,s,o){let c,u,f,d,g,y,v,b,S,w,_,O,k,B=0;const R=this.rcpScaleX,F=this.rcpScaleY,z=4*(e-1),U=t.imageData.data,q=t.ctx.createImageData(s,o),rt=q.data;for(v=0;v<o;v++)for(b=0;b<s;b++)for(g=Math.floor(R*b),y=Math.floor(F*v),S=R*b-g,w=F*v-y,k=4*(y*e+g),_=0;_<4;_++)c=U[k+_],u=U[k+4+_],f=U[k+z+_],d=U[k+z+4+_],O=c*(1-S)*(1-w)+u*S*(1-w)+f*w*(1-S)+d*S*w,rt[B++]=O;return q}hermiteFastResize(t,e,n,s,o){const c=this.rcpScaleX,u=this.rcpScaleY,f=Math.ceil(c/2),d=Math.ceil(u/2),g=t.imageData.data,y=t.ctx.createImageData(s,o),v=y.data;for(let b=0;b<o;b++)for(let S=0;S<s;S++){const w=4*(S+b*s);let _=0,O=0,k=0,B=0,R=0,F=0,z=0;const U=(b+.5)*u;for(let q=Math.floor(b*u);q<(b+1)*u;q++){const rt=Math.abs(U-(q+.5))/d,lt=(S+.5)*c,ct=rt*rt;for(let E=Math.floor(S*c);E<(S+1)*c;E++){let X=Math.abs(lt-(E+.5))/f;const T=Math.sqrt(ct+X*X);T>1&&T<-1||(_=2*T*T*T-3*T*T+1,_>0&&(X=4*(E+q*e),z+=_*g[X+3],k+=_,g[X+3]<255&&(_=_*g[X+3]/250),B+=_*g[X],R+=_*g[X+1],F+=_*g[X+2],O+=_))}}v[w]=B/O,v[w+1]=R/O,v[w+2]=F/O,v[w+3]=z/k}return y}}Y(pf,"type","Resize"),Y(pf,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Y(pf,"uniformLocations",["uDelta","uTaps"]),ft.setClass(pf);class mf extends je{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=-this.saturation;for(let s=0;s<e.length;s+=4){const o=e[s],c=e[s+1],u=e[s+2],f=Math.max(o,c,u);e[s]+=f!==o?(f-o)*n:0,e[s+1]+=f!==c?(f-c)*n:0,e[s+2]+=f!==u?(f-u)*n:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}Y(mf,"type","Saturation"),Y(mf,"defaults",{saturation:0}),Y(mf,"uniformLocations",["uSaturation"]),ft.setClass(mf);class yf extends je{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const n=-this.vibrance;for(let s=0;s<e.length;s+=4){const o=e[s],c=e[s+1],u=e[s+2],f=Math.max(o,c,u),d=(o+c+u)/3,g=2*Math.abs(f-d)/255*n;e[s]+=f!==o?(f-o)*g:0,e[s+1]+=f!==c?(f-c)*g:0,e[s+2]+=f!==u?(f-u)*g:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}Y(yf,"type","Vibrance"),Y(yf,"defaults",{vibrance:0}),Y(yf,"uniformLocations",["uVibrance"]),ft.setClass(yf);function Ve(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var CL=typeof Symbol=="function"&&Symbol.observable||"@@observable",i_=CL,i0=()=>Math.random().toString(36).substring(7).split("").join("."),TL={INIT:`@@redux/INIT${i0()}`,REPLACE:`@@redux/REPLACE${i0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${i0()}`},dd=TL;function ov(r){if(typeof r!="object"||r===null)return!1;let t=r;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t||Object.getPrototypeOf(r)===null}function G2(r,t,e){if(typeof r!="function")throw new Error(Ve(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Ve(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(Ve(1));return e(G2)(r,t)}let n=r,s=t,o=new Map,c=o,u=0,f=!1;function d(){c===o&&(c=new Map,o.forEach((_,O)=>{c.set(O,_)}))}function g(){if(f)throw new Error(Ve(3));return s}function y(_){if(typeof _!="function")throw new Error(Ve(4));if(f)throw new Error(Ve(5));let O=!0;d();const k=u++;return c.set(k,_),function(){if(O){if(f)throw new Error(Ve(6));O=!1,d(),c.delete(k),o=null}}}function v(_){if(!ov(_))throw new Error(Ve(7));if(typeof _.type>"u")throw new Error(Ve(8));if(typeof _.type!="string")throw new Error(Ve(17));if(f)throw new Error(Ve(9));try{f=!0,s=n(s,_)}finally{f=!1}return(o=c).forEach(k=>{k()}),_}function b(_){if(typeof _!="function")throw new Error(Ve(10));n=_,v({type:dd.REPLACE})}function S(){const _=y;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(Ve(11));function k(){const R=O;R.next&&R.next(g())}return k(),{unsubscribe:_(k)}},[i_](){return this}}}return v({type:dd.INIT}),{dispatch:v,subscribe:y,getState:g,replaceReducer:b,[i_]:S}}function EL(r){Object.keys(r).forEach(t=>{const e=r[t];if(typeof e(void 0,{type:dd.INIT})>"u")throw new Error(Ve(12));if(typeof e(void 0,{type:dd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ve(13))})}function OL(r){const t=Object.keys(r),e={};for(let o=0;o<t.length;o++){const c=t[o];typeof r[c]=="function"&&(e[c]=r[c])}const n=Object.keys(e);let s;try{EL(e)}catch(o){s=o}return function(c={},u){if(s)throw s;let f=!1;const d={};for(let g=0;g<n.length;g++){const y=n[g],v=e[y],b=c[y],S=v(b,u);if(typeof S>"u")throw u&&u.type,new Error(Ve(14));d[y]=S,f=f||S!==b}return f=f||n.length!==Object.keys(c).length,f?d:c}}function gd(...r){return r.length===0?t=>t:r.length===1?r[0]:r.reduce((t,e)=>(...n)=>t(e(...n)))}function AL(...r){return t=>(e,n)=>{const s=t(e,n);let o=()=>{throw new Error(Ve(15))};const c={getState:s.getState,dispatch:(f,...d)=>o(f,...d)},u=r.map(f=>f(c));return o=gd(...u)(s.dispatch),{...s,dispatch:o}}}function DL(r){return ov(r)&&"type"in r&&typeof r.type=="string"}var I2=Symbol.for("immer-nothing"),s_=Symbol.for("immer-draftable"),Fn=Symbol.for("immer-state");function br(r,...t){throw new Error(`[Immer] minified error nr: ${r}. Full error at: https://bit.ly/3cXEKWf`)}var tu=Object.getPrototypeOf;function Da(r){return!!r&&!!r[Fn]}function Yi(r){return r?$2(r)||Array.isArray(r)||!!r[s_]||!!r.constructor?.[s_]||Cu(r)||Xd(r):!1}var kL=Object.prototype.constructor.toString(),a_=new WeakMap;function $2(r){if(!r||typeof r!="object")return!1;const t=Object.getPrototypeOf(r);if(t===null||t===Object.prototype)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(e===Object)return!0;if(typeof e!="function")return!1;let n=a_.get(e);return n===void 0&&(n=Function.toString.call(e),a_.set(e,n)),n===kL}function pd(r,t,e=!0){Vd(r)===0?(e?Reflect.ownKeys(r):Object.keys(r)).forEach(s=>{t(s,r[s],r)}):r.forEach((n,s)=>t(s,n,r))}function Vd(r){const t=r[Fn];return t?t.type_:Array.isArray(r)?1:Cu(r)?2:Xd(r)?3:0}function P0(r,t){return Vd(r)===2?r.has(t):Object.prototype.hasOwnProperty.call(r,t)}function W2(r,t,e){const n=Vd(r);n===2?r.set(t,e):n===3?r.add(e):r[t]=e}function ML(r,t){return r===t?r!==0||1/r===1/t:r!==r&&t!==t}function Cu(r){return r instanceof Map}function Xd(r){return r instanceof Set}function ua(r){return r.copy_||r.base_}function H0(r,t){if(Cu(r))return new Map(r);if(Xd(r))return new Set(r);if(Array.isArray(r))return Array.prototype.slice.call(r);const e=$2(r);if(t===!0||t==="class_only"&&!e){const n=Object.getOwnPropertyDescriptors(r);delete n[Fn];let s=Reflect.ownKeys(n);for(let o=0;o<s.length;o++){const c=s[o],u=n[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:r[c]})}return Object.create(tu(r),n)}else{const n=tu(r);if(n!==null&&e)return{...r};const s=Object.create(n);return Object.assign(s,r)}}function lv(r,t=!1){return Gd(r)||Da(r)||!Yi(r)||(Vd(r)>1&&Object.defineProperties(r,{set:vf,add:vf,clear:vf,delete:vf}),Object.freeze(r),t&&Object.values(r).forEach(e=>lv(e,!0))),r}function jL(){br(2)}var vf={value:jL};function Gd(r){return r===null||typeof r!="object"?!0:Object.isFrozen(r)}var RL={};function ka(r){const t=RL[r];return t||br(0,r),t}var eu;function q2(){return eu}function LL(r,t){return{drafts_:[],parent_:r,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function o_(r,t){t&&(ka("Patches"),r.patches_=[],r.inversePatches_=[],r.patchListener_=t)}function Y0(r){V0(r),r.drafts_.forEach(NL),r.drafts_=null}function V0(r){r===eu&&(eu=r.parent_)}function l_(r){return eu=LL(eu,r)}function NL(r){const t=r[Fn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function c_(r,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return r!==void 0&&r!==e?(e[Fn].modified_&&(Y0(t),br(4)),Yi(r)&&(r=md(t,r),t.parent_||yd(t,r)),t.patches_&&ka("Patches").generateReplacementPatches_(e[Fn].base_,r,t.patches_,t.inversePatches_)):r=md(t,e,[]),Y0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),r!==I2?r:void 0}function md(r,t,e){if(Gd(t))return t;const n=r.immer_.shouldUseStrictIteration(),s=t[Fn];if(!s)return pd(t,(o,c)=>u_(r,s,t,o,c,e),n),t;if(s.scope_!==r)return t;if(!s.modified_)return yd(r,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let c=o,u=!1;s.type_===3&&(c=new Set(o),o.clear(),u=!0),pd(c,(f,d)=>u_(r,s,o,f,d,e,u),n),yd(r,o,!1),e&&r.patches_&&ka("Patches").generatePatches_(s,e,r.patches_,r.inversePatches_)}return s.copy_}function u_(r,t,e,n,s,o,c){if(s==null||typeof s!="object"&&!c)return;const u=Gd(s);if(!(u&&!c)){if(Da(s)){const f=o&&t&&t.type_!==3&&!P0(t.assigned_,n)?o.concat(n):void 0,d=md(r,s,f);if(W2(e,n,d),Da(d))r.canAutoFreeze_=!1;else return}else c&&e.add(s);if(Yi(s)&&!u){if(!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;md(r,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Cu(e)?e.has(n):Object.prototype.propertyIsEnumerable.call(e,n))&&yd(r,s)}}}function yd(r,t,e=!1){!r.parent_&&r.immer_.autoFreeze_&&r.canAutoFreeze_&&lv(t,e)}function BL(r,t){const e=Array.isArray(r),n={type_:e?1:0,scope_:t?t.scope_:q2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:r,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,o=cv;e&&(s=[n],o=nu);const{revoke:c,proxy:u}=Proxy.revocable(s,o);return n.draft_=u,n.revoke_=c,u}var cv={get(r,t){if(t===Fn)return r;const e=ua(r);if(!P0(e,t))return zL(r,e,t);const n=e[t];return r.finalized_||!Yi(n)?n:n===s0(r.base_,t)?(a0(r),r.copy_[t]=G0(n,r)):n},has(r,t){return t in ua(r)},ownKeys(r){return Reflect.ownKeys(ua(r))},set(r,t,e){const n=K2(ua(r),t);if(n?.set)return n.set.call(r.draft_,e),!0;if(!r.modified_){const s=s0(ua(r),t),o=s?.[Fn];if(o&&o.base_===e)return r.copy_[t]=e,r.assigned_[t]=!1,!0;if(ML(e,s)&&(e!==void 0||P0(r.base_,t)))return!0;a0(r),X0(r)}return r.copy_[t]===e&&(e!==void 0||t in r.copy_)||Number.isNaN(e)&&Number.isNaN(r.copy_[t])||(r.copy_[t]=e,r.assigned_[t]=!0),!0},deleteProperty(r,t){return s0(r.base_,t)!==void 0||t in r.base_?(r.assigned_[t]=!1,a0(r),X0(r)):delete r.assigned_[t],r.copy_&&delete r.copy_[t],!0},getOwnPropertyDescriptor(r,t){const e=ua(r),n=Reflect.getOwnPropertyDescriptor(e,t);return n&&{writable:!0,configurable:r.type_!==1||t!=="length",enumerable:n.enumerable,value:e[t]}},defineProperty(){br(11)},getPrototypeOf(r){return tu(r.base_)},setPrototypeOf(){br(12)}},nu={};pd(cv,(r,t)=>{nu[r]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});nu.deleteProperty=function(r,t){return nu.set.call(this,r,t,void 0)};nu.set=function(r,t,e){return cv.set.call(this,r[0],t,e,r[0])};function s0(r,t){const e=r[Fn];return(e?ua(e):r)[t]}function zL(r,t,e){const n=K2(t,e);return n?"value"in n?n.value:n.get?.call(r.draft_):void 0}function K2(r,t){if(!(t in r))return;let e=tu(r);for(;e;){const n=Object.getOwnPropertyDescriptor(e,t);if(n)return n;e=tu(e)}}function X0(r){r.modified_||(r.modified_=!0,r.parent_&&X0(r.parent_))}function a0(r){r.copy_||(r.copy_=H0(r.base_,r.scope_.immer_.useStrictShallowCopy_))}var UL=class{constructor(r){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,e,n)=>{if(typeof t=="function"&&typeof e!="function"){const o=e;e=t;const c=this;return function(f=o,...d){return c.produce(f,g=>e.call(this,g,...d))}}typeof e!="function"&&br(6),n!==void 0&&typeof n!="function"&&br(7);let s;if(Yi(t)){const o=l_(this),c=G0(t,void 0);let u=!0;try{s=e(c),u=!1}finally{u?Y0(o):V0(o)}return o_(o,n),c_(s,o)}else if(!t||typeof t!="object"){if(s=e(t),s===void 0&&(s=t),s===I2&&(s=void 0),this.autoFreeze_&&lv(s,!0),n){const o=[],c=[];ka("Patches").generateReplacementPatches_(t,s,o,c),n(o,c)}return s}else br(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(c,...u)=>this.produceWithPatches(c,f=>t(f,...u));let n,s;return[this.produce(t,e,(c,u)=>{n=c,s=u}),n,s]},typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze),typeof r?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(r.useStrictShallowCopy),typeof r?.useStrictIteration=="boolean"&&this.setUseStrictIteration(r.useStrictIteration)}createDraft(r){Yi(r)||br(8),Da(r)&&(r=FL(r));const t=l_(this),e=G0(r,void 0);return e[Fn].isManual_=!0,V0(t),e}finishDraft(r,t){const e=r&&r[Fn];(!e||!e.isManual_)&&br(9);const{scope_:n}=e;return o_(n,t),c_(void 0,n)}setAutoFreeze(r){this.autoFreeze_=r}setUseStrictShallowCopy(r){this.useStrictShallowCopy_=r}setUseStrictIteration(r){this.useStrictIteration_=r}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(r,t){let e;for(e=t.length-1;e>=0;e--){const s=t[e];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}e>-1&&(t=t.slice(e+1));const n=ka("Patches").applyPatches_;return Da(r)?n(r,t):this.produce(r,s=>n(s,t))}};function G0(r,t){const e=Cu(r)?ka("MapSet").proxyMap_(r,t):Xd(r)?ka("MapSet").proxySet_(r,t):BL(r,t);return(t?t.scope_:q2()).drafts_.push(e),e}function FL(r){return Da(r)||br(10,r),Q2(r)}function Q2(r){if(!Yi(r)||Gd(r))return r;const t=r[Fn];let e,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=H0(r,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else e=H0(r,!0);return pd(e,(s,o)=>{W2(e,s,Q2(o))},n),t&&(t.finalized_=!1),e}var PL=new UL,Z2=PL.produce;function J2(r){return({dispatch:e,getState:n})=>s=>o=>typeof o=="function"?o(e,n,r):s(o)}var HL=J2(),YL=J2,VL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gd:gd.apply(null,arguments)};function h_(r,t){function e(...n){if(t){let s=t(...n);if(!s)throw new Error(Li(0));return{type:r,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:r,payload:n[0]}}return e.toString=()=>`${r}`,e.type=r,e.match=n=>DL(n)&&n.type===r,e}var tE=class Tc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Tc.prototype)}static get[Symbol.species](){return Tc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Tc(...t[0].concat(this)):new Tc(...t.concat(this))}};function f_(r){return Yi(r)?Z2(r,()=>{}):r}function bf(r,t,e){return r.has(t)?r.get(t):r.set(t,e(t)).get(t)}function XL(r){return typeof r=="boolean"}var GL=()=>function(t){const{thunk:e=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:o=!0}=t??{};let c=new tE;return e&&(XL(e)?c.push(HL):c.push(YL(e.extraArgument))),c},IL="RTK_autoBatch",d_=r=>t=>{setTimeout(t,r)},$L=(r={type:"raf"})=>t=>(...e)=>{const n=t(...e);let s=!0,o=!1,c=!1;const u=new Set,f=r.type==="tick"?queueMicrotask:r.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:d_(10):r.type==="callback"?r.queueNotification:d_(r.timeout),d=()=>{c=!1,o&&(o=!1,u.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){const y=()=>s&&g(),v=n.subscribe(y);return u.add(g),()=>{v(),u.delete(g)}},dispatch(g){try{return s=!g?.meta?.[IL],o=!s,o&&(c||(c=!0,f(d))),n.dispatch(g)}finally{s=!0}}})},WL=r=>function(e){const{autoBatch:n=!0}=e??{};let s=new tE(r);return n&&s.push($L(typeof n=="object"?n:void 0)),s};function qL(r){const t=GL(),{reducer:e=void 0,middleware:n,devTools:s=!0,preloadedState:o=void 0,enhancers:c=void 0}=r||{};let u;if(typeof e=="function")u=e;else if(ov(e))u=OL(e);else throw new Error(Li(1));let f;typeof n=="function"?f=n(t):f=t();let d=gd;s&&(d=VL({trace:!1,...typeof s=="object"&&s}));const g=AL(...f),y=WL(g);let v=typeof c=="function"?c(y):y();const b=d(...v);return G2(u,o,b)}function eE(r){const t={},e=[];let n;const s={addCase(o,c){const u=typeof o=="string"?o:o.type;if(!u)throw new Error(Li(28));if(u in t)throw new Error(Li(29));return t[u]=c,s},addAsyncThunk(o,c){return c.pending&&(t[o.pending.type]=c.pending),c.rejected&&(t[o.rejected.type]=c.rejected),c.fulfilled&&(t[o.fulfilled.type]=c.fulfilled),c.settled&&e.push({matcher:o.settled,reducer:c.settled}),s},addMatcher(o,c){return e.push({matcher:o,reducer:c}),s},addDefaultCase(o){return n=o,s}};return r(s),[t,e,n]}function KL(r){return typeof r=="function"}function QL(r,t){let[e,n,s]=eE(t),o;if(KL(r))o=()=>f_(r());else{const u=f_(r);o=()=>u}function c(u=o(),f){let d=[e[f.type],...n.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return d.filter(g=>!!g).length===0&&(d=[s]),d.reduce((g,y)=>{if(y)if(Da(g)){const b=y(g,f);return b===void 0?g:b}else{if(Yi(g))return Z2(g,v=>y(v,f));{const v=y(g,f);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return g},u)}return c.getInitialState=o,c}var ZL=Symbol.for("rtk-slice-createasyncthunk");function JL(r,t){return`${r}/${t}`}function tN({creators:r}={}){const t=r?.asyncThunk?.[ZL];return function(n){const{name:s,reducerPath:o=s}=n;if(!s)throw new Error(Li(11));const c=(typeof n.reducers=="function"?n.reducers(rN()):n.reducers)||{},u=Object.keys(c),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(B,R){const F=typeof B=="string"?B:B.type;if(!F)throw new Error(Li(12));if(F in f.sliceCaseReducersByType)throw new Error(Li(13));return f.sliceCaseReducersByType[F]=R,d},addMatcher(B,R){return f.sliceMatchers.push({matcher:B,reducer:R}),d},exposeAction(B,R){return f.actionCreators[B]=R,d},exposeCaseReducer(B,R){return f.sliceCaseReducersByName[B]=R,d}};u.forEach(B=>{const R=c[B],F={reducerName:B,type:JL(s,B),createNotation:typeof n.reducers=="function"};sN(R)?oN(F,R,d,t):iN(F,R,d)});function g(){const[B={},R=[],F=void 0]=typeof n.extraReducers=="function"?eE(n.extraReducers):[n.extraReducers],z={...B,...f.sliceCaseReducersByType};return QL(n.initialState,U=>{for(let q in z)U.addCase(q,z[q]);for(let q of f.sliceMatchers)U.addMatcher(q.matcher,q.reducer);for(let q of R)U.addMatcher(q.matcher,q.reducer);F&&U.addDefaultCase(F)})}const y=B=>B,v=new Map,b=new WeakMap;let S;function w(B,R){return S||(S=g()),S(B,R)}function _(){return S||(S=g()),S.getInitialState()}function O(B,R=!1){function F(U){let q=U[B];return typeof q>"u"&&R&&(q=bf(b,F,_)),q}function z(U=y){const q=bf(v,R,()=>new WeakMap);return bf(q,U,()=>{const rt={};for(const[lt,ct]of Object.entries(n.selectors??{}))rt[lt]=eN(ct,U,()=>bf(b,U,_),R);return rt})}return{reducerPath:B,getSelectors:z,get selectors(){return z(F)},selectSlice:F}}const k={name:s,reducer:w,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:_,...O(o),injectInto(B,{reducerPath:R,...F}={}){const z=R??o;return B.inject({reducerPath:z,reducer:w},F),{...k,...O(z,!0)}}};return k}}function eN(r,t,e,n){function s(o,...c){let u=t(o);return typeof u>"u"&&n&&(u=e()),r(u,...c)}return s.unwrapped=r,s}var nN=tN();function rN(){function r(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return r.withTypes=()=>r,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:r}}function iN({type:r,reducerName:t,createNotation:e},n,s){let o,c;if("reducer"in n){if(e&&!aN(n))throw new Error(Li(17));o=n.reducer,c=n.prepare}else o=n;s.addCase(r,o).exposeCaseReducer(t,o).exposeAction(t,c?h_(r,c):h_(r))}function sN(r){return r._reducerDefinitionType==="asyncThunk"}function aN(r){return r._reducerDefinitionType==="reducerWithPrepare"}function oN({type:r,reducerName:t},e,n,s){if(!s)throw new Error(Li(18));const{payloadCreator:o,fulfilled:c,pending:u,rejected:f,settled:d,options:g}=e,y=s(r,o,g);n.exposeAction(t,y),c&&n.addCase(y.fulfilled,c),u&&n.addCase(y.pending,u),f&&n.addCase(y.rejected,f),d&&n.addMatcher(y.settled,d),n.exposeCaseReducer(t,{fulfilled:c||Sf,pending:u||Sf,rejected:f||Sf,settled:d||Sf})}function Sf(){}function Li(r){return`Minified Redux Toolkit error #${r}; visit https://redux-toolkit.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}const lN={canvasState:null,selectedElement:null,history:[],historyIndex:-1},nE=nN({name:"canvas",initialState:lN,reducers:{updateCanvasState:(r,t)=>{r.canvasState=t.payload},loadCanvasState:(r,t)=>{r.canvasState=t.payload},setSelectedElement:(r,t)=>{r.selectedElement=t.payload},updateSelectedElement:(r,t)=>{r.selectedElement&&(r.selectedElement={...r.selectedElement,...t.payload})},updateSelectedElementColor:(r,t)=>{r.selectedElement&&(r.selectedElement.color=t.payload)},saveToHistory:(r,t)=>{const e=typeof t.payload=="string"?t.payload:JSON.stringify(t.payload,null,0);if(r.history.length>0&&r.history[r.history.length-1]===e){console.log("⏭️ Skipping duplicate snapshot");return}console.log("🔵 saveToHistory called - new snapshot");const n=r.historyIndex+1;r.history=r.history.slice(0,n),r.history.push(e),r.historyIndex=r.history.length-1,r.history.length>10&&(r.history.shift(),r.historyIndex=r.history.length-1),console.log("After save:",{historyLength:r.history.length,historyIndex:r.historyIndex})},undo:r=>{if(console.log("🟣 undo called"),console.log("Before undo:",{historyLength:r.history.length,historyIndex:r.historyIndex,canUndo:r.historyIndex>0}),r.historyIndex>0&&r.history.length>0){const t=r.history[r.historyIndex];let e=r.historyIndex-1,n=0;for(;e>=0&&r.history[e]===t;)console.log(`⏭️ Skipping duplicate snapshot at index ${e}`),n++,e--;e>=0?(r.historyIndex=e,r.canvasState=r.history[r.historyIndex],console.log("After undo:",{historyIndex:r.historyIndex,hasState:!!r.history[r.historyIndex],skippedDuplicates:n})):console.log("❌ No unique state found - at beginning of history")}else console.log("❌ Undo not possible")},redo:r=>{if(console.log("🟢 redo called"),console.log("Before redo:",{historyLength:r.history.length,historyIndex:r.historyIndex,canRedo:r.historyIndex<r.history.length-1}),r.historyIndex<r.history.length-1&&r.history.length>0){const t=r.history[r.historyIndex];let e=r.historyIndex+1,n=0;for(;e<r.history.length&&r.history[e]===t;)console.log(`⏭️ Skipping duplicate snapshot at index ${e}`),n++,e++;e<r.history.length?(r.historyIndex=e,r.canvasState=r.history[r.historyIndex],console.log("After redo:",{historyIndex:r.historyIndex,hasState:!!r.history[r.historyIndex],skippedDuplicates:n})):console.log("❌ No unique state found - at end of history")}else console.log("❌ Redo not possible")},clearHistory:r=>{r.history=[],r.historyIndex=-1}}}),{updateCanvasState:g_,loadCanvasState:yU,setSelectedElement:o0,updateSelectedElement:vU,updateSelectedElementColor:cN,saveToHistory:bU,undo:SU,redo:xU,clearHistory:wU}=nE.actions,uN=nE.reducer,Lt={primary:"#2196F3",primaryHover:"#0b7dda",success:"#4CAF50",successHover:"#45a049",backgroundMain:"#f5f5f5",backgroundSidebar:"#f8f9fa",backgroundSelected:"#e8f4fd",backgroundHover:"#e8e8e8",backgroundWhite:"#ffffff",backgroundCanvas:"#2a2a2a",backgroundDark:"#242424",backgroundVeryDark:"#1a1a1a",backgroundLight:"#f9f9f9",backgroundLightGray:"#f0f0f0",borderDefault:"#ddd",borderSidebar:"#e0e0e0",borderHover:"#999",borderLight:"#c0c0c0",borderMedium:"#d0d0d0",textDark:"#333",textMedium:"#666",textLink:"#646cff",textLinkHover:"#535bf2",textLinkLight:"#747bff",textVeryDark:"#213547",black:"#000000",white:"#ffffff",error:"#f44336",errorHover:"#d32f2f",shapeFill:"#4CAF50",shapeStroke:"#2E7D32",selectionBorder:"#4CAF50",selectionBackground:"rgba(100, 181, 246, 0.2)",red:"#ff0000",yellow:"#ffff00",green:"#00ff00",cyan:"#00ffff",blue:"#0000ff",magenta:"#ff00ff"},hN=(r,t,e)=>{let n;return function(...s){const o=this,c=()=>{n=null,r.apply(o,s)};clearTimeout(n),n=setTimeout(c,t)}},l0={};$r.prototype._historyNext=function(){return{size:{height:this.getHeight(),width:this.getWidth()},zoom:1,json:JSON.stringify(this.toDatalessJSON())}};$r.prototype._historyEvents=function(){return{"object:added":this._historySaveAction,"object:removed":this._historySaveAction,"object:modified":this._historySaveAction}};$r.prototype._historyInit=function(){this.historyUndo=[],this.historyRedo=[],this.historyNextState=this._historyNext(),this.historyProcessing=!1,this.on(this._historyEvents())};const fN=()=>hN(function(r){const t=this.historyUndo.length>0?this.historyUndo[this.historyUndo.length-1]:null;if(t&&t.json===r.json){this.historyNextState=this._historyNext();return}this.historyUndo.push(r),this.historyNextState=this._historyNext()},300),dN=function(r){return l0[r.getElement().id]||(l0[r.getElement().id]=fN.call(r)),l0[r.getElement().id]};$r.prototype._historySaveAction=function(r){if(r&&r.target&&(!r?.target.height||!r?.target.width)||this.historyProcessing)return;const t=dN(this),e=this.historyNextState;t.call(this,e)};$r.prototype.historyUndoAction=function(r){this.historyProcessing=!0;const t=this.historyUndo.pop();t?(this.historyRedo.push(this._historyNext()),this.historyNextState=t,this._loadHistory(t,"history:undo",r)):(console.log("❌ No history to pop"),this.historyProcessing=!1)};$r.prototype.historyRedoAction=function(r){this.historyProcessing=!0;const t=this.historyRedo.pop();t?(this.historyUndo.push(this._historyNext()),this.historyNextState=t,this._loadHistory(t,"history:redo",r)):this.historyProcessing=!1};$r.prototype._loadHistory=function(r,t,e){const n=this,{size:s,zoom:o,json:c}=r,{objects:u,background:f}=JSON.parse(c),d={objects:u,background:f};n._historyProcessingTimeout&&clearTimeout(n._historyProcessingTimeout),n.loadFromJSON(d,()=>{n.fire(t),n.setZoom(o),n.setWidth(s.width*o),n.setHeight(s.height*o),n.requestRenderAll();const g=setTimeout(()=>{n.historyProcessing=!1,e&&typeof e=="function"&&e(r)},400);n._historyProcessingTimeout=g})};const gN=({addElementCallback:r,wrapperRef:t})=>{const e=M.useRef(null),n=M.useRef(null),s=my();return M.useEffect(()=>{if(e.current){const o=new $r(e.current,{width:1080,height:1080,backgroundColor:"white"});n.current=o,o.includeDefaultValues=!1,o.selectionColor=Lt.selectionBackground,o.selectionBorderColor=Lt.selectionBorder,o.selectionLineWidth=2,o._historyInit();const c=(()=>{let f=null;return()=>{f&&clearTimeout(f),f=setTimeout(()=>{try{if(window._suppressCounter)return;const d=window.ydoc;if(!d)return;const g=d.getMap("shared-canvas"),y=o.toJSON();y.width=o.getWidth(),y.height=o.getHeight();const v=JSON.stringify(y);if(g.get("json")===v)return;window._lastSentCanvasJson=v;const S=d.clientID,w=Date.now();d.transact(()=>{g.set("json",v),g.set("updatedAt",w),g.set("senderId",S),g.set("senderTs",w)},{source:"canvas-sync",clientId:S})}catch{}},250)}})();o._forceSync=()=>{o.historyProcessing||c()},o.on("object:added",f=>{const d=f.target;if(d){d.__settingUp=!0;const g=d;if(g.name||(g.name=`${d.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),!g.id){const S=window.ydoc?.clientID||"local";g.id=`${S}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const y=d.stateProperties||[];y.includes("name")||(d.stateProperties=[...y,"name"]);const v=d.stateProperties||[];v.includes("id")||(d.stateProperties=[...v,"id"]),d.set({borderColor:Lt.selectionBorder,cornerColor:Lt.selectionBorder,cornerSize:10,borderDashArray:[5,5],transparentCorners:!1}),setTimeout(()=>{d.__settingUp=!1,o.historyProcessing||c()},100)}}),o.on("object:modified",f=>{const d=f?.target;o.historyProcessing||d?.__settingUp||c()}),o.on("object:removed",f=>{const d=f?.target;o.historyProcessing||d?.__settingUp||c()});const u=()=>{const f=o.getActiveObject();if(f){f.set({borderColor:Lt.selectionBorder,cornerColor:Lt.selectionBorder,cornerSize:10,borderDashArray:[5,5],transparentCorners:!1});const d=f.type,g=f.fill;let y=Lt.black;typeof g=="string"&&(/^#[0-9A-Fa-f]{6}$/.test(g)||g.startsWith("#"))&&(y=g);const v=f.name||"selected";s(o0({type:d,objectId:v,color:y}))}else s(o0(null))};return o.on("selection:created",u),o.on("selection:updated",u),o.on("selection:cleared",()=>{s(o0(null))}),window.fabricCanvas=o,window.canvasReady=!0,()=>{o.off("selection:created"),o.off("selection:updated"),o.off("selection:cleared"),o.off("object:added"),o.off("object:modified"),o.off("object:removed");try{delete o._forceSync}catch{}o.dispose()}}},[s,r]),D.jsx("div",{className:"canvas-wrapper",ref:t,children:D.jsx("canvas",{ref:e})})},pN=({onShapesClick:r,canvasId:t})=>{const e=()=>{const c=window.fabricCanvas;if(!c)return;const u=new Es("Click to edit",{width:200,fontSize:20}),d=window.ydoc?.clientID||"unknown";u.id=`${d}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;const g=c.width/2,y=c.height/2;u.set({left:g-u.width/2,top:y-u.height/2}),c.add(u),c.setActiveObject(u)},n=()=>{const c=window.fabricCanvas;if(!c)return;const u=document.createElement("input");u.type="file",u.accept="image/*",u.onchange=f=>{const d=f.target.files?.[0];if(d){const g=new FileReader;g.onload=y=>{const v=y.target?.result;Rn.fromURL(v).then(b=>{const S=c.width*.8,w=c.height*.8;let _=1,O=1;b.width>S&&(_=S/b.width),b.height>w&&(O=w/b.height);const k=Math.min(_,O);b.set({scaleX:k,scaleY:k});const B=c.width/2,R=c.height/2;b.set({left:B-b.width*k/2,top:R-b.height*k/2});const z=window.ydoc?.clientID||"unknown";b.id=`${z}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c.add(b),c.setActiveObject(b),c._historySaveAction&&c._historySaveAction({target:null})}).catch(b=>{console.error("Error loading image:",b),alert("Failed to load image. Please try another image.")})},g.readAsDataURL(d)}},u.click()},s=()=>{const c=window.fabricCanvas;if(!c)return;const u=c.toDataURL({format:"png",multiplier:2}),f=document.createElement("a");f.download="canvas.png",f.href=u,f.click()},o=async()=>{try{await AM(t,"68ffa7c696203598ebc20953"),alert("Canvas shared successfully!")}catch(c){console.error("Error sharing canvas:",c),alert("Failed to share canvas. Please try again.")}};return D.jsx(D.Fragment,{children:D.jsxs("div",{className:"sidebar",children:[D.jsx("div",{className:"sidebar-header"}),D.jsxs("div",{className:"sidebar-section",children:[D.jsx("h3",{className:"sidebar-title",children:"Elements"}),D.jsxs("button",{className:"sidebar-item",onClick:e,children:[D.jsx(CM,{className:"sidebar-icon"}),D.jsx("span",{className:"sidebar-label",children:"Text"})]}),D.jsxs("button",{className:"sidebar-item",onClick:n,children:[D.jsx(SM,{className:"sidebar-icon"}),D.jsx("span",{className:"sidebar-label",children:"Image"})]}),D.jsxs("button",{className:"sidebar-item",onClick:r,children:[D.jsx(_M,{className:"sidebar-icon"}),D.jsx("span",{className:"sidebar-label",children:"Shapes"})]})]}),D.jsxs("div",{className:"sidebar-section",children:[D.jsx("h3",{className:"sidebar-title",children:"Export"}),D.jsxs("button",{className:"sidebar-item",onClick:s,children:[D.jsx(yM,{className:"sidebar-icon"}),D.jsx("span",{className:"sidebar-label",children:"Export PNG"})]}),D.jsxs("button",{className:"sidebar-item",onClick:o,children:[D.jsx(wM,{className:"sidebar-icon"}),D.jsx("span",{className:"sidebar-label",children:"Share Canvas"})]})]})]})})};function mN(r){return Gi({attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M0.25 1C0.25 0.585786 0.585786 0.25 1 0.25H14C14.4142 0.25 14.75 0.585786 14.75 1V14C14.75 14.4142 14.4142 14.75 14 14.75H1C0.585786 14.75 0.25 14.4142 0.25 14V1ZM1.75 1.75V13.25H13.25V1.75H1.75Z",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"5",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"3",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"7",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"5",y:"7",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"3",y:"7",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"9",y:"7",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"11",y:"7",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"9",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"11",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]}]})(r)}const ru={black:"#000",white:"#fff"},Mo={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},jo={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Ro={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Lo={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},No={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Sc={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},yN={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Ma(r,...t){const e=new URL(`https://mui.com/production-error/?code=${r}`);return t.forEach(n=>e.searchParams.append("args[]",n)),`Minified MUI error #${r}; visit ${e} for the full message.`}const rE="$$material";function I0(){return I0=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},I0.apply(null,arguments)}function vN(r){if(r.sheet)return r.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===r)return document.styleSheets[t]}function bN(r){var t=document.createElement("style");return t.setAttribute("data-emotion",r.key),r.nonce!==void 0&&t.setAttribute("nonce",r.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var SN=(function(){function r(e){var n=this;this._insertTag=function(s){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(s,o),n.tags.push(s)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=r.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(bN(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=vN(s);try{o.insertRule(n,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var s;return(s=n.parentNode)==null?void 0:s.removeChild(n)}),this.tags=[],this.ctr=0},r})(),We="-ms-",vd="-moz-",Ft="-webkit-",iE="comm",uv="rule",hv="decl",xN="@import",sE="@keyframes",wN="@layer",_N=Math.abs,Id=String.fromCharCode,CN=Object.assign;function TN(r,t){return Xe(r,0)^45?(((t<<2^Xe(r,0))<<2^Xe(r,1))<<2^Xe(r,2))<<2^Xe(r,3):0}function aE(r){return r.trim()}function EN(r,t){return(r=t.exec(r))?r[0]:r}function Pt(r,t,e){return r.replace(t,e)}function $0(r,t){return r.indexOf(t)}function Xe(r,t){return r.charCodeAt(t)|0}function iu(r,t,e){return r.slice(t,e)}function Br(r){return r.length}function fv(r){return r.length}function xf(r,t){return t.push(r),r}function ON(r,t){return r.map(t).join("")}var $d=1,sl=1,oE=0,wn=0,Te=0,Cl="";function Wd(r,t,e,n,s,o,c){return{value:r,root:t,parent:e,type:n,props:s,children:o,line:$d,column:sl,length:c,return:""}}function xc(r,t){return CN(Wd("",null,null,"",null,null,0),r,{length:-r.length},t)}function AN(){return Te}function DN(){return Te=wn>0?Xe(Cl,--wn):0,sl--,Te===10&&(sl=1,$d--),Te}function zn(){return Te=wn<oE?Xe(Cl,wn++):0,sl++,Te===10&&(sl=1,$d++),Te}function Hr(){return Xe(Cl,wn)}function Ff(){return wn}function Tu(r,t){return iu(Cl,r,t)}function su(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lE(r){return $d=sl=1,oE=Br(Cl=r),wn=0,[]}function cE(r){return Cl="",r}function Pf(r){return aE(Tu(wn-1,W0(r===91?r+2:r===40?r+1:r)))}function kN(r){for(;(Te=Hr())&&Te<33;)zn();return su(r)>2||su(Te)>3?"":" "}function MN(r,t){for(;--t&&zn()&&!(Te<48||Te>102||Te>57&&Te<65||Te>70&&Te<97););return Tu(r,Ff()+(t<6&&Hr()==32&&zn()==32))}function W0(r){for(;zn();)switch(Te){case r:return wn;case 34:case 39:r!==34&&r!==39&&W0(Te);break;case 40:r===41&&W0(r);break;case 92:zn();break}return wn}function jN(r,t){for(;zn()&&r+Te!==57;)if(r+Te===84&&Hr()===47)break;return"/*"+Tu(t,wn-1)+"*"+Id(r===47?r:zn())}function RN(r){for(;!su(Hr());)zn();return Tu(r,wn)}function LN(r){return cE(Hf("",null,null,null,[""],r=lE(r),0,[0],r))}function Hf(r,t,e,n,s,o,c,u,f){for(var d=0,g=0,y=c,v=0,b=0,S=0,w=1,_=1,O=1,k=0,B="",R=s,F=o,z=n,U=B;_;)switch(S=k,k=zn()){case 40:if(S!=108&&Xe(U,y-1)==58){$0(U+=Pt(Pf(k),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:U+=Pf(k);break;case 9:case 10:case 13:case 32:U+=kN(S);break;case 92:U+=MN(Ff()-1,7);continue;case 47:switch(Hr()){case 42:case 47:xf(NN(jN(zn(),Ff()),t,e),f);break;default:U+="/"}break;case 123*w:u[d++]=Br(U)*O;case 125*w:case 59:case 0:switch(k){case 0:case 125:_=0;case 59+g:O==-1&&(U=Pt(U,/\f/g,"")),b>0&&Br(U)-y&&xf(b>32?m_(U+";",n,e,y-1):m_(Pt(U," ","")+";",n,e,y-2),f);break;case 59:U+=";";default:if(xf(z=p_(U,t,e,d,g,s,u,B,R=[],F=[],y),o),k===123)if(g===0)Hf(U,t,z,z,R,o,y,u,F);else switch(v===99&&Xe(U,3)===110?100:v){case 100:case 108:case 109:case 115:Hf(r,z,z,n&&xf(p_(r,z,z,0,0,s,u,B,s,R=[],y),F),s,F,y,u,n?R:F);break;default:Hf(U,z,z,z,[""],F,0,u,F)}}d=g=b=0,w=O=1,B=U="",y=c;break;case 58:y=1+Br(U),b=S;default:if(w<1){if(k==123)--w;else if(k==125&&w++==0&&DN()==125)continue}switch(U+=Id(k),k*w){case 38:O=g>0?1:(U+="\f",-1);break;case 44:u[d++]=(Br(U)-1)*O,O=1;break;case 64:Hr()===45&&(U+=Pf(zn())),v=Hr(),g=y=Br(B=U+=RN(Ff())),k++;break;case 45:S===45&&Br(U)==2&&(w=0)}}return o}function p_(r,t,e,n,s,o,c,u,f,d,g){for(var y=s-1,v=s===0?o:[""],b=fv(v),S=0,w=0,_=0;S<n;++S)for(var O=0,k=iu(r,y+1,y=_N(w=c[S])),B=r;O<b;++O)(B=aE(w>0?v[O]+" "+k:Pt(k,/&\f/g,v[O])))&&(f[_++]=B);return Wd(r,t,e,s===0?uv:u,f,d,g)}function NN(r,t,e){return Wd(r,t,e,iE,Id(AN()),iu(r,2,-2),0)}function m_(r,t,e,n){return Wd(r,t,e,hv,iu(r,0,n),iu(r,n+1,-1),n)}function Qo(r,t){for(var e="",n=fv(r),s=0;s<n;s++)e+=t(r[s],s,r,t)||"";return e}function BN(r,t,e,n){switch(r.type){case wN:if(r.children.length)break;case xN:case hv:return r.return=r.return||r.value;case iE:return"";case sE:return r.return=r.value+"{"+Qo(r.children,n)+"}";case uv:r.value=r.props.join(",")}return Br(e=Qo(r.children,n))?r.return=r.value+"{"+e+"}":""}function zN(r){var t=fv(r);return function(e,n,s,o){for(var c="",u=0;u<t;u++)c+=r[u](e,n,s,o)||"";return c}}function UN(r){return function(t){t.root||(t=t.return)&&r(t)}}function uE(r){var t=Object.create(null);return function(e){return t[e]===void 0&&(t[e]=r(e)),t[e]}}var FN=function(t,e,n){for(var s=0,o=0;s=o,o=Hr(),s===38&&o===12&&(e[n]=1),!su(o);)zn();return Tu(t,wn)},PN=function(t,e){var n=-1,s=44;do switch(su(s)){case 0:s===38&&Hr()===12&&(e[n]=1),t[n]+=FN(wn-1,e,n);break;case 2:t[n]+=Pf(s);break;case 4:if(s===44){t[++n]=Hr()===58?"&\f":"",e[n]=t[n].length;break}default:t[n]+=Id(s)}while(s=zn());return t},HN=function(t,e){return cE(PN(lE(t),e))},y_=new WeakMap,YN=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var e=t.value,n=t.parent,s=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&e.charCodeAt(0)!==58&&!y_.get(n))&&!s){y_.set(t,!0);for(var o=[],c=HN(e,o),u=n.props,f=0,d=0;f<c.length;f++)for(var g=0;g<u.length;g++,d++)t.props[d]=o[f]?c[f].replace(/&\f/g,u[g]):u[g]+" "+c[f]}}},VN=function(t){if(t.type==="decl"){var e=t.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(t.return="",t.value="")}};function hE(r,t){switch(TN(r,t)){case 5103:return Ft+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ft+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Ft+r+vd+r+We+r+r;case 6828:case 4268:return Ft+r+We+r+r;case 6165:return Ft+r+We+"flex-"+r+r;case 5187:return Ft+r+Pt(r,/(\w+).+(:[^]+)/,Ft+"box-$1$2"+We+"flex-$1$2")+r;case 5443:return Ft+r+We+"flex-item-"+Pt(r,/flex-|-self/,"")+r;case 4675:return Ft+r+We+"flex-line-pack"+Pt(r,/align-content|flex-|-self/,"")+r;case 5548:return Ft+r+We+Pt(r,"shrink","negative")+r;case 5292:return Ft+r+We+Pt(r,"basis","preferred-size")+r;case 6060:return Ft+"box-"+Pt(r,"-grow","")+Ft+r+We+Pt(r,"grow","positive")+r;case 4554:return Ft+Pt(r,/([^-])(transform)/g,"$1"+Ft+"$2")+r;case 6187:return Pt(Pt(Pt(r,/(zoom-|grab)/,Ft+"$1"),/(image-set)/,Ft+"$1"),r,"")+r;case 5495:case 3959:return Pt(r,/(image-set\([^]*)/,Ft+"$1$`$1");case 4968:return Pt(Pt(r,/(.+:)(flex-)?(.*)/,Ft+"box-pack:$3"+We+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ft+r+r;case 4095:case 3583:case 4068:case 2532:return Pt(r,/(.+)-inline(.+)/,Ft+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Br(r)-1-t>6)switch(Xe(r,t+1)){case 109:if(Xe(r,t+4)!==45)break;case 102:return Pt(r,/(.+:)(.+)-([^]+)/,"$1"+Ft+"$2-$3$1"+vd+(Xe(r,t+3)==108?"$3":"$2-$3"))+r;case 115:return~$0(r,"stretch")?hE(Pt(r,"stretch","fill-available"),t)+r:r}break;case 4949:if(Xe(r,t+1)!==115)break;case 6444:switch(Xe(r,Br(r)-3-(~$0(r,"!important")&&10))){case 107:return Pt(r,":",":"+Ft)+r;case 101:return Pt(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ft+(Xe(r,14)===45?"inline-":"")+"box$3$1"+Ft+"$2$3$1"+We+"$2box$3")+r}break;case 5936:switch(Xe(r,t+11)){case 114:return Ft+r+We+Pt(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Ft+r+We+Pt(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Ft+r+We+Pt(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Ft+r+We+r+r}return r}var XN=function(t,e,n,s){if(t.length>-1&&!t.return)switch(t.type){case hv:t.return=hE(t.value,t.length);break;case sE:return Qo([xc(t,{value:Pt(t.value,"@","@"+Ft)})],s);case uv:if(t.length)return ON(t.props,function(o){switch(EN(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Qo([xc(t,{props:[Pt(o,/:(read-\w+)/,":"+vd+"$1")]})],s);case"::placeholder":return Qo([xc(t,{props:[Pt(o,/:(plac\w+)/,":"+Ft+"input-$1")]}),xc(t,{props:[Pt(o,/:(plac\w+)/,":"+vd+"$1")]}),xc(t,{props:[Pt(o,/:(plac\w+)/,We+"input-$1")]})],s)}return""})}},GN=[XN],IN=function(t){var e=t.key;if(e==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(w){var _=w.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var s=t.stylisPlugins||GN,o={},c,u=[];c=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(w){for(var _=w.getAttribute("data-emotion").split(" "),O=1;O<_.length;O++)o[_[O]]=!0;u.push(w)});var f,d=[YN,VN];{var g,y=[BN,UN(function(w){g.insert(w)})],v=zN(d.concat(s,y)),b=function(_){return Qo(LN(_),v)};f=function(_,O,k,B){g=k,b(_?_+"{"+O.styles+"}":O.styles),B&&(S.inserted[O.name]=!0)}}var S={key:e,sheet:new SN({key:e,container:c,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:f};return S.sheet.hydrate(u),S},$N=!0;function WN(r,t,e){var n="";return e.split(" ").forEach(function(s){r[s]!==void 0?t.push(r[s]+";"):s&&(n+=s+" ")}),n}var fE=function(t,e,n){var s=t.key+"-"+e.name;(n===!1||$N===!1)&&t.registered[s]===void 0&&(t.registered[s]=e.styles)},qN=function(t,e,n){fE(t,e,n);var s=t.key+"-"+e.name;if(t.inserted[e.name]===void 0){var o=e;do t.insert(e===o?"."+s:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function KN(r){for(var t=0,e,n=0,s=r.length;s>=4;++n,s-=4)e=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,t=(e&65535)*1540483477+((e>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(r.charCodeAt(n+2)&255)<<16;case 2:t^=(r.charCodeAt(n+1)&255)<<8;case 1:t^=r.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var QN={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ZN=/[A-Z]|^ms/g,JN=/_EMO_([^_]+?)_([^]*?)_EMO_/g,dE=function(t){return t.charCodeAt(1)===45},v_=function(t){return t!=null&&typeof t!="boolean"},c0=uE(function(r){return dE(r)?r:r.replace(ZN,"-$&").toLowerCase()}),b_=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(JN,function(n,s,o){return zr={name:s,styles:o,next:zr},s})}return QN[t]!==1&&!dE(t)&&typeof e=="number"&&e!==0?e+"px":e};function au(r,t,e){if(e==null)return"";var n=e;if(n.__emotion_styles!==void 0)return n;switch(typeof e){case"boolean":return"";case"object":{var s=e;if(s.anim===1)return zr={name:s.name,styles:s.styles,next:zr},s.name;var o=e;if(o.styles!==void 0){var c=o.next;if(c!==void 0)for(;c!==void 0;)zr={name:c.name,styles:c.styles,next:zr},c=c.next;var u=o.styles+";";return u}return tB(r,t,e)}case"function":{if(r!==void 0){var f=zr,d=e(r);return zr=f,au(r,t,d)}break}}var g=e;if(t==null)return g;var y=t[g];return y!==void 0?y:g}function tB(r,t,e){var n="";if(Array.isArray(e))for(var s=0;s<e.length;s++)n+=au(r,t,e[s])+";";else for(var o in e){var c=e[o];if(typeof c!="object"){var u=c;t!=null&&t[u]!==void 0?n+=o+"{"+t[u]+"}":v_(u)&&(n+=c0(o)+":"+b_(o,u)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&(t==null||t[c[0]]===void 0))for(var f=0;f<c.length;f++)v_(c[f])&&(n+=c0(o)+":"+b_(o,c[f])+";");else{var d=au(r,t,c);switch(o){case"animation":case"animationName":{n+=c0(o)+":"+d+";";break}default:n+=o+"{"+d+"}"}}}return n}var S_=/label:\s*([^\s;{]+)\s*(;|$)/g,zr;function gE(r,t,e){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var n=!0,s="";zr=void 0;var o=r[0];if(o==null||o.raw===void 0)n=!1,s+=au(e,t,o);else{var c=o;s+=c[0]}for(var u=1;u<r.length;u++)if(s+=au(e,t,r[u]),n){var f=o;s+=f[u]}S_.lastIndex=0;for(var d="",g;(g=S_.exec(s))!==null;)d+="-"+g[1];var y=KN(s)+d;return{name:y,styles:s,next:zr}}var eB=function(t){return t()},nB=p0.useInsertionEffect?p0.useInsertionEffect:!1,rB=nB||eB,pE=M.createContext(typeof HTMLElement<"u"?IN({key:"css"}):null);pE.Provider;var iB=function(t){return M.forwardRef(function(e,n){var s=M.useContext(pE);return t(e,s,n)})},mE=M.createContext({}),sB=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,aB=uE(function(r){return sB.test(r)||r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)<91}),oB=aB,lB=function(t){return t!=="theme"},x_=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?oB:lB},w_=function(t,e,n){var s;if(e){var o=e.shouldForwardProp;s=t.__emotion_forwardProp&&o?function(c){return t.__emotion_forwardProp(c)&&o(c)}:o}return typeof s!="function"&&n&&(s=t.__emotion_forwardProp),s},cB=function(t){var e=t.cache,n=t.serialized,s=t.isStringTag;return fE(e,n,s),rB(function(){return qN(e,n,s)}),null},uB=function r(t,e){var n=t.__emotion_real===t,s=n&&t.__emotion_base||t,o,c;e!==void 0&&(o=e.label,c=e.target);var u=w_(t,e,n),f=u||x_(s),d=!f("as");return function(){var g=arguments,y=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&y.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)y.push.apply(y,g);else{var v=g[0];y.push(v[0]);for(var b=g.length,S=1;S<b;S++)y.push(g[S],v[S])}var w=iB(function(_,O,k){var B=d&&_.as||s,R="",F=[],z=_;if(_.theme==null){z={};for(var U in _)z[U]=_[U];z.theme=M.useContext(mE)}typeof _.className=="string"?R=WN(O.registered,F,_.className):_.className!=null&&(R=_.className+" ");var q=gE(y.concat(F),O.registered,z);R+=O.key+"-"+q.name,c!==void 0&&(R+=" "+c);var rt=d&&u===void 0?x_(B):f,lt={};for(var ct in _)d&&ct==="as"||rt(ct)&&(lt[ct]=_[ct]);return lt.className=R,k&&(lt.ref=k),M.createElement(M.Fragment,null,M.createElement(cB,{cache:O,serialized:q,isStringTag:typeof B=="string"}),M.createElement(B,lt))});return w.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=s,w.__emotion_styles=y,w.__emotion_forwardProp=u,Object.defineProperty(w,"toString",{value:function(){return"."+c}}),w.withComponent=function(_,O){var k=r(_,I0({},e,O,{shouldForwardProp:w_(w,O,!0)}));return k.apply(void 0,y)},w}},hB=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],q0=uB.bind(null);hB.forEach(function(r){q0[r]=q0(r)});function fB(r,t){return q0(r,t)}function dB(r,t){Array.isArray(r.__emotion_styles)&&(r.__emotion_styles=t(r.__emotion_styles))}const __=[];function wa(r){return __[0]=r,gE(__)}var u0={exports:{}},Kt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function gB(){if(C_)return Kt;C_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function S(w){if(typeof w=="object"&&w!==null){var _=w.$$typeof;switch(_){case r:switch(w=w.type,w){case e:case s:case n:case f:case d:case v:return w;default:switch(w=w&&w.$$typeof,w){case c:case u:case y:case g:return w;case o:return w;default:return _}}case t:return _}}}return Kt.ContextConsumer=o,Kt.ContextProvider=c,Kt.Element=r,Kt.ForwardRef=u,Kt.Fragment=e,Kt.Lazy=y,Kt.Memo=g,Kt.Portal=t,Kt.Profiler=s,Kt.StrictMode=n,Kt.Suspense=f,Kt.SuspenseList=d,Kt.isContextConsumer=function(w){return S(w)===o},Kt.isContextProvider=function(w){return S(w)===c},Kt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===r},Kt.isForwardRef=function(w){return S(w)===u},Kt.isFragment=function(w){return S(w)===e},Kt.isLazy=function(w){return S(w)===y},Kt.isMemo=function(w){return S(w)===g},Kt.isPortal=function(w){return S(w)===t},Kt.isProfiler=function(w){return S(w)===s},Kt.isStrictMode=function(w){return S(w)===n},Kt.isSuspense=function(w){return S(w)===f},Kt.isSuspenseList=function(w){return S(w)===d},Kt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===e||w===s||w===n||w===f||w===d||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===g||w.$$typeof===c||w.$$typeof===o||w.$$typeof===u||w.$$typeof===b||w.getModuleId!==void 0)},Kt.typeOf=S,Kt}var T_;function pB(){return T_||(T_=1,u0.exports=gB()),u0.exports}var yE=pB();function Oi(r){if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function vE(r){if(M.isValidElement(r)||yE.isValidElementType(r)||!Oi(r))return r;const t={};return Object.keys(r).forEach(e=>{t[e]=vE(r[e])}),t}function Un(r,t,e={clone:!0}){const n=e.clone?{...r}:r;return Oi(r)&&Oi(t)&&Object.keys(t).forEach(s=>{M.isValidElement(t[s])||yE.isValidElementType(t[s])?n[s]=t[s]:Oi(t[s])&&Object.prototype.hasOwnProperty.call(r,s)&&Oi(r[s])?n[s]=Un(r[s],t[s],e):e.clone?n[s]=Oi(t[s])?vE(t[s]):t[s]:n[s]=t[s]}),n}const mB=r=>{const t=Object.keys(r).map(e=>({key:e,val:r[e]}))||[];return t.sort((e,n)=>e.val-n.val),t.reduce((e,n)=>({...e,[n.key]:n.val}),{})};function yB(r){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:n=5,...s}=r,o=mB(t),c=Object.keys(o);function u(v){return`@media (min-width:${typeof t[v]=="number"?t[v]:v}${e})`}function f(v){return`@media (max-width:${(typeof t[v]=="number"?t[v]:v)-n/100}${e})`}function d(v,b){const S=c.indexOf(b);return`@media (min-width:${typeof t[v]=="number"?t[v]:v}${e}) and (max-width:${(S!==-1&&typeof t[c[S]]=="number"?t[c[S]]:b)-n/100}${e})`}function g(v){return c.indexOf(v)+1<c.length?d(v,c[c.indexOf(v)+1]):u(v)}function y(v){const b=c.indexOf(v);return b===0?u(c[1]):b===c.length-1?f(c[b]):d(v,c[c.indexOf(v)+1]).replace("@media","@media not all and")}return{keys:c,values:o,up:u,down:f,between:d,only:g,not:y,unit:e,...s}}function E_(r,t){if(!r.containerQueries)return t;const e=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,s)=>{const o=/min-width:\s*([0-9.]+)/;return+(n.match(o)?.[1]||0)-+(s.match(o)?.[1]||0)});return e.length?e.reduce((n,s)=>{const o=t[s];return delete n[s],n[s]=o,n},{...t}):t}function vB(r,t){return t==="@"||t.startsWith("@")&&(r.some(e=>t.startsWith(`@${e}`))||!!t.match(/^@\d/))}function bB(r,t){const e=t.match(/^@([^/]+)?\/?(.+)?$/);if(!e)return null;const[,n,s]=e,o=Number.isNaN(+n)?n||0:+n;return r.containerQueries(s).up(o)}function SB(r){const t=(o,c)=>o.replace("@media",c?`@container ${c}`:"@container");function e(o,c){o.up=(...u)=>t(r.breakpoints.up(...u),c),o.down=(...u)=>t(r.breakpoints.down(...u),c),o.between=(...u)=>t(r.breakpoints.between(...u),c),o.only=(...u)=>t(r.breakpoints.only(...u),c),o.not=(...u)=>{const f=t(r.breakpoints.not(...u),c);return f.includes("not all and")?f.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):f}}const n={},s=o=>(e(n,o),n);return e(s),{...r,containerQueries:s}}const xB={borderRadius:4};function zc(r,t){return t?Un(r,t,{clone:!1}):r}const qd={xs:0,sm:600,md:900,lg:1200,xl:1536},O_={keys:["xs","sm","md","lg","xl"],up:r=>`@media (min-width:${qd[r]}px)`},wB={containerQueries:r=>({up:t=>{let e=typeof t=="number"?t:qd[t]||t;return typeof e=="number"&&(e=`${e}px`),r?`@container ${r} (min-width:${e})`:`@container (min-width:${e})`}})};function Vi(r,t,e){const n=r.theme||{};if(Array.isArray(t)){const o=n.breakpoints||O_;return t.reduce((c,u,f)=>(c[o.up(o.keys[f])]=e(t[f]),c),{})}if(typeof t=="object"){const o=n.breakpoints||O_;return Object.keys(t).reduce((c,u)=>{if(vB(o.keys,u)){const f=bB(n.containerQueries?n:wB,u);f&&(c[f]=e(t[u],u))}else if(Object.keys(o.values||qd).includes(u)){const f=o.up(u);c[f]=e(t[u],u)}else{const f=u;c[f]=t[f]}return c},{})}return e(t)}function _B(r={}){return r.keys?.reduce((e,n)=>{const s=r.up(n);return e[s]={},e},{})||{}}function A_(r,t){return r.reduce((e,n)=>{const s=e[n];return(!s||Object.keys(s).length===0)&&delete e[n],e},t)}function Kd(r){if(typeof r!="string")throw new Error(Ma(7));return r.charAt(0).toUpperCase()+r.slice(1)}function Qd(r,t,e=!0){if(!t||typeof t!="string")return null;if(r&&r.vars&&e){const n=`vars.${t}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,r);if(n!=null)return n}return t.split(".").reduce((n,s)=>n&&n[s]!=null?n[s]:null,r)}function bd(r,t,e,n=e){let s;return typeof r=="function"?s=r(e):Array.isArray(r)?s=r[e]||n:s=Qd(r,e)||n,t&&(s=t(s,n,r)),s}function be(r){const{prop:t,cssProperty:e=r.prop,themeKey:n,transform:s}=r,o=c=>{if(c[t]==null)return null;const u=c[t],f=c.theme,d=Qd(f,n)||{};return Vi(c,u,y=>{let v=bd(d,s,y);return y===v&&typeof y=="string"&&(v=bd(d,s,`${t}${y==="default"?"":Kd(y)}`,y)),e===!1?v:{[e]:v}})};return o.propTypes={},o.filterProps=[t],o}function CB(r){const t={};return e=>(t[e]===void 0&&(t[e]=r(e)),t[e])}const TB={m:"margin",p:"padding"},EB={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},D_={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},OB=CB(r=>{if(r.length>2)if(D_[r])r=D_[r];else return[r];const[t,e]=r.split(""),n=TB[t],s=EB[e]||"";return Array.isArray(s)?s.map(o=>n+o):[n+s]}),dv=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],gv=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...dv,...gv];function Eu(r,t,e,n){const s=Qd(r,t,!0)??e;return typeof s=="number"||typeof s=="string"?o=>typeof o=="string"?o:typeof s=="string"?s.startsWith("var(")&&o===0?0:s.startsWith("var(")&&o===1?s:`calc(${o} * ${s})`:s*o:Array.isArray(s)?o=>{if(typeof o=="string")return o;const c=Math.abs(o),u=s[c];return o>=0?u:typeof u=="number"?-u:typeof u=="string"&&u.startsWith("var(")?`calc(-1 * ${u})`:`-${u}`}:typeof s=="function"?s:()=>{}}function pv(r){return Eu(r,"spacing",8)}function Ou(r,t){return typeof t=="string"||t==null?t:r(t)}function AB(r,t){return e=>r.reduce((n,s)=>(n[s]=Ou(t,e),n),{})}function DB(r,t,e,n){if(!t.includes(e))return null;const s=OB(e),o=AB(s,n),c=r[e];return Vi(r,c,o)}function bE(r,t){const e=pv(r.theme);return Object.keys(r).map(n=>DB(r,t,n,e)).reduce(zc,{})}function he(r){return bE(r,dv)}he.propTypes={};he.filterProps=dv;function fe(r){return bE(r,gv)}fe.propTypes={};fe.filterProps=gv;function SE(r=8,t=pv({spacing:r})){if(r.mui)return r;const e=(...n)=>(n.length===0?[1]:n).map(o=>{const c=t(o);return typeof c=="number"?`${c}px`:c}).join(" ");return e.mui=!0,e}function Zd(...r){const t=r.reduce((n,s)=>(s.filterProps.forEach(o=>{n[o]=s}),n),{}),e=n=>Object.keys(n).reduce((s,o)=>t[o]?zc(s,t[o](n)):s,{});return e.propTypes={},e.filterProps=r.reduce((n,s)=>n.concat(s.filterProps),[]),e}function tr(r){return typeof r!="number"?r:`${r}px solid`}function cr(r,t){return be({prop:r,themeKey:"borders",transform:t})}const kB=cr("border",tr),MB=cr("borderTop",tr),jB=cr("borderRight",tr),RB=cr("borderBottom",tr),LB=cr("borderLeft",tr),NB=cr("borderColor"),BB=cr("borderTopColor"),zB=cr("borderRightColor"),UB=cr("borderBottomColor"),FB=cr("borderLeftColor"),PB=cr("outline",tr),HB=cr("outlineColor"),Jd=r=>{if(r.borderRadius!==void 0&&r.borderRadius!==null){const t=Eu(r.theme,"shape.borderRadius",4),e=n=>({borderRadius:Ou(t,n)});return Vi(r,r.borderRadius,e)}return null};Jd.propTypes={};Jd.filterProps=["borderRadius"];Zd(kB,MB,jB,RB,LB,NB,BB,zB,UB,FB,Jd,PB,HB);const tg=r=>{if(r.gap!==void 0&&r.gap!==null){const t=Eu(r.theme,"spacing",8),e=n=>({gap:Ou(t,n)});return Vi(r,r.gap,e)}return null};tg.propTypes={};tg.filterProps=["gap"];const eg=r=>{if(r.columnGap!==void 0&&r.columnGap!==null){const t=Eu(r.theme,"spacing",8),e=n=>({columnGap:Ou(t,n)});return Vi(r,r.columnGap,e)}return null};eg.propTypes={};eg.filterProps=["columnGap"];const ng=r=>{if(r.rowGap!==void 0&&r.rowGap!==null){const t=Eu(r.theme,"spacing",8),e=n=>({rowGap:Ou(t,n)});return Vi(r,r.rowGap,e)}return null};ng.propTypes={};ng.filterProps=["rowGap"];const YB=be({prop:"gridColumn"}),VB=be({prop:"gridRow"}),XB=be({prop:"gridAutoFlow"}),GB=be({prop:"gridAutoColumns"}),IB=be({prop:"gridAutoRows"}),$B=be({prop:"gridTemplateColumns"}),WB=be({prop:"gridTemplateRows"}),qB=be({prop:"gridTemplateAreas"}),KB=be({prop:"gridArea"});Zd(tg,eg,ng,YB,VB,XB,GB,IB,$B,WB,qB,KB);function Zo(r,t){return t==="grey"?t:r}const QB=be({prop:"color",themeKey:"palette",transform:Zo}),ZB=be({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Zo}),JB=be({prop:"backgroundColor",themeKey:"palette",transform:Zo});Zd(QB,ZB,JB);function Ln(r){return r<=1&&r!==0?`${r*100}%`:r}const t6=be({prop:"width",transform:Ln}),mv=r=>{if(r.maxWidth!==void 0&&r.maxWidth!==null){const t=e=>{const n=r.theme?.breakpoints?.values?.[e]||qd[e];return n?r.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${r.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Ln(e)}};return Vi(r,r.maxWidth,t)}return null};mv.filterProps=["maxWidth"];const e6=be({prop:"minWidth",transform:Ln}),n6=be({prop:"height",transform:Ln}),r6=be({prop:"maxHeight",transform:Ln}),i6=be({prop:"minHeight",transform:Ln});be({prop:"size",cssProperty:"width",transform:Ln});be({prop:"size",cssProperty:"height",transform:Ln});const s6=be({prop:"boxSizing"});Zd(t6,mv,e6,n6,r6,i6,s6);const rg={border:{themeKey:"borders",transform:tr},borderTop:{themeKey:"borders",transform:tr},borderRight:{themeKey:"borders",transform:tr},borderBottom:{themeKey:"borders",transform:tr},borderLeft:{themeKey:"borders",transform:tr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:tr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Jd},color:{themeKey:"palette",transform:Zo},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Zo},backgroundColor:{themeKey:"palette",transform:Zo},p:{style:fe},pt:{style:fe},pr:{style:fe},pb:{style:fe},pl:{style:fe},px:{style:fe},py:{style:fe},padding:{style:fe},paddingTop:{style:fe},paddingRight:{style:fe},paddingBottom:{style:fe},paddingLeft:{style:fe},paddingX:{style:fe},paddingY:{style:fe},paddingInline:{style:fe},paddingInlineStart:{style:fe},paddingInlineEnd:{style:fe},paddingBlock:{style:fe},paddingBlockStart:{style:fe},paddingBlockEnd:{style:fe},m:{style:he},mt:{style:he},mr:{style:he},mb:{style:he},ml:{style:he},mx:{style:he},my:{style:he},margin:{style:he},marginTop:{style:he},marginRight:{style:he},marginBottom:{style:he},marginLeft:{style:he},marginX:{style:he},marginY:{style:he},marginInline:{style:he},marginInlineStart:{style:he},marginInlineEnd:{style:he},marginBlock:{style:he},marginBlockStart:{style:he},marginBlockEnd:{style:he},displayPrint:{cssProperty:!1,transform:r=>({"@media print":{display:r}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:tg},rowGap:{style:ng},columnGap:{style:eg},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ln},maxWidth:{style:mv},minWidth:{transform:Ln},height:{transform:Ln},maxHeight:{transform:Ln},minHeight:{transform:Ln},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function a6(...r){const t=r.reduce((n,s)=>n.concat(Object.keys(s)),[]),e=new Set(t);return r.every(n=>e.size===Object.keys(n).length)}function o6(r,t){return typeof r=="function"?r(t):r}function l6(){function r(e,n,s,o){const c={[e]:n,theme:s},u=o[e];if(!u)return{[e]:n};const{cssProperty:f=e,themeKey:d,transform:g,style:y}=u;if(n==null)return null;if(d==="typography"&&n==="inherit")return{[e]:n};const v=Qd(s,d)||{};return y?y(c):Vi(c,n,S=>{let w=bd(v,g,S);return S===w&&typeof S=="string"&&(w=bd(v,g,`${e}${S==="default"?"":Kd(S)}`,S)),f===!1?w:{[f]:w}})}function t(e){const{sx:n,theme:s={},nested:o}=e||{};if(!n)return null;const c=s.unstable_sxConfig??rg;function u(f){let d=f;if(typeof f=="function")d=f(s);else if(typeof f!="object")return f;if(!d)return null;const g=_B(s.breakpoints),y=Object.keys(g);let v=g;return Object.keys(d).forEach(b=>{const S=o6(d[b],s);if(S!=null)if(typeof S=="object")if(c[b])v=zc(v,r(b,S,s,c));else{const w=Vi({theme:s},S,_=>({[b]:_}));a6(w,S)?v[b]=t({sx:S,theme:s,nested:!0}):v=zc(v,w)}else v=zc(v,r(b,S,s,c))}),!o&&s.modularCssLayers?{"@layer sx":E_(s,A_(y,v))}:E_(s,A_(y,v))}return Array.isArray(n)?n.map(u):u(n)}return t}const al=l6();al.filterProps=["sx"];function c6(r,t){const e=this;if(e.vars){if(!e.colorSchemes?.[r]||typeof e.getColorSchemeSelector!="function")return{};let n=e.getColorSchemeSelector(r);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return e.palette.mode===r?t:{}}function yv(r={},...t){const{breakpoints:e={},palette:n={},spacing:s,shape:o={},...c}=r,u=yB(e),f=SE(s);let d=Un({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:f,shape:{...xB,...o}},c);return d=SB(d),d.applyStyles=c6,d=t.reduce((g,y)=>Un(g,y),d),d.unstable_sxConfig={...rg,...c?.unstable_sxConfig},d.unstable_sx=function(y){return al({sx:y,theme:this})},d}function u6(r){return Object.keys(r).length===0}function h6(r=null){const t=M.useContext(mE);return!t||u6(t)?r:t}const f6=yv();function d6(r=f6){return h6(r)}const k_=r=>r,g6=()=>{let r=k_;return{configure(t){r=t},generate(t){return r(t)},reset(){r=k_}}},p6=g6();function xE(r){var t,e,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(t=0;t<s;t++)r[t]&&(e=xE(r[t]))&&(n&&(n+=" "),n+=e)}else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function ou(){for(var r,t,e=0,n="",s=arguments.length;e<s;e++)(r=arguments[e])&&(t=xE(r))&&(n&&(n+=" "),n+=t);return n}const m6={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function vv(r,t,e="Mui"){const n=m6[t];return n?`${e}-${n}`:`${p6.generate(r)}-${t}`}function wE(r,t,e="Mui"){const n={};return t.forEach(s=>{n[s]=vv(r,s,e)}),n}function _E(r){const{variants:t,...e}=r,n={variants:t,style:wa(e),isProcessed:!0};return n.style===e||t&&t.forEach(s=>{typeof s.style!="function"&&(s.style=wa(s.style))}),n}const y6=yv();function h0(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}function va(r,t){return t&&r&&typeof r=="object"&&r.styles&&!r.styles.startsWith("@layer")&&(r.styles=`@layer ${t}{${String(r.styles)}}`),r}function v6(r){return r?(t,e)=>e[r]:null}function b6(r,t,e){r.theme=w6(r.theme)?e:r.theme[t]||r.theme}function Yf(r,t,e){const n=typeof t=="function"?t(r):t;if(Array.isArray(n))return n.flatMap(s=>Yf(r,s,e));if(Array.isArray(n?.variants)){let s;if(n.isProcessed)s=e?va(n.style,e):n.style;else{const{variants:o,...c}=n;s=e?va(wa(c),e):c}return CE(r,n.variants,[s],e)}return n?.isProcessed?e?va(wa(n.style),e):n.style:e?va(wa(n),e):n}function CE(r,t,e=[],n=void 0){let s;t:for(let o=0;o<t.length;o+=1){const c=t[o];if(typeof c.props=="function"){if(s??={...r,...r.ownerState,ownerState:r.ownerState},!c.props(s))continue}else for(const u in c.props)if(r[u]!==c.props[u]&&r.ownerState?.[u]!==c.props[u])continue t;typeof c.style=="function"?(s??={...r,...r.ownerState,ownerState:r.ownerState},e.push(n?va(wa(c.style(s)),n):c.style(s))):e.push(n?va(wa(c.style),n):c.style)}return e}function S6(r={}){const{themeId:t,defaultTheme:e=y6,rootShouldForwardProp:n=h0,slotShouldForwardProp:s=h0}=r;function o(u){b6(u,t,e)}return(u,f={})=>{dB(u,z=>z.filter(U=>U!==al));const{name:d,slot:g,skipVariantsResolver:y,skipSx:v,overridesResolver:b=v6(C6(g)),...S}=f,w=d&&d.startsWith("Mui")||g?"components":"custom",_=y!==void 0?y:g&&g!=="Root"&&g!=="root"||!1,O=v||!1;let k=h0;g==="Root"||g==="root"?k=n:g?k=s:_6(u)&&(k=void 0);const B=fB(u,{shouldForwardProp:k,label:x6(),...S}),R=z=>{if(z.__emotion_real===z)return z;if(typeof z=="function")return function(q){return Yf(q,z,q.theme.modularCssLayers?w:void 0)};if(Oi(z)){const U=_E(z);return function(rt){return U.variants?Yf(rt,U,rt.theme.modularCssLayers?w:void 0):rt.theme.modularCssLayers?va(U.style,w):U.style}}return z},F=(...z)=>{const U=[],q=z.map(R),rt=[];if(U.push(o),d&&b&&rt.push(function(X){const j=X.theme.components?.[d]?.styleOverrides;if(!j)return null;const A={};for(const P in j)A[P]=Yf(X,j[P],X.theme.modularCssLayers?"theme":void 0);return b(X,A)}),d&&!_&&rt.push(function(X){const j=X.theme?.components?.[d]?.variants;return j?CE(X,j,[],X.theme.modularCssLayers?"theme":void 0):null}),O||rt.push(al),Array.isArray(q[0])){const E=q.shift(),X=new Array(U.length).fill(""),T=new Array(rt.length).fill("");let j;j=[...X,...E,...T],j.raw=[...X,...E.raw,...T],U.unshift(j)}const lt=[...U,...q,...rt],ct=B(...lt);return u.muiName&&(ct.muiName=u.muiName),ct};return B.withConfig&&(F.withConfig=B.withConfig),F}}function x6(r,t){return void 0}function w6(r){for(const t in r)return!1;return!0}function _6(r){return typeof r=="string"&&r.charCodeAt(0)>96}function C6(r){return r&&r.charAt(0).toLowerCase()+r.slice(1)}function K0(r,t,e=!1){const n={...t};for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)){const o=s;if(o==="components"||o==="slots")n[o]={...r[o],...n[o]};else if(o==="componentsProps"||o==="slotProps"){const c=r[o],u=t[o];if(!u)n[o]=c||{};else if(!c)n[o]=u;else{n[o]={...u};for(const f in c)if(Object.prototype.hasOwnProperty.call(c,f)){const d=f;n[o][d]=K0(c[d],u[d],e)}}}else o==="className"&&e&&t.className?n.className=ou(r?.className,t?.className):o==="style"&&e&&t.style?n.style={...r?.style,...t?.style}:n[o]===void 0&&(n[o]=r[o])}return n}const lu=typeof window<"u"?M.useLayoutEffect:M.useEffect;function T6(r,t=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(r,e))}function bv(r,t=0,e=1){return T6(r,t,e)}function E6(r){r=r.slice(1);const t=new RegExp(`.{1,${r.length>=6?2:1}}`,"g");let e=r.match(t);return e&&e[0].length===1&&(e=e.map(n=>n+n)),e?`rgb${e.length===4?"a":""}(${e.map((n,s)=>s<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Ns(r){if(r.type)return r;if(r.charAt(0)==="#")return Ns(E6(r));const t=r.indexOf("("),e=r.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(e))throw new Error(Ma(9,r));let n=r.substring(t+1,r.length-1),s;if(e==="color"){if(n=n.split(" "),s=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(Ma(10,s))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:e,values:n,colorSpace:s}}const O6=r=>{const t=Ns(r);return t.values.slice(0,3).map((e,n)=>t.type.includes("hsl")&&n!==0?`${e}%`:e).join(" ")},Ec=(r,t)=>{try{return O6(r)}catch{return r}};function ig(r){const{type:t,colorSpace:e}=r;let{values:n}=r;return t.includes("rgb")?n=n.map((s,o)=>o<3?parseInt(s,10):s):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${e} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function TE(r){r=Ns(r);const{values:t}=r,e=t[0],n=t[1]/100,s=t[2]/100,o=n*Math.min(s,1-s),c=(d,g=(d+e/30)%12)=>s-o*Math.max(Math.min(g-3,9-g,1),-1);let u="rgb";const f=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return r.type==="hsla"&&(u+="a",f.push(t[3])),ig({type:u,values:f})}function Q0(r){r=Ns(r);let t=r.type==="hsl"||r.type==="hsla"?Ns(TE(r)).values:r.values;return t=t.map(e=>(r.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function A6(r,t){const e=Q0(r),n=Q0(t);return(Math.max(e,n)+.05)/(Math.min(e,n)+.05)}function EE(r,t){return r=Ns(r),t=bv(t),(r.type==="rgb"||r.type==="hsl")&&(r.type+="a"),r.type==="color"?r.values[3]=`/${t}`:r.values[3]=t,ig(r)}function ca(r,t,e){try{return EE(r,t)}catch{return r}}function sg(r,t){if(r=Ns(r),t=bv(t),r.type.includes("hsl"))r.values[2]*=1-t;else if(r.type.includes("rgb")||r.type.includes("color"))for(let e=0;e<3;e+=1)r.values[e]*=1-t;return ig(r)}function Xt(r,t,e){try{return sg(r,t)}catch{return r}}function ag(r,t){if(r=Ns(r),t=bv(t),r.type.includes("hsl"))r.values[2]+=(100-r.values[2])*t;else if(r.type.includes("rgb"))for(let e=0;e<3;e+=1)r.values[e]+=(255-r.values[e])*t;else if(r.type.includes("color"))for(let e=0;e<3;e+=1)r.values[e]+=(1-r.values[e])*t;return ig(r)}function Gt(r,t,e){try{return ag(r,t)}catch{return r}}function D6(r,t=.15){return Q0(r)>.5?sg(r,t):ag(r,t)}function wf(r,t,e){try{return D6(r,t)}catch{return r}}const k6=M.createContext(),OE=()=>M.useContext(k6)??!1,M6=M.createContext(void 0);function j6(r){const{theme:t,name:e,props:n}=r;if(!t||!t.components||!t.components[e])return n;const s=t.components[e];return s.defaultProps?K0(s.defaultProps,n,t.components.mergeClassNameAndStyle):!s.styleOverrides&&!s.variants?K0(s,n,t.components.mergeClassNameAndStyle):n}function R6({props:r,name:t}){const e=M.useContext(M6);return j6({props:r,name:t,theme:{components:e}})}let M_=0;function L6(r){const[t,e]=M.useState(r),n=r||t;return M.useEffect(()=>{t==null&&(M_+=1,e(`mui-${M_}`))},[t]),n}const N6={...p0},j_=N6.useId;function B6(r){if(j_!==void 0){const t=j_();return r??t}return L6(r)}const R_={theme:void 0};function z6(r){let t,e;return function(s){let o=t;return(o===void 0||s.theme!==e)&&(R_.theme=s.theme,o=_E(r(R_)),t=o,e=s.theme),o}}function U6(r=""){function t(...n){if(!n.length)return"";const s=n[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${r?`${r}-`:""}${s}${t(...n.slice(1))})`:`, ${s}`}return(n,...s)=>`var(--${r?`${r}-`:""}${n}${t(...s)})`}const L_=(r,t,e,n=[])=>{let s=r;t.forEach((o,c)=>{c===t.length-1?Array.isArray(s)?s[Number(o)]=e:s&&typeof s=="object"&&(s[o]=e):s&&typeof s=="object"&&(s[o]||(s[o]=n.includes(o)?[]:{}),s=s[o])})},F6=(r,t,e)=>{function n(s,o=[],c=[]){Object.entries(s).forEach(([u,f])=>{(!e||e&&!e([...o,u]))&&f!=null&&(typeof f=="object"&&Object.keys(f).length>0?n(f,[...o,u],Array.isArray(f)?[...c,u]:c):t([...o,u],f,c))})}n(r)},P6=(r,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>r.includes(n))||r[r.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function f0(r,t){const{prefix:e,shouldSkipGeneratingVar:n}=t||{},s={},o={},c={};return F6(r,(u,f,d)=>{if((typeof f=="string"||typeof f=="number")&&(!n||!n(u,f))){const g=`--${e?`${e}-`:""}${u.join("-")}`,y=P6(u,f);Object.assign(s,{[g]:y}),L_(o,u,`var(${g})`,d),L_(c,u,`var(${g}, ${y})`,d)}},u=>u[0]==="vars"),{css:s,vars:o,varsWithDefaults:c}}function H6(r,t={}){const{getSelector:e=O,disableCssColorScheme:n,colorSchemeSelector:s,enableContrastVars:o}=t,{colorSchemes:c={},components:u,defaultColorScheme:f="light",...d}=r,{vars:g,css:y,varsWithDefaults:v}=f0(d,t);let b=v;const S={},{[f]:w,..._}=c;if(Object.entries(_||{}).forEach(([R,F])=>{const{vars:z,css:U,varsWithDefaults:q}=f0(F,t);b=Un(b,q),S[R]={css:U,vars:z}}),w){const{css:R,vars:F,varsWithDefaults:z}=f0(w,t);b=Un(b,z),S[f]={css:R,vars:F}}function O(R,F){let z=s;if(s==="class"&&(z=".%s"),s==="data"&&(z="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(z=`[${s}="%s"]`),R){if(z==="media")return r.defaultColorScheme===R?":root":{[`@media (prefers-color-scheme: ${c[R]?.palette?.mode||R})`]:{":root":F}};if(z)return r.defaultColorScheme===R?`:root, ${z.replace("%s",String(R))}`:z.replace("%s",String(R))}return":root"}return{vars:b,generateThemeVars:()=>{let R={...g};return Object.entries(S).forEach(([,{vars:F}])=>{R=Un(R,F)}),R},generateStyleSheets:()=>{const R=[],F=r.defaultColorScheme||"light";function z(rt,lt){Object.keys(lt).length&&R.push(typeof rt=="string"?{[rt]:{...lt}}:rt)}z(e(void 0,{...y}),y);const{[F]:U,...q}=S;if(U){const{css:rt}=U,lt=c[F]?.palette?.mode,ct=!n&&lt?{colorScheme:lt,...rt}:{...rt};z(e(F,{...ct}),ct)}return Object.entries(q).forEach(([rt,{css:lt}])=>{const ct=c[rt]?.palette?.mode,E=!n&&ct?{colorScheme:ct,...lt}:{...lt};z(e(rt,{...E}),E)}),o&&R.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),R}}}function Y6(r){return function(e){return r==="media"?`@media (prefers-color-scheme: ${e})`:r?r.startsWith("data-")&&!r.includes("%s")?`[${r}="${e}"] &`:r==="class"?`.${e} &`:r==="data"?`[data-${e}] &`:`${r.replace("%s",e)} &`:"&"}}function AE(r,t,e=void 0){const n={};for(const s in r){const o=r[s];let c="",u=!0;for(let f=0;f<o.length;f+=1){const d=o[f];d&&(c+=(u===!0?"":" ")+t(d),u=!1,e&&e[d]&&(c+=" "+e[d]))}n[s]=c}return n}function DE(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ru.white,default:ru.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const kE=DE();function ME(){return{text:{primary:ru.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ru.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Z0=ME();function N_(r,t,e,n){const s=n.light||n,o=n.dark||n*1.5;r[t]||(r.hasOwnProperty(e)?r[t]=r[e]:t==="light"?r.light=ag(r.main,s):t==="dark"&&(r.dark=sg(r.main,o)))}function B_(r,t,e,n,s){const o=s.light||s,c=s.dark||s*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=`color-mix(in ${r}, ${t.main}, #fff ${(o*100).toFixed(0)}%)`:e==="dark"&&(t.dark=`color-mix(in ${r}, ${t.main}, #000 ${(c*100).toFixed(0)}%)`))}function V6(r="light"){return r==="dark"?{main:Ro[200],light:Ro[50],dark:Ro[400]}:{main:Ro[700],light:Ro[400],dark:Ro[800]}}function X6(r="light"){return r==="dark"?{main:jo[200],light:jo[50],dark:jo[400]}:{main:jo[500],light:jo[300],dark:jo[700]}}function G6(r="light"){return r==="dark"?{main:Mo[500],light:Mo[300],dark:Mo[700]}:{main:Mo[700],light:Mo[400],dark:Mo[800]}}function I6(r="light"){return r==="dark"?{main:Lo[400],light:Lo[300],dark:Lo[700]}:{main:Lo[700],light:Lo[500],dark:Lo[900]}}function $6(r="light"){return r==="dark"?{main:No[400],light:No[300],dark:No[700]}:{main:No[800],light:No[500],dark:No[900]}}function W6(r="light"){return r==="dark"?{main:Sc[400],light:Sc[300],dark:Sc[700]}:{main:"#ed6c02",light:Sc[500],dark:Sc[900]}}function q6(r){return`oklch(from ${r} var(--__l) 0 h / var(--__a))`}function Sv(r){const{mode:t="light",contrastThreshold:e=3,tonalOffset:n=.2,colorSpace:s,...o}=r,c=r.primary||V6(t),u=r.secondary||X6(t),f=r.error||G6(t),d=r.info||I6(t),g=r.success||$6(t),y=r.warning||W6(t);function v(_){return s?q6(_):A6(_,Z0.text.primary)>=e?Z0.text.primary:kE.text.primary}const b=({color:_,name:O,mainShade:k=500,lightShade:B=300,darkShade:R=700})=>{if(_={..._},!_.main&&_[k]&&(_.main=_[k]),!_.hasOwnProperty("main"))throw new Error(Ma(11,O?` (${O})`:"",k));if(typeof _.main!="string")throw new Error(Ma(12,O?` (${O})`:"",JSON.stringify(_.main)));return s?(B_(s,_,"light",B,n),B_(s,_,"dark",R,n)):(N_(_,"light",B,n),N_(_,"dark",R,n)),_.contrastText||(_.contrastText=v(_.main)),_};let S;return t==="light"?S=DE():t==="dark"&&(S=ME()),Un({common:{...ru},mode:t,primary:b({color:c,name:"primary"}),secondary:b({color:u,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:f,name:"error"}),warning:b({color:y,name:"warning"}),info:b({color:d,name:"info"}),success:b({color:g,name:"success"}),grey:yN,contrastThreshold:e,getContrastText:v,augmentColor:b,tonalOffset:n,...S},o)}function K6(r){const t={};return Object.entries(r).forEach(n=>{const[s,o]=n;typeof o=="object"&&(t[s]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),t}function Q6(r,t){return{toolbar:{minHeight:56,[r.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[r.up("sm")]:{minHeight:64}},...t}}function Z6(r){return Math.round(r*1e5)/1e5}const z_={textTransform:"uppercase"},U_='"Roboto", "Helvetica", "Arial", sans-serif';function J6(r,t){const{fontFamily:e=U_,fontSize:n=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:f=16,allVariants:d,pxToRem:g,...y}=typeof t=="function"?t(r):t,v=n/14,b=g||(_=>`${_/f*v}rem`),S=(_,O,k,B,R)=>({fontFamily:e,fontWeight:_,fontSize:b(O),lineHeight:k,...e===U_?{letterSpacing:`${Z6(B/O)}em`}:{},...R,...d}),w={h1:S(s,96,1.167,-1.5),h2:S(s,60,1.2,-.5),h3:S(o,48,1.167,0),h4:S(o,34,1.235,.25),h5:S(o,24,1.334,0),h6:S(c,20,1.6,.15),subtitle1:S(o,16,1.75,.15),subtitle2:S(c,14,1.57,.1),body1:S(o,16,1.5,.15),body2:S(o,14,1.43,.15),button:S(c,14,1.75,.4,z_),caption:S(o,12,1.66,.4),overline:S(o,12,2.66,1,z_),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Un({htmlFontSize:f,pxToRem:b,fontFamily:e,fontSize:n,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:c,fontWeightBold:u,...w},y,{clone:!1})}const tz=.2,ez=.14,nz=.12;function re(...r){return[`${r[0]}px ${r[1]}px ${r[2]}px ${r[3]}px rgba(0,0,0,${tz})`,`${r[4]}px ${r[5]}px ${r[6]}px ${r[7]}px rgba(0,0,0,${ez})`,`${r[8]}px ${r[9]}px ${r[10]}px ${r[11]}px rgba(0,0,0,${nz})`].join(",")}const rz=["none",re(0,2,1,-1,0,1,1,0,0,1,3,0),re(0,3,1,-2,0,2,2,0,0,1,5,0),re(0,3,3,-2,0,3,4,0,0,1,8,0),re(0,2,4,-1,0,4,5,0,0,1,10,0),re(0,3,5,-1,0,5,8,0,0,1,14,0),re(0,3,5,-1,0,6,10,0,0,1,18,0),re(0,4,5,-2,0,7,10,1,0,2,16,1),re(0,5,5,-3,0,8,10,1,0,3,14,2),re(0,5,6,-3,0,9,12,1,0,3,16,2),re(0,6,6,-3,0,10,14,1,0,4,18,3),re(0,6,7,-4,0,11,15,1,0,4,20,3),re(0,7,8,-4,0,12,17,2,0,5,22,4),re(0,7,8,-4,0,13,19,2,0,5,24,4),re(0,7,9,-4,0,14,21,2,0,5,26,4),re(0,8,9,-5,0,15,22,2,0,6,28,5),re(0,8,10,-5,0,16,24,2,0,6,30,5),re(0,8,11,-5,0,17,26,2,0,6,32,5),re(0,9,11,-5,0,18,28,2,0,7,34,6),re(0,9,12,-6,0,19,29,2,0,7,36,6),re(0,10,13,-6,0,20,31,3,0,8,38,7),re(0,10,13,-6,0,21,33,3,0,8,40,7),re(0,10,14,-6,0,22,35,3,0,8,42,7),re(0,11,14,-7,0,23,36,3,0,9,44,8),re(0,11,15,-7,0,24,38,3,0,9,46,8)],iz={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},sz={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function F_(r){return`${Math.round(r)}ms`}function az(r){if(!r)return 0;const t=r/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function oz(r){const t={...iz,...r.easing},e={...sz,...r.duration};return{getAutoHeightDuration:az,create:(s=["all"],o={})=>{const{duration:c=e.standard,easing:u=t.easeInOut,delay:f=0,...d}=o;return(Array.isArray(s)?s:[s]).map(g=>`${g} ${typeof c=="string"?c:F_(c)} ${u} ${typeof f=="string"?f:F_(f)}`).join(",")},...r,easing:t,duration:e}}const lz={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function cz(r){return Oi(r)||typeof r>"u"||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||Array.isArray(r)}function jE(r={}){const t={...r};function e(n){const s=Object.entries(n);for(let o=0;o<s.length;o++){const[c,u]=s[o];!cz(u)||c.startsWith("unstable_")?delete n[c]:Oi(u)&&(n[c]={...u},e(n[c]))}}return e(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function P_(r){return typeof r=="number"?`${(r*100).toFixed(0)}%`:`calc((${r}) * 100%)`}const uz=r=>{if(!Number.isNaN(+r))return+r;const t=r.match(/\d*\.?\d+/g);if(!t)return 0;let e=0;for(let n=0;n<t.length;n+=1)e+=+t[n];return e};function hz(r){Object.assign(r,{alpha(t,e){const n=this||r;return n.colorSpace?`oklch(from ${t} l c h / ${typeof e=="string"?`calc(${e})`:e})`:n.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof e=="string"?`calc(${e})`:e})`:EE(t,uz(e))},lighten(t,e){const n=this||r;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #fff ${P_(e)})`:ag(t,e)},darken(t,e){const n=this||r;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #000 ${P_(e)})`:sg(t,e)}})}function J0(r={},...t){const{breakpoints:e,mixins:n={},spacing:s,palette:o={},transitions:c={},typography:u={},shape:f,colorSpace:d,...g}=r;if(r.vars&&r.generateThemeVars===void 0)throw new Error(Ma(20));const y=Sv({...o,colorSpace:d}),v=yv(r);let b=Un(v,{mixins:Q6(v.breakpoints,n),palette:y,shadows:rz.slice(),typography:J6(y,u),transitions:oz(c),zIndex:{...lz}});return b=Un(b,g),b=t.reduce((S,w)=>Un(S,w),b),b.unstable_sxConfig={...rg,...g?.unstable_sxConfig},b.unstable_sx=function(w){return al({sx:w,theme:this})},b.toRuntimeSource=jE,hz(b),b}function fz(r){let t;return r<1?t=5.11916*r**2:t=4.5*Math.log(r+1)+2,Math.round(t*10)/1e3}const dz=[...Array(25)].map((r,t)=>{if(t===0)return"none";const e=fz(t);return`linear-gradient(rgba(255 255 255 / ${e}), rgba(255 255 255 / ${e}))`});function RE(r){return{inputPlaceholder:r==="dark"?.5:.42,inputUnderline:r==="dark"?.7:.42,switchTrackDisabled:r==="dark"?.2:.12,switchTrack:r==="dark"?.3:.38}}function LE(r){return r==="dark"?dz:[]}function gz(r){const{palette:t={mode:"light"},opacity:e,overlays:n,colorSpace:s,...o}=r,c=Sv({...t,colorSpace:s});return{palette:c,opacity:{...RE(c.mode),...e},overlays:n||LE(c.mode),...o}}function pz(r){return!!r[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!r[0].match(/sxConfig$/)||r[0]==="palette"&&!!r[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const mz=r=>[...[...Array(25)].map((t,e)=>`--${r?`${r}-`:""}overlays-${e}`),`--${r?`${r}-`:""}palette-AppBar-darkBg`,`--${r?`${r}-`:""}palette-AppBar-darkColor`],yz=r=>(t,e)=>{const n=r.rootSelector||":root",s=r.colorSchemeSelector;let o=s;if(s==="class"&&(o=".%s"),s==="data"&&(o="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(o=`[${s}="%s"]`),r.defaultColorScheme===t){if(t==="dark"){const c={};return mz(r.cssVarPrefix).forEach(u=>{c[u]=e[u],delete e[u]}),o==="media"?{[n]:e,"@media (prefers-color-scheme: dark)":{[n]:c}}:o?{[o.replace("%s",t)]:c,[`${n}, ${o.replace("%s",t)}`]:e}:{[n]:{...e,...c}}}if(o&&o!=="media")return`${n}, ${o.replace("%s",String(t))}`}else if(t){if(o==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:e}};if(o)return o.replace("%s",String(t))}return n};function vz(r,t){t.forEach(e=>{r[e]||(r[e]={})})}function et(r,t,e){!r[t]&&e&&(r[t]=e)}function Oc(r){return typeof r!="string"||!r.startsWith("hsl")?r:TE(r)}function Ci(r,t){`${t}Channel`in r||(r[`${t}Channel`]=Ec(Oc(r[t])))}function bz(r){return typeof r=="number"?`${r}px`:typeof r=="string"||typeof r=="function"||Array.isArray(r)?r:"8px"}const Rr=r=>{try{return r()}catch{}},Sz=(r="mui")=>U6(r);function d0(r,t,e,n,s){if(!e)return;e=e===!0?{}:e;const o=s==="dark"?"dark":"light";if(!n){t[s]=gz({...e,palette:{mode:o,...e?.palette},colorSpace:r});return}const{palette:c,...u}=J0({...n,palette:{mode:o,...e?.palette},colorSpace:r});return t[s]={...e,palette:c,opacity:{...RE(o),...e?.opacity},overlays:e?.overlays||LE(o)},u}function xz(r={},...t){const{colorSchemes:e={light:!0},defaultColorScheme:n,disableCssColorScheme:s=!1,cssVarPrefix:o="mui",nativeColor:c=!1,shouldSkipGeneratingVar:u=pz,colorSchemeSelector:f=e.light&&e.dark?"media":void 0,rootSelector:d=":root",...g}=r,y=Object.keys(e)[0],v=n||(e.light&&y!=="light"?"light":y),b=Sz(o),{[v]:S,light:w,dark:_,...O}=e,k={...O};let B=S;if((v==="dark"&&!("dark"in e)||v==="light"&&!("light"in e))&&(B=!0),!B)throw new Error(Ma(21,v));let R;c&&(R="oklch");const F=d0(R,k,B,g,v);w&&!k.light&&d0(R,k,w,void 0,"light"),_&&!k.dark&&d0(R,k,_,void 0,"dark");let z={defaultColorScheme:v,...F,cssVarPrefix:o,colorSchemeSelector:f,rootSelector:d,getCssVar:b,colorSchemes:k,font:{...K6(F.typography),...F.font},spacing:bz(g.spacing)};Object.keys(z.colorSchemes).forEach(ct=>{const E=z.colorSchemes[ct].palette,X=j=>{const A=j.split("-"),P=A[1],I=A[2];return b(j,E[P][I])};E.mode==="light"&&(et(E.common,"background","#fff"),et(E.common,"onBackground","#000")),E.mode==="dark"&&(et(E.common,"background","#000"),et(E.common,"onBackground","#fff"));function T(j,A,P){if(R){let I;return j===ca&&(I=`transparent ${((1-P)*100).toFixed(0)}%`),j===Xt&&(I=`#000 ${(P*100).toFixed(0)}%`),j===Gt&&(I=`#fff ${(P*100).toFixed(0)}%`),`color-mix(in ${R}, ${A}, ${I})`}return j(A,P)}if(vz(E,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),E.mode==="light"){et(E.Alert,"errorColor",T(Xt,E.error.light,.6)),et(E.Alert,"infoColor",T(Xt,E.info.light,.6)),et(E.Alert,"successColor",T(Xt,E.success.light,.6)),et(E.Alert,"warningColor",T(Xt,E.warning.light,.6)),et(E.Alert,"errorFilledBg",X("palette-error-main")),et(E.Alert,"infoFilledBg",X("palette-info-main")),et(E.Alert,"successFilledBg",X("palette-success-main")),et(E.Alert,"warningFilledBg",X("palette-warning-main")),et(E.Alert,"errorFilledColor",Rr(()=>E.getContrastText(E.error.main))),et(E.Alert,"infoFilledColor",Rr(()=>E.getContrastText(E.info.main))),et(E.Alert,"successFilledColor",Rr(()=>E.getContrastText(E.success.main))),et(E.Alert,"warningFilledColor",Rr(()=>E.getContrastText(E.warning.main))),et(E.Alert,"errorStandardBg",T(Gt,E.error.light,.9)),et(E.Alert,"infoStandardBg",T(Gt,E.info.light,.9)),et(E.Alert,"successStandardBg",T(Gt,E.success.light,.9)),et(E.Alert,"warningStandardBg",T(Gt,E.warning.light,.9)),et(E.Alert,"errorIconColor",X("palette-error-main")),et(E.Alert,"infoIconColor",X("palette-info-main")),et(E.Alert,"successIconColor",X("palette-success-main")),et(E.Alert,"warningIconColor",X("palette-warning-main")),et(E.AppBar,"defaultBg",X("palette-grey-100")),et(E.Avatar,"defaultBg",X("palette-grey-400")),et(E.Button,"inheritContainedBg",X("palette-grey-300")),et(E.Button,"inheritContainedHoverBg",X("palette-grey-A100")),et(E.Chip,"defaultBorder",X("palette-grey-400")),et(E.Chip,"defaultAvatarColor",X("palette-grey-700")),et(E.Chip,"defaultIconColor",X("palette-grey-700")),et(E.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),et(E.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),et(E.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),et(E.LinearProgress,"primaryBg",T(Gt,E.primary.main,.62)),et(E.LinearProgress,"secondaryBg",T(Gt,E.secondary.main,.62)),et(E.LinearProgress,"errorBg",T(Gt,E.error.main,.62)),et(E.LinearProgress,"infoBg",T(Gt,E.info.main,.62)),et(E.LinearProgress,"successBg",T(Gt,E.success.main,.62)),et(E.LinearProgress,"warningBg",T(Gt,E.warning.main,.62)),et(E.Skeleton,"bg",R?T(ca,E.text.primary,.11):`rgba(${X("palette-text-primaryChannel")} / 0.11)`),et(E.Slider,"primaryTrack",T(Gt,E.primary.main,.62)),et(E.Slider,"secondaryTrack",T(Gt,E.secondary.main,.62)),et(E.Slider,"errorTrack",T(Gt,E.error.main,.62)),et(E.Slider,"infoTrack",T(Gt,E.info.main,.62)),et(E.Slider,"successTrack",T(Gt,E.success.main,.62)),et(E.Slider,"warningTrack",T(Gt,E.warning.main,.62));const j=R?T(Xt,E.background.default,.6825):wf(E.background.default,.8);et(E.SnackbarContent,"bg",j),et(E.SnackbarContent,"color",Rr(()=>R?Z0.text.primary:E.getContrastText(j))),et(E.SpeedDialAction,"fabHoverBg",wf(E.background.paper,.15)),et(E.StepConnector,"border",X("palette-grey-400")),et(E.StepContent,"border",X("palette-grey-400")),et(E.Switch,"defaultColor",X("palette-common-white")),et(E.Switch,"defaultDisabledColor",X("palette-grey-100")),et(E.Switch,"primaryDisabledColor",T(Gt,E.primary.main,.62)),et(E.Switch,"secondaryDisabledColor",T(Gt,E.secondary.main,.62)),et(E.Switch,"errorDisabledColor",T(Gt,E.error.main,.62)),et(E.Switch,"infoDisabledColor",T(Gt,E.info.main,.62)),et(E.Switch,"successDisabledColor",T(Gt,E.success.main,.62)),et(E.Switch,"warningDisabledColor",T(Gt,E.warning.main,.62)),et(E.TableCell,"border",T(Gt,T(ca,E.divider,1),.88)),et(E.Tooltip,"bg",T(ca,E.grey[700],.92))}if(E.mode==="dark"){et(E.Alert,"errorColor",T(Gt,E.error.light,.6)),et(E.Alert,"infoColor",T(Gt,E.info.light,.6)),et(E.Alert,"successColor",T(Gt,E.success.light,.6)),et(E.Alert,"warningColor",T(Gt,E.warning.light,.6)),et(E.Alert,"errorFilledBg",X("palette-error-dark")),et(E.Alert,"infoFilledBg",X("palette-info-dark")),et(E.Alert,"successFilledBg",X("palette-success-dark")),et(E.Alert,"warningFilledBg",X("palette-warning-dark")),et(E.Alert,"errorFilledColor",Rr(()=>E.getContrastText(E.error.dark))),et(E.Alert,"infoFilledColor",Rr(()=>E.getContrastText(E.info.dark))),et(E.Alert,"successFilledColor",Rr(()=>E.getContrastText(E.success.dark))),et(E.Alert,"warningFilledColor",Rr(()=>E.getContrastText(E.warning.dark))),et(E.Alert,"errorStandardBg",T(Xt,E.error.light,.9)),et(E.Alert,"infoStandardBg",T(Xt,E.info.light,.9)),et(E.Alert,"successStandardBg",T(Xt,E.success.light,.9)),et(E.Alert,"warningStandardBg",T(Xt,E.warning.light,.9)),et(E.Alert,"errorIconColor",X("palette-error-main")),et(E.Alert,"infoIconColor",X("palette-info-main")),et(E.Alert,"successIconColor",X("palette-success-main")),et(E.Alert,"warningIconColor",X("palette-warning-main")),et(E.AppBar,"defaultBg",X("palette-grey-900")),et(E.AppBar,"darkBg",X("palette-background-paper")),et(E.AppBar,"darkColor",X("palette-text-primary")),et(E.Avatar,"defaultBg",X("palette-grey-600")),et(E.Button,"inheritContainedBg",X("palette-grey-800")),et(E.Button,"inheritContainedHoverBg",X("palette-grey-700")),et(E.Chip,"defaultBorder",X("palette-grey-700")),et(E.Chip,"defaultAvatarColor",X("palette-grey-300")),et(E.Chip,"defaultIconColor",X("palette-grey-300")),et(E.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),et(E.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),et(E.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),et(E.LinearProgress,"primaryBg",T(Xt,E.primary.main,.5)),et(E.LinearProgress,"secondaryBg",T(Xt,E.secondary.main,.5)),et(E.LinearProgress,"errorBg",T(Xt,E.error.main,.5)),et(E.LinearProgress,"infoBg",T(Xt,E.info.main,.5)),et(E.LinearProgress,"successBg",T(Xt,E.success.main,.5)),et(E.LinearProgress,"warningBg",T(Xt,E.warning.main,.5)),et(E.Skeleton,"bg",R?T(ca,E.text.primary,.13):`rgba(${X("palette-text-primaryChannel")} / 0.13)`),et(E.Slider,"primaryTrack",T(Xt,E.primary.main,.5)),et(E.Slider,"secondaryTrack",T(Xt,E.secondary.main,.5)),et(E.Slider,"errorTrack",T(Xt,E.error.main,.5)),et(E.Slider,"infoTrack",T(Xt,E.info.main,.5)),et(E.Slider,"successTrack",T(Xt,E.success.main,.5)),et(E.Slider,"warningTrack",T(Xt,E.warning.main,.5));const j=R?T(Gt,E.background.default,.985):wf(E.background.default,.98);et(E.SnackbarContent,"bg",j),et(E.SnackbarContent,"color",Rr(()=>R?kE.text.primary:E.getContrastText(j))),et(E.SpeedDialAction,"fabHoverBg",wf(E.background.paper,.15)),et(E.StepConnector,"border",X("palette-grey-600")),et(E.StepContent,"border",X("palette-grey-600")),et(E.Switch,"defaultColor",X("palette-grey-300")),et(E.Switch,"defaultDisabledColor",X("palette-grey-600")),et(E.Switch,"primaryDisabledColor",T(Xt,E.primary.main,.55)),et(E.Switch,"secondaryDisabledColor",T(Xt,E.secondary.main,.55)),et(E.Switch,"errorDisabledColor",T(Xt,E.error.main,.55)),et(E.Switch,"infoDisabledColor",T(Xt,E.info.main,.55)),et(E.Switch,"successDisabledColor",T(Xt,E.success.main,.55)),et(E.Switch,"warningDisabledColor",T(Xt,E.warning.main,.55)),et(E.TableCell,"border",T(Xt,T(ca,E.divider,1),.68)),et(E.Tooltip,"bg",T(ca,E.grey[700],.92))}Ci(E.background,"default"),Ci(E.background,"paper"),Ci(E.common,"background"),Ci(E.common,"onBackground"),Ci(E,"divider"),Object.keys(E).forEach(j=>{const A=E[j];j!=="tonalOffset"&&A&&typeof A=="object"&&(A.main&&et(E[j],"mainChannel",Ec(Oc(A.main))),A.light&&et(E[j],"lightChannel",Ec(Oc(A.light))),A.dark&&et(E[j],"darkChannel",Ec(Oc(A.dark))),A.contrastText&&et(E[j],"contrastTextChannel",Ec(Oc(A.contrastText))),j==="text"&&(Ci(E[j],"primary"),Ci(E[j],"secondary")),j==="action"&&(A.active&&Ci(E[j],"active"),A.selected&&Ci(E[j],"selected")))})}),z=t.reduce((ct,E)=>Un(ct,E),z);const U={prefix:o,disableCssColorScheme:s,shouldSkipGeneratingVar:u,getSelector:yz(z),enableContrastVars:c},{vars:q,generateThemeVars:rt,generateStyleSheets:lt}=H6(z,U);return z.vars=q,Object.entries(z.colorSchemes[z.defaultColorScheme]).forEach(([ct,E])=>{z[ct]=E}),z.generateThemeVars=rt,z.generateStyleSheets=lt,z.generateSpacing=function(){return SE(g.spacing,pv(this))},z.getColorSchemeSelector=Y6(f),z.spacing=z.generateSpacing(),z.shouldSkipGeneratingVar=u,z.unstable_sxConfig={...rg,...g?.unstable_sxConfig},z.unstable_sx=function(E){return al({sx:E,theme:this})},z.toRuntimeSource=jE,z}function H_(r,t,e){r.colorSchemes&&e&&(r.colorSchemes[t]={...e!==!0&&e,palette:Sv({...e===!0?{}:e.palette,mode:t})})}function wz(r={},...t){const{palette:e,cssVariables:n=!1,colorSchemes:s=e?void 0:{light:!0},defaultColorScheme:o=e?.mode,...c}=r,u=o||"light",f=s?.[u],d={...s,...e?{[u]:{...typeof f!="boolean"&&f,palette:e}}:void 0};if(n===!1){if(!("colorSchemes"in r))return J0(r,...t);let g=e;"palette"in r||d[u]&&(d[u]!==!0?g=d[u].palette:u==="dark"&&(g={mode:"dark"}));const y=J0({...r,palette:g},...t);return y.defaultColorScheme=u,y.colorSchemes=d,y.palette.mode==="light"&&(y.colorSchemes.light={...d.light!==!0&&d.light,palette:y.palette},H_(y,"dark",d.dark)),y.palette.mode==="dark"&&(y.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:y.palette},H_(y,"light",d.light)),y}return!e&&!("light"in d)&&u==="light"&&(d.light=!0),xz({...c,colorSchemes:d,defaultColorScheme:u,...typeof n!="boolean"&&n},...t)}const NE=wz();function BE(){const r=d6(NE);return r[rE]||r}function _z(r){return r!=="ownerState"&&r!=="theme"&&r!=="sx"&&r!=="as"}const Cz=r=>_z(r)&&r!=="classes",og=S6({themeId:rE,defaultTheme:NE,rootShouldForwardProp:Cz}),xv=z6;function zE(r){return R6(r)}function Y_(r){return r&&r.ownerDocument||document}function V_(r,t){typeof r=="function"?r(t):r&&(r.current=t)}function Tz(r){const{controlled:t,default:e}=r,{current:n}=M.useRef(t!==void 0),[s,o]=M.useState(e),c=n?t:s,u=M.useCallback(f=>{n||o(f)},[]);return[c,u]}function X_(r){const t=M.useRef(r);return lu(()=>{t.current=r}),M.useRef((...e)=>(0,t.current)(...e)).current}function ja(...r){const t=M.useRef(void 0),e=M.useCallback(n=>{const s=r.map(o=>{if(o==null)return null;if(typeof o=="function"){const c=o,u=c(n);return typeof u=="function"?u:()=>{c(null)}}return o.current=n,()=>{o.current=null}});return()=>{s.forEach(o=>o?.())}},r);return M.useMemo(()=>r.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=e(n))},r)}function Ez(r,t){if(r==null)return{};var e={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(t.indexOf(n)!==-1)continue;e[n]=r[n]}return e}function ty(r,t){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},ty(r,t)}function Oz(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,ty(r,t)}const G_={disabled:!1},UE=Nn.createContext(null);var Az=function(t){return t.scrollTop},Ac="unmounted",ha="exited",fa="entering",Po="entered",ey="exiting",Ki=(function(r){Oz(t,r);function t(n,s){var o;o=r.call(this,n,s)||this;var c=s,u=c&&!c.isMounting?n.enter:n.appear,f;return o.appearStatus=null,n.in?u?(f=ha,o.appearStatus=fa):f=Po:n.unmountOnExit||n.mountOnEnter?f=Ac:f=ha,o.state={status:f},o.nextCallback=null,o}t.getDerivedStateFromProps=function(s,o){var c=s.in;return c&&o.status===Ac?{status:ha}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(s){var o=null;if(s!==this.props){var c=this.state.status;this.props.in?c!==fa&&c!==Po&&(o=fa):(c===fa||c===Po)&&(o=ey)}this.updateStatus(!1,o)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var s=this.props.timeout,o,c,u;return o=c=u=s,s!=null&&typeof s!="number"&&(o=s.exit,c=s.enter,u=s.appear!==void 0?s.appear:c),{exit:o,enter:c,appear:u}},e.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===fa){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:Vh.findDOMNode(this);c&&Az(c)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ha&&this.setState({status:Ac})},e.performEnter=function(s){var o=this,c=this.props.enter,u=this.context?this.context.isMounting:s,f=this.props.nodeRef?[u]:[Vh.findDOMNode(this),u],d=f[0],g=f[1],y=this.getTimeouts(),v=u?y.appear:y.enter;if(!s&&!c||G_.disabled){this.safeSetState({status:Po},function(){o.props.onEntered(d)});return}this.props.onEnter(d,g),this.safeSetState({status:fa},function(){o.props.onEntering(d,g),o.onTransitionEnd(v,function(){o.safeSetState({status:Po},function(){o.props.onEntered(d,g)})})})},e.performExit=function(){var s=this,o=this.props.exit,c=this.getTimeouts(),u=this.props.nodeRef?void 0:Vh.findDOMNode(this);if(!o||G_.disabled){this.safeSetState({status:ha},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:ey},function(){s.props.onExiting(u),s.onTransitionEnd(c.exit,function(){s.safeSetState({status:ha},function(){s.props.onExited(u)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},e.setNextCallback=function(s){var o=this,c=!0;return this.nextCallback=function(u){c&&(c=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},e.onTransitionEnd=function(s,o){this.setNextCallback(o);var c=this.props.nodeRef?this.props.nodeRef.current:Vh.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!c||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],d=f[0],g=f[1];this.props.addEndListener(d,g)}s!=null&&setTimeout(this.nextCallback,s)},e.render=function(){var s=this.state.status;if(s===Ac)return null;var o=this.props,c=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=Ez(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Nn.createElement(UE.Provider,{value:null},typeof c=="function"?c(s,u):Nn.cloneElement(Nn.Children.only(c),u))},t})(Nn.Component);Ki.contextType=UE;Ki.propTypes={};function Bo(){}Ki.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bo,onEntering:Bo,onEntered:Bo,onExit:Bo,onExiting:Bo,onExited:Bo};Ki.UNMOUNTED=Ac;Ki.EXITED=ha;Ki.ENTERING=fa;Ki.ENTERED=Po;Ki.EXITING=ey;const I_={};function Dz(r,t){const e=M.useRef(I_);return e.current===I_&&(e.current=r(t)),e}const kz=[];function Mz(r){M.useEffect(r,kz)}class lg{static create(){return new lg}currentId=null;start(t,e){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,e()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Dc(){const r=Dz(lg.create).current;return Mz(r.disposeEffect),r}const jz=r=>r.scrollTop;function $_(r,t){const{timeout:e,easing:n,style:s={}}=r;return{duration:s.transitionDuration??(typeof e=="number"?e:e[t.mode]||0),easing:s.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:s.transitionDelay}}function Rz(r){return typeof r=="string"}function FE(r,t,e){return r===void 0||Rz(r)?t:{...t,ownerState:{...t.ownerState,...e}}}function PE(r,t,e){return typeof r=="function"?r(t,e):r}function Lz(r,t=[]){if(r===void 0)return{};const e={};return Object.keys(r).filter(n=>n.match(/^on[A-Z]/)&&typeof r[n]=="function"&&!t.includes(n)).forEach(n=>{e[n]=r[n]}),e}function W_(r){if(r===void 0)return{};const t={};return Object.keys(r).filter(e=>!(e.match(/^on[A-Z]/)&&typeof r[e]=="function")).forEach(e=>{t[e]=r[e]}),t}function HE(r){const{getSlotProps:t,additionalProps:e,externalSlotProps:n,externalForwardedProps:s,className:o}=r;if(!t){const b=ou(e?.className,o,s?.className,n?.className),S={...e?.style,...s?.style,...n?.style},w={...e,...s,...n};return b.length>0&&(w.className=b),Object.keys(S).length>0&&(w.style=S),{props:w,internalRef:void 0}}const c=Lz({...s,...n}),u=W_(n),f=W_(s),d=t(c),g=ou(d?.className,e?.className,o,s?.className,n?.className),y={...d?.style,...e?.style,...s?.style,...n?.style},v={...d,...e,...f,...u};return g.length>0&&(v.className=g),Object.keys(y).length>0&&(v.style=y),{props:v,internalRef:d.ref}}function _f(r,t){const{className:e,elementType:n,ownerState:s,externalForwardedProps:o,internalForwardedProps:c,shouldForwardComponentProp:u=!1,...f}=t,{component:d,slots:g={[r]:void 0},slotProps:y={[r]:void 0},...v}=o,b=g[r]||n,S=PE(y[r],s),{props:{component:w,..._},internalRef:O}=HE({className:e,...f,externalForwardedProps:r==="root"?v:void 0,externalSlotProps:S}),k=ja(O,S?.ref,t.ref),B=r==="root"?w||d:w,R=FE(b,{...r==="root"&&!d&&!g[r]&&c,...r!=="root"&&!g[r]&&c,..._,...B&&!u&&{as:B},...B&&u&&{component:B},ref:k},s);return[b,R]}function q_(r){try{return r.matches(":focus-visible")}catch{}return!1}var bn="top",or="bottom",lr="right",Sn="left",wv="auto",Au=[bn,or,lr,Sn],ol="start",cu="end",Nz="clippingParents",YE="viewport",wc="popper",Bz="reference",K_=Au.reduce(function(r,t){return r.concat([t+"-"+ol,t+"-"+cu])},[]),VE=[].concat(Au,[wv]).reduce(function(r,t){return r.concat([t,t+"-"+ol,t+"-"+cu])},[]),zz="beforeRead",Uz="read",Fz="afterRead",Pz="beforeMain",Hz="main",Yz="afterMain",Vz="beforeWrite",Xz="write",Gz="afterWrite",Iz=[zz,Uz,Fz,Pz,Hz,Yz,Vz,Xz,Gz];function Wr(r){return r?(r.nodeName||"").toLowerCase():null}function Pn(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var t=r.ownerDocument;return t&&t.defaultView||window}return r}function Ra(r){var t=Pn(r).Element;return r instanceof t||r instanceof Element}function ir(r){var t=Pn(r).HTMLElement;return r instanceof t||r instanceof HTMLElement}function _v(r){if(typeof ShadowRoot>"u")return!1;var t=Pn(r).ShadowRoot;return r instanceof t||r instanceof ShadowRoot}function $z(r){var t=r.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},s=t.attributes[e]||{},o=t.elements[e];!ir(o)||!Wr(o)||(Object.assign(o.style,n),Object.keys(s).forEach(function(c){var u=s[c];u===!1?o.removeAttribute(c):o.setAttribute(c,u===!0?"":u)}))})}function Wz(r){var t=r.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(n){var s=t.elements[n],o=t.attributes[n]||{},c=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:e[n]),u=c.reduce(function(f,d){return f[d]="",f},{});!ir(s)||!Wr(s)||(Object.assign(s.style,u),Object.keys(o).forEach(function(f){s.removeAttribute(f)}))})}}const qz={name:"applyStyles",enabled:!0,phase:"write",fn:$z,effect:Wz,requires:["computeStyles"]};function Yr(r){return r.split("-")[0]}var _a=Math.max,Sd=Math.min,ll=Math.round;function ny(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function XE(){return!/^((?!chrome|android).)*safari/i.test(ny())}function cl(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var n=r.getBoundingClientRect(),s=1,o=1;t&&ir(r)&&(s=r.offsetWidth>0&&ll(n.width)/r.offsetWidth||1,o=r.offsetHeight>0&&ll(n.height)/r.offsetHeight||1);var c=Ra(r)?Pn(r):window,u=c.visualViewport,f=!XE()&&e,d=(n.left+(f&&u?u.offsetLeft:0))/s,g=(n.top+(f&&u?u.offsetTop:0))/o,y=n.width/s,v=n.height/o;return{width:y,height:v,top:g,right:d+y,bottom:g+v,left:d,x:d,y:g}}function Cv(r){var t=cl(r),e=r.offsetWidth,n=r.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:r.offsetLeft,y:r.offsetTop,width:e,height:n}}function GE(r,t){var e=t.getRootNode&&t.getRootNode();if(r.contains(t))return!0;if(e&&_v(e)){var n=t;do{if(n&&r.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Xi(r){return Pn(r).getComputedStyle(r)}function Kz(r){return["table","td","th"].indexOf(Wr(r))>=0}function Fs(r){return((Ra(r)?r.ownerDocument:r.document)||window.document).documentElement}function cg(r){return Wr(r)==="html"?r:r.assignedSlot||r.parentNode||(_v(r)?r.host:null)||Fs(r)}function Q_(r){return!ir(r)||Xi(r).position==="fixed"?null:r.offsetParent}function Qz(r){var t=/firefox/i.test(ny()),e=/Trident/i.test(ny());if(e&&ir(r)){var n=Xi(r);if(n.position==="fixed")return null}var s=cg(r);for(_v(s)&&(s=s.host);ir(s)&&["html","body"].indexOf(Wr(s))<0;){var o=Xi(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function Du(r){for(var t=Pn(r),e=Q_(r);e&&Kz(e)&&Xi(e).position==="static";)e=Q_(e);return e&&(Wr(e)==="html"||Wr(e)==="body"&&Xi(e).position==="static")?t:e||Qz(r)||t}function Tv(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function Uc(r,t,e){return _a(r,Sd(t,e))}function Zz(r,t,e){var n=Uc(r,t,e);return n>e?e:n}function IE(){return{top:0,right:0,bottom:0,left:0}}function $E(r){return Object.assign({},IE(),r)}function WE(r,t){return t.reduce(function(e,n){return e[n]=r,e},{})}var Jz=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,$E(typeof t!="number"?t:WE(t,Au))};function t8(r){var t,e=r.state,n=r.name,s=r.options,o=e.elements.arrow,c=e.modifiersData.popperOffsets,u=Yr(e.placement),f=Tv(u),d=[Sn,lr].indexOf(u)>=0,g=d?"height":"width";if(!(!o||!c)){var y=Jz(s.padding,e),v=Cv(o),b=f==="y"?bn:Sn,S=f==="y"?or:lr,w=e.rects.reference[g]+e.rects.reference[f]-c[f]-e.rects.popper[g],_=c[f]-e.rects.reference[f],O=Du(o),k=O?f==="y"?O.clientHeight||0:O.clientWidth||0:0,B=w/2-_/2,R=y[b],F=k-v[g]-y[S],z=k/2-v[g]/2+B,U=Uc(R,z,F),q=f;e.modifiersData[n]=(t={},t[q]=U,t.centerOffset=U-z,t)}}function e8(r){var t=r.state,e=r.options,n=e.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||GE(t.elements.popper,s)&&(t.elements.arrow=s))}const n8={name:"arrow",enabled:!0,phase:"main",fn:t8,effect:e8,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ul(r){return r.split("-")[1]}var r8={top:"auto",right:"auto",bottom:"auto",left:"auto"};function i8(r,t){var e=r.x,n=r.y,s=t.devicePixelRatio||1;return{x:ll(e*s)/s||0,y:ll(n*s)/s||0}}function Z_(r){var t,e=r.popper,n=r.popperRect,s=r.placement,o=r.variation,c=r.offsets,u=r.position,f=r.gpuAcceleration,d=r.adaptive,g=r.roundOffsets,y=r.isFixed,v=c.x,b=v===void 0?0:v,S=c.y,w=S===void 0?0:S,_=typeof g=="function"?g({x:b,y:w}):{x:b,y:w};b=_.x,w=_.y;var O=c.hasOwnProperty("x"),k=c.hasOwnProperty("y"),B=Sn,R=bn,F=window;if(d){var z=Du(e),U="clientHeight",q="clientWidth";if(z===Pn(e)&&(z=Fs(e),Xi(z).position!=="static"&&u==="absolute"&&(U="scrollHeight",q="scrollWidth")),z=z,s===bn||(s===Sn||s===lr)&&o===cu){R=or;var rt=y&&z===F&&F.visualViewport?F.visualViewport.height:z[U];w-=rt-n.height,w*=f?1:-1}if(s===Sn||(s===bn||s===or)&&o===cu){B=lr;var lt=y&&z===F&&F.visualViewport?F.visualViewport.width:z[q];b-=lt-n.width,b*=f?1:-1}}var ct=Object.assign({position:u},d&&r8),E=g===!0?i8({x:b,y:w},Pn(e)):{x:b,y:w};if(b=E.x,w=E.y,f){var X;return Object.assign({},ct,(X={},X[R]=k?"0":"",X[B]=O?"0":"",X.transform=(F.devicePixelRatio||1)<=1?"translate("+b+"px, "+w+"px)":"translate3d("+b+"px, "+w+"px, 0)",X))}return Object.assign({},ct,(t={},t[R]=k?w+"px":"",t[B]=O?b+"px":"",t.transform="",t))}function s8(r){var t=r.state,e=r.options,n=e.gpuAcceleration,s=n===void 0?!0:n,o=e.adaptive,c=o===void 0?!0:o,u=e.roundOffsets,f=u===void 0?!0:u,d={placement:Yr(t.placement),variation:ul(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Z_(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:f})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Z_(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const a8={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:s8,data:{}};var Cf={passive:!0};function o8(r){var t=r.state,e=r.instance,n=r.options,s=n.scroll,o=s===void 0?!0:s,c=n.resize,u=c===void 0?!0:c,f=Pn(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&d.forEach(function(g){g.addEventListener("scroll",e.update,Cf)}),u&&f.addEventListener("resize",e.update,Cf),function(){o&&d.forEach(function(g){g.removeEventListener("scroll",e.update,Cf)}),u&&f.removeEventListener("resize",e.update,Cf)}}const l8={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o8,data:{}};var c8={left:"right",right:"left",bottom:"top",top:"bottom"};function Vf(r){return r.replace(/left|right|bottom|top/g,function(t){return c8[t]})}var u8={start:"end",end:"start"};function J_(r){return r.replace(/start|end/g,function(t){return u8[t]})}function Ev(r){var t=Pn(r),e=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:e,scrollTop:n}}function Ov(r){return cl(Fs(r)).left+Ev(r).scrollLeft}function h8(r,t){var e=Pn(r),n=Fs(r),s=e.visualViewport,o=n.clientWidth,c=n.clientHeight,u=0,f=0;if(s){o=s.width,c=s.height;var d=XE();(d||!d&&t==="fixed")&&(u=s.offsetLeft,f=s.offsetTop)}return{width:o,height:c,x:u+Ov(r),y:f}}function f8(r){var t,e=Fs(r),n=Ev(r),s=(t=r.ownerDocument)==null?void 0:t.body,o=_a(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),c=_a(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),u=-n.scrollLeft+Ov(r),f=-n.scrollTop;return Xi(s||e).direction==="rtl"&&(u+=_a(e.clientWidth,s?s.clientWidth:0)-o),{width:o,height:c,x:u,y:f}}function Av(r){var t=Xi(r),e=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+n)}function qE(r){return["html","body","#document"].indexOf(Wr(r))>=0?r.ownerDocument.body:ir(r)&&Av(r)?r:qE(cg(r))}function Fc(r,t){var e;t===void 0&&(t=[]);var n=qE(r),s=n===((e=r.ownerDocument)==null?void 0:e.body),o=Pn(n),c=s?[o].concat(o.visualViewport||[],Av(n)?n:[]):n,u=t.concat(c);return s?u:u.concat(Fc(cg(c)))}function ry(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function d8(r,t){var e=cl(r,!1,t==="fixed");return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function tC(r,t,e){return t===YE?ry(h8(r,e)):Ra(t)?d8(t,e):ry(f8(Fs(r)))}function g8(r){var t=Fc(cg(r)),e=["absolute","fixed"].indexOf(Xi(r).position)>=0,n=e&&ir(r)?Du(r):r;return Ra(n)?t.filter(function(s){return Ra(s)&&GE(s,n)&&Wr(s)!=="body"}):[]}function p8(r,t,e,n){var s=t==="clippingParents"?g8(r):[].concat(t),o=[].concat(s,[e]),c=o[0],u=o.reduce(function(f,d){var g=tC(r,d,n);return f.top=_a(g.top,f.top),f.right=Sd(g.right,f.right),f.bottom=Sd(g.bottom,f.bottom),f.left=_a(g.left,f.left),f},tC(r,c,n));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function KE(r){var t=r.reference,e=r.element,n=r.placement,s=n?Yr(n):null,o=n?ul(n):null,c=t.x+t.width/2-e.width/2,u=t.y+t.height/2-e.height/2,f;switch(s){case bn:f={x:c,y:t.y-e.height};break;case or:f={x:c,y:t.y+t.height};break;case lr:f={x:t.x+t.width,y:u};break;case Sn:f={x:t.x-e.width,y:u};break;default:f={x:t.x,y:t.y}}var d=s?Tv(s):null;if(d!=null){var g=d==="y"?"height":"width";switch(o){case ol:f[d]=f[d]-(t[g]/2-e[g]/2);break;case cu:f[d]=f[d]+(t[g]/2-e[g]/2);break}}return f}function uu(r,t){t===void 0&&(t={});var e=t,n=e.placement,s=n===void 0?r.placement:n,o=e.strategy,c=o===void 0?r.strategy:o,u=e.boundary,f=u===void 0?Nz:u,d=e.rootBoundary,g=d===void 0?YE:d,y=e.elementContext,v=y===void 0?wc:y,b=e.altBoundary,S=b===void 0?!1:b,w=e.padding,_=w===void 0?0:w,O=$E(typeof _!="number"?_:WE(_,Au)),k=v===wc?Bz:wc,B=r.rects.popper,R=r.elements[S?k:v],F=p8(Ra(R)?R:R.contextElement||Fs(r.elements.popper),f,g,c),z=cl(r.elements.reference),U=KE({reference:z,element:B,placement:s}),q=ry(Object.assign({},B,U)),rt=v===wc?q:z,lt={top:F.top-rt.top+O.top,bottom:rt.bottom-F.bottom+O.bottom,left:F.left-rt.left+O.left,right:rt.right-F.right+O.right},ct=r.modifiersData.offset;if(v===wc&&ct){var E=ct[s];Object.keys(lt).forEach(function(X){var T=[lr,or].indexOf(X)>=0?1:-1,j=[bn,or].indexOf(X)>=0?"y":"x";lt[X]+=E[j]*T})}return lt}function m8(r,t){t===void 0&&(t={});var e=t,n=e.placement,s=e.boundary,o=e.rootBoundary,c=e.padding,u=e.flipVariations,f=e.allowedAutoPlacements,d=f===void 0?VE:f,g=ul(n),y=g?u?K_:K_.filter(function(S){return ul(S)===g}):Au,v=y.filter(function(S){return d.indexOf(S)>=0});v.length===0&&(v=y);var b=v.reduce(function(S,w){return S[w]=uu(r,{placement:w,boundary:s,rootBoundary:o,padding:c})[Yr(w)],S},{});return Object.keys(b).sort(function(S,w){return b[S]-b[w]})}function y8(r){if(Yr(r)===wv)return[];var t=Vf(r);return[J_(r),t,J_(t)]}function v8(r){var t=r.state,e=r.options,n=r.name;if(!t.modifiersData[n]._skip){for(var s=e.mainAxis,o=s===void 0?!0:s,c=e.altAxis,u=c===void 0?!0:c,f=e.fallbackPlacements,d=e.padding,g=e.boundary,y=e.rootBoundary,v=e.altBoundary,b=e.flipVariations,S=b===void 0?!0:b,w=e.allowedAutoPlacements,_=t.options.placement,O=Yr(_),k=O===_,B=f||(k||!S?[Vf(_)]:y8(_)),R=[_].concat(B).reduce(function(ut,ht){return ut.concat(Yr(ht)===wv?m8(t,{placement:ht,boundary:g,rootBoundary:y,padding:d,flipVariations:S,allowedAutoPlacements:w}):ht)},[]),F=t.rects.reference,z=t.rects.popper,U=new Map,q=!0,rt=R[0],lt=0;lt<R.length;lt++){var ct=R[lt],E=Yr(ct),X=ul(ct)===ol,T=[bn,or].indexOf(E)>=0,j=T?"width":"height",A=uu(t,{placement:ct,boundary:g,rootBoundary:y,altBoundary:v,padding:d}),P=T?X?lr:Sn:X?or:bn;F[j]>z[j]&&(P=Vf(P));var I=Vf(P),at=[];if(o&&at.push(A[E]<=0),u&&at.push(A[P]<=0,A[I]<=0),at.every(function(ut){return ut})){rt=ct,q=!1;break}U.set(ct,at)}if(q)for(var ot=S?3:1,L=function(ht){var gt=R.find(function(yt){var Rt=U.get(yt);if(Rt)return Rt.slice(0,ht).every(function(kt){return kt})});if(gt)return rt=gt,"break"},Q=ot;Q>0;Q--){var st=L(Q);if(st==="break")break}t.placement!==rt&&(t.modifiersData[n]._skip=!0,t.placement=rt,t.reset=!0)}}const b8={name:"flip",enabled:!0,phase:"main",fn:v8,requiresIfExists:["offset"],data:{_skip:!1}};function eC(r,t,e){return e===void 0&&(e={x:0,y:0}),{top:r.top-t.height-e.y,right:r.right-t.width+e.x,bottom:r.bottom-t.height+e.y,left:r.left-t.width-e.x}}function nC(r){return[bn,lr,or,Sn].some(function(t){return r[t]>=0})}function S8(r){var t=r.state,e=r.name,n=t.rects.reference,s=t.rects.popper,o=t.modifiersData.preventOverflow,c=uu(t,{elementContext:"reference"}),u=uu(t,{altBoundary:!0}),f=eC(c,n),d=eC(u,s,o),g=nC(f),y=nC(d);t.modifiersData[e]={referenceClippingOffsets:f,popperEscapeOffsets:d,isReferenceHidden:g,hasPopperEscaped:y},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":y})}const x8={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:S8};function w8(r,t,e){var n=Yr(r),s=[Sn,bn].indexOf(n)>=0?-1:1,o=typeof e=="function"?e(Object.assign({},t,{placement:r})):e,c=o[0],u=o[1];return c=c||0,u=(u||0)*s,[Sn,lr].indexOf(n)>=0?{x:u,y:c}:{x:c,y:u}}function _8(r){var t=r.state,e=r.options,n=r.name,s=e.offset,o=s===void 0?[0,0]:s,c=VE.reduce(function(g,y){return g[y]=w8(y,t.rects,o),g},{}),u=c[t.placement],f=u.x,d=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=f,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=c}const C8={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_8};function T8(r){var t=r.state,e=r.name;t.modifiersData[e]=KE({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const E8={name:"popperOffsets",enabled:!0,phase:"read",fn:T8,data:{}};function O8(r){return r==="x"?"y":"x"}function A8(r){var t=r.state,e=r.options,n=r.name,s=e.mainAxis,o=s===void 0?!0:s,c=e.altAxis,u=c===void 0?!1:c,f=e.boundary,d=e.rootBoundary,g=e.altBoundary,y=e.padding,v=e.tether,b=v===void 0?!0:v,S=e.tetherOffset,w=S===void 0?0:S,_=uu(t,{boundary:f,rootBoundary:d,padding:y,altBoundary:g}),O=Yr(t.placement),k=ul(t.placement),B=!k,R=Tv(O),F=O8(R),z=t.modifiersData.popperOffsets,U=t.rects.reference,q=t.rects.popper,rt=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,lt=typeof rt=="number"?{mainAxis:rt,altAxis:rt}:Object.assign({mainAxis:0,altAxis:0},rt),ct=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,E={x:0,y:0};if(z){if(o){var X,T=R==="y"?bn:Sn,j=R==="y"?or:lr,A=R==="y"?"height":"width",P=z[R],I=P+_[T],at=P-_[j],ot=b?-q[A]/2:0,L=k===ol?U[A]:q[A],Q=k===ol?-q[A]:-U[A],st=t.elements.arrow,ut=b&&st?Cv(st):{width:0,height:0},ht=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:IE(),gt=ht[T],yt=ht[j],Rt=Uc(0,U[A],ut[A]),kt=B?U[A]/2-ot-Rt-gt-lt.mainAxis:L-Rt-gt-lt.mainAxis,le=B?-U[A]/2+ot+Rt+yt+lt.mainAxis:Q+Rt+yt+lt.mainAxis,Hn=t.elements.arrow&&Du(t.elements.arrow),Je=Hn?R==="y"?Hn.clientTop||0:Hn.clientLeft||0:0,Qr=(X=ct?.[R])!=null?X:0,tn=P+kt-Qr-Je,Er=P+le-Qr,Zr=Uc(b?Sd(I,tn):I,P,b?_a(at,Er):at);z[R]=Zr,E[R]=Zr-P}if(u){var Jr,ti=R==="x"?bn:Sn,ei=R==="x"?or:lr,an=z[F],ur=F==="y"?"height":"width",Ps=an+_[ti],Hs=an-_[ei],Ee=[bn,Sn].indexOf(O)!==-1,za=(Jr=ct?.[F])!=null?Jr:0,Ys=Ee?Ps:an-U[ur]-q[ur]-za+lt.altAxis,ni=Ee?an+U[ur]+q[ur]-za-lt.altAxis:Hs,ri=b&&Ee?Zz(Ys,an,ni):Uc(b?Ys:Ps,an,b?ni:Hs);z[F]=ri,E[F]=ri-an}t.modifiersData[n]=E}}const D8={name:"preventOverflow",enabled:!0,phase:"main",fn:A8,requiresIfExists:["offset"]};function k8(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function M8(r){return r===Pn(r)||!ir(r)?Ev(r):k8(r)}function j8(r){var t=r.getBoundingClientRect(),e=ll(t.width)/r.offsetWidth||1,n=ll(t.height)/r.offsetHeight||1;return e!==1||n!==1}function R8(r,t,e){e===void 0&&(e=!1);var n=ir(t),s=ir(t)&&j8(t),o=Fs(t),c=cl(r,s,e),u={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(n||!n&&!e)&&((Wr(t)!=="body"||Av(o))&&(u=M8(t)),ir(t)?(f=cl(t,!0),f.x+=t.clientLeft,f.y+=t.clientTop):o&&(f.x=Ov(o))),{x:c.left+u.scrollLeft-f.x,y:c.top+u.scrollTop-f.y,width:c.width,height:c.height}}function L8(r){var t=new Map,e=new Set,n=[];r.forEach(function(o){t.set(o.name,o)});function s(o){e.add(o.name);var c=[].concat(o.requires||[],o.requiresIfExists||[]);c.forEach(function(u){if(!e.has(u)){var f=t.get(u);f&&s(f)}}),n.push(o)}return r.forEach(function(o){e.has(o.name)||s(o)}),n}function N8(r){var t=L8(r);return Iz.reduce(function(e,n){return e.concat(t.filter(function(s){return s.phase===n}))},[])}function B8(r){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(r())})})),t}}function z8(r){var t=r.reduce(function(e,n){var s=e[n.name];return e[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,e},{});return Object.keys(t).map(function(e){return t[e]})}var rC={placement:"bottom",modifiers:[],strategy:"absolute"};function iC(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function U8(r){r===void 0&&(r={});var t=r,e=t.defaultModifiers,n=e===void 0?[]:e,s=t.defaultOptions,o=s===void 0?rC:s;return function(u,f,d){d===void 0&&(d=o);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},rC,o),modifiersData:{},elements:{reference:u,popper:f},attributes:{},styles:{}},y=[],v=!1,b={state:g,setOptions:function(O){var k=typeof O=="function"?O(g.options):O;w(),g.options=Object.assign({},o,g.options,k),g.scrollParents={reference:Ra(u)?Fc(u):u.contextElement?Fc(u.contextElement):[],popper:Fc(f)};var B=N8(z8([].concat(n,g.options.modifiers)));return g.orderedModifiers=B.filter(function(R){return R.enabled}),S(),b.update()},forceUpdate:function(){if(!v){var O=g.elements,k=O.reference,B=O.popper;if(iC(k,B)){g.rects={reference:R8(k,Du(B),g.options.strategy==="fixed"),popper:Cv(B)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(lt){return g.modifiersData[lt.name]=Object.assign({},lt.data)});for(var R=0;R<g.orderedModifiers.length;R++){if(g.reset===!0){g.reset=!1,R=-1;continue}var F=g.orderedModifiers[R],z=F.fn,U=F.options,q=U===void 0?{}:U,rt=F.name;typeof z=="function"&&(g=z({state:g,options:q,name:rt,instance:b})||g)}}}},update:B8(function(){return new Promise(function(_){b.forceUpdate(),_(g)})}),destroy:function(){w(),v=!0}};if(!iC(u,f))return b;b.setOptions(d).then(function(_){!v&&d.onFirstUpdate&&d.onFirstUpdate(_)});function S(){g.orderedModifiers.forEach(function(_){var O=_.name,k=_.options,B=k===void 0?{}:k,R=_.effect;if(typeof R=="function"){var F=R({state:g,name:O,instance:b,options:B}),z=function(){};y.push(F||z)}})}function w(){y.forEach(function(_){return _()}),y=[]}return b}}var F8=[l8,E8,a8,qz,C8,b8,D8,n8,x8],P8=U8({defaultModifiers:F8});function H8(r){const{elementType:t,externalSlotProps:e,ownerState:n,skipResolvingSlotProps:s=!1,...o}=r,c=s?{}:PE(e,n),{props:u,internalRef:f}=HE({...o,externalSlotProps:c}),d=ja(f,c?.ref,r.additionalProps?.ref);return FE(t,{...u,ref:d},n)}function Dv(r){return parseInt(M.version,10)>=19?r?.props?.ref||null:r?.ref||null}function Y8(r){return typeof r=="function"?r():r}const V8=M.forwardRef(function(t,e){const{children:n,container:s,disablePortal:o=!1}=t,[c,u]=M.useState(null),f=ja(M.isValidElement(n)?Dv(n):null,e);if(lu(()=>{o||u(Y8(s)||document.body)},[s,o]),lu(()=>{if(c&&!o)return V_(e,c),()=>{V_(e,null)}},[e,c,o]),o){if(M.isValidElement(n)){const d={ref:f};return M.cloneElement(n,d)}return n}return c&&TC.createPortal(n,c)});function X8(r){return vv("MuiPopper",r)}wE("MuiPopper",["root"]);function G8(r,t){if(t==="ltr")return r;switch(r){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return r}}function iy(r){return typeof r=="function"?r():r}function I8(r){return r.nodeType!==void 0}const $8=r=>{const{classes:t}=r;return AE({root:["root"]},X8,t)},W8={},q8=M.forwardRef(function(t,e){const{anchorEl:n,children:s,direction:o,disablePortal:c,modifiers:u,open:f,placement:d,popperOptions:g,popperRef:y,slotProps:v={},slots:b={},TransitionProps:S,ownerState:w,..._}=t,O=M.useRef(null),k=ja(O,e),B=M.useRef(null),R=ja(B,y),F=M.useRef(R);lu(()=>{F.current=R},[R]),M.useImperativeHandle(y,()=>B.current,[]);const z=G8(d,o),[U,q]=M.useState(z),[rt,lt]=M.useState(iy(n));M.useEffect(()=>{B.current&&B.current.forceUpdate()}),M.useEffect(()=>{n&&lt(iy(n))},[n]),lu(()=>{if(!rt||!f)return;const j=I=>{q(I.placement)};let A=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:I})=>{j(I)}}];u!=null&&(A=A.concat(u)),g&&g.modifiers!=null&&(A=A.concat(g.modifiers));const P=P8(rt,O.current,{placement:z,...g,modifiers:A});return F.current(P),()=>{P.destroy(),F.current(null)}},[rt,c,u,f,g,z]);const ct={placement:U};S!==null&&(ct.TransitionProps=S);const E=$8(t),X=b.root??"div",T=H8({elementType:X,externalSlotProps:v.root,externalForwardedProps:_,additionalProps:{role:"tooltip",ref:k},ownerState:t,className:E.root});return D.jsx(X,{...T,children:typeof s=="function"?s(ct):s})}),K8=M.forwardRef(function(t,e){const{anchorEl:n,children:s,container:o,direction:c="ltr",disablePortal:u=!1,keepMounted:f=!1,modifiers:d,open:g,placement:y="bottom",popperOptions:v=W8,popperRef:b,style:S,transition:w=!1,slotProps:_={},slots:O={},...k}=t,[B,R]=M.useState(!0),F=()=>{R(!1)},z=()=>{R(!0)};if(!f&&!g&&(!w||B))return null;let U;if(o)U=o;else if(n){const lt=iy(n);U=lt&&I8(lt)?Y_(lt).body:Y_(null).body}const q=!g&&f&&(!w||B)?"none":void 0,rt=w?{in:g,onEnter:F,onExited:z}:void 0;return D.jsx(V8,{disablePortal:u,container:U,children:D.jsx(q8,{anchorEl:n,direction:c,disablePortal:u,modifiers:d,ref:e,open:w?!B:g,placement:y,popperOptions:v,popperRef:b,slotProps:_,slots:O,...k,style:{position:"fixed",top:0,left:0,display:q,...S},TransitionProps:rt,children:s})})}),Q8=og(K8,{name:"MuiPopper",slot:"Root"})({}),QE=M.forwardRef(function(t,e){const n=OE(),s=zE({props:t,name:"MuiPopper"}),{anchorEl:o,component:c,components:u,componentsProps:f,container:d,disablePortal:g,keepMounted:y,modifiers:v,open:b,placement:S,popperOptions:w,popperRef:_,transition:O,slots:k,slotProps:B,...R}=s,F=k?.root??u?.Root,z={anchorEl:o,container:d,disablePortal:g,keepMounted:y,modifiers:v,open:b,placement:S,popperOptions:w,popperRef:_,transition:O,...R};return D.jsx(Q8,{as:c,direction:n?"rtl":"ltr",slots:{root:F},slotProps:B??f,...z,ref:e})});function sy(r){return`scale(${r}, ${r**2})`}const Z8={entering:{opacity:1,transform:sy(1)},entered:{opacity:1,transform:"none"}},g0=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),ay=M.forwardRef(function(t,e){const{addEndListener:n,appear:s=!0,children:o,easing:c,in:u,onEnter:f,onEntered:d,onEntering:g,onExit:y,onExited:v,onExiting:b,style:S,timeout:w="auto",TransitionComponent:_=Ki,...O}=t,k=Dc(),B=M.useRef(),R=BE(),F=M.useRef(null),z=ja(F,Dv(o),e),U=j=>A=>{if(j){const P=F.current;A===void 0?j(P):j(P,A)}},q=U(g),rt=U((j,A)=>{jz(j);const{duration:P,delay:I,easing:at}=$_({style:S,timeout:w,easing:c},{mode:"enter"});let ot;w==="auto"?(ot=R.transitions.getAutoHeightDuration(j.clientHeight),B.current=ot):ot=P,j.style.transition=[R.transitions.create("opacity",{duration:ot,delay:I}),R.transitions.create("transform",{duration:g0?ot:ot*.666,delay:I,easing:at})].join(","),f&&f(j,A)}),lt=U(d),ct=U(b),E=U(j=>{const{duration:A,delay:P,easing:I}=$_({style:S,timeout:w,easing:c},{mode:"exit"});let at;w==="auto"?(at=R.transitions.getAutoHeightDuration(j.clientHeight),B.current=at):at=A,j.style.transition=[R.transitions.create("opacity",{duration:at,delay:P}),R.transitions.create("transform",{duration:g0?at:at*.666,delay:g0?P:P||at*.333,easing:I})].join(","),j.style.opacity=0,j.style.transform=sy(.75),y&&y(j)}),X=U(v),T=j=>{w==="auto"&&k.start(B.current||0,j),n&&n(F.current,j)};return D.jsx(_,{appear:s,in:u,nodeRef:F,onEnter:rt,onEntered:lt,onEntering:q,onExit:E,onExited:X,onExiting:ct,addEndListener:T,timeout:w==="auto"?null:w,...O,children:(j,{ownerState:A,...P})=>M.cloneElement(o,{style:{opacity:0,transform:sy(.75),visibility:j==="exited"&&!u?"hidden":void 0,...Z8[j],...S,...o.props.style},ref:z,...P})})});ay&&(ay.muiSupportAuto=!0);function J8(r){return vv("MuiTooltip",r)}const de=wE("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function tU(r){return Math.round(r*1e5)/1e5}const eU=r=>{const{classes:t,disableInteractive:e,arrow:n,touch:s,placement:o}=r,c={popper:["popper",!e&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",s&&"touch",`tooltipPlacement${Kd(o.split("-")[0])}`],arrow:["arrow"]};return AE(c,J8,t)},nU=og(QE,{name:"MuiTooltip",slot:"Popper",overridesResolver:(r,t)=>{const{ownerState:e}=r;return[t.popper,!e.disableInteractive&&t.popperInteractive,e.arrow&&t.popperArrow,!e.open&&t.popperClose]}})(xv(({theme:r})=>({zIndex:(r.vars||r).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${de.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${de.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${de.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${de.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${de.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${de.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${de.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${de.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),rU=og("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(r,t)=>{const{ownerState:e}=r;return[t.tooltip,e.touch&&t.touch,e.arrow&&t.tooltipArrow,t[`tooltipPlacement${Kd(e.placement.split("-")[0])}`]]}})(xv(({theme:r})=>({backgroundColor:r.vars?r.vars.palette.Tooltip.bg:r.alpha(r.palette.grey[700],.92),borderRadius:(r.vars||r).shape.borderRadius,color:(r.vars||r).palette.common.white,fontFamily:r.typography.fontFamily,padding:"4px 8px",fontSize:r.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:r.typography.fontWeightMedium,[`.${de.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${de.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${de.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${de.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:r.typography.pxToRem(14),lineHeight:`${tU(16/14)}em`,fontWeight:r.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${de.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${de.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${de.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${de.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${de.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${de.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${de.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${de.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${de.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${de.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),iU=og("span",{name:"MuiTooltip",slot:"Arrow"})(xv(({theme:r})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:r.vars?r.vars.palette.Tooltip.bg:r.alpha(r.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let Tf=!1;const sC=new lg;let _c={x:0,y:0};function Ef(r,t){return(e,...n)=>{t&&t(e,...n),r(e,...n)}}const Ti=M.forwardRef(function(t,e){const n=zE({props:t,name:"MuiTooltip"}),{arrow:s=!1,children:o,classes:c,components:u={},componentsProps:f={},describeChild:d=!1,disableFocusListener:g=!1,disableHoverListener:y=!1,disableInteractive:v=!1,disableTouchListener:b=!1,enterDelay:S=100,enterNextDelay:w=0,enterTouchDelay:_=700,followCursor:O=!1,id:k,leaveDelay:B=0,leaveTouchDelay:R=1500,onClose:F,onOpen:z,open:U,placement:q="bottom",PopperComponent:rt,PopperProps:lt={},slotProps:ct={},slots:E={},title:X,TransitionComponent:T,TransitionProps:j,...A}=n,P=M.isValidElement(o)?o:D.jsx("span",{children:o}),I=BE(),at=OE(),[ot,L]=M.useState(),[Q,st]=M.useState(null),ut=M.useRef(!1),ht=v||O,gt=Dc(),yt=Dc(),Rt=Dc(),kt=Dc(),[le,Hn]=Tz({controlled:U,default:!1});let Je=le;const Qr=B6(k),tn=M.useRef(),Er=X_(()=>{tn.current!==void 0&&(document.body.style.WebkitUserSelect=tn.current,tn.current=void 0),kt.clear()});M.useEffect(()=>Er,[Er]);const Zr=wt=>{sC.clear(),Tf=!0,Hn(!0),z&&!Je&&z(wt)},Jr=X_(wt=>{sC.start(800+B,()=>{Tf=!1}),Hn(!1),F&&Je&&F(wt),gt.start(I.transitions.duration.shortest,()=>{ut.current=!1})}),ti=wt=>{ut.current&&wt.type!=="touchstart"||(ot&&ot.removeAttribute("title"),yt.clear(),Rt.clear(),S||Tf&&w?yt.start(Tf?w:S,()=>{Zr(wt)}):Zr(wt))},ei=wt=>{yt.clear(),Rt.start(B,()=>{Jr(wt)})},[,an]=M.useState(!1),ur=wt=>{q_(wt.target)||(an(!1),ei(wt))},Ps=wt=>{ot||L(wt.currentTarget),q_(wt.target)&&(an(!0),ti(wt))},Hs=wt=>{ut.current=!0;const Yn=P.props;Yn.onTouchStart&&Yn.onTouchStart(wt)},Ee=wt=>{Hs(wt),Rt.clear(),gt.clear(),Er(),tn.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",kt.start(_,()=>{document.body.style.WebkitUserSelect=tn.current,ti(wt)})},za=wt=>{P.props.onTouchEnd&&P.props.onTouchEnd(wt),Er(),Rt.start(R,()=>{Jr(wt)})};M.useEffect(()=>{if(!Je)return;function wt(Yn){Yn.key==="Escape"&&Jr(Yn)}return document.addEventListener("keydown",wt),()=>{document.removeEventListener("keydown",wt)}},[Jr,Je]);const Ys=ja(Dv(P),L,e);!X&&X!==0&&(Je=!1);const ni=M.useRef(),ri=wt=>{const Yn=P.props;Yn.onMouseMove&&Yn.onMouseMove(wt),_c={x:wt.clientX,y:wt.clientY},ni.current&&ni.current.update()},Vs={},Ua=typeof X=="string";d?(Vs.title=!Je&&Ua&&!y?X:null,Vs["aria-describedby"]=Je?Qr:null):(Vs["aria-label"]=Ua?X:null,Vs["aria-labelledby"]=Je&&!Ua?Qr:null);const _n={...Vs,...A,...P.props,className:ou(A.className,P.props.className),onTouchStart:Hs,ref:Ys,...O?{onMouseMove:ri}:{}},Xs={};b||(_n.onTouchStart=Ee,_n.onTouchEnd=za),y||(_n.onMouseOver=Ef(ti,_n.onMouseOver),_n.onMouseLeave=Ef(ei,_n.onMouseLeave),ht||(Xs.onMouseOver=ti,Xs.onMouseLeave=ei)),g||(_n.onFocus=Ef(Ps,_n.onFocus),_n.onBlur=Ef(ur,_n.onBlur),ht||(Xs.onFocus=Ps,Xs.onBlur=ur));const Cn={...n,isRtl:at,arrow:s,disableInteractive:ht,placement:q,PopperComponentProp:rt,touch:ut.current},Oe=typeof ct.popper=="function"?ct.popper(Cn):ct.popper,Or=M.useMemo(()=>{let wt=[{name:"arrow",enabled:!!Q,options:{element:Q,padding:4}}];return lt.popperOptions?.modifiers&&(wt=wt.concat(lt.popperOptions.modifiers)),Oe?.popperOptions?.modifiers&&(wt=wt.concat(Oe.popperOptions.modifiers)),{...lt.popperOptions,...Oe?.popperOptions,modifiers:wt}},[Q,lt.popperOptions,Oe?.popperOptions]),ze=eU(Cn),ug=typeof ct.transition=="function"?ct.transition(Cn):ct.transition,Fa={slots:{popper:u.Popper,transition:u.Transition??T,tooltip:u.Tooltip,arrow:u.Arrow,...E},slotProps:{arrow:ct.arrow??f.arrow,popper:{...lt,...Oe??f.popper},tooltip:ct.tooltip??f.tooltip,transition:{...j,...ug??f.transition}}},[hg,Pa]=_f("popper",{elementType:nU,externalForwardedProps:Fa,ownerState:Cn,className:ou(ze.popper,lt?.className)}),[Ha,Ya]=_f("transition",{elementType:ay,externalForwardedProps:Fa,ownerState:Cn}),[ii,Va]=_f("tooltip",{elementType:rU,className:ze.tooltip,externalForwardedProps:Fa,ownerState:Cn}),[Gs,fg]=_f("arrow",{elementType:iU,className:ze.arrow,externalForwardedProps:Fa,ownerState:Cn,ref:st});return D.jsxs(M.Fragment,{children:[M.cloneElement(P,_n),D.jsx(hg,{as:rt??QE,placement:q,anchorEl:O?{getBoundingClientRect:()=>({top:_c.y,left:_c.x,right:_c.x,bottom:_c.y,width:0,height:0})}:ot,popperRef:ni,open:ot?Je:!1,id:Qr,transition:!0,...Xs,...Pa,popperOptions:Or,children:({TransitionProps:wt})=>D.jsx(Ha,{timeout:I.transitions.duration.shorter,...wt,...Ya,children:D.jsxs(ii,{...Va,children:[X,s?D.jsx(Gs,{...fg}):null]})})})]})}),sU=({onFontClick:r,onColorClick:t})=>{const e=yy(w=>w.canvas.selectedElement);if(!e)return null;const n=window.fabricCanvas;if(!n)return null;const s=n.getActiveObject();if(!s)return null;const o=s,c=e.type==="textbox",u=w=>{if(c&&o.type==="textbox"){const _=o.fontSize||20,O=Math.max(8,Math.min(144,_+w));o.set("fontSize",O),n.renderAll(),n._historySaveAction&&n._historySaveAction({target:o}),n._forceSync&&n._forceSync()}},f=()=>{if(c&&o.type==="textbox"){const w=o.fontWeight;o.set("fontWeight",w==="bold"?"normal":"bold"),n.renderAll(),n._historySaveAction&&n._historySaveAction({target:o}),n._forceSync&&n._forceSync()}},d=()=>{if(c&&o.type==="textbox"){const w=o.fontStyle;o.set("fontStyle",w==="italic"?"normal":"italic"),n.renderAll(),n._historySaveAction&&n._historySaveAction({target:o}),n._forceSync&&n._forceSync()}},g=()=>{if(!c){const w=o.strokeWidth||0,_=o.fill;if(w>0&&_==="transparent")o.set("fill",Lt.shapeFill),o.set("strokeWidth",0);else{const O=w>0?0:2;o.set("strokeWidth",O),O>0&&_==="transparent"&&o.set("fill",Lt.shapeFill)}n.renderAll(),n._historySaveAction&&n._historySaveAction({target:o}),n._forceSync&&n._forceSync()}},y=()=>{if(!c){const w=o.fill,_=o.strokeWidth||0;if(w!=="transparent"&&_===0)o.set("strokeWidth",2),o.set("fill","transparent");else{const O=w==="transparent"?Lt.shapeFill:"transparent";o.set("fill",O),O!=="transparent"&&_===0&&o.set("strokeWidth",2)}n.renderAll(),n._historySaveAction&&n._historySaveAction({target:o}),n._forceSync&&n._forceSync()}},v=c&&o.type==="textbox"?o.fontSize||20:null,b=o.fill||Lt.black,S=c&&o.type==="textbox"&&o.fontFamily||"Arial";return D.jsxs("div",{className:"element-toolbar",children:[D.jsx("div",{className:"toolbar-group",children:D.jsx(Ti,{title:"Font Family",arrow:!0,placement:"bottom",children:D.jsx("button",{className:"toolbar-btn",onClick:r,disabled:!c,children:D.jsx("span",{style:{fontFamily:S},children:"Aa"})})})}),D.jsxs("div",{className:"toolbar-group",children:[D.jsx(Ti,{title:"Decrease Font Size",arrow:!0,placement:"bottom",children:D.jsx("button",{className:"toolbar-btn icon",onClick:()=>u(-2),disabled:!c,children:"−"})}),D.jsx(Ti,{title:"Font Size",arrow:!0,placement:"bottom",children:D.jsx("input",{type:"number",className:"font-size-input",value:v||"",onChange:w=>{if(c){const _=parseInt(w.target.value)||20;o.set("fontSize",_),n.renderAll(),n._historySaveAction&&n._historySaveAction({target:o}),n._forceSync&&n._forceSync()}},min:"8",max:"144",disabled:!c})}),D.jsx(Ti,{title:"Increase Font Size",arrow:!0,placement:"bottom",children:D.jsx("button",{className:"toolbar-btn icon",onClick:()=>u(2),disabled:!c,children:"+"})})]}),D.jsx("div",{className:"toolbar-group",children:D.jsx(Ti,{title:"Fill Color",arrow:!0,placement:"bottom",children:D.jsx("button",{className:"toolbar-btn color-picker-btn",onClick:t,style:{backgroundColor:typeof b=="string"&&b.startsWith("#")?b:Lt.black}})})}),D.jsx("div",{className:"toolbar-group",children:D.jsx(Ti,{title:"Bold Text",arrow:!0,placement:"bottom",children:D.jsx("button",{className:`toolbar-btn ${c&&o.fontWeight==="bold"?"active":""}`,onClick:f,disabled:!c,children:D.jsx("strong",{children:"B"})})})}),D.jsx("div",{className:"toolbar-group",children:D.jsx(Ti,{title:"Italic Text",arrow:!0,placement:"bottom",children:D.jsx("button",{className:`toolbar-btn ${c&&o.fontStyle==="italic"?"active":""}`,onClick:d,disabled:!c,children:D.jsx("em",{children:"I"})})})}),D.jsx("div",{className:"toolbar-group",children:D.jsx(Ti,{title:"Toggle Border",arrow:!0,placement:"bottom",children:D.jsx("button",{className:`toolbar-btn ${!c&&o.strokeWidth>0?"active-muted":""}`,onClick:g,disabled:c||o.fill==="transparent",children:D.jsx(mN,{})})})}),D.jsx("div",{className:"toolbar-group",children:D.jsx(Ti,{title:"Toggle Fill",arrow:!0,placement:"bottom",children:D.jsx("button",{className:`toolbar-btn ${!c&&o.fill!=="transparent"?"active-muted":""}`,onClick:y,disabled:c||(o.strokeWidth||0)===0,children:D.jsx(xM,{})})})})]})},oy=({title:r,onClose:t,children:e})=>D.jsxs("div",{className:"panel",children:[D.jsxs("div",{className:"panel-header",children:[D.jsx("h3",{className:"panel-title",children:r}),D.jsx("button",{className:"panel-close",onClick:t,children:"✕"})]}),D.jsx("div",{className:"panel-content",children:e})]}),aU=({onSelectFont:r})=>{const[t,e]=M.useState(""),s=["Arial","Arial Black","Helvetica","Times New Roman","Courier New","Georgia","Verdana","Tahoma","Trebuchet MS","Palatino","Book Antiqua","Impact","Comic Sans MS","Lucida Console","Lucida Sans Unicode","Monaco","Geneva","Garamond","Century Gothic","Futura","Gill Sans","Baskerville","Optima","Franklin Gothic","Didot","Bodoni","Calibri","Cambria","Candara","Consolas","Constantia","Corbel","Segoe UI","San Francisco","Roboto","Open Sans","Lato","Montserrat","Playfair Display","Merriweather","Raleway","Oswald","Source Sans Pro","Poppins","Ubuntu","Dancing Script","Pacifico","Shadows Into Light","Abril Fatface","Bebas Neue"].filter(o=>o.toLowerCase().includes(t.toLowerCase()));return D.jsxs("div",{className:"font-panel-container",children:[D.jsx("div",{className:"font-search-container",children:D.jsx("input",{type:"text",className:"font-search-input",placeholder:"Search fonts...",value:t,onChange:o=>e(o.target.value)})}),D.jsxs("div",{className:"font-list-container",children:[s.map(o=>D.jsx("button",{className:"font-option",onClick:()=>r(o),style:{fontFamily:o},children:o},o)),s.length===0&&D.jsx("div",{className:"font-no-results",children:"No fonts found"})]})]})},oU=r=>r&&typeof r=="object"&&"getActiveObject"in r,lU=({currentColor:r,onColorChange:t,onBorderColorChange:e})=>{const n=T=>{const j=parseInt(T.slice(1,3),16)/255,A=parseInt(T.slice(3,5),16)/255,P=parseInt(T.slice(5,7),16)/255,I=Math.max(j,A,P),at=Math.min(j,A,P),ot=I-at;let L=0;ot!==0&&(I===j?L=(A-P)/ot%6:I===A?L=(P-j)/ot+2:L=(j-A)/ot+4),L=Math.round(L*60),L<0&&(L+=360);const Q=I===0?0:Math.round(ot/I*100),st=Math.round(I*100);return{h:L,s:Q,v:st}},s=(T,j,A)=>{const P=A/100*(j/100),I=P*(1-Math.abs(T/60%2-1)),at=A/100-P;let ot=0,L=0,Q=0;T>=0&&T<60?(ot=P,L=I,Q=0):T>=60&&T<120?(ot=I,L=P,Q=0):T>=120&&T<180?(ot=0,L=P,Q=I):T>=180&&T<240?(ot=0,L=I,Q=P):T>=240&&T<300?(ot=I,L=0,Q=P):T>=300&&T<360&&(ot=P,L=0,Q=I);const st=ut=>Math.round((ut+at)*255).toString(16).padStart(2,"0");return`#${st(ot)}${st(L)}${st(Q)}`},[o,c]=M.useState(()=>{try{return n(r||Lt.black)}catch{return{h:0,s:0,v:0}}}),[u,f]=M.useState(r||Lt.black),[d,g]=M.useState(0),[y,v]=M.useState(()=>{try{const j=window.fabricCanvas?.getActiveObject?.(),A=j&&j.type!=="textbox"&&j.type!=="image"&&j.strokeWidth!==void 0&&j.strokeWidth>0&&j.stroke||Lt.black;return n(A||Lt.black)}catch{return{h:0,s:0,v:0}}}),[b,S]=M.useState(()=>{try{return window.fabricCanvas?.getActiveObject?.()?.stroke||Lt.black}catch{return Lt.black}});M.useEffect(()=>{if(r&&/^#[0-9A-Fa-f]{6}$/.test(r))try{c(n(r)),f(r)}catch{}},[r]);const w=T=>{const j=T.currentTarget.getBoundingClientRect(),A=(T.clientX-j.left)/j.width*100,P=(T.clientY-j.top)/j.height*100,I=Math.max(0,Math.min(100,Math.round(A))),at=Math.max(0,Math.min(100,Math.round(100-P))),ot={h:o.h,s:I,v:at};c(ot);const L=s(ot.h,I,at);t(L)},_=T=>{const j=T.currentTarget.getBoundingClientRect(),A=(T.clientY-j.top)/j.height*360,P=Math.max(0,Math.min(360,Math.round(A))),I={h:P,s:o.s,v:o.v};c(I),t(s(P,o.s,o.v))},O=T=>{const j=T.currentTarget.getBoundingClientRect(),A=(T.clientX-j.left)/j.width*100,P=(T.clientY-j.top)/j.height*100,I=Math.max(0,Math.min(100,Math.round(A))),at=Math.max(0,Math.min(100,Math.round(100-P))),ot={h:y.h,s:I,v:at};v(ot);const L=s(ot.h,I,at);e&&e(L)},k=T=>{const j=T.currentTarget.getBoundingClientRect(),A=(T.clientY-j.top)/j.height*360,P=Math.max(0,Math.min(360,Math.round(A))),I={h:P,s:y.s,v:y.v};v(I);const at=s(P,y.s,y.v);e&&e(at)},R=(()=>{try{if(r&&typeof r=="string"){const T=r.match(/^#([0-9A-Fa-f]{6})$/);if(T)return`#${T[1]}`}return s(o.h,o.s,o.v)}catch(T){return console.error("Error in getCurrentHex:",T),Lt.black}})(),z=(()=>{try{const T=R;return/^#[0-9A-Fa-f]{6}$/.test(T)?{r:parseInt(T.slice(1,3),16)||0,g:parseInt(T.slice(3,5),16)||0,b:parseInt(T.slice(5,7),16)||0}:{r:0,g:0,b:0}}catch(T){return console.error("Error in getRGB:",T),{r:0,g:0,b:0}}})(),U=window.fabricCanvas,q=U?.getActiveObject?.(),rt=q&&q.type!=="textbox"&&q.type!=="image",lt=q&&q.strokeWidth!==void 0&&q.strokeWidth>0,ct=q&&q.fill&&q.fill!=="transparent",E=q?.fill||r||Lt.black;M.useEffect(()=>{if(ct&&E)try{const T=typeof E=="string"&&/^#[0-9A-Fa-f]{6}$/.test(E)?E:r||Lt.black;c(n(T)),f(T)}catch(T){console.error("Error updating fill HSV:",T)}},[ct,E,r]);const X=lt&&q?.stroke||Lt.black;return M.useEffect(()=>{if(lt&&X)try{const T=typeof X=="string"&&/^#[0-9A-Fa-f]{6}$/.test(X)?X:Lt.black;v(n(T)),S(T)}catch(T){console.error("Error updating border HSV:",T)}},[lt,X]),M.useEffect(()=>{if(!U||!oU(U))return;const T=()=>{setTimeout(()=>{g(A=>A+1)},0)};U.on("object:modified",T),U.on("object:added",T),U.on("selection:updated",T),U.on("selection:created",T),U.on("selection:cleared",T);const j=setInterval(()=>{U&&g(A=>A+1)},100);return()=>{U.off("object:modified",T),U.off("object:added",T),U.off("selection:updated",T),U.off("selection:created",T),U.off("selection:cleared",T),clearInterval(j)}},[U]),D.jsxs("div",{className:"color-panel",children:[ct&&D.jsxs(D.Fragment,{children:[D.jsx("h4",{style:{margin:"0 0 10px 0",fontSize:"14px",fontWeight:600,color:Lt.textDark},children:"Fill Color"}),D.jsxs("div",{className:"color-picker-container",children:[D.jsx("div",{className:"color-grid",style:{background:`linear-gradient(to bottom, 
              hsl(${o.h}, 100%, 50%), 
              hsl(${o.h}, 100%, 0%)
            ), linear-gradient(to right, 
              transparent, 
              hsl(${o.h}, 0%, 50%)
            )`},onClick:w,onMouseMove:T=>{T.buttons===1&&w(T)},children:D.jsx("div",{className:"color-pointer",style:{left:`${o.s}%`,top:`${100-o.v}%`}})}),D.jsx("div",{className:"hue-slider",onClick:_,onMouseMove:T=>{T.buttons===1&&_(T)},children:D.jsx("div",{className:"hue-pointer",style:{top:`${o.h/360*100}%`}})})]}),D.jsx("div",{className:"current-color-preview",style:{backgroundColor:R}}),D.jsxs("div",{className:"color-values",children:[D.jsxs("div",{className:"color-value-group",children:[D.jsx("label",{children:"HEX"}),D.jsx("input",{type:"text",value:u,onChange:T=>{const j=T.target.value;if(/^#[0-9A-Fa-f]{0,6}$/i.test(j)&&(f(j),/^#[0-9A-Fa-f]{6}$/i.test(j))){t(j);try{c(n(j))}catch(A){console.error("Error converting hex to HSV:",A)}}},onBlur:T=>{const j=T.target.value;/^#[0-9A-Fa-f]{1,5}$/i.test(j)&&f(R)},className:"color-input"})]}),D.jsxs("div",{className:"color-value-row",children:[D.jsxs("div",{className:"color-value-group",children:[D.jsx("label",{children:"R"}),D.jsx("input",{type:"number",min:"0",max:"255",value:z.r,onChange:T=>{const A=`#${[Math.max(0,Math.min(255,parseInt(T.target.value)||0)),z.g,z.b].map(P=>P.toString(16).padStart(2,"0")).join("")}`;t(A),c(n(A))},className:"color-input rgb-input"})]}),D.jsxs("div",{className:"color-value-group",children:[D.jsx("label",{children:"G"}),D.jsx("input",{type:"number",min:"0",max:"255",value:z.g,onChange:T=>{const j=Math.max(0,Math.min(255,parseInt(T.target.value)||0)),A=`#${[z.r,j,z.b].map(P=>P.toString(16).padStart(2,"0")).join("")}`;t(A),c(n(A))},className:"color-input rgb-input"})]}),D.jsxs("div",{className:"color-value-group",children:[D.jsx("label",{children:"B"}),D.jsx("input",{type:"number",min:"0",max:"255",value:z.b,onChange:T=>{const j=Math.max(0,Math.min(255,parseInt(T.target.value)||0)),A=`#${[z.r,z.g,j].map(P=>P.toString(16).padStart(2,"0")).join("")}`;t(A),c(n(A))},className:"color-input rgb-input"})]})]})]})]}),rt&&lt&&e&&(()=>{const T=q.stroke||Lt.black,j=/^#[0-9A-Fa-f]{6}$/.test(T)?{r:parseInt(T.slice(1,3),16)||0,g:parseInt(T.slice(3,5),16)||0,b:parseInt(T.slice(5,7),16)||0}:{r:0,g:0,b:0};return D.jsx(D.Fragment,{children:D.jsxs("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:`1px solid ${Lt.borderSidebar}`},children:[D.jsx("h4",{style:{margin:"0 0 15px 0",fontSize:"14px",fontWeight:600,color:Lt.textDark},children:"Border Color"}),D.jsxs("div",{className:"color-picker-container",style:{marginBottom:"15px"},children:[D.jsx("div",{className:"color-grid",style:{background:`linear-gradient(to bottom, 
                      hsl(${y.h}, 100%, 50%), 
                      hsl(${y.h}, 100%, 0%)
                    ), linear-gradient(to right, 
                      transparent, 
                      hsl(${y.h}, 0%, 50%)
                    )`},onClick:O,onMouseMove:A=>{A.buttons===1&&O(A)},children:D.jsx("div",{className:"color-pointer",style:{left:`${y.s}%`,top:`${100-y.v}%`}})}),D.jsx("div",{className:"hue-slider",onClick:k,onMouseMove:A=>{A.buttons===1&&k(A)},children:D.jsx("div",{className:"hue-pointer",style:{top:`${y.h/360*100}%`}})})]}),D.jsx("div",{className:"current-color-preview",style:{backgroundColor:T,marginBottom:"15px"}}),D.jsxs("div",{style:{marginBottom:"15px"},children:[D.jsx("label",{style:{fontSize:"12px",color:Lt.textMedium,display:"block",marginBottom:"5px"},children:"HEX"}),D.jsx("input",{type:"text",value:b,onChange:A=>{const P=A.target.value;if(/^#[0-9A-Fa-f]{0,6}$/i.test(P)&&(S(P),/^#[0-9A-Fa-f]{6}$/i.test(P))){q.stroke=P,U?.renderAll?.(),e(P);try{v(n(P))}catch(I){console.error("Error updating border HSV:",I)}}},onBlur:A=>{const P=A.target.value;/^#[0-9A-Fa-f]{1,5}$/i.test(P)&&S(T)},className:"color-input"})]}),D.jsxs("div",{className:"color-value-row",children:[D.jsxs("div",{className:"color-value-group",children:[D.jsx("label",{children:"R"}),D.jsx("input",{type:"number",min:"0",max:"255",value:j.r,onChange:A=>{const I=`#${[Math.max(0,Math.min(255,parseInt(A.target.value)||0)),j.g,j.b].map(at=>at.toString(16).padStart(2,"0")).join("")}`;q.stroke=I,U?.renderAll?.(),e(I);try{v(n(I))}catch(at){console.error("Error updating border HSV:",at)}},className:"color-input rgb-input"})]}),D.jsxs("div",{className:"color-value-group",children:[D.jsx("label",{children:"G"}),D.jsx("input",{type:"number",min:"0",max:"255",value:j.g,onChange:A=>{const P=Math.max(0,Math.min(255,parseInt(A.target.value)||0)),I=`#${[j.r,P,j.b].map(at=>at.toString(16).padStart(2,"0")).join("")}`;q.stroke=I,U?.renderAll?.(),e(I);try{v(n(I))}catch(at){console.error("Error updating border HSV:",at)}},className:"color-input rgb-input"})]}),D.jsxs("div",{className:"color-value-group",children:[D.jsx("label",{children:"B"}),D.jsx("input",{type:"number",min:"0",max:"255",value:j.b,onChange:A=>{const P=Math.max(0,Math.min(255,parseInt(A.target.value)||0)),I=`#${[j.r,j.g,P].map(at=>at.toString(16).padStart(2,"0")).join("")}`;q.stroke=I,U?.renderAll?.(),e(I);try{v(n(I))}catch(at){console.error("Error updating border HSV:",at)}},className:"color-input rgb-input"})]})]})]})})})()]},d)},cU=()=>{const r=e=>{const n=window.fabricCanvas;if(!n)return;let s;const o=Lt.shapeFill,c=Lt.shapeStroke,u=2,f=n.width/2,d=n.height/2;switch(e){case"rectangle":{s=new yr({left:f-75,top:d-50,width:150,height:100,fill:o,stroke:c,strokeWidth:u});break}case"circle":{s=new Lr({left:f-50,top:d-50,radius:50,fill:o,stroke:c,strokeWidth:u});break}case"triangle":{s=new Ts({left:f-50,top:d-50,width:100,height:100,fill:o,stroke:c,strokeWidth:u});break}case"ellipse":{s=new Nr({left:f-75,top:d-50,rx:75,ry:50,fill:o,stroke:c,strokeWidth:u});break}case"hexagon":{const v=[{x:50,y:0},{x:0,y:30},{x:0,y:70},{x:50,y:100},{x:100,y:70},{x:100,y:30}];s=new Vo(v,{left:f-50,top:d-50,fill:o,stroke:c,strokeWidth:u});break}case"star":{const v=[{x:50,y:0},{x:55,y:35},{x:90,y:35},{x:60,y:55},{x:70,y:90},{x:50,y:70},{x:30,y:90},{x:40,y:55},{x:10,y:35},{x:45,y:35}];s=new Vo(v,{left:f-50,top:d-50,fill:o,stroke:c,strokeWidth:u});break}default:return}const y=window.ydoc?.clientID||"unknown";s.id=`${y}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n.add(s),n.setActiveObject(s)},t=[{id:"rectangle",name:"Rectangle",emoji:"⬜"},{id:"circle",name:"Circle",emoji:"⭕"},{id:"triangle",name:"Triangle",emoji:"🔺"},{id:"ellipse",name:"Ellipse",emoji:"🔵"},{id:"hexagon",name:"Hexagon",emoji:"⬡"},{id:"star",name:"Star",emoji:"⭐"}];return D.jsx("div",{children:t.map(e=>D.jsxs("button",{className:"panel-item",onClick:()=>r(e.id),children:[D.jsx("span",{children:e.emoji}),D.jsx("span",{children:e.name})]},e.id))})},uU=({onClose:r})=>D.jsx(oy,{title:"Shapes",onClose:r,children:D.jsx(cU,{})}),hU=()=>{const[r,t]=M.useState([]),[e]=M.useState(!1),[n,s]=M.useState(null),[o,c]=M.useState(""),[u,f]=M.useState(null),[d,g]=M.useState(null),[y,v]=M.useState(null),b=M.useRef(null),S=M.useRef(new Map),w=yy(X=>X.canvas.selectedElement),_=my(),O=M.useCallback(()=>{const X=window.fabricCanvas;if(!X){t([]);return}const j=X.getObjects().map((A,P)=>{const I=A,at=A.type||"rect",ot=I.name,L=ot||`layer-${P}`,st=S.current.get(L)||(ot?S.current.get(ot):void 0)||`${at.charAt(0).toUpperCase()+at.slice(1)} ${P+1}`;return{id:L,name:st,type:at,object:A}});j.reverse(),t(j)},[]);M.useEffect(()=>{O();const X=window.fabricCanvas;if(X){const T=X.getObjects();return T.forEach(j=>{const A=j;if(A.name&&A.name!==""){const P=A.name,I=A.name||`layer-${T.indexOf(j)}`;!P.startsWith("textbox-")&&!P.startsWith("rect-")&&!P.startsWith("circle-")&&!P.startsWith("image-")&&S.current.set(I,P)}}),X.on("object:added",O),X.on("object:removed",O),X.on("object:modified",O),()=>{X.off("object:added",O),X.off("object:removed",O),X.off("object:modified",O)}}},[O]);const k=X=>{b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{const T=window.fabricCanvas;T&&(T.setActiveObject(X.object),T.renderAll())},200)},B=X=>{b.current&&clearTimeout(b.current),s(X.id),c(X.name)},R=()=>{if(!n)return;const X=window.fabricCanvas;if(!X)return;const T=r.find(j=>j.id===n);if(T&&o){S.current.set(n,o),S.current.set(o,o),T.object.name=o,X.renderAll();const j=X.toJSON();_(g_(j)),O()}s(null),c("")},F=X=>{v(X)},z=()=>{if(!y)return;const X=window.fabricCanvas;X&&(S.current.delete(y.id),X.remove(y.object),X.renderAll(),X._historySaveAction&&X._historySaveAction({target:y.object}),v(null))},U=(X,T)=>{f(T.id),X.dataTransfer.effectAllowed="move",X.dataTransfer.setData("text/html",T.id)},q=(X,T)=>{X.preventDefault(),X.dataTransfer.dropEffect="move",g(T.id)},rt=()=>{g(null)},lt=(X,T)=>{if(X.preventDefault(),!u||u===T.id)return;const j=window.fabricCanvas;if(!j)return;const A=r.find(gt=>gt.id===u);if(!A)return;const P=r.indexOf(A),I=r.indexOf(T);if(P===I)return;const at=j.getObjects(),ot=at.indexOf(A.object),L=at.length-1-I;if(ot===L)return;const Q=at.splice(ot,1)[0],ut=Math.max(0,Math.min(L,at.length));at.splice(ut,0,Q),j.remove(...j.getObjects()),j.add(...at);const ht=j.toJSON();_(g_(ht)),j.renderAll(),j._historySaveAction&&j._historySaveAction({target:null}),f(null),g(null)},ct=()=>{f(null),g(null)};if(r.length===0)return null;const E=w?.objectId||null;return D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:`layers-panel ${e?"collapsed":""}`,children:[D.jsx("div",{className:"layers-panel-header",children:D.jsxs("div",{className:"layers-header-content",children:[D.jsx("span",{className:"layers-icon",children:"📋"}),!e&&D.jsx("h3",{children:"Layers"})]})}),!e&&D.jsx("div",{className:"layers-list",children:r.map(X=>D.jsxs("div",{className:`layer-item ${E===X.id?"selected":""} ${u===X.id?"dragging":""} ${d===X.id?"drag-over":""}`,onClick:()=>k(X),onDoubleClick:()=>B(X),draggable:!0,onDragStart:T=>U(T,X),onDragOver:T=>q(T,X),onDragLeave:rt,onDrop:T=>lt(T,X),onDragEnd:ct,children:[D.jsxs("div",{className:"layer-preview",children:[X.type==="textbox"&&"T",X.type==="image"&&"I",(X.type==="rect"||X.type==="circle"||X.type==="triangle"||X.type==="ellipse"||X.type==="polygon")&&"S"]}),D.jsx("div",{className:"layer-content",children:n===X.id?D.jsx("input",{type:"text",value:o,onChange:T=>c(T.target.value),onBlur:R,onKeyDown:T=>{T.key==="Enter"&&R(),T.key==="Escape"&&(s(null),c(""))},onClick:T=>T.stopPropagation(),autoFocus:!0,className:"layer-name-input"}):D.jsx("span",{className:"layer-name",children:X.name})}),D.jsx("button",{className:"layer-delete-btn",onClick:T=>{T.stopPropagation(),F(X)},title:"Delete layer",children:"🗑️"})]},X.id))})]}),y&&D.jsx("div",{className:"confirm-dialog-overlay",onClick:()=>v(null),children:D.jsxs("div",{className:"confirm-dialog",onClick:X=>X.stopPropagation(),children:[D.jsx("h3",{children:"Delete Layer?"}),D.jsxs("p",{children:['Are you sure you want to delete "',y.name,'"?']}),D.jsxs("div",{className:"confirm-dialog-buttons",children:[D.jsx("button",{onClick:()=>v(null),children:"Cancel"}),D.jsx("button",{onClick:z,className:"confirm-btn",children:"Delete"})]})]})})]})},fU=({isLoadingCanvas:r=!1})=>{const[t,e]=M.useState(!1),[n,s]=M.useState(!1);M.useEffect(()=>{if(r)return;const u=window.fabricCanvas,f=window.canvasReady;if(!u||!f)return;const d=()=>{const y=u.historyUndo?.length||0;let v=!1;try{const b=y>0?u.historyUndo[y-1]:null;if(b&&typeof b.json=="string"){const S=JSON.parse(b.json||"{}");v=(Array.isArray(S?.objects)?S.objects:[]).length===0}}catch{}e(y>0&&!v),s((u.historyRedo?.length||0)>0)},g=()=>{setTimeout(d,10)};return u.on("history:undo",g),u.on("history:redo",g),u.on("object:added",g),u.on("object:removed",g),u.on("object:modified",g),d(),()=>{u.off("history:undo",g),u.off("history:redo",g),u.off("object:added",g),u.off("object:removed",g),u.off("object:modified",g)}},[r]);const o=M.useCallback(()=>{console.log("⚡ handleUndo clicked");const u=window.fabricCanvas,f=window.canvasReady;if(u&&f&&u.historyUndoAction){try{const d=u.historyUndo?.length||0,g=d>0?u.historyUndo[d-1]:null;if(g&&typeof g.json=="string"){const y=JSON.parse(g.json||"{}");if((Array.isArray(y?.objects)?y.objects:[]).length===0)return}}catch{}u.historyUndoAction(()=>{u._forceSync&&u._forceSync()})}},[]),c=M.useCallback(()=>{console.log("⚡ handleRedo clicked");const u=window.fabricCanvas,f=window.canvasReady;u&&f&&u.historyRedoAction&&u.historyRedoAction(()=>{u._forceSync&&u._forceSync()})},[]);return M.useEffect(()=>{const u=f=>{(f.ctrlKey||f.metaKey)&&f.shiftKey&&f.key==="z"?(f.preventDefault(),n&&c()):(f.ctrlKey||f.metaKey)&&f.key==="z"?(f.preventDefault(),t&&o()):(f.ctrlKey||f.metaKey)&&f.key==="y"&&(f.preventDefault(),n&&c())};return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[t,n,o,c]),D.jsxs("div",{className:"undo-redo-toolbar",children:[D.jsx("button",{className:"undo-redo-btn",onClick:o,disabled:!t,title:"Undo (Ctrl+Z)",children:D.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[D.jsx("path",{d:"M3 7v6h6"}),D.jsx("path",{d:"M21 17a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"})]})}),D.jsx("button",{className:"undo-redo-btn",onClick:c,disabled:!n,title:"Redo (Ctrl+Shift+Z or Ctrl+Y)",children:D.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[D.jsx("path",{d:"M21 7v6h-6"}),D.jsx("path",{d:"M3 17a9 9 0 1 1 18 0 9 9 0 0 1-18 0z"})]})})]})};function dU(){const[r,t]=M.useState(null),[e,n]=M.useState(!0),[s,o]=M.useState("Untitled"),[c,u]=M.useState(!1),f=M.useRef(null),[d,g]=M.useState("disconnected"),[y,v]=M.useState([]),b=yy(T=>T.canvas.selectedElement),S=M.useRef(null),w=M.useRef(""),_=M.useRef(null),O=my(),{id:k}=qD(),B=_d();if(!k)return D.jsx(vC,{to:"/dashboard",replace:!0});const R=()=>t("font"),F=()=>t("color"),z=()=>t("shapes"),U=()=>t(null),q=async()=>{if(!k)return;const T=window.fabricCanvas;if(T)try{const j=T.toJSON();j.width=T.getWidth(),j.height=T.getHeight();const A=JSON.stringify(j);if(A===w.current)return;await Gx(k,{designData:j,metadata:{title:s||"Untitled"}}),w.current=A,console.log("💾 Auto-save completed at",new Date().toLocaleTimeString())}catch(j){console.error("❌ Auto-save error:",j)}},rt=async()=>{try{const T=window.fabricCanvas;if(!T)return;const j=T.toJSON();j.width=T.getWidth(),j.height=T.getHeight(),await Gx(k,{designData:j,metadata:{title:s||"Untitled"}})}catch(T){console.error("❌ Failed to save title",T)}},lt=()=>{_.current&&clearTimeout(_.current),_.current=setTimeout(q,2500)};M.useEffect(()=>{c&&f.current&&(f.current.focus(),f.current.select())},[c]),M.useEffect(()=>{!b&&r!==null&&r!=="shapes"&&t(null)},[b,r]);const ct=(T,j)=>{const A=(T||"").trim();if(A){const I=A.split(/\s+/).filter(Boolean),at=I[0]?.[0]||"",ot=I.length>1?I[I.length-1]?.[0]:"";return(at+ot).toUpperCase()||at.toUpperCase()}const P=(j||"").trim();return P&&P[0]?.toUpperCase()||""},E=["#FFB3BA","#BAFFC9","#BAE1FF","#FFFFBA","#FFDFBA"],X=T=>{if(!T)return E[0];let j=0;for(let A=0;A<T.length;A++)j=T.charCodeAt(A)+((j<<5)-j);return E[Math.abs(j)%E.length]};return M.useEffect(()=>{if(!k)return;const T=new pl,j=new NR("ws://localhost:1234",k,T);j.on("status",st=>{g(st.status)});const A=j.awareness,P=jM(),I=ct(P?.name,P?.email);A.setLocalStateField("user",{id:P?.id||"",name:P?.name||"",email:P?.email||"",initials:I});const at=()=>{try{const st=A.getStates(),ut=T.clientID,ht=Array.from(st.entries()).filter(([gt])=>gt!==ut).map(([,gt])=>{const yt=gt?.user||{};return{id:yt.id||"",name:yt.name||"Guest",initials:yt.initials||ct(yt.name,yt.email)||"??"}});v(ht)}catch{}};A.on("change",at),at();const ot=T.getMap("shared-canvas"),L=()=>{try{const st=ot.get("json");if(!st)return;const ut=JSON.parse(st),ht=window.fabricCanvas,gt=window.canvasReady;if(!ht||!gt)return;const yt=ot.get("senderId"),Rt=window.ydoc?.clientID,kt=window._lastSentCanvasJson;if(Rt&&yt&&Rt===yt&&kt&&kt===st)return;try{const le=ht.toJSON();if(le.width=ht.getWidth(),le.height=ht.getHeight(),JSON.stringify(le)===st)return}catch{}window._lastAppliedCanvasJson=st,window._suppressCounter=!0,ht.loadFromJSON(ut,()=>{try{ht.renderAll(),setTimeout(()=>{ht.requestRenderAll(),setTimeout(()=>{window._suppressCounter=!1},150)},50)}catch{window._suppressCounter=!1}})}catch(st){console.warn("⚠️ Failed to apply inbound canvas json:",st)}};L();const Q=()=>L();return ot.observe(Q),window.ydoc=T,()=>{ot.unobserve(Q),A.off("change",at),j.destroy(),T.destroy()}},[k]),M.useEffect(()=>{const T=window.fabricCanvas;if(!T)return;const j=()=>lt();return T.on("object:added",j),T.on("object:modified",j),T.on("object:removed",j),T.on("history:undo",j),T.on("history:redo",j),lt(),()=>{T.off("object:added",j),T.off("object:modified",j),T.off("object:removed",j),T.off("history:undo",j),T.off("history:redo",j),_.current&&clearTimeout(_.current)}},[e]),M.useEffect(()=>{const T=async()=>{if(k){n(!0);try{const A=await EM(k);if(A.data?.designData?.objects?.length>0){const I=A.data?.metadata?.title;I&&o(I);const at=()=>{const ot=window.fabricCanvas,L=window.canvasReady;ot&&L?(window._suppressCounter=!0,ot.loadFromJSON(A.data.designData,()=>{ot.renderAll(),setTimeout(()=>{ot.renderAll(),ot.requestRenderAll();const Q=ot.getElement();Q&&Q.dispatchEvent(new Event("resize")),n(!1),setTimeout(()=>{window._suppressCounter=!1},50)},200)},(Q,st)=>{st?(console.error("❌ Error loading canvas objects:",st),n(!1),window._suppressCounter=!1):console.log("📦 Objects loaded:",Q?.length)})):setTimeout(at,50)};at()}else{const I=A.data?.metadata?.title;I&&o(I);const at=()=>{const ot=window.fabricCanvas,L=window.canvasReady;ot&&L?n(!1):setTimeout(at,50)};at()}}catch(A){A.message&&A.message.includes("404")?console.log("ℹ️ No saved canvas found, starting fresh"):console.error("❌ Error loading canvas:",A),n(!1)}}},j=setTimeout(()=>{T()},100);return()=>clearTimeout(j)},[k]),M.useEffect(()=>{const T=window.fabricCanvas;if(T){const j=T.toJSON();j.width=T.getWidth(),j.height=T.getHeight(),w.current=JSON.stringify(j)}},[e]),M.useEffect(()=>{const T=()=>{const j=S.current;if(!j)return;const A=j.parentElement;if(!A)return;const P=A.clientWidth,I=A.clientHeight,at=1080,ot=1080,L=50,Q=(P-L*2)/at,st=(I-L*2)/ot,ut=Math.min(Q,st);j.style.transform=`scale(${ut})`};return T(),window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T)}},[]),D.jsxs("div",{className:"app",children:[D.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:1e3,background:"#fff",borderBottom:"1px solid #e5e7eb",padding:"8px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[D.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[D.jsxs("button",{onClick:()=>B("/"),title:"Home",style:{display:"flex",alignItems:"center",justifyContent:"center",width:110,height:32,borderRadius:6,color:"#000",border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontSize:16,gap:6},children:["Home ",D.jsx(bM,{})]}),c?D.jsx("input",{ref:f,value:s,onChange:T=>o(T.target.value),onKeyDown:T=>{T.key==="Enter"?(rt(),u(!1)):T.key==="Escape"&&u(!1)},onBlur:()=>{rt(),u(!1)},placeholder:"Untitled",style:{border:"1px solid #e5e7eb",height:32,borderRadius:6,padding:"0 10px",fontSize:16,width:260}}):D.jsx("div",{title:"Click to edit",onClick:()=>u(!0),style:{height:32,display:"flex",alignItems:"center",padding:"0 10px",borderRadius:6,fontSize:16,cursor:"text",minWidth:120,maxWidth:360,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"#1f2937"},children:s||"Untitled"})]}),D.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:1},children:D.jsx(sU,{onFontClick:R,onColorClick:F})}),D.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[D.jsx("div",{style:{display:"flex",alignItems:"center"},children:D.jsx(fU,{canvas:window.fabricCanvas,isLoadingCanvas:e})}),D.jsx("div",{style:{width:24}}),D.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"#6b7280"},children:[D.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:d==="connected"?"#10b981":"#ef4444"}}),D.jsx("span",{children:d})]}),y.length===0?D.jsx("span",{style:{fontSize:"14px",color:"#9ca3af"},children:"You are alone in this :("}):D.jsx("div",{style:{display:"flex",gap:"6px"},children:y.map(T=>D.jsx("div",{title:T.name,style:{width:28,height:28,borderRadius:"50%",background:X(T.id||T.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:600,color:"#333",border:"2px solid #fff",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:T.initials},T.id||T.name))})]})]}),D.jsxs("div",{style:{paddingTop:"60px"},children:[e&&D.jsx(vy,{title:"Loading Canvas",text:"Preparing your editor..."}),D.jsx(pN,{onShapesClick:z,canvasId:k}),D.jsx("div",{className:"main-content"}),D.jsx("div",{className:`canvas-viewport ${r?"with-panel":""}`,children:D.jsx(gN,{wrapperRef:S})}),r==="font"&&D.jsx(oy,{title:"Font",onClose:U,children:D.jsx(aU,{onSelectFont:T=>{const j=window.fabricCanvas;if(!j)return;const A=j.getActiveObject();A&&A.type==="textbox"&&(A.set("fontFamily",T),j.requestRenderAll(),j._historySaveAction&&j._historySaveAction({target:A}),j._forceSync&&j._forceSync())}})}),r==="color"&&D.jsx(oy,{title:"Color",onClose:U,children:D.jsx(lU,{currentColor:b?.color||Lt.black,onColorChange:T=>{const j=window.fabricCanvas;if(!j)return;const A=j.getActiveObject();A&&(A.set("fill",T),j.requestRenderAll(),O(cN(T)),j._historySaveAction&&j._historySaveAction({target:A}),j._forceSync&&j._forceSync())},onBorderColorChange:T=>{const j=window.fabricCanvas;if(!j)return;const A=j.getActiveObject();A&&(A.set("stroke",T),j.requestRenderAll(),j._historySaveAction&&j._historySaveAction({target:A}),j._forceSync&&j._forceSync())}})}),r==="shapes"&&D.jsx(uU,{onClose:U}),D.jsx(hU,{})]})]})}const gU=({onLoginSuccess:r,onSwitchToRegister:t})=>{const[e,n]=M.useState(""),[s,o]=M.useState(""),[c,u]=M.useState(!1),[f,d]=M.useState(null),g=async y=>{y.preventDefault(),d(null),u(!0);try{await kM({email:e,password:s}),r()}catch(v){d(v instanceof Error?v.message:"Login failed. Please try again.")}finally{u(!1)}};return D.jsx("div",{className:"login-container",children:D.jsxs("div",{className:"login-card",children:[D.jsxs("div",{className:"login-header",children:[D.jsx("h1",{children:"Welcome Back"}),D.jsx("p",{children:"Sign in to continue to your editor"})]}),D.jsxs("form",{onSubmit:g,className:"login-form",children:[D.jsxs("div",{className:"form-group",children:[D.jsx("label",{htmlFor:"email",children:"Email"}),D.jsx("input",{id:"email",type:"email",value:e,onChange:y=>n(y.target.value),placeholder:"Enter your email",required:!0,disabled:c,autoComplete:"email"})]}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{htmlFor:"password",children:"Password"}),D.jsx("input",{id:"password",type:"password",value:s,onChange:y=>o(y.target.value),placeholder:"Enter your password",required:!0,disabled:c,autoComplete:"current-password"})]}),f&&D.jsx("div",{className:"error-message",children:f}),D.jsx("button",{type:"submit",className:"login-button",disabled:c,children:c?"Signing in...":"Sign In"})]}),D.jsx("div",{className:"switch-auth",children:D.jsxs("p",{children:["Don't have an account? ",D.jsx("button",{onClick:t,className:"link-button",children:"Sign up"})]})})]})})},pU=({onRegisterSuccess:r,onSwitchToLogin:t})=>{const[e,n]=M.useState(""),[s,o]=M.useState(""),[c,u]=M.useState(""),[f,d]=M.useState(!1),[g,y]=M.useState(null),v=async b=>{b.preventDefault(),y(null),d(!0);try{await DM({name:e,email:s,password:c}),r()}catch(S){y(S instanceof Error?S.message:"Registration failed. Please try again.")}finally{d(!1)}};return D.jsx("div",{className:"register-container",children:D.jsxs("div",{className:"register-card",children:[D.jsxs("div",{className:"register-header",children:[D.jsx("h1",{children:"Create Account"}),D.jsx("p",{children:"Sign up to start creating designs"})]}),D.jsxs("form",{onSubmit:v,className:"register-form",children:[D.jsxs("div",{className:"form-group",children:[D.jsx("label",{htmlFor:"name",children:"Name"}),D.jsx("input",{id:"name",type:"text",value:e,onChange:b=>n(b.target.value),placeholder:"Enter your name",required:!0,disabled:f,autoComplete:"name"})]}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{htmlFor:"email",children:"Email"}),D.jsx("input",{id:"email",type:"email",value:s,onChange:b=>o(b.target.value),placeholder:"Enter your email",required:!0,disabled:f,autoComplete:"email"})]}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{htmlFor:"password",children:"Password"}),D.jsx("input",{id:"password",type:"password",value:c,onChange:b=>u(b.target.value),placeholder:"Create a password",required:!0,disabled:f,autoComplete:"new-password",minLength:6}),D.jsx("small",{children:"At least 6 characters"})]}),g&&D.jsx("div",{className:"error-message",children:g}),D.jsx("button",{type:"submit",className:"register-button",disabled:f,children:f?"Creating account...":"Sign Up"})]}),D.jsx("div",{className:"switch-auth",children:D.jsxs("p",{children:["Already have an account? ",D.jsx("button",{onClick:t,className:"link-button",children:"Sign in"})]})})]})})},aC=({children:r})=>{const[t,e]=M.useState(!1),[n,s]=M.useState("login"),[o,c]=M.useState(!0);M.useEffect(()=>{(()=>{const g=RM();e(g),c(!1)})()},[]);const u=()=>{e(!0)},f=()=>{e(!0)};return o?D.jsx(vy,{title:"Loading",text:"Checking authentication..."}):t?D.jsx(D.Fragment,{children:r}):n==="login"?D.jsx(gU,{onLoginSuccess:u,onSwitchToRegister:()=>s("register")}):D.jsx(pU,{onRegisterSuccess:f,onSwitchToLogin:()=>s("login")})},mU=qL({reducer:{canvas:uN}});bD.createRoot(document.getElementById("root")).render(D.jsx(M.StrictMode,{children:D.jsx(Rk,{children:D.jsx(sM,{store:mU,children:D.jsxs(uk,{children:[D.jsx(Of,{path:"/",element:D.jsx(vC,{to:"/dashboard",replace:!0})}),D.jsx(Of,{path:"/dashboard",element:D.jsx(aC,{children:D.jsx(LM,{})})}),D.jsx(Of,{path:"/editor/:id",element:D.jsx(aC,{children:D.jsx(dU,{})})})]})})})}));
